import{a as e}from"./index-Begf1mlF.js";const r=e=>({name:e.name,content:e.content,keywords:e.keywords,category:e.category,priority:e.priority,sourceType:e.sourceType,sourceUrl:e.sourceUrl});let n=null,t=0;const o=async()=>{const o=Date.now();if(n&&o-t<3e5)return n;try{const a=(await e.getKnowledgeSources()).filter(e=>e.isActive);return n=a.map(r).sort((e,r)=>r.priority-e.priority),t=o,n}catch(s){return console.error("Error fetching knowledge sources from database:",s),a()}},a=()=>[{name:"System Overview",content:"Träningshanteringssystemet är ett komplett system för att hantera träningssessioner, användare och klippkort.",keywords:["system","overview","funktioner"],category:"system",priority:1},{name:"User Management",content:"Admin-användare kan skapa och hantera användare. Vanliga användare kan se sin egen information och hantera sina klippkort.",keywords:["användare","admin","skapa"],category:"system",priority:2}],s=async e=>{const r=await o(),n=e.toLowerCase();return r.filter(e=>e.keywords.some(e=>e.toLowerCase().includes(n))||e.content.toLowerCase().includes(n)||e.name.toLowerCase().includes(n)).sort((e,r)=>r.priority-e.priority)},i=async()=>(await o()).map(e=>{let r=`### ${e.name}\nCategory: ${e.category}\nPriority: ${e.priority}\nKeywords: ${e.keywords.join(", ")}\n`;return e.sourceType&&"internal"!==e.sourceType&&(r+=`Source Type: ${e.sourceType}\n`,e.sourceUrl&&(r+=`Source URL: ${e.sourceUrl}\n`)),r+=`${e.content}\n\n`,r}).join("");export{o as getAdditionalKnowledgeSources,i as getAllSourcesAsText,s as searchSourcesByKeyword};
