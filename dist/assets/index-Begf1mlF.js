!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function n(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})}),n}var r={exports:{}},a={},s=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function o(e,t,n){var r=null;if(void 0!==n&&(r=""+n),void 0!==t.key&&(r=""+t.key),"key"in t)for(var a in n={},t)"key"!==a&&(n[a]=t[a]);else n=t;return t=n.ref,{$$typeof:s,type:e,key:r,ref:void 0!==t?t:null,props:n}}a.Fragment=i,a.jsx=o,a.jsxs=o,r.exports=a;var l=r.exports,c={exports:{}},u={},d=Symbol.for("react.transitional.element"),h=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),v=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),w=Symbol.iterator;var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,C={};function N(e,t,n){this.props=e,this.context=t,this.refs=C,this.updater=n||S}function T(){}function A(e,t,n){this.props=e,this.context=t,this.refs=C,this.updater=n||S}N.prototype.isReactComponent={},N.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},N.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},T.prototype=N.prototype;var E=A.prototype=new T;E.constructor=A,j(E,N.prototype),E.isPureReactComponent=!0;var _=Array.isArray,P={H:null,A:null,T:null,S:null,V:null},I=Object.prototype.hasOwnProperty;function L(e,t,n,r,a,s){return n=s.ref,{$$typeof:d,type:e,key:t,ref:void 0!==n?n:null,props:s}}function D(e){return"object"==typeof e&&null!==e&&e.$$typeof===d}var M=/\/+/g;function R(e,t){return"object"==typeof e&&null!==e&&null!=e.key?(n=""+e.key,r={"=":"=0",":":"=2"},"$"+n.replace(/[=:]/g,function(e){return r[e]})):t.toString(36);var n,r}function U(){}function F(e,t,n,r,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var i,o,l=!1;if(null===e)l=!0;else switch(s){case"bigint":case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case d:case h:l=!0;break;case k:return F((l=e._init)(e._payload),t,n,r,a)}}if(l)return a=a(e),l=""===r?"."+R(e,0):r,_(a)?(n="",null!=l&&(n=l.replace(M,"$&/")+"/"),F(a,t,n,"",function(e){return e})):null!=a&&(D(a)&&(i=a,o=n+(null==a.key||e&&e.key===a.key?"":(""+a.key).replace(M,"$&/")+"/")+l,a=L(i.type,o,void 0,0,0,i.props)),t.push(a)),1;l=0;var c,u=""===r?".":r+":";if(_(e))for(var m=0;m<e.length;m++)l+=F(r=e[m],t,n,s=u+R(r,m),a);else if("function"==typeof(m=null===(c=e)||"object"!=typeof c?null:"function"==typeof(c=w&&c[w]||c["@@iterator"])?c:null))for(e=m.call(e),m=0;!(r=e.next()).done;)l+=F(r=r.value,t,n,s=u+R(r,m++),a);else if("object"===s){if("function"==typeof e.then)return F(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"==typeof e.status?e.then(U,U):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,n,r,a);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return l}function O(e,t,n){if(null==e)return e;var r=[],a=0;return F(e,r,"","",function(e){return t.call(n,e,a++)}),r}function $(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var H="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function B(){}u.Children={map:O,forEach:function(e,t,n){O(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return O(e,function(){t++}),t},toArray:function(e){return O(e,function(e){return e})||[]},only:function(e){if(!D(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},u.Component=N,u.Fragment=m,u.Profiler=p,u.PureComponent=A,u.StrictMode=g,u.Suspense=y,u.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,u.__COMPILER_RUNTIME={__proto__:null,c:function(e){return P.H.useMemoCache(e)}},u.cache=function(e){return function(){return e.apply(null,arguments)}},u.cloneElement=function(e,t,n){if(null==e)throw Error("The argument must be a React element, but you passed "+e+".");var r=j({},e.props),a=e.key;if(null!=t)for(s in void 0!==t.ref&&void 0,void 0!==t.key&&(a=""+t.key),t)!I.call(t,s)||"key"===s||"__self"===s||"__source"===s||"ref"===s&&void 0===t.ref||(r[s]=t[s]);var s=arguments.length-2;if(1===s)r.children=n;else if(1<s){for(var i=Array(s),o=0;o<s;o++)i[o]=arguments[o+2];r.children=i}return L(e.type,a,void 0,0,0,r)},u.createContext=function(e){return(e={$$typeof:v,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:f,_context:e},e},u.createElement=function(e,t,n){var r,a={},s=null;if(null!=t)for(r in void 0!==t.key&&(s=""+t.key),t)I.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(a[r]=t[r]);var i=arguments.length-2;if(1===i)a.children=n;else if(1<i){for(var o=Array(i),l=0;l<i;l++)o[l]=arguments[l+2];a.children=o}if(e&&e.defaultProps)for(r in i=e.defaultProps)void 0===a[r]&&(a[r]=i[r]);return L(e,s,void 0,0,0,a)},u.createRef=function(){return{current:null}},u.forwardRef=function(e){return{$$typeof:b,render:e}},u.isValidElement=D,u.lazy=function(e){return{$$typeof:k,_payload:{_status:-1,_result:e},_init:$}},u.memo=function(e,t){return{$$typeof:x,type:e,compare:void 0===t?null:t}},u.startTransition=function(e){var t=P.T,n={};P.T=n;try{var r=e(),a=P.S;null!==a&&a(n,r),"object"==typeof r&&null!==r&&"function"==typeof r.then&&r.then(B,H)}catch(s){H(s)}finally{P.T=t}},u.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},u.use=function(e){return P.H.use(e)},u.useActionState=function(e,t,n){return P.H.useActionState(e,t,n)},u.useCallback=function(e,t){return P.H.useCallback(e,t)},u.useContext=function(e){return P.H.useContext(e)},u.useDebugValue=function(){},u.useDeferredValue=function(e,t){return P.H.useDeferredValue(e,t)},u.useEffect=function(e,t,n){var r=P.H;if("function"==typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},u.useId=function(){return P.H.useId()},u.useImperativeHandle=function(e,t,n){return P.H.useImperativeHandle(e,t,n)},u.useInsertionEffect=function(e,t){return P.H.useInsertionEffect(e,t)},u.useLayoutEffect=function(e,t){return P.H.useLayoutEffect(e,t)},u.useMemo=function(e,t){return P.H.useMemo(e,t)},u.useOptimistic=function(e,t){return P.H.useOptimistic(e,t)},u.useReducer=function(e,t,n){return P.H.useReducer(e,t,n)},u.useRef=function(e){return P.H.useRef(e)},u.useState=function(e){return P.H.useState(e)},u.useSyncExternalStore=function(e,t,n){return P.H.useSyncExternalStore(e,t,n)},u.useTransition=function(){return P.H.useTransition()},u.version="19.1.1",c.exports=u;var z=c.exports;const V=t(z);var W={exports:{}},K={},q={exports:{}},G={};!function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<a(s,t)))break e;e[r]=t,e[n]=s,n=r}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,i=s>>>1;r<i;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>a(l,n))c<s&&0>a(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<s&&0>a(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(e.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var s=performance;e.unstable_now=function(){return s.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var l=[],c=[],u=1,d=null,h=3,m=!1,g=!1,p=!1,f=!1,v="function"==typeof setTimeout?setTimeout:null,b="function"==typeof clearTimeout?clearTimeout:null,y="undefined"!=typeof setImmediate?setImmediate:null;function x(e){for(var a=n(c);null!==a;){if(null===a.callback)r(c);else{if(!(a.startTime<=e))break;r(c),a.sortIndex=a.expirationTime,t(l,a)}a=n(c)}}function k(e){if(p=!1,x(e),!g)if(null!==n(l))g=!0,S||(S=!0,w());else{var t=n(c);null!==t&&P(k,t.startTime-e)}}var w,S=!1,j=-1,C=5,N=-1;function T(){return!!f||!(e.unstable_now()-N<C)}function A(){if(f=!1,S){var t=e.unstable_now();N=t;var a=!0;try{e:{g=!1,p&&(p=!1,b(j),j=-1),m=!0;var s=h;try{t:{for(x(t),d=n(l);null!==d&&!(d.expirationTime>t&&T());){var i=d.callback;if("function"==typeof i){d.callback=null,h=d.priorityLevel;var o=i(d.expirationTime<=t);if(t=e.unstable_now(),"function"==typeof o){d.callback=o,x(t),a=!0;break t}d===n(l)&&r(l),x(t)}else r(l);d=n(l)}if(null!==d)a=!0;else{var u=n(c);null!==u&&P(k,u.startTime-t),a=!1}}break e}finally{d=null,h=s,m=!1}a=void 0}}finally{a?w():S=!1}}}if("function"==typeof y)w=function(){y(A)};else if("undefined"!=typeof MessageChannel){var E=new MessageChannel,_=E.port2;E.port1.onmessage=A,w=function(){_.postMessage(null)}}else w=function(){v(A,0)};function P(t,n){j=v(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},e.unstable_requestPaint=function(){f=!0},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},e.unstable_scheduleCallback=function(r,a,s){var i=e.unstable_now();switch("object"==typeof s&&null!==s?s="number"==typeof(s=s.delay)&&0<s?i+s:i:s=i,r){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return r={id:u++,callback:a,priorityLevel:r,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>i?(r.sortIndex=s,t(c,r),null===n(l)&&r===n(c)&&(p?(b(j),j=-1):p=!0,P(k,s-i))):(r.sortIndex=o,t(l,r),g||m||(g=!0,S||(S=!0,w()))),r},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}}(G),q.exports=G;var Y=q.exports,J={exports:{}},Q={},X=z;function Z(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ee(){}var te={d:{f:ee,r:function(){throw Error(Z(522))},D:ee,C:ee,L:ee,m:ee,X:ee,S:ee,M:ee},p:0,findDOMNode:null},ne=Symbol.for("react.portal");var re=X.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function ae(e,t){return"font"===e?"":"string"==typeof t?"use-credentials"===t?t:"":void 0}Q.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=te,Q.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(Z(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:ne,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},Q.flushSync=function(e){var t=re.T,n=te.p;try{if(re.T=null,te.p=2,e)return e()}finally{re.T=t,te.p=n,te.d.f()}},Q.preconnect=function(e,t){"string"==typeof e&&(t?t="string"==typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,te.d.C(e,t))},Q.prefetchDNS=function(e){"string"==typeof e&&te.d.D(e)},Q.preinit=function(e,t){if("string"==typeof e&&t&&"string"==typeof t.as){var n=t.as,r=ae(n,t.crossOrigin),a="string"==typeof t.integrity?t.integrity:void 0,s="string"==typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?te.d.S(e,"string"==typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:a,fetchPriority:s}):"script"===n&&te.d.X(e,{crossOrigin:r,integrity:a,fetchPriority:s,nonce:"string"==typeof t.nonce?t.nonce:void 0})}},Q.preinitModule=function(e,t){if("string"==typeof e)if("object"==typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=ae(t.as,t.crossOrigin);te.d.M(e,{crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0})}}else null==t&&te.d.M(e)},Q.preload=function(e,t){if("string"==typeof e&&"object"==typeof t&&null!==t&&"string"==typeof t.as){var n=t.as,r=ae(n,t.crossOrigin);te.d.L(e,n,{crossOrigin:r,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0,type:"string"==typeof t.type?t.type:void 0,fetchPriority:"string"==typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"==typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"==typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"==typeof t.imageSizes?t.imageSizes:void 0,media:"string"==typeof t.media?t.media:void 0})}},Q.preloadModule=function(e,t){if("string"==typeof e)if(t){var n=ae(t.as,t.crossOrigin);te.d.m(e,{as:"string"==typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0})}else te.d.m(e)},Q.requestFormReset=function(e){te.d.r(e)},Q.unstable_batchedUpdates=function(e,t){return e(t)},Q.useFormState=function(e,t,n){return re.H.useFormState(e,t,n)},Q.useFormStatus=function(){return re.H.useHostTransitionStatus()},Q.version="19.1.1",function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),J.exports=Q;var se=J.exports,ie=Y,oe=z,le=se;function ce(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ue(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function de(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function he(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function me(e){if(de(e)!==e)throw Error(ce(188))}function ge(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=ge(e)))return t;e=e.sibling}return null}var pe=Object.assign,fe=Symbol.for("react.element"),ve=Symbol.for("react.transitional.element"),be=Symbol.for("react.portal"),ye=Symbol.for("react.fragment"),xe=Symbol.for("react.strict_mode"),ke=Symbol.for("react.profiler"),we=Symbol.for("react.provider"),Se=Symbol.for("react.consumer"),je=Symbol.for("react.context"),Ce=Symbol.for("react.forward_ref"),Ne=Symbol.for("react.suspense"),Te=Symbol.for("react.suspense_list"),Ae=Symbol.for("react.memo"),Ee=Symbol.for("react.lazy"),_e=Symbol.for("react.activity"),Pe=Symbol.for("react.memo_cache_sentinel"),Ie=Symbol.iterator;function Le(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=Ie&&e[Ie]||e["@@iterator"])?e:null}var De=Symbol.for("react.client.reference");function Me(e){if(null==e)return null;if("function"==typeof e)return e.$$typeof===De?null:e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case ye:return"Fragment";case ke:return"Profiler";case xe:return"StrictMode";case Ne:return"Suspense";case Te:return"SuspenseList";case _e:return"Activity"}if("object"==typeof e)switch(e.$$typeof){case be:return"Portal";case je:return(e.displayName||"Context")+".Provider";case Se:return(e._context.displayName||"Context")+".Consumer";case Ce:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case Ae:return null!==(t=e.displayName||null)?t:Me(e.type)||"Memo";case Ee:t=e._payload,e=e._init;try{return Me(e(t))}catch(n){}}return null}var Re=Array.isArray,Ue=oe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Fe=le.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Oe={pending:!1,data:null,method:null,action:null},$e=[],He=-1;function Be(e){return{current:e}}function ze(e){0>He||(e.current=$e[He],$e[He]=null,He--)}function Ve(e,t){He++,$e[He]=e.current,e.current=t}var We=Be(null),Ke=Be(null),qe=Be(null),Ge=Be(null);function Ye(e,t){switch(Ve(qe,t),Ve(Ke,e),Ve(We,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?oh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=lh(t=oh(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ze(We),Ve(We,e)}function Je(){ze(We),ze(Ke),ze(qe)}function Qe(e){null!==e.memoizedState&&Ve(Ge,e);var t=We.current,n=lh(t,e.type);t!==n&&(Ve(Ke,e),Ve(We,n))}function Xe(e){Ke.current===e&&(ze(We),ze(Ke)),Ge.current===e&&(ze(Ge),Qh._currentValue=Oe)}var Ze=Object.prototype.hasOwnProperty,et=ie.unstable_scheduleCallback,tt=ie.unstable_cancelCallback,nt=ie.unstable_shouldYield,rt=ie.unstable_requestPaint,at=ie.unstable_now,st=ie.unstable_getCurrentPriorityLevel,it=ie.unstable_ImmediatePriority,ot=ie.unstable_UserBlockingPriority,lt=ie.unstable_NormalPriority,ct=ie.unstable_LowPriority,ut=ie.unstable_IdlePriority,dt=ie.log,ht=ie.unstable_setDisableYieldValue,mt=null,gt=null;function pt(e){if("function"==typeof dt&&ht(e),gt&&"function"==typeof gt.setStrictMode)try{gt.setStrictMode(mt,e)}catch(t){}}var ft=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(vt(e)/bt|0)|0},vt=Math.log,bt=Math.LN2;var yt=256,xt=4194304;function kt(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function wt(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var a=0,s=e.suspendedLanes,i=e.pingedLanes;e=e.warmLanes;var o=134217727&r;return 0!==o?0!==(r=o&~s)?a=kt(r):0!==(i&=o)?a=kt(i):n||0!==(n=o&~e)&&(a=kt(n)):0!==(o=r&~s)?a=kt(o):0!==i?a=kt(i):n||0!==(n=r&~e)&&(a=kt(n)),0===a?0:0!==t&&t!==a&&0===(t&s)&&((s=a&-a)>=(n=t&-t)||32===s&&4194048&n)?t:a}function St(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function jt(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Ct(){var e=yt;return!(4194048&(yt<<=1))&&(yt=256),e}function Nt(){var e=xt;return!(62914560&(xt<<=1))&&(xt=4194304),e}function Tt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function At(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Et(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-ft(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function _t(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ft(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}function Pt(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function It(e){return 2<(e&=-e)?8<e?134217727&e?32:268435456:8:2}function Lt(){var e=Fe.p;return 0!==e?e:void 0===(e=window.event)?32:hm(e.type)}var Dt=Math.random().toString(36).slice(2),Mt="__reactFiber$"+Dt,Rt="__reactProps$"+Dt,Ut="__reactContainer$"+Dt,Ft="__reactEvents$"+Dt,Ot="__reactListeners$"+Dt,$t="__reactHandles$"+Dt,Ht="__reactResources$"+Dt,Bt="__reactMarker$"+Dt;function zt(e){delete e[Mt],delete e[Rt],delete e[Ft],delete e[Ot],delete e[$t]}function Vt(e){var t=e[Mt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ut]||n[Mt]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=wh(e);null!==e;){if(n=e[Mt])return n;e=wh(e)}return t}n=(e=n).parentNode}return null}function Wt(e){if(e=e[Mt]||e[Ut]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function Kt(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(ce(33))}function qt(e){var t=e[Ht];return t||(t=e[Ht]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Gt(e){e[Bt]=!0}var Yt=new Set,Jt={};function Qt(e,t){Xt(e,t),Xt(e+"Capture",t)}function Xt(e,t){for(Jt[e]=t,e=0;e<t.length;e++)Yt.add(t[e])}var Zt,en,tn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),nn={},rn={};function an(e,t,n){if(a=t,Ze.call(rn,a)||!Ze.call(nn,a)&&(tn.test(a)?rn[a]=!0:(nn[a]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var a}function sn(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function on(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function ln(e){if(void 0===Zt)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Zt=t&&t[1]||"",en=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Zt+e+en}var cn=!1;function un(e,t){if(!e||cn)return"";cn=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(a){var r=a}Reflect.construct(e,[],n)}else{try{n.call()}catch(s){r=s}e.call(n.prototype)}}else{try{throw Error()}catch(i){r=i}(n=e())&&"function"==typeof n.catch&&n.catch(function(){})}}catch(o){if(o&&r&&"string"==typeof o.stack)return[o.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=r.DetermineComponentFrameRoot(),i=s[0],o=s[1];if(i&&o){var l=i.split("\n"),c=o.split("\n");for(a=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;a<c.length&&!c[a].includes("DetermineComponentFrameRoot");)a++;if(r===l.length||a===c.length)for(r=l.length-1,a=c.length-1;1<=r&&0<=a&&l[r]!==c[a];)a--;for(;1<=r&&0<=a;r--,a--)if(l[r]!==c[a]){if(1!==r||1!==a)do{if(r--,0>--a||l[r]!==c[a]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=a);break}}}finally{cn=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?ln(n):""}function dn(e){switch(e.tag){case 26:case 27:case 5:return ln(e.type);case 16:return ln("Lazy");case 13:return ln("Suspense");case 19:return ln("SuspenseList");case 0:case 15:return un(e.type,!1);case 11:return un(e.type.render,!1);case 1:return un(e.type,!0);case 31:return ln("Activity");default:return""}}function hn(e){try{var t="";do{t+=dn(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function mn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function gn(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function pn(e){e._valueTracker||(e._valueTracker=function(e){var t=gn(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var a=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function fn(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=gn(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function vn(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var bn=/[\n"\\]/g;function yn(e){return e.replace(bn,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function xn(e,t,n,r,a,s,i,o){e.name="",null!=i&&"function"!=typeof i&&"symbol"!=typeof i&&"boolean"!=typeof i?e.type=i:e.removeAttribute("type"),null!=t?"number"===i?(0===t&&""===e.value||e.value!=t)&&(e.value=""+mn(t)):e.value!==""+mn(t)&&(e.value=""+mn(t)):"submit"!==i&&"reset"!==i||e.removeAttribute("value"),null!=t?wn(e,i,mn(t)):null!=n?wn(e,i,mn(n)):null!=r&&e.removeAttribute("value"),null==a&&null!=s&&(e.defaultChecked=!!s),null!=a&&(e.checked=a&&"function"!=typeof a&&"symbol"!=typeof a),null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&"boolean"!=typeof o?e.name=""+mn(o):e.removeAttribute("name")}function kn(e,t,n,r,a,s,i,o){if(null!=s&&"function"!=typeof s&&"symbol"!=typeof s&&"boolean"!=typeof s&&(e.type=s),null!=t||null!=n){if(("submit"===s||"reset"===s)&&null==t)return;n=null!=n?""+mn(n):"",t=null!=t?""+mn(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}r="function"!=typeof(r=null!=r?r:a)&&"symbol"!=typeof r&&!!r,e.checked=o?e.checked:!!r,e.defaultChecked=!!r,null!=i&&"function"!=typeof i&&"symbol"!=typeof i&&"boolean"!=typeof i&&(e.name=i)}function wn(e,t,n){"number"===t&&vn(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Sn(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+mn(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function jn(e,t,n){null==t||((t=""+mn(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+mn(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function Cn(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(ce(92));if(Re(r)){if(1<r.length)throw Error(ce(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=mn(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function Nn(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Tn=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function An(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"==typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!=typeof n||0===n||Tn.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function En(e,t,n){if(null!=t&&"object"!=typeof t)throw Error(ce(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var a in t)r=t[a],t.hasOwnProperty(a)&&n[a]!==r&&An(e,a,r)}else for(var s in t)t.hasOwnProperty(s)&&An(e,s,t[s])}function _n(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pn=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),In=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ln(e){return In.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Dn=null;function Mn(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Rn=null,Un=null;function Fn(e){var t=Wt(e);if(t&&(e=t.stateNode)){var n=e[Rt]||null;e:switch(e=t.stateNode,t.type){case"input":if(xn(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+yn(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=r[Rt]||null;if(!a)throw Error(ce(90));xn(r,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&fn(r)}break e;case"textarea":jn(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&Sn(e,!!n.multiple,t,!1)}}}var On=!1;function $n(e,t,n){if(On)return e(t,n);On=!0;try{return e(t)}finally{if(On=!1,(null!==Rn||null!==Un)&&(Vu(),Rn&&(t=Rn,e=Un,Un=Rn=null,Fn(t),e)))for(t=0;t<e.length;t++)Fn(e[t])}}function Hn(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Rt]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(ce(231,t,typeof n));return n}var Bn=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),zn=!1;if(Bn)try{var Vn={};Object.defineProperty(Vn,"passive",{get:function(){zn=!0}}),window.addEventListener("test",Vn,Vn),window.removeEventListener("test",Vn,Vn)}catch(ay){zn=!1}var Wn=null,Kn=null,qn=null;function Gn(){if(qn)return qn;var e,t,n=Kn,r=n.length,a="value"in Wn?Wn.value:Wn.textContent,s=a.length;for(e=0;e<r&&n[e]===a[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===a[s-t];t++);return qn=a.slice(e,1<t?1-t:void 0)}function Yn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Jn(){return!0}function Qn(){return!1}function Xn(e){function t(t,n,r,a,s){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?Jn:Qn,this.isPropagationStopped=Qn,this}return pe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Jn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Jn)},persist:function(){},isPersistent:Jn}),t}var Zn,er,tr,nr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rr=Xn(nr),ar=pe({},nr,{view:0,detail:0}),sr=Xn(ar),ir=pe({},ar,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==tr&&(tr&&"mousemove"===e.type?(Zn=e.screenX-tr.screenX,er=e.screenY-tr.screenY):er=Zn=0,tr=e),Zn)},movementY:function(e){return"movementY"in e?e.movementY:er}}),or=Xn(ir),lr=Xn(pe({},ir,{dataTransfer:0})),cr=Xn(pe({},ar,{relatedTarget:0})),ur=Xn(pe({},nr,{animationName:0,elapsedTime:0,pseudoElement:0})),dr=Xn(pe({},nr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),hr=Xn(pe({},nr,{data:0})),mr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=pr[e])&&!!t[e]}function vr(){return fr}var br=Xn(pe({},ar,{key:function(e){if(e.key){var t=mr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Yn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?gr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vr,charCode:function(e){return"keypress"===e.type?Yn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Yn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),yr=Xn(pe({},ir,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),xr=Xn(pe({},ar,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vr})),kr=Xn(pe({},nr,{propertyName:0,elapsedTime:0,pseudoElement:0})),wr=Xn(pe({},ir,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Sr=Xn(pe({},nr,{newState:0,oldState:0})),jr=[9,13,27,32],Cr=Bn&&"CompositionEvent"in window,Nr=null;Bn&&"documentMode"in document&&(Nr=document.documentMode);var Tr=Bn&&"TextEvent"in window&&!Nr,Ar=Bn&&(!Cr||Nr&&8<Nr&&11>=Nr),Er=String.fromCharCode(32),_r=!1;function Pr(e,t){switch(e){case"keyup":return-1!==jr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ir(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Lr=!1;var Dr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Dr[e.type]:"textarea"===t}function Rr(e,t,n,r){Rn?Un?Un.push(r):Un=[r]:Rn=r,0<(t=qd(t,"onChange")).length&&(n=new rr("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ur=null,Fr=null;function Or(e){Od(e,0)}function $r(e){if(fn(Kt(e)))return e}function Hr(e,t){if("change"===e)return t}var Br=!1;if(Bn){var zr;if(Bn){var Vr="oninput"in document;if(!Vr){var Wr=document.createElement("div");Wr.setAttribute("oninput","return;"),Vr="function"==typeof Wr.oninput}zr=Vr}else zr=!1;Br=zr&&(!document.documentMode||9<document.documentMode)}function Kr(){Ur&&(Ur.detachEvent("onpropertychange",qr),Fr=Ur=null)}function qr(e){if("value"===e.propertyName&&$r(Fr)){var t=[];Rr(t,Fr,e,Mn(e)),$n(Or,t)}}function Gr(e,t,n){"focusin"===e?(Kr(),Fr=n,(Ur=t).attachEvent("onpropertychange",qr)):"focusout"===e&&Kr()}function Yr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $r(Fr)}function Jr(e,t){if("click"===e)return $r(t)}function Qr(e,t){if("input"===e||"change"===e)return $r(t)}var Xr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function Zr(e,t){if(Xr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!Ze.call(t,a)||!Xr(e[a],t[a]))return!1}return!0}function ea(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ta(e,t){var n,r=ea(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ea(r)}}function na(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?na(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ra(e){for(var t=vn((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=vn((e=t.contentWindow).document)}return t}function aa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var sa=Bn&&"documentMode"in document&&11>=document.documentMode,ia=null,oa=null,la=null,ca=!1;function ua(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ca||null==ia||ia!==vn(r)||("selectionStart"in(r=ia)&&aa(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},la&&Zr(la,r)||(la=r,0<(r=qd(oa,"onSelect")).length&&(t=new rr("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ia)))}function da(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ha={animationend:da("Animation","AnimationEnd"),animationiteration:da("Animation","AnimationIteration"),animationstart:da("Animation","AnimationStart"),transitionrun:da("Transition","TransitionRun"),transitionstart:da("Transition","TransitionStart"),transitioncancel:da("Transition","TransitionCancel"),transitionend:da("Transition","TransitionEnd")},ma={},ga={};function pa(e){if(ma[e])return ma[e];if(!ha[e])return e;var t,n=ha[e];for(t in n)if(n.hasOwnProperty(t)&&t in ga)return ma[e]=n[t];return e}Bn&&(ga=document.createElement("div").style,"AnimationEvent"in window||(delete ha.animationend.animation,delete ha.animationiteration.animation,delete ha.animationstart.animation),"TransitionEvent"in window||delete ha.transitionend.transition);var fa=pa("animationend"),va=pa("animationiteration"),ba=pa("animationstart"),ya=pa("transitionrun"),xa=pa("transitionstart"),ka=pa("transitioncancel"),wa=pa("transitionend"),Sa=new Map,ja="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ca(e,t){Sa.set(e,t),Qt(t,[e])}ja.push("scrollEnd");var Na=new WeakMap;function Ta(e,t){if("object"==typeof e&&null!==e){var n=Na.get(e);return void 0!==n?n:(t={value:e,source:t,stack:hn(t)},Na.set(e,t),t)}return{value:e,source:t,stack:hn(t)}}var Aa=[],Ea=0,_a=0;function Pa(){for(var e=Ea,t=_a=Ea=0;t<e;){var n=Aa[t];Aa[t++]=null;var r=Aa[t];Aa[t++]=null;var a=Aa[t];Aa[t++]=null;var s=Aa[t];if(Aa[t++]=null,null!==r&&null!==a){var i=r.pending;null===i?a.next=a:(a.next=i.next,i.next=a),r.pending=a}0!==s&&Ma(n,a,s)}}function Ia(e,t,n,r){Aa[Ea++]=e,Aa[Ea++]=t,Aa[Ea++]=n,Aa[Ea++]=r,_a|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function La(e,t,n,r){return Ia(e,t,n,r),Ra(e)}function Da(e,t){return Ia(e,null,null,t),Ra(e)}function Ma(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var a=!1,s=e.return;null!==s;)s.childLanes|=n,null!==(r=s.alternate)&&(r.childLanes|=n),22===s.tag&&(null===(e=s.stateNode)||1&e._visibility||(a=!0)),e=s,s=s.return;return 3===e.tag?(s=e.stateNode,a&&null!==t&&(a=31-ft(n),null===(r=(e=s.hiddenUpdates)[a])?e[a]=[t]:r.push(t),t.lane=536870912|n),s):null}function Ra(e){if(50<Mu)throw Mu=0,Ru=null,Error(ce(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Ua={};function Fa(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oa(e,t,n,r){return new Fa(e,t,n,r)}function $a(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ha(e,t){var n=e.alternate;return null===n?((n=Oa(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Ba(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function za(e,t,n,r,a,s){var i=0;if(r=e,"function"==typeof e)$a(e)&&(i=1);else if("string"==typeof e)i=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!=typeof t.precedence||"string"!=typeof t.href||""===t.href)break;return!0;case"link":if("string"!=typeof t.rel||"string"!=typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"==typeof t.precedence&&null==e);case"script":if(t.async&&"function"!=typeof t.async&&"symbol"!=typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"==typeof t.src)return!0}return!1}(e,n,We.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case _e:return(e=Oa(31,n,t,a)).elementType=_e,e.lanes=s,e;case ye:return Va(n.children,a,s,t);case xe:i=8,a|=24;break;case ke:return(e=Oa(12,n,t,2|a)).elementType=ke,e.lanes=s,e;case Ne:return(e=Oa(13,n,t,a)).elementType=Ne,e.lanes=s,e;case Te:return(e=Oa(19,n,t,a)).elementType=Te,e.lanes=s,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case we:case je:i=10;break e;case Se:i=9;break e;case Ce:i=11;break e;case Ae:i=14;break e;case Ee:i=16,r=null;break e}i=29,n=Error(ce(130,null===e?"null":typeof e,"")),r=null}return(t=Oa(i,n,t,a)).elementType=e,t.type=r,t.lanes=s,t}function Va(e,t,n,r){return(e=Oa(7,e,r,t)).lanes=n,e}function Wa(e,t,n){return(e=Oa(6,e,null,t)).lanes=n,e}function Ka(e,t,n){return(t=Oa(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var qa=[],Ga=0,Ya=null,Ja=0,Qa=[],Xa=0,Za=null,es=1,ts="";function ns(e,t){qa[Ga++]=Ja,qa[Ga++]=Ya,Ya=e,Ja=t}function rs(e,t,n){Qa[Xa++]=es,Qa[Xa++]=ts,Qa[Xa++]=Za,Za=e;var r=es;e=ts;var a=32-ft(r)-1;r&=~(1<<a),n+=1;var s=32-ft(t)+a;if(30<s){var i=a-a%5;s=(r&(1<<i)-1).toString(32),r>>=i,a-=i,es=1<<32-ft(t)+a|n<<a|r,ts=s+e}else es=1<<s|n<<a|r,ts=e}function as(e){null!==e.return&&(ns(e,1),rs(e,1,0))}function ss(e){for(;e===Ya;)Ya=qa[--Ga],qa[Ga]=null,Ja=qa[--Ga],qa[Ga]=null;for(;e===Za;)Za=Qa[--Xa],Qa[Xa]=null,ts=Qa[--Xa],Qa[Xa]=null,es=Qa[--Xa],Qa[Xa]=null}var is=null,os=null,ls=!1,cs=null,us=!1,ds=Error(ce(519));function hs(e){throw bs(Ta(Error(ce(418,"")),e)),ds}function ms(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Mt]=e,t[Rt]=r,n){case"dialog":$d("cancel",t),$d("close",t);break;case"iframe":case"object":case"embed":$d("load",t);break;case"video":case"audio":for(n=0;n<Ud.length;n++)$d(Ud[n],t);break;case"source":$d("error",t);break;case"img":case"image":case"link":$d("error",t),$d("load",t);break;case"details":$d("toggle",t);break;case"input":$d("invalid",t),kn(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),pn(t);break;case"select":$d("invalid",t);break;case"textarea":$d("invalid",t),Cn(t,r.value,r.defaultValue,r.children),pn(t)}"string"!=typeof(n=r.children)&&"number"!=typeof n&&"bigint"!=typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Zd(t.textContent,n)?(null!=r.popover&&($d("beforetoggle",t),$d("toggle",t)),null!=r.onScroll&&$d("scroll",t),null!=r.onScrollEnd&&$d("scrollend",t),null!=r.onClick&&(t.onclick=eh),t=!0):t=!1,t||hs(e)}function gs(e){for(is=e.return;is;)switch(is.tag){case 5:case 13:return void(us=!1);case 27:case 3:return void(us=!0);default:is=is.return}}function ps(e){if(e!==is)return!1;if(!ls)return gs(e),ls=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||ch(e.type,e.memoizedProps)),t=!t),t&&os&&hs(e),gs(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(ce(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){os=xh(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}os=null}}else 27===n?(n=os,fh(e.type)?(e=kh,kh=null,os=e):os=n):os=is?xh(e.stateNode.nextSibling):null;return!0}function fs(){os=is=null,ls=!1}function vs(){var e=cs;return null!==e&&(null===wu?wu=e:wu.push.apply(wu,e),cs=null),e}function bs(e){null===cs?cs=[e]:cs.push(e)}var ys=Be(null),xs=null,ks=null;function ws(e,t,n){Ve(ys,t._currentValue),t._currentValue=n}function Ss(e){e._currentValue=ys.current,ze(ys)}function js(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Cs(e,t,n,r){var a=e.child;for(null!==a&&(a.return=e);null!==a;){var s=a.dependencies;if(null!==s){var i=a.child;s=s.firstContext;e:for(;null!==s;){var o=s;s=a;for(var l=0;l<t.length;l++)if(o.context===t[l]){s.lanes|=n,null!==(o=s.alternate)&&(o.lanes|=n),js(s.return,n,e),r||(i=null);break e}s=o.next}}else if(18===a.tag){if(null===(i=a.return))throw Error(ce(341));i.lanes|=n,null!==(s=i.alternate)&&(s.lanes|=n),js(i,n,e),i=null}else i=a.child;if(null!==i)i.return=a;else for(i=a;null!==i;){if(i===e){i=null;break}if(null!==(a=i.sibling)){a.return=i.return,i=a;break}i=i.return}a=i}}function Ns(e,t,n,r){e=null;for(var a=t,s=!1;null!==a;){if(!s)if(524288&a.flags)s=!0;else if(262144&a.flags)break;if(10===a.tag){var i=a.alternate;if(null===i)throw Error(ce(387));if(null!==(i=i.memoizedProps)){var o=a.type;Xr(a.pendingProps.value,i.value)||(null!==e?e.push(o):e=[o])}}else if(a===Ge.current){if(null===(i=a.alternate))throw Error(ce(387));i.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(null!==e?e.push(Qh):e=[Qh])}a=a.return}null!==e&&Cs(t,e,n,r),t.flags|=262144}function Ts(e){for(e=e.firstContext;null!==e;){if(!Xr(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function As(e){xs=e,ks=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Es(e){return Ps(xs,e)}function _s(e,t){return null===xs&&As(e),Ps(e,t)}function Ps(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===ks){if(null===e)throw Error(ce(308));ks=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ks=ks.next=t;return n}var Is="undefined"!=typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Ls=ie.unstable_scheduleCallback,Ds=ie.unstable_NormalPriority,Ms={$$typeof:je,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Rs(){return{controller:new Is,data:new Map,refCount:0}}function Us(e){e.refCount--,0===e.refCount&&Ls(Ds,function(){e.controller.abort()})}var Fs=null,Os=0,$s=0,Hs=null;function Bs(){if(0===--Os&&null!==Fs){null!==Hs&&(Hs.status="fulfilled");var e=Fs;Fs=null,$s=0,Hs=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var zs=Ue.S;Ue.S=function(e,t){"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===Fs){var n=Fs=[];Os=0,$s=Id(),Hs={status:"pending",value:void 0,then:function(e){n.push(e)}}}Os++,t.then(Bs,Bs)}(0,t),null!==zs&&zs(e,t)};var Vs=Be(null);function Ws(){var e=Vs.current;return null!==e?e:iu.pooledCache}function Ks(e,t){Ve(Vs,null===t?Vs.current:t.pool)}function qs(){var e=Ws();return null===e?null:{parent:Ms._currentValue,pool:e}}var Gs=Error(ce(460)),Ys=Error(ce(474)),Js=Error(ce(542)),Qs={then:function(){}};function Xs(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Zs(){}function ei(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Zs,Zs),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw ri(e=t.reason),e;default:if("string"==typeof t.status)t.then(Zs,Zs);else{if(null!==(e=iu)&&100<e.shellSuspendCounter)throw Error(ce(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ri(e=t.reason),e}throw ti=t,Gs}}var ti=null;function ni(){if(null===ti)throw Error(ce(459));var e=ti;return ti=null,e}function ri(e){if(e===Gs||e===Js)throw Error(ce(483))}var ai=!1;function si(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ii(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function oi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function li(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&su){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,t=Ra(e),Ma(e,null,n),t}return Ia(e,r,t,n),Ra(e)}function ci(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,_t(e,n)}}function ui(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var i={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===s?a=s=i:s=s.next=i,n=n.next}while(null!==n);null===s?a=s=t:s=s.next=t}else a=s=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var di=!1;function hi(){if(di){if(null!==Hs)throw Hs}}function mi(e,t,n,r){di=!1;var a=e.updateQueue;ai=!1;var s=a.firstBaseUpdate,i=a.lastBaseUpdate,o=a.shared.pending;if(null!==o){a.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?s=c:i.next=c,i=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==i&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=a.baseState;for(i=0,u=c=l=null,o=s;;){var h=-536870913&o.lane,m=h!==o.lane;if(m?(lu&h)===h:(r&h)===h){0!==h&&h===$s&&(di=!0),null!==u&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var g=e,p=o;h=t;var f=n;switch(p.tag){case 1:if("function"==typeof(g=p.payload)){d=g.call(f,d,h);break e}d=g;break e;case 3:g.flags=-65537&g.flags|128;case 0:if(null==(h="function"==typeof(g=p.payload)?g.call(f,d,h):g))break e;d=pe({},d,h);break e;case 2:ai=!0}}null!==(h=o.callback)&&(e.flags|=64,m&&(e.flags|=8192),null===(m=a.callbacks)?a.callbacks=[h]:m.push(h))}else m={lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=m,l=d):u=u.next=m,i|=h;if(null===(o=o.next)){if(null===(o=a.shared.pending))break;o=(m=o).next,m.next=null,a.lastBaseUpdate=m,a.shared.pending=null}}null===u&&(l=d),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=u,null===s&&(a.shared.lanes=0),fu|=i,e.lanes=i,e.memoizedState=d}}function gi(e,t){if("function"!=typeof e)throw Error(ce(191,e));e.call(t)}function pi(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)gi(n[e],t)}var fi=Be(null),vi=Be(0);function bi(e,t){Ve(vi,e=gu),Ve(fi,t),gu=e|t.baseLanes}function yi(){Ve(vi,gu),Ve(fi,fi.current)}function xi(){gu=vi.current,ze(fi),ze(vi)}var ki=0,wi=null,Si=null,ji=null,Ci=!1,Ni=!1,Ti=!1,Ai=0,Ei=0,_i=null,Pi=0;function Ii(){throw Error(ce(321))}function Li(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Xr(e[n],t[n]))return!1;return!0}function Di(e,t,n,r,a,s){return ki=s,wi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ue.H=null===e||null===e.memoizedState?Yo:Jo,Ti=!1,s=n(r,a),Ti=!1,Ni&&(s=Ri(t,n,r,a)),Mi(e),s}function Mi(e){Ue.H=Go;var t=null!==Si&&null!==Si.next;if(ki=0,ji=Si=wi=null,Ci=!1,Ei=0,_i=null,t)throw Error(ce(300));null===e||_l||null!==(e=e.dependencies)&&Ts(e)&&(_l=!0)}function Ri(e,t,n,r){wi=e;var a=0;do{if(Ni&&(_i=null),Ei=0,Ni=!1,25<=a)throw Error(ce(301));if(a+=1,ji=Si=null,null!=e.updateQueue){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,null!=s.memoCache&&(s.memoCache.index=0)}Ue.H=Qo,s=t(n,r)}while(Ni);return s}function Ui(){var e=Ue.H,t=e.useState()[0];return t="function"==typeof t.then?zi(t):t,e=e.useState()[0],(null!==Si?Si.memoizedState:null)!==e&&(wi.flags|=1024),t}function Fi(){var e=0!==Ai;return Ai=0,e}function Oi(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function $i(e){if(Ci){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Ci=!1}ki=0,ji=Si=wi=null,Ni=!1,Ei=Ai=0,_i=null}function Hi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ji?wi.memoizedState=ji=e:ji=ji.next=e,ji}function Bi(){if(null===Si){var e=wi.alternate;e=null!==e?e.memoizedState:null}else e=Si.next;var t=null===ji?wi.memoizedState:ji.next;if(null!==t)ji=t,Si=e;else{if(null===e){if(null===wi.alternate)throw Error(ce(467));throw Error(ce(310))}e={memoizedState:(Si=e).memoizedState,baseState:Si.baseState,baseQueue:Si.baseQueue,queue:Si.queue,next:null},null===ji?wi.memoizedState=ji=e:ji=ji.next=e}return ji}function zi(e){var t=Ei;return Ei+=1,null===_i&&(_i=[]),e=ei(_i,e,t),t=wi,null===(null===ji?t.memoizedState:ji.next)&&(t=t.alternate,Ue.H=null===t||null===t.memoizedState?Yo:Jo),e}function Vi(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return zi(e);if(e.$$typeof===je)return Es(e)}throw Error(ce(438,String(e)))}function Wi(e){var t=null,n=wi.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=wi.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},wi.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=Pe;return t.index++,n}function Ki(e,t){return"function"==typeof t?t(e):t}function qi(e){return Gi(Bi(),Si,e)}function Gi(e,t,n){var r=e.queue;if(null===r)throw Error(ce(311));r.lastRenderedReducer=n;var a=e.baseQueue,s=r.pending;if(null!==s){if(null!==a){var i=a.next;a.next=s.next,s.next=i}t.baseQueue=a=s,r.pending=null}if(s=e.baseState,null===a)e.memoizedState=s;else{var o=i=null,l=null,c=t=a.next,u=!1;do{var d=-536870913&c.lane;if(d!==c.lane?(lu&d)===d:(ki&d)===d){var h=c.revertLane;if(0===h)null!==l&&(l=l.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),d===$s&&(u=!0);else{if((ki&h)===h){c=c.next,h===$s&&(u=!0);continue}d={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===l?(o=l=d,i=s):l=l.next=d,wi.lanes|=h,fu|=h}d=c.action,Ti&&n(s,d),s=c.hasEagerState?c.eagerState:n(s,d)}else h={lane:d,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===l?(o=l=h,i=s):l=l.next=h,wi.lanes|=d,fu|=d;c=c.next}while(null!==c&&c!==t);if(null===l?i=s:l.next=o,!Xr(s,e.memoizedState)&&(_l=!0,u&&null!==(n=Hs)))throw n;e.memoizedState=s,e.baseState=i,e.baseQueue=l,r.lastRenderedState=s}return null===a&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Yi(e){var t=Bi(),n=t.queue;if(null===n)throw Error(ce(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,s=t.memoizedState;if(null!==a){n.pending=null;var i=a=a.next;do{s=e(s,i.action),i=i.next}while(i!==a);Xr(s,t.memoizedState)||(_l=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Ji(e,t,n){var r=wi,a=Bi(),s=ls;if(s){if(void 0===n)throw Error(ce(407));n=n()}else n=t();var i=!Xr((Si||a).memoizedState,n);if(i&&(a.memoizedState=n,_l=!0),a=a.queue,xo(2048,8,Zi.bind(null,r,a,e),[e]),a.getSnapshot!==t||i||null!==ji&&1&ji.memoizedState.tag){if(r.flags|=2048,vo(9,{destroy:void 0,resource:void 0},Xi.bind(null,r,a,n,t),null),null===iu)throw Error(ce(349));s||124&ki||Qi(r,t,n)}return n}function Qi(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=wi.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},wi.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Xi(e,t,n,r){t.value=n,t.getSnapshot=r,eo(t)&&to(e)}function Zi(e,t,n){return n(function(){eo(t)&&to(e)})}function eo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Xr(e,n)}catch(r){return!0}}function to(e){var t=Da(e,2);null!==t&&Ou(t,e,2)}function no(e){var t=Hi();if("function"==typeof e){var n=e;if(e=n(),Ti){pt(!0);try{n()}finally{pt(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:e},t}function ro(e,t,n,r){return e.baseState=n,Gi(e,Si,"function"==typeof r?r:Ki)}function ao(e,t,n,r,a){if(Wo(e))throw Error(ce(485));if(null!==(e=t.action)){var s={payload:a,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){s.listeners.push(e)}};null!==Ue.T?n(!0):s.isTransition=!1,r(s),null===(n=t.pending)?(s.next=t.pending=s,so(t,s)):(s.next=n.next,t.pending=n.next=s)}}function so(e,t){var n=t.action,r=t.payload,a=e.state;if(t.isTransition){var s=Ue.T,i={};Ue.T=i;try{var o=n(a,r),l=Ue.S;null!==l&&l(i,o),io(e,t,o)}catch(c){lo(e,t,c)}finally{Ue.T=s}}else try{io(e,t,s=n(a,r))}catch(u){lo(e,t,u)}}function io(e,t,n){null!==n&&"object"==typeof n&&"function"==typeof n.then?n.then(function(n){oo(e,t,n)},function(n){return lo(e,t,n)}):oo(e,t,n)}function oo(e,t,n){t.status="fulfilled",t.value=n,co(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,so(e,n)))}function lo(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,co(t),t=t.next}while(t!==r)}e.action=null}function co(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function uo(e,t){return t}function ho(e,t){if(ls){var n=iu.formState;if(null!==n){e:{var r=wi;if(ls){if(os){t:{for(var a=os,s=us;8!==a.nodeType;){if(!s){a=null;break t}if(null===(a=xh(a.nextSibling))){a=null;break t}}a="F!"===(s=a.data)||"F"===s?a:null}if(a){os=xh(a.nextSibling),r="F!"===a.data;break e}}hs(r)}r=!1}r&&(t=n[0])}}return(n=Hi()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:uo,lastRenderedState:t},n.queue=r,n=Bo.bind(null,wi,r),r.dispatch=n,r=no(!1),s=Vo.bind(null,wi,!1,r.queue),a={state:t,dispatch:null,action:e,pending:null},(r=Hi()).queue=a,n=ao.bind(null,wi,a,s,n),a.dispatch=n,r.memoizedState=e,[t,n,!1]}function mo(e){return go(Bi(),Si,e)}function go(e,t,n){if(t=Gi(e,t,uo)[0],e=qi(Ki)[0],"object"==typeof t&&null!==t&&"function"==typeof t.then)try{var r=zi(t)}catch(i){if(i===Gs)throw Js;throw i}else r=t;var a=(t=Bi()).queue,s=a.dispatch;return n!==t.memoizedState&&(wi.flags|=2048,vo(9,{destroy:void 0,resource:void 0},po.bind(null,a,n),null)),[r,s,e]}function po(e,t){e.action=t}function fo(e){var t=Bi(),n=Si;if(null!==n)return go(t,n,e);Bi(),t=t.memoizedState;var r=(n=Bi()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function vo(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=wi.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},wi.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function bo(){return Bi().memoizedState}function yo(e,t,n,r){var a=Hi();r=void 0===r?null:r,wi.flags|=e,a.memoizedState=vo(1|t,{destroy:void 0,resource:void 0},n,r)}function xo(e,t,n,r){var a=Bi();r=void 0===r?null:r;var s=a.memoizedState.inst;null!==Si&&null!==r&&Li(r,Si.memoizedState.deps)?a.memoizedState=vo(t,s,n,r):(wi.flags|=e,a.memoizedState=vo(1|t,s,n,r))}function ko(e,t){yo(8390656,8,e,t)}function wo(e,t){xo(2048,8,e,t)}function So(e,t){return xo(4,2,e,t)}function jo(e,t){return xo(4,4,e,t)}function Co(e,t){if("function"==typeof t){e=e();var n=t(e);return function(){"function"==typeof n?n():t(null)}}if(null!=t)return e=e(),t.current=e,function(){t.current=null}}function No(e,t,n){n=null!=n?n.concat([e]):null,xo(4,4,Co.bind(null,t,e),n)}function To(){}function Ao(e,t){var n=Bi();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&Li(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Eo(e,t){var n=Bi();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&Li(t,r[1]))return r[0];if(r=e(),Ti){pt(!0);try{e()}finally{pt(!1)}}return n.memoizedState=[r,t],r}function _o(e,t,n){return void 0===n||1073741824&ki?e.memoizedState=t:(e.memoizedState=n,e=Fu(),wi.lanes|=e,fu|=e,n)}function Po(e,t,n,r){return Xr(n,t)?n:null!==fi.current?(e=_o(e,n,r),Xr(e,t)||(_l=!0),e):42&ki?(e=Fu(),wi.lanes|=e,fu|=e,t):(_l=!0,e.memoizedState=n)}function Io(e,t,n,r,a){var s=Fe.p;Fe.p=0!==s&&8>s?s:8;var i,o,l,c=Ue.T,u={};Ue.T=u,Vo(e,!1,t,n);try{var d=a(),h=Ue.S;if(null!==h&&h(u,d),null!==d&&"object"==typeof d&&"function"==typeof d.then){var m=(i=r,o=[],l={status:"pending",value:null,reason:null,then:function(e){o.push(e)}},d.then(function(){l.status="fulfilled",l.value=i;for(var e=0;e<o.length;e++)(0,o[e])(i)},function(e){for(l.status="rejected",l.reason=e,e=0;e<o.length;e++)(0,o[e])(void 0)}),l);zo(e,t,m,Uu())}else zo(e,t,r,Uu())}catch(g){zo(e,t,{then:function(){},status:"rejected",reason:g},Uu())}finally{Fe.p=s,Ue.T=c}}function Lo(){}function Do(e,t,n,r){if(5!==e.tag)throw Error(ce(476));var a=Mo(e).queue;Io(e,a,t,Oe,null===n?Lo:function(){return Ro(e),n(r)})}function Mo(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:Oe,baseState:Oe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:Oe},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Ro(e){zo(e,Mo(e).next.queue,{},Uu())}function Uo(){return Es(Qh)}function Fo(){return Bi().memoizedState}function Oo(){return Bi().memoizedState}function $o(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Uu(),r=li(t,e=oi(n),n);return null!==r&&(Ou(r,t,n),ci(r,t,n)),t={cache:Rs()},void(e.payload=t)}t=t.return}}function Ho(e,t,n){var r=Uu();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Wo(e)?Ko(t,n):null!==(n=La(e,t,n,r))&&(Ou(n,e,r),qo(n,t,r))}function Bo(e,t,n){zo(e,t,n,Uu())}function zo(e,t,n,r){var a={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Wo(e))Ko(t,a);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=s(i,n);if(a.hasEagerState=!0,a.eagerState=o,Xr(o,i))return Ia(e,t,a,0),null===iu&&Pa(),!1}catch(l){}if(null!==(n=La(e,t,a,r)))return Ou(n,e,r),qo(n,t,r),!0}return!1}function Vo(e,t,n,r){if(r={lane:2,revertLane:Id(),action:r,hasEagerState:!1,eagerState:null,next:null},Wo(e)){if(t)throw Error(ce(479))}else null!==(t=La(e,n,r,2))&&Ou(t,e,2)}function Wo(e){var t=e.alternate;return e===wi||null!==t&&t===wi}function Ko(e,t){Ni=Ci=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function qo(e,t,n){if(4194048&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,_t(e,n)}}var Go={readContext:Es,use:Vi,useCallback:Ii,useContext:Ii,useEffect:Ii,useImperativeHandle:Ii,useLayoutEffect:Ii,useInsertionEffect:Ii,useMemo:Ii,useReducer:Ii,useRef:Ii,useState:Ii,useDebugValue:Ii,useDeferredValue:Ii,useTransition:Ii,useSyncExternalStore:Ii,useId:Ii,useHostTransitionStatus:Ii,useFormState:Ii,useActionState:Ii,useOptimistic:Ii,useMemoCache:Ii,useCacheRefresh:Ii},Yo={readContext:Es,use:Vi,useCallback:function(e,t){return Hi().memoizedState=[e,void 0===t?null:t],e},useContext:Es,useEffect:ko,useImperativeHandle:function(e,t,n){n=null!=n?n.concat([e]):null,yo(4194308,4,Co.bind(null,t,e),n)},useLayoutEffect:function(e,t){return yo(4194308,4,e,t)},useInsertionEffect:function(e,t){yo(4,2,e,t)},useMemo:function(e,t){var n=Hi();t=void 0===t?null:t;var r=e();if(Ti){pt(!0);try{e()}finally{pt(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Hi();if(void 0!==n){var a=n(t);if(Ti){pt(!0);try{n(t)}finally{pt(!1)}}}else a=t;return r.memoizedState=r.baseState=a,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:a},r.queue=e,e=e.dispatch=Ho.bind(null,wi,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Hi().memoizedState=e},useState:function(e){var t=(e=no(e)).queue,n=Bo.bind(null,wi,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:To,useDeferredValue:function(e,t){return _o(Hi(),e,t)},useTransition:function(){var e=no(!1);return e=Io.bind(null,wi,e.queue,!0,!1),Hi().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=wi,a=Hi();if(ls){if(void 0===n)throw Error(ce(407));n=n()}else{if(n=t(),null===iu)throw Error(ce(349));124&lu||Qi(r,t,n)}a.memoizedState=n;var s={value:n,getSnapshot:t};return a.queue=s,ko(Zi.bind(null,r,s,e),[e]),r.flags|=2048,vo(9,{destroy:void 0,resource:void 0},Xi.bind(null,r,s,n,t),null),n},useId:function(){var e=Hi(),t=iu.identifierPrefix;if(ls){var n=ts;t=""+t+"R"+(n=(es&~(1<<32-ft(es)-1)).toString(32)+n),0<(n=Ai++)&&(t+="H"+n.toString(32)),t+=""}else t=""+t+"r"+(n=Pi++).toString(32)+"";return e.memoizedState=t},useHostTransitionStatus:Uo,useFormState:ho,useActionState:ho,useOptimistic:function(e){var t=Hi();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Vo.bind(null,wi,!0,n),n.dispatch=t,[e,t]},useMemoCache:Wi,useCacheRefresh:function(){return Hi().memoizedState=$o.bind(null,wi)}},Jo={readContext:Es,use:Vi,useCallback:Ao,useContext:Es,useEffect:wo,useImperativeHandle:No,useInsertionEffect:So,useLayoutEffect:jo,useMemo:Eo,useReducer:qi,useRef:bo,useState:function(){return qi(Ki)},useDebugValue:To,useDeferredValue:function(e,t){return Po(Bi(),Si.memoizedState,e,t)},useTransition:function(){var e=qi(Ki)[0],t=Bi().memoizedState;return["boolean"==typeof e?e:zi(e),t]},useSyncExternalStore:Ji,useId:Fo,useHostTransitionStatus:Uo,useFormState:mo,useActionState:mo,useOptimistic:function(e,t){return ro(Bi(),0,e,t)},useMemoCache:Wi,useCacheRefresh:Oo},Qo={readContext:Es,use:Vi,useCallback:Ao,useContext:Es,useEffect:wo,useImperativeHandle:No,useInsertionEffect:So,useLayoutEffect:jo,useMemo:Eo,useReducer:Yi,useRef:bo,useState:function(){return Yi(Ki)},useDebugValue:To,useDeferredValue:function(e,t){var n=Bi();return null===Si?_o(n,e,t):Po(n,Si.memoizedState,e,t)},useTransition:function(){var e=Yi(Ki)[0],t=Bi().memoizedState;return["boolean"==typeof e?e:zi(e),t]},useSyncExternalStore:Ji,useId:Fo,useHostTransitionStatus:Uo,useFormState:fo,useActionState:fo,useOptimistic:function(e,t){var n=Bi();return null!==Si?ro(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Wi,useCacheRefresh:Oo},Xo=null,Zo=0;function el(e){var t=Zo;return Zo+=1,null===Xo&&(Xo=[]),ei(Xo,e,t)}function tl(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function nl(e,t){if(t.$$typeof===fe)throw Error(ce(525));throw e=Object.prototype.toString.call(t),Error(ce(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function rl(e){return(0,e._init)(e._payload)}function al(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function a(e,t){return(e=Ha(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function i(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function o(e,t,n,r){return null===t||6!==t.tag?((t=Wa(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function l(e,t,n,r){var s=n.type;return s===ye?u(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"==typeof s&&null!==s&&s.$$typeof===Ee&&rl(s)===t.type)?(tl(t=a(t,n.props),n),t.return=e,t):(tl(t=za(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ka(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function u(e,t,n,r,s){return null===t||7!==t.tag?((t=Va(n,e.mode,r,s)).return=e,t):((t=a(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=Wa(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case ve:return tl(n=za(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case be:return(t=Ka(t,e.mode,n)).return=e,t;case Ee:return d(e,t=(0,t._init)(t._payload),n)}if(Re(t)||Le(t))return(t=Va(t,e.mode,n,null)).return=e,t;if("function"==typeof t.then)return d(e,el(t),n);if(t.$$typeof===je)return d(e,_s(e,t),n);nl(e,t)}return null}function h(e,t,n,r){var a=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n||"bigint"==typeof n)return null!==a?null:o(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case ve:return n.key===a?l(e,t,n,r):null;case be:return n.key===a?c(e,t,n,r):null;case Ee:return h(e,t,n=(a=n._init)(n._payload),r)}if(Re(n)||Le(n))return null!==a?null:u(e,t,n,r,null);if("function"==typeof n.then)return h(e,t,el(n),r);if(n.$$typeof===je)return h(e,t,_s(e,n),r);nl(e,n)}return null}function m(e,t,n,r,a){if("string"==typeof r&&""!==r||"number"==typeof r||"bigint"==typeof r)return o(t,e=e.get(n)||null,""+r,a);if("object"==typeof r&&null!==r){switch(r.$$typeof){case ve:return l(t,e=e.get(null===r.key?n:r.key)||null,r,a);case be:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case Ee:return m(e,t,n,r=(0,r._init)(r._payload),a)}if(Re(r)||Le(r))return u(t,e=e.get(n)||null,r,a,null);if("function"==typeof r.then)return m(e,t,n,el(r),a);if(r.$$typeof===je)return m(e,t,n,_s(t,r),a);nl(t,r)}return null}function g(o,l,c,u){if("object"==typeof c&&null!==c&&c.type===ye&&null===c.key&&(c=c.props.children),"object"==typeof c&&null!==c){switch(c.$$typeof){case ve:e:{for(var p=c.key;null!==l;){if(l.key===p){if((p=c.type)===ye){if(7===l.tag){n(o,l.sibling),(u=a(l,c.props.children)).return=o,o=u;break e}}else if(l.elementType===p||"object"==typeof p&&null!==p&&p.$$typeof===Ee&&rl(p)===l.type){n(o,l.sibling),tl(u=a(l,c.props),c),u.return=o,o=u;break e}n(o,l);break}t(o,l),l=l.sibling}c.type===ye?((u=Va(c.props.children,o.mode,u,c.key)).return=o,o=u):(tl(u=za(c.type,c.key,c.props,null,o.mode,u),c),u.return=o,o=u)}return i(o);case be:e:{for(p=c.key;null!==l;){if(l.key===p){if(4===l.tag&&l.stateNode.containerInfo===c.containerInfo&&l.stateNode.implementation===c.implementation){n(o,l.sibling),(u=a(l,c.children||[])).return=o,o=u;break e}n(o,l);break}t(o,l),l=l.sibling}(u=Ka(c,o.mode,u)).return=o,o=u}return i(o);case Ee:return g(o,l,c=(p=c._init)(c._payload),u)}if(Re(c))return function(a,i,o,l){for(var c=null,u=null,g=i,p=i=0,f=null;null!==g&&p<o.length;p++){g.index>p?(f=g,g=null):f=g.sibling;var v=h(a,g,o[p],l);if(null===v){null===g&&(g=f);break}e&&g&&null===v.alternate&&t(a,g),i=s(v,i,p),null===u?c=v:u.sibling=v,u=v,g=f}if(p===o.length)return n(a,g),ls&&ns(a,p),c;if(null===g){for(;p<o.length;p++)null!==(g=d(a,o[p],l))&&(i=s(g,i,p),null===u?c=g:u.sibling=g,u=g);return ls&&ns(a,p),c}for(g=r(g);p<o.length;p++)null!==(f=m(g,a,p,o[p],l))&&(e&&null!==f.alternate&&g.delete(null===f.key?p:f.key),i=s(f,i,p),null===u?c=f:u.sibling=f,u=f);return e&&g.forEach(function(e){return t(a,e)}),ls&&ns(a,p),c}(o,l,c,u);if(Le(c)){if("function"!=typeof(p=Le(c)))throw Error(ce(150));return function(a,i,o,l){if(null==o)throw Error(ce(151));for(var c=null,u=null,g=i,p=i=0,f=null,v=o.next();null!==g&&!v.done;p++,v=o.next()){g.index>p?(f=g,g=null):f=g.sibling;var b=h(a,g,v.value,l);if(null===b){null===g&&(g=f);break}e&&g&&null===b.alternate&&t(a,g),i=s(b,i,p),null===u?c=b:u.sibling=b,u=b,g=f}if(v.done)return n(a,g),ls&&ns(a,p),c;if(null===g){for(;!v.done;p++,v=o.next())null!==(v=d(a,v.value,l))&&(i=s(v,i,p),null===u?c=v:u.sibling=v,u=v);return ls&&ns(a,p),c}for(g=r(g);!v.done;p++,v=o.next())null!==(v=m(g,a,p,v.value,l))&&(e&&null!==v.alternate&&g.delete(null===v.key?p:v.key),i=s(v,i,p),null===u?c=v:u.sibling=v,u=v);return e&&g.forEach(function(e){return t(a,e)}),ls&&ns(a,p),c}(o,l,c=p.call(c),u)}if("function"==typeof c.then)return g(o,l,el(c),u);if(c.$$typeof===je)return g(o,l,_s(o,c),u);nl(o,c)}return"string"==typeof c&&""!==c||"number"==typeof c||"bigint"==typeof c?(c=""+c,null!==l&&6===l.tag?(n(o,l.sibling),(u=a(l,c)).return=o,o=u):(n(o,l),(u=Wa(c,o.mode,u)).return=o,o=u),i(o)):n(o,l)}return function(e,t,n,r){try{Zo=0;var a=g(e,t,n,r);return Xo=null,a}catch(i){if(i===Gs||i===Js)throw i;var s=Oa(29,i,null,e.mode);return s.lanes=r,s.return=e,s}}}var sl=al(!0),il=al(!1),ol=Be(null),ll=null;function cl(e){var t=e.alternate;Ve(ml,1&ml.current),Ve(ol,e),null===ll&&(null===t||null!==fi.current||null!==t.memoizedState)&&(ll=e)}function ul(e){if(22===e.tag){if(Ve(ml,ml.current),Ve(ol,e),null===ll){var t=e.alternate;null!==t&&null!==t.memoizedState&&(ll=e)}}else dl()}function dl(){Ve(ml,ml.current),Ve(ol,ol.current)}function hl(e){ze(ol),ll===e&&(ll=null),ze(ml)}var ml=Be(0);function gl(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||yh(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function pl(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:pe({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var fl={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Uu(),a=oi(r);a.payload=t,null!=n&&(a.callback=n),null!==(t=li(e,a,r))&&(Ou(t,e,r),ci(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Uu(),a=oi(r);a.tag=1,a.payload=t,null!=n&&(a.callback=n),null!==(t=li(e,a,r))&&(Ou(t,e,r),ci(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Uu(),r=oi(n);r.tag=2,null!=t&&(r.callback=t),null!==(t=li(e,r,n))&&(Ou(t,e,n),ci(t,e,n))}};function vl(e,t,n,r,a,s,i){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,i):!t.prototype||!t.prototype.isPureReactComponent||(!Zr(n,r)||!Zr(a,s))}function bl(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&fl.enqueueReplaceState(t,t.state,null)}function yl(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var a in n===t&&(n=pe({},n)),e)void 0===n[a]&&(n[a]=e[a]);return n}var xl="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function kl(e){xl(e)}function wl(e){console.error(e)}function Sl(e){xl(e)}function jl(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Cl(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Nl(e,t,n){return(n=oi(n)).tag=3,n.payload={element:null},n.callback=function(){jl(e,t)},n}function Tl(e){return(e=oi(e)).tag=3,e}function Al(e,t,n,r){var a=n.type.getDerivedStateFromError;if("function"==typeof a){var s=r.value;e.payload=function(){return a(s)},e.callback=function(){Cl(t,n,r)}}var i=n.stateNode;null!==i&&"function"==typeof i.componentDidCatch&&(e.callback=function(){Cl(t,n,r),"function"!=typeof a&&(null===Tu?Tu=new Set([this]):Tu.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var El=Error(ce(461)),_l=!1;function Pl(e,t,n,r){t.child=null===e?il(t,null,n,r):sl(t,e.child,n,r)}function Il(e,t,n,r,a){n=n.render;var s=t.ref;if("ref"in r){var i={};for(var o in r)"ref"!==o&&(i[o]=r[o])}else i=r;return As(t),r=Di(e,t,n,i,s,a),o=Fi(),null===e||_l?(ls&&o&&as(t),t.flags|=1,Pl(e,t,r,a),t.child):(Oi(e,t,a),Xl(e,t,a))}function Ll(e,t,n,r,a){if(null===e){var s=n.type;return"function"!=typeof s||$a(s)||void 0!==s.defaultProps||null!==n.compare?((e=za(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Dl(e,t,s,r,a))}if(s=e.child,!Zl(e,a)){var i=s.memoizedProps;if((n=null!==(n=n.compare)?n:Zr)(i,r)&&e.ref===t.ref)return Xl(e,t,a)}return t.flags|=1,(e=Ha(s,r)).ref=t.ref,e.return=t,t.child=e}function Dl(e,t,n,r,a){if(null!==e){var s=e.memoizedProps;if(Zr(s,r)&&e.ref===t.ref){if(_l=!1,t.pendingProps=r=s,!Zl(e,a))return t.lanes=e.lanes,Xl(e,t,a);131072&e.flags&&(_l=!0)}}return Fl(e,t,n,r,a)}function Ml(e,t,n){var r=t.pendingProps,a=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(128&t.flags){if(r=null!==s?s.baseLanes|n:n,null!==e){for(a=t.child=e.child,s=0;null!==a;)s=s|a.lanes|a.childLanes,a=a.sibling;t.childLanes=s&~r}else t.childLanes=0,t.child=null;return Rl(e,t,r,n)}if(!(536870912&n))return t.lanes=t.childLanes=536870912,Rl(e,t,null!==s?s.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Ks(0,null!==s?s.cachePool:null),null!==s?bi(t,s):yi(),ul(t)}else null!==s?(Ks(0,s.cachePool),bi(t,s),dl(),t.memoizedState=null):(null!==e&&Ks(0,null),yi(),dl());return Pl(e,t,a,n),t.child}function Rl(e,t,n,r){var a=Ws();return a=null===a?null:{parent:Ms._currentValue,pool:a},t.memoizedState={baseLanes:n,cachePool:a},null!==e&&Ks(0,null),yi(),ul(t),null!==e&&Ns(e,t,r,!0),null}function Ul(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!=typeof n&&"object"!=typeof n)throw Error(ce(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Fl(e,t,n,r,a){return As(t),n=Di(e,t,n,r,void 0,a),r=Fi(),null===e||_l?(ls&&r&&as(t),t.flags|=1,Pl(e,t,n,a),t.child):(Oi(e,t,a),Xl(e,t,a))}function Ol(e,t,n,r,a,s){return As(t),t.updateQueue=null,n=Ri(t,r,n,a),Mi(e),r=Fi(),null===e||_l?(ls&&r&&as(t),t.flags|=1,Pl(e,t,n,s),t.child):(Oi(e,t,s),Xl(e,t,s))}function $l(e,t,n,r,a){if(As(t),null===t.stateNode){var s=Ua,i=n.contextType;"object"==typeof i&&null!==i&&(s=Es(i)),s=new n(r,s),t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=fl,t.stateNode=s,s._reactInternals=t,(s=t.stateNode).props=r,s.state=t.memoizedState,s.refs={},si(t),i=n.contextType,s.context="object"==typeof i&&null!==i?Es(i):Ua,s.state=t.memoizedState,"function"==typeof(i=n.getDerivedStateFromProps)&&(pl(t,n,i,r),s.state=t.memoizedState),"function"==typeof n.getDerivedStateFromProps||"function"==typeof s.getSnapshotBeforeUpdate||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||(i=s.state,"function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),i!==s.state&&fl.enqueueReplaceState(s,s.state,null),mi(t,r,s,a),hi(),s.state=t.memoizedState),"function"==typeof s.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){s=t.stateNode;var o=t.memoizedProps,l=yl(n,o);s.props=l;var c=s.context,u=n.contextType;i=Ua,"object"==typeof u&&null!==u&&(i=Es(u));var d=n.getDerivedStateFromProps;u="function"==typeof d||"function"==typeof s.getSnapshotBeforeUpdate,o=t.pendingProps!==o,u||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(o||c!==i)&&bl(t,s,r,i),ai=!1;var h=t.memoizedState;s.state=h,mi(t,r,s,a),hi(),c=t.memoizedState,o||h!==c||ai?("function"==typeof d&&(pl(t,n,d,r),c=t.memoizedState),(l=ai||vl(t,n,l,r,h,c,i))?(u||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(t.flags|=4194308)):("function"==typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),s.props=r,s.state=c,s.context=i,r=l):("function"==typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,ii(e,t),u=yl(n,i=t.memoizedProps),s.props=u,d=t.pendingProps,h=s.context,c=n.contextType,l=Ua,"object"==typeof c&&null!==c&&(l=Es(c)),(c="function"==typeof(o=n.getDerivedStateFromProps)||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(i!==d||h!==l)&&bl(t,s,r,l),ai=!1,h=t.memoizedState,s.state=h,mi(t,r,s,a),hi();var m=t.memoizedState;i!==d||h!==m||ai||null!==e&&null!==e.dependencies&&Ts(e.dependencies)?("function"==typeof o&&(pl(t,n,o,r),m=t.memoizedState),(u=ai||vl(t,n,u,r,h,m,l)||null!==e&&null!==e.dependencies&&Ts(e.dependencies))?(c||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(r,m,l),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,m,l)),"function"==typeof s.componentDidUpdate&&(t.flags|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof s.componentDidUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),s.props=r,s.state=m,s.context=l,r=u):("function"!=typeof s.componentDidUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return s=r,Ul(e,t),r=!!(128&t.flags),s||r?(s=t.stateNode,n=r&&"function"!=typeof n.getDerivedStateFromError?null:s.render(),t.flags|=1,null!==e&&r?(t.child=sl(t,e.child,null,a),t.child=sl(t,null,n,a)):Pl(e,t,n,a),t.memoizedState=s.state,e=t.child):e=Xl(e,t,a),e}function Hl(e,t,n,r){return fs(),t.flags|=256,Pl(e,t,n,r),t.child}var Bl={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function zl(e){return{baseLanes:e,cachePool:qs()}}function Vl(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=yu),e}function Wl(e,t,n){var r,a=t.pendingProps,s=!1,i=!!(128&t.flags);if((r=i)||(r=(null===e||null!==e.memoizedState)&&!!(2&ml.current)),r&&(s=!0,t.flags&=-129),r=!!(32&t.flags),t.flags&=-33,null===e){if(ls){if(s?cl(t):dl(),ls){var o,l=os;if(o=l){e:{for(o=l,l=us;8!==o.nodeType;){if(!l){l=null;break e}if(null===(o=xh(o.nextSibling))){l=null;break e}}l=o}null!==l?(t.memoizedState={dehydrated:l,treeContext:null!==Za?{id:es,overflow:ts}:null,retryLane:536870912,hydrationErrors:null},(o=Oa(18,null,null,0)).stateNode=l,o.return=t,t.child=o,is=t,os=null,o=!0):o=!1}o||hs(t)}if(null!==(l=t.memoizedState)&&null!==(l=l.dehydrated))return yh(l)?t.lanes=32:t.lanes=536870912,null;hl(t)}return l=a.children,a=a.fallback,s?(dl(),l=ql({mode:"hidden",children:l},s=t.mode),a=Va(a,s,n,null),l.return=t,a.return=t,l.sibling=a,t.child=l,(s=t.child).memoizedState=zl(n),s.childLanes=Vl(e,r,n),t.memoizedState=Bl,a):(cl(t),Kl(t,l))}if(null!==(o=e.memoizedState)&&null!==(l=o.dehydrated)){if(i)256&t.flags?(cl(t),t.flags&=-257,t=Gl(e,t,n)):null!==t.memoizedState?(dl(),t.child=e.child,t.flags|=128,t=null):(dl(),s=a.fallback,l=t.mode,a=ql({mode:"visible",children:a.children},l),(s=Va(s,l,n,null)).flags|=2,a.return=t,s.return=t,a.sibling=s,t.child=a,sl(t,e.child,null,n),(a=t.child).memoizedState=zl(n),a.childLanes=Vl(e,r,n),t.memoizedState=Bl,t=s);else if(cl(t),yh(l)){if(r=l.nextSibling&&l.nextSibling.dataset)var c=r.dgst;r=c,(a=Error(ce(419))).stack="",a.digest=r,bs({value:a,source:null,stack:null}),t=Gl(e,t,n)}else if(_l||Ns(e,t,n,!1),r=0!==(n&e.childLanes),_l||r){if(null!==(r=iu)&&(0!==(a=0!==((a=42&(a=n&-n)?1:Pt(a))&(r.suspendedLanes|n))?0:a)&&a!==o.retryLane))throw o.retryLane=a,Da(e,a),Ou(r,e,a),El;"$?"===l.data||Ju(),t=Gl(e,t,n)}else"$?"===l.data?(t.flags|=192,t.child=e.child,t=null):(e=o.treeContext,os=xh(l.nextSibling),is=t,ls=!0,cs=null,us=!1,null!==e&&(Qa[Xa++]=es,Qa[Xa++]=ts,Qa[Xa++]=Za,es=e.id,ts=e.overflow,Za=t),(t=Kl(t,a.children)).flags|=4096);return t}return s?(dl(),s=a.fallback,l=t.mode,c=(o=e.child).sibling,(a=Ha(o,{mode:"hidden",children:a.children})).subtreeFlags=65011712&o.subtreeFlags,null!==c?s=Ha(c,s):(s=Va(s,l,n,null)).flags|=2,s.return=t,a.return=t,a.sibling=s,t.child=a,a=s,s=t.child,null===(l=e.child.memoizedState)?l=zl(n):(null!==(o=l.cachePool)?(c=Ms._currentValue,o=o.parent!==c?{parent:c,pool:c}:o):o=qs(),l={baseLanes:l.baseLanes|n,cachePool:o}),s.memoizedState=l,s.childLanes=Vl(e,r,n),t.memoizedState=Bl,a):(cl(t),e=(n=e.child).sibling,(n=Ha(n,{mode:"visible",children:a.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Kl(e,t){return(t=ql({mode:"visible",children:t},e.mode)).return=e,e.child=t}function ql(e,t){return(e=Oa(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Gl(e,t,n){return sl(t,e.child,null,n),(e=Kl(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Yl(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),js(e.return,t,n)}function Jl(e,t,n,r,a){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=a)}function Ql(e,t,n){var r=t.pendingProps,a=r.revealOrder,s=r.tail;if(Pl(e,t,r.children,n),2&(r=ml.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Yl(e,n,t);else if(19===e.tag)Yl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(Ve(ml,r),a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===gl(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Jl(t,!1,a,n,s);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===gl(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Jl(t,!0,n,null,s);break;case"together":Jl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Xl(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),fu|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Ns(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(ce(153));if(null!==t.child){for(n=Ha(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ha(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Zl(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Ts(e))}function ec(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)_l=!0;else{if(!(Zl(e,n)||128&t.flags))return _l=!1,function(e,t,n){switch(t.tag){case 3:Ye(t,t.stateNode.containerInfo),ws(0,Ms,e.memoizedState.cache),fs();break;case 27:case 5:Qe(t);break;case 4:Ye(t,t.stateNode.containerInfo);break;case 10:ws(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(cl(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Wl(e,t,n):(cl(t),null!==(e=Xl(e,t,n))?e.sibling:null);cl(t);break;case 19:var a=!!(128&e.flags);if((r=0!==(n&t.childLanes))||(Ns(e,t,n,!1),r=0!==(n&t.childLanes)),a){if(r)return Ql(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ve(ml,ml.current),r)break;return null;case 22:case 23:return t.lanes=0,Ml(e,t,n);case 24:ws(0,Ms,e.memoizedState.cache)}return Xl(e,t,n)}(e,t,n);_l=!!(131072&e.flags)}else _l=!1,ls&&1048576&t.flags&&rs(t,Ja,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,a=r._init;if(r=a(r._payload),t.type=r,"function"!=typeof r){if(null!=r){if((a=r.$$typeof)===Ce){t.tag=11,t=Il(null,t,r,e,n);break e}if(a===Ae){t.tag=14,t=Ll(null,t,r,e,n);break e}}throw t=Me(r)||r,Error(ce(306,t,""))}$a(r)?(e=yl(r,e),t.tag=1,t=$l(null,t,r,e,n)):(t.tag=0,t=Fl(null,t,r,e,n))}return t;case 0:return Fl(e,t,t.type,t.pendingProps,n);case 1:return $l(e,t,r=t.type,a=yl(r,t.pendingProps),n);case 3:e:{if(Ye(t,t.stateNode.containerInfo),null===e)throw Error(ce(387));r=t.pendingProps;var s=t.memoizedState;a=s.element,ii(e,t),mi(t,r,null,n);var i=t.memoizedState;if(r=i.cache,ws(0,Ms,r),r!==s.cache&&Cs(t,[Ms],n,!0),hi(),r=i.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:i.cache},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Hl(e,t,r,n);break e}if(r!==a){bs(a=Ta(Error(ce(424)),t)),t=Hl(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(os=xh(e.firstChild),is=t,ls=!0,cs=null,us=!0,n=il(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===a){t=Xl(e,t,n);break e}Pl(e,t,r,n)}t=t.child}return t;case 26:return Ul(e,t),null===e?(n=Ph(t.type,null,t.pendingProps,null))?t.memoizedState=n:ls||(n=t.type,e=t.pendingProps,(r=ih(qe.current).createElement(n))[Mt]=t,r[Rt]=e,rh(r,n,e),Gt(r),t.stateNode=r):t.memoizedState=Ph(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Qe(t),null===e&&ls&&(r=t.stateNode=Sh(t.type,t.pendingProps,qe.current),is=t,us=!0,a=os,fh(t.type)?(kh=a,os=xh(r.firstChild)):os=a),Pl(e,t,t.pendingProps.children,n),Ul(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&ls&&((a=r=os)&&(r=function(e,t,n,r){for(;1===e.nodeType;){var a=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Bt])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(s=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(s!==a.rel||e.getAttribute("href")!==(null==a.href||""===a.href?null:a.href)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin)||e.getAttribute("title")!==(null==a.title?null:a.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((s=e.getAttribute("src"))!==(null==a.src?null:a.src)||e.getAttribute("type")!==(null==a.type?null:a.type)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var s=null==a.name?null:""+a.name;if("hidden"===a.type&&e.getAttribute("name")===s)return e}if(null===(e=xh(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,us),null!==r?(t.stateNode=r,is=t,os=xh(r.firstChild),us=!1,a=!0):a=!1),a||hs(t)),Qe(t),a=t.type,s=t.pendingProps,i=null!==e?e.memoizedProps:null,r=s.children,ch(a,s)?r=null:null!==i&&ch(a,i)&&(t.flags|=32),null!==t.memoizedState&&(a=Di(e,t,Ui,null,null,n),Qh._currentValue=a),Ul(e,t),Pl(e,t,r,n),t.child;case 6:return null===e&&ls&&((e=n=os)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=xh(e.nextSibling)))return null}return e}(n,t.pendingProps,us))?(t.stateNode=n,is=t,os=null,e=!0):e=!1),e||hs(t)),null;case 13:return Wl(e,t,n);case 4:return Ye(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=sl(t,null,r,n):Pl(e,t,r,n),t.child;case 11:return Il(e,t,t.type,t.pendingProps,n);case 7:return Pl(e,t,t.pendingProps,n),t.child;case 8:case 12:return Pl(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,ws(0,t.type,r.value),Pl(e,t,r.children,n),t.child;case 9:return a=t.type._context,r=t.pendingProps.children,As(t),r=r(a=Es(a)),t.flags|=1,Pl(e,t,r,n),t.child;case 14:return Ll(e,t,t.type,t.pendingProps,n);case 15:return Dl(e,t,t.type,t.pendingProps,n);case 19:return Ql(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},null===e?((n=ql(r,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Ha(e.child,r)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Ml(e,t,n);case 24:return As(t),r=Es(Ms),null===e?(null===(a=Ws())&&(a=iu,s=Rs(),a.pooledCache=s,s.refCount++,null!==s&&(a.pooledCacheLanes|=n),a=s),t.memoizedState={parent:r,cache:a},si(t),ws(0,Ms,a)):(0!==(e.lanes&n)&&(ii(e,t),mi(t,null,null,n),hi()),a=e.memoizedState,s=t.memoizedState,a.parent!==r?(a={parent:r,cache:r},t.memoizedState=a,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=a),ws(0,Ms,r)):(r=s.cache,ws(0,Ms,r),r!==a.cache&&Cs(t,[Ms],n,!0))),Pl(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(ce(156,t.tag))}function tc(e){e.flags|=4}function nc(e,t){if("stylesheet"!==t.type||4&t.state.loading)e.flags&=-16777217;else if(e.flags|=16777216,!Vh(t)){if(null!==(t=ol.current)&&((4194048&lu)===lu?null!==ll:(62914560&lu)!==lu&&!(536870912&lu)||t!==ll))throw ti=Qs,Ys;e.flags|=8192}}function rc(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Nt():536870912,e.lanes|=t,xu|=t)}function ac(e,t){if(!ls)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function sc(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=65011712&a.subtreeFlags,r|=65011712&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ic(e,t,n){var r=t.pendingProps;switch(ss(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return sc(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Ss(Ms),Je(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(ps(t)?tc(t):null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,vs())),sc(t),null;case 26:return n=t.memoizedState,null===e?(tc(t),null!==n?(sc(t),nc(t,n)):(sc(t),t.flags&=-16777217)):n?n!==e.memoizedState?(tc(t),sc(t),nc(t,n)):(sc(t),t.flags&=-16777217):(e.memoizedProps!==r&&tc(t),sc(t),t.flags&=-16777217),null;case 27:Xe(t),n=qe.current;var a=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&tc(t);else{if(!r){if(null===t.stateNode)throw Error(ce(166));return sc(t),null}e=We.current,ps(t)?ms(t):(e=Sh(a,r,n),t.stateNode=e,tc(t))}return sc(t),null;case 5:if(Xe(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&tc(t);else{if(!r){if(null===t.stateNode)throw Error(ce(166));return sc(t),null}if(e=We.current,ps(t))ms(t);else{switch(a=ih(qe.current),e){case 1:e=a.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=a.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=a.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=a.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=a.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"==typeof r.is?a.createElement("select",{is:r.is}):a.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"==typeof r.is?a.createElement(n,{is:r.is}):a.createElement(n)}}e[Mt]=t,e[Rt]=r;e:for(a=t.child;null!==a;){if(5===a.tag||6===a.tag)e.appendChild(a.stateNode);else if(4!==a.tag&&27!==a.tag&&null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;null===a.sibling;){if(null===a.return||a.return===t)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}t.stateNode=e;e:switch(rh(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&tc(t)}}return sc(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&tc(t);else{if("string"!=typeof r&&null===t.stateNode)throw Error(ce(166));if(e=qe.current,ps(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(a=is))switch(a.tag){case 27:case 5:r=a.memoizedProps}e[Mt]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||Zd(e.nodeValue,n)))||hs(t)}else(e=ih(e).createTextNode(r))[Mt]=t,t.stateNode=e}return sc(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(a=ps(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(ce(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(ce(317));a[Mt]=t}else fs(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;sc(t),a=!1}else a=vs(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return 256&t.flags?(hl(t),t):(hl(t),null)}if(hl(t),128&t.flags)return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){a=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(a=r.alternate.memoizedState.cachePool.pool);var s=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(s=r.memoizedState.cachePool.pool),s!==a&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),rc(t,t.updateQueue),sc(t),null;case 4:return Je(),null===e&&zd(t.stateNode.containerInfo),sc(t),null;case 10:return Ss(t.type),sc(t),null;case 19:if(ze(ml),null===(a=t.memoizedState))return sc(t),null;if(r=!!(128&t.flags),null===(s=a.rendering))if(r)ac(a,!1);else{if(0!==pu||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(s=gl(e))){for(t.flags|=128,ac(a,!1),e=s.updateQueue,t.updateQueue=e,rc(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Ba(n,e),n=n.sibling;return Ve(ml,1&ml.current|2),t.child}e=e.sibling}null!==a.tail&&at()>Cu&&(t.flags|=128,r=!0,ac(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=gl(s))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,rc(t,e),ac(a,!0),null===a.tail&&"hidden"===a.tailMode&&!s.alternate&&!ls)return sc(t),null}else 2*at()-a.renderingStartTime>Cu&&536870912!==n&&(t.flags|=128,r=!0,ac(a,!1),t.lanes=4194304);a.isBackwards?(s.sibling=t.child,t.child=s):(null!==(e=a.last)?e.sibling=s:t.child=s,a.last=s)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=at(),t.sibling=null,e=ml.current,Ve(ml,r?1&e|2:1&e),t):(sc(t),null);case 22:case 23:return hl(t),xi(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?!!(536870912&n)&&!(128&t.flags)&&(sc(t),6&t.subtreeFlags&&(t.flags|=8192)):sc(t),null!==(n=t.updateQueue)&&rc(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&ze(Vs),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Ss(Ms),sc(t),null;case 25:case 30:return null}throw Error(ce(156,t.tag))}function oc(e,t){switch(ss(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ss(Ms),Je(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Xe(t),null;case 13:if(hl(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(ce(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ze(ml),null;case 4:return Je(),null;case 10:return Ss(t.type),null;case 22:case 23:return hl(t),xi(),null!==e&&ze(Vs),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Ss(Ms),null;default:return null}}function lc(e,t){switch(ss(t),t.tag){case 3:Ss(Ms),Je();break;case 26:case 27:case 5:Xe(t);break;case 4:Je();break;case 13:hl(t);break;case 19:ze(ml);break;case 10:Ss(t.type);break;case 22:case 23:hl(t),xi(),null!==e&&ze(Vs);break;case 24:Ss(Ms)}}function cc(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var a=r.next;n=a;do{if((n.tag&e)===e){r=void 0;var s=n.create,i=n.inst;r=s(),i.destroy=r}n=n.next}while(n!==a)}}catch(o){md(t,t.return,o)}}function uc(e,t,n){try{var r=t.updateQueue,a=null!==r?r.lastEffect:null;if(null!==a){var s=a.next;r=s;do{if((r.tag&e)===e){var i=r.inst,o=i.destroy;if(void 0!==o){i.destroy=void 0,a=t;var l=n,c=o;try{c()}catch(u){md(a,l,u)}}}r=r.next}while(r!==s)}}catch(u){md(t,t.return,u)}}function dc(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{pi(t,n)}catch(r){md(e,e.return,r)}}}function hc(e,t,n){n.props=yl(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){md(e,t,r)}}function mc(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"==typeof n?e.refCleanup=n(r):n.current=r}}catch(a){md(e,t,a)}}function gc(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"==typeof r)try{r()}catch(a){md(e,t,a)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof n)try{n(null)}catch(s){md(e,t,s)}else n.current=null}function pc(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(a){md(e,e.return,a)}}function fc(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,s=null,i=null,o=null,l=null,c=null,u=null;for(m in n){var d=n[m];if(n.hasOwnProperty(m)&&null!=d)switch(m){case"checked":case"value":break;case"defaultValue":l=d;default:r.hasOwnProperty(m)||th(e,t,m,null,r,d)}}for(var h in r){var m=r[h];if(d=n[h],r.hasOwnProperty(h)&&(null!=m||null!=d))switch(h){case"type":s=m;break;case"name":a=m;break;case"checked":c=m;break;case"defaultChecked":u=m;break;case"value":i=m;break;case"defaultValue":o=m;break;case"children":case"dangerouslySetInnerHTML":if(null!=m)throw Error(ce(137,t));break;default:m!==d&&th(e,t,h,m,r,d)}}return void xn(e,i,o,l,c,u,s,a);case"select":for(s in m=i=o=h=null,n)if(l=n[s],n.hasOwnProperty(s)&&null!=l)switch(s){case"value":break;case"multiple":m=l;default:r.hasOwnProperty(s)||th(e,t,s,null,r,l)}for(a in r)if(s=r[a],l=n[a],r.hasOwnProperty(a)&&(null!=s||null!=l))switch(a){case"value":h=s;break;case"defaultValue":o=s;break;case"multiple":i=s;default:s!==l&&th(e,t,a,s,r,l)}return t=o,n=i,r=m,void(null!=h?Sn(e,!!n,h,!1):!!r!=!!n&&(null!=t?Sn(e,!!n,t,!0):Sn(e,!!n,n?[]:"",!1)));case"textarea":for(o in m=h=null,n)if(a=n[o],n.hasOwnProperty(o)&&null!=a&&!r.hasOwnProperty(o))switch(o){case"value":case"children":break;default:th(e,t,o,null,r,a)}for(i in r)if(a=r[i],s=n[i],r.hasOwnProperty(i)&&(null!=a||null!=s))switch(i){case"value":h=a;break;case"defaultValue":m=a;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=a)throw Error(ce(91));break;default:a!==s&&th(e,t,i,a,r,s)}return void jn(e,h,m);case"option":for(var g in n)if(h=n[g],n.hasOwnProperty(g)&&null!=h&&!r.hasOwnProperty(g))if("selected"===g)e.selected=!1;else th(e,t,g,null,r,h);for(l in r)if(h=r[l],m=n[l],r.hasOwnProperty(l)&&h!==m&&(null!=h||null!=m))if("selected"===l)e.selected=h&&"function"!=typeof h&&"symbol"!=typeof h;else th(e,t,l,h,r,m);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var p in n)h=n[p],n.hasOwnProperty(p)&&null!=h&&!r.hasOwnProperty(p)&&th(e,t,p,null,r,h);for(c in r)if(h=r[c],m=n[c],r.hasOwnProperty(c)&&h!==m&&(null!=h||null!=m))switch(c){case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(ce(137,t));break;default:th(e,t,c,h,r,m)}return;default:if(_n(t)){for(var f in n)h=n[f],n.hasOwnProperty(f)&&void 0!==h&&!r.hasOwnProperty(f)&&nh(e,t,f,void 0,r,h);for(u in r)h=r[u],m=n[u],!r.hasOwnProperty(u)||h===m||void 0===h&&void 0===m||nh(e,t,u,h,r,m);return}}for(var v in n)h=n[v],n.hasOwnProperty(v)&&null!=h&&!r.hasOwnProperty(v)&&th(e,t,v,null,r,h);for(d in r)h=r[d],m=n[d],!r.hasOwnProperty(d)||h===m||null==h&&null==m||th(e,t,d,h,r,m)}(r,e.type,n,t),r[Rt]=t}catch(a){md(e,e.return,a)}}function vc(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&fh(e.type)||4===e.tag}function bc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||vc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&fh(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function yc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=eh));else if(4!==r&&(27===r&&fh(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(yc(e,t,n),e=e.sibling;null!==e;)yc(e,t,n),e=e.sibling}function xc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&fh(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(xc(e,t,n),e=e.sibling;null!==e;)xc(e,t,n),e=e.sibling}function kc(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,a=t.attributes;a.length;)t.removeAttributeNode(a[0]);rh(t,r,n),t[Mt]=e,t[Rt]=n}catch(s){md(e,e.return,s)}}var wc=!1,Sc=!1,jc=!1,Cc="function"==typeof WeakSet?WeakSet:Set,Nc=null;function Tc(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:$c(e,n),4&r&&cc(5,n);break;case 1:if($c(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(i){md(n,n.return,i)}else{var a=yl(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(a,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){md(n,n.return,o)}}64&r&&dc(n),512&r&&mc(n,n.return);break;case 3:if($c(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{pi(e,t)}catch(i){md(n,n.return,i)}}break;case 27:null===t&&4&r&&kc(n);case 26:case 5:$c(e,n),null===t&&4&r&&pc(n),512&r&&mc(n,n.return);break;case 12:$c(e,n);break;case 13:$c(e,n),4&r&&Lc(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=vd.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||wc)){t=null!==t&&null!==t.memoizedState||Sc,a=wc;var s=Sc;wc=r,(Sc=t)&&!s?Bc(e,n,!!(8772&n.subtreeFlags)):$c(e,n),wc=a,Sc=s}break;case 30:break;default:$c(e,n)}}function Ac(e){var t=e.alternate;null!==t&&(e.alternate=null,Ac(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&zt(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ec=null,_c=!1;function Pc(e,t,n){for(n=n.child;null!==n;)Ic(e,t,n),n=n.sibling}function Ic(e,t,n){if(gt&&"function"==typeof gt.onCommitFiberUnmount)try{gt.onCommitFiberUnmount(mt,n)}catch(s){}switch(n.tag){case 26:Sc||gc(n,t),Pc(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Sc||gc(n,t);var r=Ec,a=_c;fh(n.type)&&(Ec=n.stateNode,_c=!1),Pc(e,t,n),jh(n.stateNode),Ec=r,_c=a;break;case 5:Sc||gc(n,t);case 6:if(r=Ec,a=_c,Ec=null,Pc(e,t,n),_c=a,null!==(Ec=r))if(_c)try{(9===Ec.nodeType?Ec.body:"HTML"===Ec.nodeName?Ec.ownerDocument.body:Ec).removeChild(n.stateNode)}catch(i){md(n,t,i)}else try{Ec.removeChild(n.stateNode)}catch(i){md(n,t,i)}break;case 18:null!==Ec&&(_c?(vh(9===(e=Ec).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),_m(e)):vh(Ec,n.stateNode));break;case 4:r=Ec,a=_c,Ec=n.stateNode.containerInfo,_c=!0,Pc(e,t,n),Ec=r,_c=a;break;case 0:case 11:case 14:case 15:Sc||uc(2,n,t),Sc||uc(4,n,t),Pc(e,t,n);break;case 1:Sc||(gc(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount&&hc(n,t,r)),Pc(e,t,n);break;case 21:Pc(e,t,n);break;case 22:Sc=(r=Sc)||null!==n.memoizedState,Pc(e,t,n),Sc=r;break;default:Pc(e,t,n)}}function Lc(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{_m(e)}catch(n){md(t,t.return,n)}}function Dc(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Cc),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Cc),t;default:throw Error(ce(435,e.tag))}}(e);t.forEach(function(t){var r=bd.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}function Mc(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r],s=e,i=t,o=i;e:for(;null!==o;){switch(o.tag){case 27:if(fh(o.type)){Ec=o.stateNode,_c=!1;break e}break;case 5:Ec=o.stateNode,_c=!1;break e;case 3:case 4:Ec=o.stateNode.containerInfo,_c=!0;break e}o=o.return}if(null===Ec)throw Error(ce(160));Ic(s,i,a),Ec=null,_c=!1,null!==(s=a.alternate)&&(s.return=null),a.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Uc(t,e),t=t.sibling}var Rc=null;function Uc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Mc(t,e),Fc(e),4&r&&(uc(3,e,e.return),cc(3,e),uc(5,e,e.return));break;case 1:Mc(t,e),Fc(e),512&r&&(Sc||null===n||gc(n,n.return)),64&r&&wc&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var a=Rc;if(Mc(t,e),Fc(e),512&r&&(Sc||null===n||gc(n,n.return)),4&r){var s=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,a=a.ownerDocument||a;t:switch(r){case"title":(!(s=a.getElementsByTagName("title")[0])||s[Bt]||s[Mt]||"http://www.w3.org/2000/svg"===s.namespaceURI||s.hasAttribute("itemprop"))&&(s=a.createElement(r),a.head.insertBefore(s,a.querySelector("head > title"))),rh(s,r,n),s[Mt]=e,Gt(s),r=s;break e;case"link":var i=Bh("link","href",a).get(r+(n.href||""));if(i)for(var o=0;o<i.length;o++)if((s=i[o]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&s.getAttribute("rel")===(null==n.rel?null:n.rel)&&s.getAttribute("title")===(null==n.title?null:n.title)&&s.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){i.splice(o,1);break t}rh(s=a.createElement(r),r,n),a.head.appendChild(s);break;case"meta":if(i=Bh("meta","content",a).get(r+(n.content||"")))for(o=0;o<i.length;o++)if((s=i[o]).getAttribute("content")===(null==n.content?null:""+n.content)&&s.getAttribute("name")===(null==n.name?null:n.name)&&s.getAttribute("property")===(null==n.property?null:n.property)&&s.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&s.getAttribute("charset")===(null==n.charSet?null:n.charSet)){i.splice(o,1);break t}rh(s=a.createElement(r),r,n),a.head.appendChild(s);break;default:throw Error(ce(468,r))}s[Mt]=e,Gt(s),r=s}e.stateNode=r}else zh(a,e.type,e.stateNode);else e.stateNode=Uh(a,r,e.memoizedProps);else s!==r?(null===s?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):s.count--,null===r?zh(a,e.type,e.stateNode):Uh(a,r,e.memoizedProps)):null===r&&null!==e.stateNode&&fc(e,e.memoizedProps,n.memoizedProps)}break;case 27:Mc(t,e),Fc(e),512&r&&(Sc||null===n||gc(n,n.return)),null!==n&&4&r&&fc(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Mc(t,e),Fc(e),512&r&&(Sc||null===n||gc(n,n.return)),32&e.flags){a=e.stateNode;try{Nn(a,"")}catch(m){md(e,e.return,m)}}4&r&&null!=e.stateNode&&fc(e,a=e.memoizedProps,null!==n?n.memoizedProps:a),1024&r&&(jc=!0);break;case 6:if(Mc(t,e),Fc(e),4&r){if(null===e.stateNode)throw Error(ce(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(m){md(e,e.return,m)}}break;case 3:if(Hh=null,a=Rc,Rc=Th(t.containerInfo),Mc(t,e),Rc=a,Fc(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{_m(t.containerInfo)}catch(m){md(e,e.return,m)}jc&&(jc=!1,Oc(e));break;case 4:r=Rc,Rc=Th(e.stateNode.containerInfo),Mc(t,e),Fc(e),Rc=r;break;case 12:default:Mc(t,e),Fc(e);break;case 13:Mc(t,e),Fc(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==n&&null!==n.memoizedState)&&(ju=at()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Dc(e,r)));break;case 22:a=null!==e.memoizedState;var l=null!==n&&null!==n.memoizedState,c=wc,u=Sc;if(wc=c||a,Sc=u||l,Mc(t,e),Sc=u,wc=c,Fc(e),8192&r)e:for(t=e.stateNode,t._visibility=a?-2&t._visibility:1|t._visibility,a&&(null===n||l||wc||Sc||Hc(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){l=n=t;try{if(s=l.stateNode,a)"function"==typeof(i=s.style).setProperty?i.setProperty("display","none","important"):i.display="none";else{o=l.stateNode;var d=l.memoizedProps.style,h=null!=d&&d.hasOwnProperty("display")?d.display:null;o.style.display=null==h||"boolean"==typeof h?"":(""+h).trim()}}catch(m){md(l,l.return,m)}}}else if(6===t.tag){if(null===n){l=t;try{l.stateNode.nodeValue=a?"":l.memoizedProps}catch(m){md(l,l.return,m)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Dc(e,n))));break;case 19:Mc(t,e),Fc(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Dc(e,r)));case 30:case 21:}}function Fc(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(vc(r)){n=r;break}r=r.return}if(null==n)throw Error(ce(160));switch(n.tag){case 27:var a=n.stateNode;xc(e,bc(e),a);break;case 5:var s=n.stateNode;32&n.flags&&(Nn(s,""),n.flags&=-33),xc(e,bc(e),s);break;case 3:case 4:var i=n.stateNode.containerInfo;yc(e,bc(e),i);break;default:throw Error(ce(161))}}catch(o){md(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Oc(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Oc(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function $c(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Tc(e,t.alternate,t),t=t.sibling}function Hc(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:uc(4,t,t.return),Hc(t);break;case 1:gc(t,t.return);var n=t.stateNode;"function"==typeof n.componentWillUnmount&&hc(t,t.return,n),Hc(t);break;case 27:jh(t.stateNode);case 26:case 5:gc(t,t.return),Hc(t);break;case 22:null===t.memoizedState&&Hc(t);break;default:Hc(t)}e=e.sibling}}function Bc(e,t,n){for(n=n&&!!(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,a=e,s=t,i=s.flags;switch(s.tag){case 0:case 11:case 15:Bc(a,s,n),cc(4,s);break;case 1:if(Bc(a,s,n),"function"==typeof(a=(r=s).stateNode).componentDidMount)try{a.componentDidMount()}catch(c){md(r,r.return,c)}if(null!==(a=(r=s).updateQueue)){var o=r.stateNode;try{var l=a.shared.hiddenCallbacks;if(null!==l)for(a.shared.hiddenCallbacks=null,a=0;a<l.length;a++)gi(l[a],o)}catch(c){md(r,r.return,c)}}n&&64&i&&dc(s),mc(s,s.return);break;case 27:kc(s);case 26:case 5:Bc(a,s,n),n&&null===r&&4&i&&pc(s),mc(s,s.return);break;case 12:Bc(a,s,n);break;case 13:Bc(a,s,n),n&&4&i&&Lc(a,s);break;case 22:null===s.memoizedState&&Bc(a,s,n),mc(s,s.return);break;case 30:break;default:Bc(a,s,n)}t=t.sibling}}function zc(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Us(n))}function Vc(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Us(e))}function Wc(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Kc(e,t,n,r),t=t.sibling}function Kc(e,t,n,r){var a=t.flags;switch(t.tag){case 0:case 11:case 15:Wc(e,t,n,r),2048&a&&cc(9,t);break;case 1:case 13:default:Wc(e,t,n,r);break;case 3:Wc(e,t,n,r),2048&a&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Us(e)));break;case 12:if(2048&a){Wc(e,t,n,r),e=t.stateNode;try{var s=t.memoizedProps,i=s.id,o=s.onPostCommit;"function"==typeof o&&o(i,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){md(t,t.return,l)}}else Wc(e,t,n,r);break;case 23:break;case 22:s=t.stateNode,i=t.alternate,null!==t.memoizedState?2&s._visibility?Wc(e,t,n,r):Gc(e,t):2&s._visibility?Wc(e,t,n,r):(s._visibility|=2,qc(e,t,n,r,!!(10256&t.subtreeFlags))),2048&a&&zc(i,t);break;case 24:Wc(e,t,n,r),2048&a&&Vc(t.alternate,t)}}function qc(e,t,n,r,a){for(a=a&&!!(10256&t.subtreeFlags),t=t.child;null!==t;){var s=e,i=t,o=n,l=r,c=i.flags;switch(i.tag){case 0:case 11:case 15:qc(s,i,o,l,a),cc(8,i);break;case 23:break;case 22:var u=i.stateNode;null!==i.memoizedState?2&u._visibility?qc(s,i,o,l,a):Gc(s,i):(u._visibility|=2,qc(s,i,o,l,a)),a&&2048&c&&zc(i.alternate,i);break;case 24:qc(s,i,o,l,a),a&&2048&c&&Vc(i.alternate,i);break;default:qc(s,i,o,l,a)}t=t.sibling}}function Gc(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,a=r.flags;switch(r.tag){case 22:Gc(n,r),2048&a&&zc(r.alternate,r);break;case 24:Gc(n,r),2048&a&&Vc(r.alternate,r);break;default:Gc(n,r)}t=t.sibling}}var Yc=8192;function Jc(e){if(e.subtreeFlags&Yc)for(e=e.child;null!==e;)Qc(e),e=e.sibling}function Qc(e){switch(e.tag){case 26:Jc(e),e.flags&Yc&&null!==e.memoizedState&&function(e,t,n){if(null===Wh)throw Error(ce(475));var r=Wh;if(!("stylesheet"!==t.type||"string"==typeof n.media&&!1===matchMedia(n.media).matches||4&t.state.loading)){if(null===t.instance){var a=Ih(n.href),s=e.querySelector(Lh(a));if(s)return null!==(e=s._p)&&"object"==typeof e&&"function"==typeof e.then&&(r.count++,r=qh.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=s,void Gt(s);s=e.ownerDocument||e,n=Dh(n),(a=Ch.get(a))&&Oh(n,a),Gt(s=s.createElement("link"));var i=s;i._p=new Promise(function(e,t){i.onload=e,i.onerror=t}),rh(s,"link",n),t.instance=s}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&!(3&t.state.loading)&&(r.count++,t=qh.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(Rc,e.memoizedState,e.memoizedProps);break;case 5:default:Jc(e);break;case 3:case 4:var t=Rc;Rc=Th(e.stateNode.containerInfo),Jc(e),Rc=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Yc,Yc=16777216,Jc(e),Yc=t):Jc(e))}}function Xc(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Zc(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Nc=r,nu(r,e)}Xc(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)eu(e),e=e.sibling}function eu(e){switch(e.tag){case 0:case 11:case 15:Zc(e),2048&e.flags&&uc(9,e,e.return);break;case 3:case 12:default:Zc(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,tu(e)):Zc(e)}}function tu(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Nc=r,nu(r,e)}Xc(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:uc(8,t,t.return),tu(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,tu(t));break;default:tu(t)}e=e.sibling}}function nu(e,t){for(;null!==Nc;){var n=Nc;switch(n.tag){case 0:case 11:case 15:uc(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Us(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Nc=r;else e:for(n=e;null!==Nc;){var a=(r=Nc).sibling,s=r.return;if(Ac(r),r===n){Nc=null;break e}if(null!==a){a.return=s,Nc=a;break e}Nc=s}}}var ru={getCacheForType:function(e){var t=Es(Ms),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},au="function"==typeof WeakMap?WeakMap:Map,su=0,iu=null,ou=null,lu=0,cu=0,uu=null,du=!1,hu=!1,mu=!1,gu=0,pu=0,fu=0,vu=0,bu=0,yu=0,xu=0,ku=null,wu=null,Su=!1,ju=0,Cu=1/0,Nu=null,Tu=null,Au=0,Eu=null,_u=null,Pu=0,Iu=0,Lu=null,Du=null,Mu=0,Ru=null;function Uu(){if(2&su&&0!==lu)return lu&-lu;if(null!==Ue.T){return 0!==$s?$s:Id()}return Lt()}function Fu(){0===yu&&(yu=536870912&lu&&!ls?536870912:Ct());var e=ol.current;return null!==e&&(e.flags|=32),yu}function Ou(e,t,n){(e!==iu||2!==cu&&9!==cu)&&null===e.cancelPendingCommit||(Ku(e,0),zu(e,lu,yu,!1)),At(e,n),2&su&&e===iu||(e===iu&&(!(2&su)&&(vu|=n),4===pu&&zu(e,lu,yu,!1)),Cd(e))}function $u(e,t,n){if(6&su)throw Error(ce(327));for(var r=!n&&!(124&t)&&0===(t&e.expiredLanes)||St(e,t),a=r?function(e,t){var n=su;su|=2;var r=Gu(),a=Yu();iu!==e||lu!==t?(Nu=null,Cu=at()+500,Ku(e,t)):hu=St(e,t);e:for(;;)try{if(0!==cu&&null!==ou){t=ou;var s=uu;t:switch(cu){case 1:cu=0,uu=null,nd(e,t,s,1);break;case 2:case 9:if(Xs(s)){cu=0,uu=null,td(t);break}t=function(){2!==cu&&9!==cu||iu!==e||(cu=7),Cd(e)},s.then(t,t);break e;case 3:cu=7;break e;case 4:cu=5;break e;case 7:Xs(s)?(cu=0,uu=null,td(t)):(cu=0,uu=null,nd(e,t,s,7));break;case 5:var i=null;switch(ou.tag){case 26:i=ou.memoizedState;case 5:case 27:var o=ou;if(!i||Vh(i)){cu=0,uu=null;var l=o.sibling;if(null!==l)ou=l;else{var c=o.return;null!==c?(ou=c,rd(c)):ou=null}break t}}cu=0,uu=null,nd(e,t,s,5);break;case 6:cu=0,uu=null,nd(e,t,s,6);break;case 8:Wu(),pu=6;break e;default:throw Error(ce(462))}}Zu();break}catch(u){qu(e,u)}return ks=xs=null,Ue.H=r,Ue.A=a,su=n,null!==ou?0:(iu=null,lu=0,Pa(),pu)}(e,t):Qu(e,t,!0),s=r;;){if(0===a){hu&&!r&&zu(e,t,0,!1);break}if(n=e.current.alternate,!s||Bu(n)){if(2===a){if(s=t,e.errorRecoveryDisabledLanes&s)var i=0;else i=0!==(i=-536870913&e.pendingLanes)?i:536870912&i?536870912:0;if(0!==i){t=i;e:{var o=e;a=ku;var l=o.current.memoizedState.isDehydrated;if(l&&(Ku(o,i).flags|=256),2!==(i=Qu(o,i,!1))){if(mu&&!l){o.errorRecoveryDisabledLanes|=s,vu|=s,a=4;break e}s=wu,wu=a,null!==s&&(null===wu?wu=s:wu.push.apply(wu,s))}a=i}if(s=!1,2!==a)continue}}if(1===a){Ku(e,0),zu(e,t,0,!0);break}e:{switch(r=e,s=a){case 0:case 1:throw Error(ce(345));case 4:if((4194048&t)!==t)break;case 6:zu(r,t,yu,!du);break e;case 2:wu=null;break;case 3:case 5:break;default:throw Error(ce(329))}if((62914560&t)===t&&10<(a=ju+300-at())){if(zu(r,t,yu,!du),0!==wt(r,0,!0))break e;r.timeoutHandle=dh(Hu.bind(null,r,n,wu,Nu,Su,t,yu,vu,xu,du,s,2,-0,0),a)}else Hu(r,n,wu,Nu,Su,t,yu,vu,xu,du,s,0,-0,0)}break}a=Qu(e,t,!1),s=!1}Cd(e)}function Hu(e,t,n,r,a,s,i,o,l,c,u,d,h,m){if(e.timeoutHandle=-1,(8192&(d=t.subtreeFlags)||!(16785408&~d))&&(Wh={stylesheets:null,count:0,unsuspend:Kh},Qc(t),null!==(d=function(){if(null===Wh)throw Error(ce(475));var e=Wh;return e.stylesheets&&0===e.count&&Yh(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Yh(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=d(sd.bind(null,e,t,s,n,r,a,i,o,l,u,1,h,m)),void zu(e,s,i,!c);sd(e,t,s,n,r,a,i,o,l)}function Bu(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var a=n[r],s=a.getSnapshot;a=a.value;try{if(!Xr(s(),a))return!1}catch(i){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function zu(e,t,n,r){t&=~bu,t&=~vu,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var a=t;0<a;){var s=31-ft(a),i=1<<s;r[s]=-1,a&=~i}0!==n&&Et(e,n,t)}function Vu(){return!!(6&su)||(Nd(0),!1)}function Wu(){if(null!==ou){if(0===cu)var e=ou.return;else ks=xs=null,$i(e=ou),Xo=null,Zo=0,e=ou;for(;null!==e;)lc(e.alternate,e),e=e.return;ou=null}}function Ku(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,hh(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Wu(),iu=e,ou=n=Ha(e.current,null),lu=t,cu=0,uu=null,du=!1,hu=St(e,t),mu=!1,xu=yu=bu=vu=fu=pu=0,wu=ku=null,Su=!1,8&t&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var a=31-ft(r),s=1<<a;t|=e[a],r&=~s}return gu=t,Pa(),n}function qu(e,t){wi=null,Ue.H=Go,t===Gs||t===Js?(t=ni(),cu=3):t===Ys?(t=ni(),cu=4):cu=t===El?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,uu=t,null===ou&&(pu=1,jl(e,Ta(t,e.current)))}function Gu(){var e=Ue.H;return Ue.H=Go,null===e?Go:e}function Yu(){var e=Ue.A;return Ue.A=ru,e}function Ju(){pu=4,du||(4194048&lu)!==lu&&null!==ol.current||(hu=!0),!(134217727&fu)&&!(134217727&vu)||null===iu||zu(iu,lu,yu,!1)}function Qu(e,t,n){var r=su;su|=2;var a=Gu(),s=Yu();iu===e&&lu===t||(Nu=null,Ku(e,t)),t=!1;var i=pu;e:for(;;)try{if(0!==cu&&null!==ou){var o=ou,l=uu;switch(cu){case 8:Wu(),i=6;break e;case 3:case 2:case 9:case 6:null===ol.current&&(t=!0);var c=cu;if(cu=0,uu=null,nd(e,o,l,c),n&&hu){i=0;break e}break;default:c=cu,cu=0,uu=null,nd(e,o,l,c)}}Xu(),i=pu;break}catch(u){qu(e,u)}return t&&e.shellSuspendCounter++,ks=xs=null,su=r,Ue.H=a,Ue.A=s,null===ou&&(iu=null,lu=0,Pa()),i}function Xu(){for(;null!==ou;)ed(ou)}function Zu(){for(;null!==ou&&!nt();)ed(ou)}function ed(e){var t=ec(e.alternate,e,gu);e.memoizedProps=e.pendingProps,null===t?rd(e):ou=t}function td(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ol(n,t,t.pendingProps,t.type,void 0,lu);break;case 11:t=Ol(n,t,t.pendingProps,t.type.render,t.ref,lu);break;case 5:$i(t);default:lc(n,t),t=ec(n,t=ou=Ba(t,gu),gu)}e.memoizedProps=e.pendingProps,null===t?rd(e):ou=t}function nd(e,t,n,r){ks=xs=null,$i(t),Xo=null,Zo=0;var a=t.return;try{if(function(e,t,n,r,a){if(n.flags|=32768,null!==r&&"object"==typeof r&&"function"==typeof r.then){if(null!==(t=n.alternate)&&Ns(t,n,a,!0),null!==(n=ol.current)){switch(n.tag){case 13:return null===ll?Ju():null===n.alternate&&0===pu&&(pu=3),n.flags&=-257,n.flags|=65536,n.lanes=a,r===Qs?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),gd(e,r,a)),!1;case 22:return n.flags|=65536,r===Qs?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),gd(e,r,a)),!1}throw Error(ce(435,n.tag))}return gd(e,r,a),Ju(),!1}if(ls)return null!==(t=ol.current)?(!(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=a,r!==ds&&bs(Ta(e=Error(ce(422),{cause:r}),n))):(r!==ds&&bs(Ta(t=Error(ce(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,a&=-a,e.lanes|=a,r=Ta(r,n),ui(e,a=Nl(e.stateNode,r,a)),4!==pu&&(pu=2)),!1;var s=Error(ce(520),{cause:r});if(s=Ta(s,n),null===ku?ku=[s]:ku.push(s),4!==pu&&(pu=2),null===t)return!0;r=Ta(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=a&-a,n.lanes|=e,ui(n,e=Nl(n.stateNode,r,e)),!1;case 1:if(t=n.type,s=n.stateNode,!(128&n.flags||"function"!=typeof t.getDerivedStateFromError&&(null===s||"function"!=typeof s.componentDidCatch||null!==Tu&&Tu.has(s))))return n.flags|=65536,a&=-a,n.lanes|=a,Al(a=Tl(a),e,n,r),ui(n,a),!1}n=n.return}while(null!==n);return!1}(e,a,t,n,lu))return pu=1,jl(e,Ta(n,e.current)),void(ou=null)}catch(s){if(null!==a)throw ou=a,s;return pu=1,jl(e,Ta(n,e.current)),void(ou=null)}32768&t.flags?(ls||1===r?e=!0:hu||536870912&lu?e=!1:(du=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=ol.current)&&13===r.tag&&(r.flags|=16384))),ad(t,e)):rd(t)}function rd(e){var t=e;do{if(32768&t.flags)return void ad(t,du);e=t.return;var n=ic(t.alternate,t,gu);if(null!==n)return void(ou=n);if(null!==(t=t.sibling))return void(ou=t);ou=t=e}while(null!==t);0===pu&&(pu=5)}function ad(e,t){do{var n=oc(e.alternate,e);if(null!==n)return n.flags&=32767,void(ou=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(ou=e);ou=e=n}while(null!==e);pu=6,ou=null}function sd(e,t,n,r,a,s,i,o,l){e.cancelPendingCommit=null;do{ud()}while(0!==Au);if(6&su)throw Error(ce(327));if(null!==t){if(t===e.current)throw Error(ce(177));if(s=t.lanes|t.childLanes,function(e,t,n,r,a,s){var i=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=i&~n;0<n;){var u=31-ft(n),d=1<<u;o[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var m=h[u];null!==m&&(m.lane&=-536870913)}n&=~d}0!==r&&Et(e,r,0),0!==s&&0===a&&0!==e.tag&&(e.suspendedLanes|=s&~(i&~t))}(e,n,s|=_a,i,o,l),e===iu&&(ou=iu=null,lu=0),_u=t,Eu=e,Pu=n,Iu=s,Lu=a,Du=r,10256&t.subtreeFlags||10256&t.flags?(e.callbackNode=null,e.callbackPriority=0,et(lt,function(){return dd(),null})):(e.callbackNode=null,e.callbackPriority=0),r=!!(13878&t.flags),13878&t.subtreeFlags||r){r=Ue.T,Ue.T=null,a=Fe.p,Fe.p=2,i=su,su|=4;try{!function(e,t){if(e=e.containerInfo,ah=sm,aa(e=ra(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(p){n=null;break e}var i=0,o=-1,l=-1,c=0,u=0,d=e,h=null;t:for(;;){for(var m;d!==n||0!==a&&3!==d.nodeType||(o=i+a),d!==s||0!==r&&3!==d.nodeType||(l=i+r),3===d.nodeType&&(i+=d.nodeValue.length),null!==(m=d.firstChild);)h=d,d=m;for(;;){if(d===e)break t;if(h===n&&++c===a&&(o=i),h===s&&++u===r&&(l=i),null!==(m=d.nextSibling))break;h=(d=h).parentNode}d=m}n=-1===o||-1===l?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(sh={focusedElem:e,selectionRange:n},sm=!1,Nc=t;null!==Nc;)if(e=(t=Nc).child,1024&t.subtreeFlags&&null!==e)e.return=t,Nc=e;else for(;null!==Nc;){switch(s=(t=Nc).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(1024&e&&null!==s){e=void 0,n=t,a=s.memoizedProps,s=s.memoizedState,r=n.stateNode;try{var g=yl(n.type,a,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(g,s),r.__reactInternalSnapshotBeforeUpdate=e}catch(f){md(n,n.return,f)}}break;case 3:if(1024&e)if(9===(n=(e=t.stateNode.containerInfo).nodeType))bh(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":bh(e);break;default:e.textContent=""}break;default:if(1024&e)throw Error(ce(163))}if(null!==(e=t.sibling)){e.return=t.return,Nc=e;break}Nc=t.return}}(e,t)}finally{su=i,Fe.p=a,Ue.T=r}}Au=1,id(),od(),ld()}}function id(){if(1===Au){Au=0;var e=Eu,t=_u,n=!!(13878&t.flags);if(13878&t.subtreeFlags||n){n=Ue.T,Ue.T=null;var r=Fe.p;Fe.p=2;var a=su;su|=4;try{Uc(t,e);var s=sh,i=ra(e.containerInfo),o=s.focusedElem,l=s.selectionRange;if(i!==o&&o&&o.ownerDocument&&na(o.ownerDocument.documentElement,o)){if(null!==l&&aa(o)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var d=o.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var m=h.getSelection(),g=o.textContent.length,p=Math.min(l.start,g),f=void 0===l.end?p:Math.min(l.end,g);!m.extend&&p>f&&(i=f,f=p,p=i);var v=ta(o,p),b=ta(o,f);if(v&&b&&(1!==m.rangeCount||m.anchorNode!==v.node||m.anchorOffset!==v.offset||m.focusNode!==b.node||m.focusOffset!==b.offset)){var y=d.createRange();y.setStart(v.node,v.offset),m.removeAllRanges(),p>f?(m.addRange(y),m.extend(b.node,b.offset)):(y.setEnd(b.node,b.offset),m.addRange(y))}}}}for(d=[],m=o;m=m.parentNode;)1===m.nodeType&&d.push({element:m,left:m.scrollLeft,top:m.scrollTop});for("function"==typeof o.focus&&o.focus(),o=0;o<d.length;o++){var x=d[o];x.element.scrollLeft=x.left,x.element.scrollTop=x.top}}sm=!!ah,sh=ah=null}finally{su=a,Fe.p=r,Ue.T=n}}e.current=t,Au=2}}function od(){if(2===Au){Au=0;var e=Eu,t=_u,n=!!(8772&t.flags);if(8772&t.subtreeFlags||n){n=Ue.T,Ue.T=null;var r=Fe.p;Fe.p=2;var a=su;su|=4;try{Tc(e,t.alternate,t)}finally{su=a,Fe.p=r,Ue.T=n}}Au=3}}function ld(){if(4===Au||3===Au){Au=0,rt();var e=Eu,t=_u,n=Pu,r=Du;10256&t.subtreeFlags||10256&t.flags?Au=5:(Au=0,_u=Eu=null,cd(e,e.pendingLanes));var a=e.pendingLanes;if(0===a&&(Tu=null),It(n),t=t.stateNode,gt&&"function"==typeof gt.onCommitFiberRoot)try{gt.onCommitFiberRoot(mt,t,void 0,!(128&~t.current.flags))}catch(l){}if(null!==r){t=Ue.T,a=Fe.p,Fe.p=2,Ue.T=null;try{for(var s=e.onRecoverableError,i=0;i<r.length;i++){var o=r[i];s(o.value,{componentStack:o.stack})}}finally{Ue.T=t,Fe.p=a}}3&Pu&&ud(),Cd(e),a=e.pendingLanes,4194090&n&&42&a?e===Ru?Mu++:(Mu=0,Ru=e):Mu=0,Nd(0)}}function cd(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Us(t)))}function ud(e){return id(),od(),ld(),dd()}function dd(){if(5!==Au)return!1;var e=Eu,t=Iu;Iu=0;var n=It(Pu),r=Ue.T,a=Fe.p;try{Fe.p=32>n?32:n,Ue.T=null,n=Lu,Lu=null;var s=Eu,i=Pu;if(Au=0,_u=Eu=null,Pu=0,6&su)throw Error(ce(331));var o=su;if(su|=4,eu(s.current),Kc(s,s.current,i,n),su=o,Nd(0,!1),gt&&"function"==typeof gt.onPostCommitFiberRoot)try{gt.onPostCommitFiberRoot(mt,s)}catch(l){}return!0}finally{Fe.p=a,Ue.T=r,cd(e,t)}}function hd(e,t,n){t=Ta(n,t),null!==(e=li(e,t=Nl(e.stateNode,t,2),2))&&(At(e,2),Cd(e))}function md(e,t,n){if(3===e.tag)hd(e,e,n);else for(;null!==t;){if(3===t.tag){hd(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Tu||!Tu.has(r))){e=Ta(n,e),null!==(r=li(t,n=Tl(2),2))&&(Al(n,r,t,e),At(r,2),Cd(r));break}}t=t.return}}function gd(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new au;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(mu=!0,a.add(n),e=pd.bind(null,e,t,n),t.then(e,e))}function pd(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,iu===e&&(lu&n)===n&&(4===pu||3===pu&&(62914560&lu)===lu&&300>at()-ju?!(2&su)&&Ku(e,0):bu|=n,xu===lu&&(xu=0)),Cd(e)}function fd(e,t){0===t&&(t=Nt()),null!==(e=Da(e,t))&&(At(e,t),Cd(e))}function vd(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),fd(e,n)}function bd(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(ce(314))}null!==r&&r.delete(t),fd(e,n)}var yd=null,xd=null,kd=!1,wd=!1,Sd=!1,jd=0;function Cd(e){e!==xd&&null===e.next&&(null===xd?yd=xd=e:xd=xd.next=e),wd=!0,kd||(kd=!0,gh(function(){6&su?et(it,Td):Ad()}))}function Nd(e,t){if(!Sd&&wd){Sd=!0;do{for(var n=!1,r=yd;null!==r;){if(0!==e){var a=r.pendingLanes;if(0===a)var s=0;else{var i=r.suspendedLanes,o=r.pingedLanes;s=(1<<31-ft(42|e)+1)-1,s=201326741&(s&=a&~(i&~o))?201326741&s|1:s?2|s:0}0!==s&&(n=!0,Pd(r,s))}else s=lu,!(3&(s=wt(r,r===iu?s:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||St(r,s)||(n=!0,Pd(r,s));r=r.next}}while(n);Sd=!1}}function Td(){Ad()}function Ad(){wd=kd=!1;var e=0;0!==jd&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==uh&&(uh=e,!0);return uh=null,!1}()&&(e=jd),jd=0);for(var t=at(),n=null,r=yd;null!==r;){var a=r.next,s=Ed(r,t);0===s?(r.next=null,null===n?yd=a:n.next=a,null===a&&(xd=n)):(n=r,(0!==e||3&s)&&(wd=!0)),r=a}Nd(e)}function Ed(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,s=-62914561&e.pendingLanes;0<s;){var i=31-ft(s),o=1<<i,l=a[i];-1===l?0!==(o&n)&&0===(o&r)||(a[i]=jt(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}if(n=lu,n=wt(e,e===(t=iu)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===cu||9===cu)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&tt(r),e.callbackNode=null,e.callbackPriority=0;if(!(3&n)||St(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&tt(r),It(n)){case 2:case 8:n=ot;break;case 32:default:n=lt;break;case 268435456:n=ut}return r=_d.bind(null,e),n=et(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&tt(r),e.callbackPriority=2,e.callbackNode=null,2}function _d(e,t){if(0!==Au&&5!==Au)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(ud()&&e.callbackNode!==n)return null;var r=lu;return 0===(r=wt(e,e===iu?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:($u(e,r,t),Ed(e,at()),null!=e.callbackNode&&e.callbackNode===n?_d.bind(null,e):null)}function Pd(e,t){if(ud())return null;$u(e,t,!0)}function Id(){return 0===jd&&(jd=Ct()),jd}function Ld(e){return null==e||"symbol"==typeof e||"boolean"==typeof e?null:"function"==typeof e?e:Ln(""+e)}function Dd(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Md=0;Md<ja.length;Md++){var Rd=ja[Md];Ca(Rd.toLowerCase(),"on"+(Rd[0].toUpperCase()+Rd.slice(1)))}Ca(fa,"onAnimationEnd"),Ca(va,"onAnimationIteration"),Ca(ba,"onAnimationStart"),Ca("dblclick","onDoubleClick"),Ca("focusin","onFocus"),Ca("focusout","onBlur"),Ca(ya,"onTransitionRun"),Ca(xa,"onTransitionStart"),Ca(ka,"onTransitionCancel"),Ca(wa,"onTransitionEnd"),Xt("onMouseEnter",["mouseout","mouseover"]),Xt("onMouseLeave",["mouseout","mouseover"]),Xt("onPointerEnter",["pointerout","pointerover"]),Xt("onPointerLeave",["pointerout","pointerover"]),Qt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ud="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fd=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ud));function Od(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var i=r.length-1;0<=i;i--){var o=r[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&a.isPropagationStopped())break e;s=o,a.currentTarget=c;try{s(a)}catch(u){xl(u)}a.currentTarget=null,s=l}else for(i=0;i<r.length;i++){if(l=(o=r[i]).instance,c=o.currentTarget,o=o.listener,l!==s&&a.isPropagationStopped())break e;s=o,a.currentTarget=c;try{s(a)}catch(u){xl(u)}a.currentTarget=null,s=l}}}}function $d(e,t){var n=t[Ft];void 0===n&&(n=t[Ft]=new Set);var r=e+"__bubble";n.has(r)||(Vd(t,e,2,!1),n.add(r))}function Hd(e,t,n){var r=0;t&&(r|=4),Vd(n,e,r,t)}var Bd="_reactListening"+Math.random().toString(36).slice(2);function zd(e){if(!e[Bd]){e[Bd]=!0,Yt.forEach(function(t){"selectionchange"!==t&&(Fd.has(t)||Hd(t,!1,e),Hd(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Bd]||(t[Bd]=!0,Hd("selectionchange",!1,t))}}function Vd(e,t,n,r){switch(hm(t)){case 2:var a=im;break;case 8:a=om;break;default:a=lm}n=a.bind(null,t,n,e),a=void 0,!zn||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Wd(e,t,n,r,a){var s=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var o=r.stateNode.containerInfo;if(o===a)break;if(4===i)for(i=r.return;null!==i;){var l=i.tag;if((3===l||4===l)&&i.stateNode.containerInfo===a)return;i=i.return}for(;null!==o;){if(null===(i=Vt(o)))return;if(5===(l=i.tag)||6===l||26===l||27===l){r=s=i;continue e}o=o.parentNode}}r=r.return}$n(function(){var r=s,a=Mn(n),i=[];e:{var o=Sa.get(e);if(void 0!==o){var l=rr,c=e;switch(e){case"keypress":if(0===Yn(n))break e;case"keydown":case"keyup":l=br;break;case"focusin":c="focus",l=cr;break;case"focusout":c="blur",l=cr;break;case"beforeblur":case"afterblur":l=cr;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=or;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=lr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=xr;break;case fa:case va:case ba:l=ur;break;case wa:l=kr;break;case"scroll":case"scrollend":l=sr;break;case"wheel":l=wr;break;case"copy":case"cut":case"paste":l=dr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=yr;break;case"toggle":case"beforetoggle":l=Sr}var u=!!(4&t),d=!u&&("scroll"===e||"scrollend"===e),h=u?null!==o?o+"Capture":null:o;u=[];for(var m,g=r;null!==g;){var p=g;if(m=p.stateNode,5!==(p=p.tag)&&26!==p&&27!==p||null===m||null===h||null!=(p=Hn(g,h))&&u.push(Kd(g,p,m)),d)break;g=g.return}0<u.length&&(o=new l(o,c,null,n,a),i.push({event:o,listeners:u}))}}if(!(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===Dn||!(c=n.relatedTarget||n.fromElement)||!Vt(c)&&!c[Ut])&&(l||o)&&(o=a.window===a?a:(o=a.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?Vt(c):null)&&(d=de(c),u=c.tag,c!==d||5!==u&&27!==u&&6!==u)&&(c=null)):(l=null,c=r),l!==c)){if(u=or,p="onMouseLeave",h="onMouseEnter",g="mouse","pointerout"!==e&&"pointerover"!==e||(u=yr,p="onPointerLeave",h="onPointerEnter",g="pointer"),d=null==l?o:Kt(l),m=null==c?o:Kt(c),(o=new u(p,g+"leave",l,n,a)).target=d,o.relatedTarget=m,p=null,Vt(a)===r&&((u=new u(h,g+"enter",c,n,a)).target=m,u.relatedTarget=d,p=u),d=p,l&&c)e:{for(h=c,g=0,m=u=l;m;m=Gd(m))g++;for(m=0,p=h;p;p=Gd(p))m++;for(;0<g-m;)u=Gd(u),g--;for(;0<m-g;)h=Gd(h),m--;for(;g--;){if(u===h||null!==h&&u===h.alternate)break e;u=Gd(u),h=Gd(h)}u=null}else u=null;null!==l&&Yd(i,o,l,u,!1),null!==c&&null!==d&&Yd(i,d,c,u,!0)}if("select"===(l=(o=r?Kt(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var f=Hr;else if(Mr(o))if(Br)f=Qr;else{f=Yr;var v=Gr}else!(l=o.nodeName)||"input"!==l.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type?r&&_n(r.elementType)&&(f=Hr):f=Jr;switch(f&&(f=f(e,r))?Rr(i,f,n,a):(v&&v(e,o,r),"focusout"===e&&r&&"number"===o.type&&null!=r.memoizedProps.value&&wn(o,"number",o.value)),v=r?Kt(r):window,e){case"focusin":(Mr(v)||"true"===v.contentEditable)&&(ia=v,oa=r,la=null);break;case"focusout":la=oa=ia=null;break;case"mousedown":ca=!0;break;case"contextmenu":case"mouseup":case"dragend":ca=!1,ua(i,n,a);break;case"selectionchange":if(sa)break;case"keydown":case"keyup":ua(i,n,a)}var b;if(Cr)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Lr?Pr(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(Ar&&"ko"!==n.locale&&(Lr||"onCompositionStart"!==y?"onCompositionEnd"===y&&Lr&&(b=Gn()):(Kn="value"in(Wn=a)?Wn.value:Wn.textContent,Lr=!0)),0<(v=qd(r,y)).length&&(y=new hr(y,e,null,n,a),i.push({event:y,listeners:v}),b?y.data=b:null!==(b=Ir(n))&&(y.data=b))),(b=Tr?function(e,t){switch(e){case"compositionend":return Ir(t);case"keypress":return 32!==t.which?null:(_r=!0,Er);case"textInput":return(e=t.data)===Er&&_r?null:e;default:return null}}(e,n):function(e,t){if(Lr)return"compositionend"===e||!Cr&&Pr(e,t)?(e=Gn(),qn=Kn=Wn=null,Lr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ar&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(y=qd(r,"onBeforeInput")).length&&(v=new hr("onBeforeInput","beforeinput",null,n,a),i.push({event:v,listeners:y}),v.data=b)),function(e,t,n,r,a){if("submit"===t&&n&&n.stateNode===a){var s=Ld((a[Rt]||null).action),i=r.submitter;i&&null!==(t=(t=i[Rt]||null)?Ld(t.formAction):i.getAttribute("formAction"))&&(s=t,i=null);var o=new rr("action","action",null,r,a);e.push({event:o,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==jd){var e=i?Dd(a,i):new FormData(a);Do(n,{pending:!0,data:e,method:a.method,action:s},null,e)}}else"function"==typeof s&&(o.preventDefault(),e=i?Dd(a,i):new FormData(a),Do(n,{pending:!0,data:e,method:a.method,action:s},s,e))},currentTarget:a}]})}}(i,e,r,n,a)}Od(i,t)})}function Kd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qd(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,s=a.stateNode;if(5!==(a=a.tag)&&26!==a&&27!==a||null===s||(null!=(a=Hn(e,n))&&r.unshift(Kd(e,a,s)),null!=(a=Hn(e,t))&&r.push(Kd(e,a,s))),3===e.tag)return r;e=e.return}return[]}function Gd(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Yd(e,t,n,r,a){for(var s=t._reactName,i=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,null!==l&&l===r)break;5!==o&&26!==o&&27!==o||null===c||(l=c,a?null!=(c=Hn(n,s))&&i.unshift(Kd(n,c,l)):a||null!=(c=Hn(n,s))&&i.push(Kd(n,c,l))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Jd=/\r\n?/g,Qd=/\u0000|\uFFFD/g;function Xd(e){return("string"==typeof e?e:""+e).replace(Jd,"\n").replace(Qd,"")}function Zd(e,t){return t=Xd(t),Xd(e)===t}function eh(){}function th(e,t,n,r,a,s){switch(n){case"children":"string"==typeof r?"body"===t||"textarea"===t&&""===r||Nn(e,r):("number"==typeof r||"bigint"==typeof r)&&"body"!==t&&Nn(e,""+r);break;case"className":sn(e,"class",r);break;case"tabIndex":sn(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":sn(e,n,r);break;case"style":En(e,r,s);break;case"data":if("object"!==t){sn(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"==typeof r||"symbol"==typeof r||"boolean"==typeof r){e.removeAttribute(n);break}r=Ln(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"==typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"==typeof s&&("formAction"===n?("input"!==t&&th(e,t,"name",a.name,a,null),th(e,t,"formEncType",a.formEncType,a,null),th(e,t,"formMethod",a.formMethod,a,null),th(e,t,"formTarget",a.formTarget,a,null)):(th(e,t,"encType",a.encType,a,null),th(e,t,"method",a.method,a,null),th(e,t,"target",a.target,a,null))),null==r||"symbol"==typeof r||"boolean"==typeof r){e.removeAttribute(n);break}r=Ln(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=eh);break;case"onScroll":null!=r&&$d("scroll",e);break;case"onScrollEnd":null!=r&&$d("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!=typeof r||!("__html"in r))throw Error(ce(61));if(null!=(n=r.__html)){if(null!=a.children)throw Error(ce(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!=typeof r&&"symbol"!=typeof r;break;case"muted":e.muted=r&&"function"!=typeof r&&"symbol"!=typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"==typeof r||"boolean"==typeof r||"symbol"==typeof r){e.removeAttribute("xlink:href");break}n=Ln(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!=typeof r&&"symbol"!=typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!=typeof r&&"symbol"!=typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!=typeof r&&"symbol"!=typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!=typeof r&&"symbol"!=typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"==typeof r||"symbol"==typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":$d("beforetoggle",e),$d("toggle",e),an(e,"popover",r);break;case"xlinkActuate":on(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":on(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":on(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":on(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":on(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":on(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":on(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":on(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":on(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":an(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&an(e,n=Pn.get(n)||n,r)}}function nh(e,t,n,r,a,s){switch(n){case"style":En(e,r,s);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!=typeof r||!("__html"in r))throw Error(ce(61));if(null!=(n=r.__html)){if(null!=a.children)throw Error(ce(60));e.innerHTML=n}}break;case"children":"string"==typeof r?Nn(e,r):("number"==typeof r||"bigint"==typeof r)&&Nn(e,""+r);break;case"onScroll":null!=r&&$d("scroll",e);break;case"onScrollEnd":null!=r&&$d("scrollend",e);break;case"onClick":null!=r&&(e.onclick=eh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Jt.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(a=n.endsWith("Capture"),t=n.slice(2,a?n.length-7:void 0),"function"==typeof(s=null!=(s=e[Rt]||null)?s[n]:null)&&e.removeEventListener(t,s,a),"function"!=typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):an(e,n,r):("function"!=typeof s&&null!==s&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,a)))}}function rh(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$d("error",e),$d("load",e);var r,a=!1,s=!1;for(r in n)if(n.hasOwnProperty(r)){var i=n[r];if(null!=i)switch(r){case"src":a=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(ce(137,t));default:th(e,t,r,i,n,null)}}return s&&th(e,t,"srcSet",n.srcSet,n,null),void(a&&th(e,t,"src",n.src,n,null));case"input":$d("invalid",e);var o=r=i=s=null,l=null,c=null;for(a in n)if(n.hasOwnProperty(a)){var u=n[a];if(null!=u)switch(a){case"name":s=u;break;case"type":i=u;break;case"checked":l=u;break;case"defaultChecked":c=u;break;case"value":r=u;break;case"defaultValue":o=u;break;case"children":case"dangerouslySetInnerHTML":if(null!=u)throw Error(ce(137,t));break;default:th(e,t,a,u,n,null)}}return kn(e,r,o,l,c,i,s,!1),void pn(e);case"select":for(s in $d("invalid",e),a=i=r=null,n)if(n.hasOwnProperty(s)&&null!=(o=n[s]))switch(s){case"value":r=o;break;case"defaultValue":i=o;break;case"multiple":a=o;default:th(e,t,s,o,n,null)}return t=r,n=i,e.multiple=!!a,void(null!=t?Sn(e,!!a,t,!1):null!=n&&Sn(e,!!a,n,!0));case"textarea":for(i in $d("invalid",e),r=s=a=null,n)if(n.hasOwnProperty(i)&&null!=(o=n[i]))switch(i){case"value":a=o;break;case"defaultValue":s=o;break;case"children":r=o;break;case"dangerouslySetInnerHTML":if(null!=o)throw Error(ce(91));break;default:th(e,t,i,o,n,null)}return Cn(e,a,s,r),void pn(e);case"option":for(l in n)if(n.hasOwnProperty(l)&&null!=(a=n[l]))if("selected"===l)e.selected=a&&"function"!=typeof a&&"symbol"!=typeof a;else th(e,t,l,a,n,null);return;case"dialog":$d("beforetoggle",e),$d("toggle",e),$d("cancel",e),$d("close",e);break;case"iframe":case"object":$d("load",e);break;case"video":case"audio":for(a=0;a<Ud.length;a++)$d(Ud[a],e);break;case"image":$d("error",e),$d("load",e);break;case"details":$d("toggle",e);break;case"embed":case"source":case"link":$d("error",e),$d("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&null!=(a=n[c]))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(ce(137,t));default:th(e,t,c,a,n,null)}return;default:if(_n(t)){for(u in n)n.hasOwnProperty(u)&&(void 0!==(a=n[u])&&nh(e,t,u,a,n,void 0));return}}for(o in n)n.hasOwnProperty(o)&&(null!=(a=n[o])&&th(e,t,o,a,n,null))}var ah=null,sh=null;function ih(e){return 9===e.nodeType?e:e.ownerDocument}function oh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function lh(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function ch(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"bigint"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var uh=null;var dh="function"==typeof setTimeout?setTimeout:void 0,hh="function"==typeof clearTimeout?clearTimeout:void 0,mh="function"==typeof Promise?Promise:void 0,gh="function"==typeof queueMicrotask?queueMicrotask:void 0!==mh?function(e){return mh.resolve(null).then(e).catch(ph)}:dh;function ph(e){setTimeout(function(){throw e})}function fh(e){return"head"===e}function vh(e,t){var n=t,r=0,a=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0<r&&8>r){n=r;var i=e.ownerDocument;if(1&n&&jh(i.documentElement),2&n&&jh(i.body),4&n)for(jh(n=i.head),i=n.firstChild;i;){var o=i.nextSibling,l=i.nodeName;i[Bt]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===i.rel.toLowerCase()||n.removeChild(i),i=o}}if(0===a)return e.removeChild(s),void _m(t);a--}else"$"===n||"$?"===n||"$!"===n?a++:r=n.charCodeAt(0)-48;else r=0;n=s}while(n);_m(t)}function bh(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":bh(n),zt(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function yh(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function xh(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var kh=null;function wh(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function Sh(e,t,n){switch(t=ih(n),e){case"html":if(!(e=t.documentElement))throw Error(ce(452));return e;case"head":if(!(e=t.head))throw Error(ce(453));return e;case"body":if(!(e=t.body))throw Error(ce(454));return e;default:throw Error(ce(451))}}function jh(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);zt(e)}var Ch=new Map,Nh=new Set;function Th(e){return"function"==typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Ah=Fe.d;Fe.d={f:function(){var e=Ah.f(),t=Vu();return e||t},r:function(e){var t=Wt(e);null!==t&&5===t.tag&&"form"===t.type?Ro(t):Ah.r(e)},D:function(e){Ah.D(e),_h("dns-prefetch",e,null)},C:function(e,t){Ah.C(e,t),_h("preconnect",e,t)},L:function(e,t,n){Ah.L(e,t,n);var r=Eh;if(r&&e&&t){var a='link[rel="preload"][as="'+yn(t)+'"]';"image"===t&&n&&n.imageSrcSet?(a+='[imagesrcset="'+yn(n.imageSrcSet)+'"]',"string"==typeof n.imageSizes&&(a+='[imagesizes="'+yn(n.imageSizes)+'"]')):a+='[href="'+yn(e)+'"]';var s=a;switch(t){case"style":s=Ih(e);break;case"script":s=Mh(e)}Ch.has(s)||(e=pe({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Ch.set(s,e),null!==r.querySelector(a)||"style"===t&&r.querySelector(Lh(s))||"script"===t&&r.querySelector(Rh(s))||(rh(t=r.createElement("link"),"link",e),Gt(t),r.head.appendChild(t)))}},m:function(e,t){Ah.m(e,t);var n=Eh;if(n&&e){var r=t&&"string"==typeof t.as?t.as:"script",a='link[rel="modulepreload"][as="'+yn(r)+'"][href="'+yn(e)+'"]',s=a;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Mh(e)}if(!Ch.has(s)&&(e=pe({rel:"modulepreload",href:e},t),Ch.set(s,e),null===n.querySelector(a))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Rh(s)))return}rh(r=n.createElement("link"),"link",e),Gt(r),n.head.appendChild(r)}}},X:function(e,t){Ah.X(e,t);var n=Eh;if(n&&e){var r=qt(n).hoistableScripts,a=Mh(e),s=r.get(a);s||((s=n.querySelector(Rh(a)))||(e=pe({src:e,async:!0},t),(t=Ch.get(a))&&$h(e,t),Gt(s=n.createElement("script")),rh(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(a,s))}},S:function(e,t,n){Ah.S(e,t,n);var r=Eh;if(r&&e){var a=qt(r).hoistableStyles,s=Ih(e);t=t||"default";var i=a.get(s);if(!i){var o={loading:0,preload:null};if(i=r.querySelector(Lh(s)))o.loading=5;else{e=pe({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Ch.get(s))&&Oh(e,n);var l=i=r.createElement("link");Gt(l),rh(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Fh(i,t,r)}i={type:"stylesheet",instance:i,count:1,state:o},a.set(s,i)}}},M:function(e,t){Ah.M(e,t);var n=Eh;if(n&&e){var r=qt(n).hoistableScripts,a=Mh(e),s=r.get(a);s||((s=n.querySelector(Rh(a)))||(e=pe({src:e,async:!0,type:"module"},t),(t=Ch.get(a))&&$h(e,t),Gt(s=n.createElement("script")),rh(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(a,s))}}};var Eh="undefined"==typeof document?null:document;function _h(e,t,n){var r=Eh;if(r&&"string"==typeof t&&t){var a=yn(t);a='link[rel="'+e+'"][href="'+a+'"]',"string"==typeof n&&(a+='[crossorigin="'+n+'"]'),Nh.has(a)||(Nh.add(a),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(a)&&(rh(t=r.createElement("link"),"link",e),Gt(t),r.head.appendChild(t)))}}function Ph(e,t,n,r){var a,s,i,o,l=(l=qe.current)?Th(l):null;if(!l)throw Error(ce(446));switch(e){case"meta":case"title":return null;case"style":return"string"==typeof n.precedence&&"string"==typeof n.href?(t=Ih(n.href),(r=(n=qt(l).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"==typeof n.href&&"string"==typeof n.precedence){e=Ih(n.href);var c=qt(l).hoistableStyles,u=c.get(e);if(u||(l=l.ownerDocument||l,u={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,u),(c=l.querySelector(Lh(e)))&&!c._p&&(u.instance=c,u.state.loading=5),Ch.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Ch.set(e,n),c||(a=l,s=e,i=n,o=u.state,a.querySelector('link[rel="preload"][as="style"]['+s+"]")?o.loading=1:(s=a.createElement("link"),o.preload=s,s.addEventListener("load",function(){return o.loading|=1}),s.addEventListener("error",function(){return o.loading|=2}),rh(s,"link",i),Gt(s),a.head.appendChild(s))))),t&&null===r)throw Error(ce(528,""));return u}if(t&&null!==r)throw Error(ce(529,""));return null;case"script":return t=n.async,"string"==typeof(n=n.src)&&t&&"function"!=typeof t&&"symbol"!=typeof t?(t=Mh(n),(r=(n=qt(l).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(ce(444,e))}}function Ih(e){return'href="'+yn(e)+'"'}function Lh(e){return'link[rel="stylesheet"]['+e+"]"}function Dh(e){return pe({},e,{"data-precedence":e.precedence,precedence:null})}function Mh(e){return'[src="'+yn(e)+'"]'}function Rh(e){return"script[async]"+e}function Uh(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+yn(n.href)+'"]');if(r)return t.instance=r,Gt(r),r;var a=pe({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return Gt(r=(e.ownerDocument||e).createElement("style")),rh(r,"style",a),Fh(r,n.precedence,e),t.instance=r;case"stylesheet":a=Ih(n.href);var s=e.querySelector(Lh(a));if(s)return t.state.loading|=4,t.instance=s,Gt(s),s;r=Dh(n),(a=Ch.get(a))&&Oh(r,a),Gt(s=(e.ownerDocument||e).createElement("link"));var i=s;return i._p=new Promise(function(e,t){i.onload=e,i.onerror=t}),rh(s,"link",r),t.state.loading|=4,Fh(s,n.precedence,e),t.instance=s;case"script":return s=Mh(n.src),(a=e.querySelector(Rh(s)))?(t.instance=a,Gt(a),a):(r=n,(a=Ch.get(s))&&$h(r=pe({},n),a),Gt(a=(e=e.ownerDocument||e).createElement("script")),rh(a,"link",r),e.head.appendChild(a),t.instance=a);case"void":return null;default:throw Error(ce(443,t.type))}else"stylesheet"===t.type&&!(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Fh(r,n.precedence,e));return t.instance}function Fh(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=r.length?r[r.length-1]:null,s=a,i=0;i<r.length;i++){var o=r[i];if(o.dataset.precedence===t)s=o;else if(s!==a)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Oh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function $h(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Hh=null;function Bh(e,t,n){if(null===Hh){var r=new Map,a=Hh=new Map;a.set(n,r)}else(r=(a=Hh).get(n))||(r=new Map,a.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),a=0;a<n.length;a++){var s=n[a];if(!(s[Bt]||s[Mt]||"link"===e&&"stylesheet"===s.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==s.namespaceURI){var i=s.getAttribute(t)||"";i=e+i;var o=r.get(i);o?o.push(s):r.set(i,[s])}}return r}function zh(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function Vh(e){return!!("stylesheet"!==e.type||3&e.state.loading)}var Wh=null;function Kh(){}function qh(){if(this.count--,0===this.count)if(this.stylesheets)Yh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Gh=null;function Yh(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Gh=new Map,t.forEach(Jh,e),Gh=null,qh.call(e))}function Jh(e,t){if(!(4&t.state.loading)){var n=Gh.get(e);if(n)var r=n.get(null);else{n=new Map,Gh.set(e,n);for(var a=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<a.length;s++){var i=a[s];"LINK"!==i.nodeName&&"not all"===i.getAttribute("media")||(n.set(i.dataset.precedence,i),r=i)}r&&n.set(null,r)}i=(a=t.instance).getAttribute("data-precedence"),(s=n.get(i)||r)===r&&n.set(null,a),n.set(i,a),this.count++,r=qh.bind(this),a.addEventListener("load",r),a.addEventListener("error",r),s?s.parentNode.insertBefore(a,s.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(a,e.firstChild),t.state.loading|=4}}var Qh={$$typeof:je,Provider:null,Consumer:null,_currentValue:Oe,_currentValue2:Oe,_threadCount:0};function Xh(e,t,n,r,a,s,i,o){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Tt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tt(0),this.hiddenUpdates=Tt(null),this.identifierPrefix=r,this.onUncaughtError=a,this.onCaughtError=s,this.onRecoverableError=i,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function Zh(e,t,n,r,a,s,i,o,l,c,u,d){return e=new Xh(e,t,n,i,o,l,c,d),t=1,!0===s&&(t|=24),s=Oa(3,null,null,t),e.current=s,s.stateNode=e,(t=Rs()).refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:r,isDehydrated:n,cache:t},si(s),e}function em(e){return e?e=Ua:Ua}function tm(e,t,n,r,a,s){a=em(a),null===r.context?r.context=a:r.pendingContext=a,(r=oi(t)).payload={element:n},null!==(s=void 0===s?null:s)&&(r.callback=s),null!==(n=li(e,r,t))&&(Ou(n,0,t),ci(n,e,t))}function nm(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rm(e,t){nm(e,t),(e=e.alternate)&&nm(e,t)}function am(e){if(13===e.tag){var t=Da(e,67108864);null!==t&&Ou(t,0,67108864),rm(e,67108864)}}var sm=!0;function im(e,t,n,r){var a=Ue.T;Ue.T=null;var s=Fe.p;try{Fe.p=2,lm(e,t,n,r)}finally{Fe.p=s,Ue.T=a}}function om(e,t,n,r){var a=Ue.T;Ue.T=null;var s=Fe.p;try{Fe.p=8,lm(e,t,n,r)}finally{Fe.p=s,Ue.T=a}}function lm(e,t,n,r){if(sm){var a=cm(r);if(null===a)Wd(e,t,r,um,n),km(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return gm=wm(gm,e,t,n,r,a),!0;case"dragenter":return pm=wm(pm,e,t,n,r,a),!0;case"mouseover":return fm=wm(fm,e,t,n,r,a),!0;case"pointerover":var s=a.pointerId;return vm.set(s,wm(vm.get(s)||null,e,t,n,r,a)),!0;case"gotpointercapture":return s=a.pointerId,bm.set(s,wm(bm.get(s)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(km(e,r),4&t&&-1<xm.indexOf(e)){for(;null!==a;){var s=Wt(a);if(null!==s)switch(s.tag){case 3:if((s=s.stateNode).current.memoizedState.isDehydrated){var i=kt(s.pendingLanes);if(0!==i){var o=s;for(o.pendingLanes|=2,o.entangledLanes|=2;i;){var l=1<<31-ft(i);o.entanglements[1]|=l,i&=~l}Cd(s),!(6&su)&&(Cu=at()+500,Nd(0))}}break;case 13:null!==(o=Da(s,2))&&Ou(o,0,2),Vu(),rm(s,2)}if(null===(s=cm(r))&&Wd(e,t,r,um,n),s===a)break;a=s}null!==a&&r.stopPropagation()}else Wd(e,t,r,null,n)}}function cm(e){return dm(e=Mn(e))}var um=null;function dm(e){if(um=null,null!==(e=Vt(e))){var t=de(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=he(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return um=e,null}function hm(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(st()){case it:return 2;case ot:return 8;case lt:case ct:return 32;case ut:return 268435456;default:return 32}default:return 32}}var mm=!1,gm=null,pm=null,fm=null,vm=new Map,bm=new Map,ym=[],xm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function km(e,t){switch(e){case"focusin":case"focusout":gm=null;break;case"dragenter":case"dragleave":pm=null;break;case"mouseover":case"mouseout":fm=null;break;case"pointerover":case"pointerout":vm.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":bm.delete(t.pointerId)}}function wm(e,t,n,r,a,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[a]},null!==t&&(null!==(t=Wt(t))&&am(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Sm(e){var t=Vt(e.target);if(null!==t){var n=de(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=he(n)))return e.blockedOn=t,void function(e,t){var n=Fe.p;try{return Fe.p=e,t()}finally{Fe.p=n}}(e.priority,function(){if(13===n.tag){var e=Uu();e=Pt(e);var t=Da(n,e);null!==t&&Ou(t,0,e),rm(n,e)}})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jm(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=cm(e.nativeEvent);if(null!==n)return null!==(t=Wt(n))&&am(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Dn=r,n.target.dispatchEvent(r),Dn=null,t.shift()}return!0}function Cm(e,t,n){jm(e)&&n.delete(t)}function Nm(){mm=!1,null!==gm&&jm(gm)&&(gm=null),null!==pm&&jm(pm)&&(pm=null),null!==fm&&jm(fm)&&(fm=null),vm.forEach(Cm),bm.forEach(Cm)}function Tm(e,t){e.blockedOn===t&&(e.blockedOn=null,mm||(mm=!0,ie.unstable_scheduleCallback(ie.unstable_NormalPriority,Nm)))}var Am=null;function Em(e){Am!==e&&(Am=e,ie.unstable_scheduleCallback(ie.unstable_NormalPriority,function(){Am===e&&(Am=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],a=e[t+2];if("function"!=typeof r){if(null===dm(r||n))continue;break}var s=Wt(n);null!==s&&(e.splice(t,3),t-=3,Do(s,{pending:!0,data:a,method:n.method,action:r},r,a))}}))}function _m(e){function t(t){return Tm(t,e)}null!==gm&&Tm(gm,e),null!==pm&&Tm(pm,e),null!==fm&&Tm(fm,e),vm.forEach(t),bm.forEach(t);for(var n=0;n<ym.length;n++){var r=ym[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<ym.length&&null===(n=ym[0]).blockedOn;)Sm(n),null===n.blockedOn&&ym.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var a=n[r],s=n[r+1],i=a[Rt]||null;if("function"==typeof s)i||Em(n);else if(i){var o=null;if(s&&s.hasAttribute("formAction")){if(a=s,i=s[Rt]||null)o=i.formAction;else if(null!==dm(a))continue}else o=i.action;"function"==typeof o?n[r+1]=o:(n.splice(r,3),r-=3),Em(n)}}}function Pm(e){this._internalRoot=e}function Im(e){this._internalRoot=e}Im.prototype.render=Pm.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(ce(409));tm(t.current,Uu(),e,t,null,null)},Im.prototype.unmount=Pm.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;tm(e.current,2,null,e,null,null),Vu(),t[Ut]=null}},Im.prototype.unstable_scheduleHydration=function(e){if(e){var t=Lt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ym.length&&0!==t&&t<ym[n].priority;n++);ym.splice(n,0,e),0===n&&Sm(e)}};var Lm=oe.version;if("19.1.1"!==Lm)throw Error(ce(527,Lm,"19.1.1"));Fe.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(ce(188));throw e=Object.keys(e).join(","),Error(ce(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=de(e)))throw Error(ce(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var s=a.alternate;if(null===s){if(null!==(r=a.return)){n=r;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===n)return me(a),e;if(s===r)return me(a),t;s=s.sibling}throw Error(ce(188))}if(n.return!==r.return)n=a,r=s;else{for(var i=!1,o=a.child;o;){if(o===n){i=!0,n=a,r=s;break}if(o===r){i=!0,r=a,n=s;break}o=o.sibling}if(!i){for(o=s.child;o;){if(o===n){i=!0,n=s,r=a;break}if(o===r){i=!0,r=s,n=a;break}o=o.sibling}if(!i)throw Error(ce(189))}}if(n.alternate!==r)throw Error(ce(190))}if(3!==n.tag)throw Error(ce(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?ge(e):null)?null:e.stateNode};var Dm={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Ue,reconcilerVersion:"19.1.1"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Mm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mm.isDisabled&&Mm.supportsFiber)try{mt=Mm.inject(Dm),gt=Mm}catch(sy){}}K.createRoot=function(e,t){if(!ue(e))throw Error(ce(299));var n=!1,r="",a=kl,s=wl,i=Sl;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(a=t.onUncaughtError),void 0!==t.onCaughtError&&(s=t.onCaughtError),void 0!==t.onRecoverableError&&(i=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Zh(e,1,!1,null,0,n,r,a,s,i,0,null),e[Ut]=t.current,zd(e),new Pm(t)},K.hydrateRoot=function(e,t,n){if(!ue(e))throw Error(ce(299));var r=!1,a="",s=kl,i=wl,o=Sl,l=null;return null!=n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onUncaughtError&&(s=n.onUncaughtError),void 0!==n.onCaughtError&&(i=n.onCaughtError),void 0!==n.onRecoverableError&&(o=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(l=n.formState)),(t=Zh(e,1,!0,t,0,r,a,s,i,o,0,l)).context=em(null),n=t.current,(a=oi(r=Pt(r=Uu()))).callback=null,li(n,a,r),n=r,t.current.lanes=n,At(t,n),Cd(t),e[Ut]=t.current,zd(e),new Im(t)},K.version="19.1.1",function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(sy){console.error(sy)}}(),W.exports=K;const Rm=t(W.exports),Um={},Fm=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),n=e?.nonce||e?.getAttribute("nonce");r=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in Um)return;Um[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":"modulepreload",t||(a.as="script"),a.crossOrigin="",a.href=e,n&&a.setAttribute("nonce",n),document.head.appendChild(a),t?new Promise((t,n)=>{a.addEventListener("load",t),a.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function a(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(const e of t||[])"rejected"===e.status&&a(e.reason);return e().catch(a)})};class Om extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class $m extends Om{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Hm extends Om{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Bm extends Om{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var zm;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(zm||(zm={}));var Vm=function(e,t,n,r){return new(n||(n=Promise))(function(a,s){function i(e){try{l(r.next(e))}catch(ay){s(ay)}}function o(e){try{l(r.throw(e))}catch(ay){s(ay)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};class Wm{constructor(e,{headers:t={},customFetch:n,region:r=zm.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=(e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Fm(async()=>{const{default:e}=await Promise.resolve().then(()=>ag);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)})(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return Vm(this,void 0,void 0,function*(){try{const{headers:r,method:a,body:s}=t;let i={},{region:o}=t;o||(o=this.region);const l=new URL(`${this.url}/${e}`);let c;o&&"any"!==o&&(i["x-region"]=o,l.searchParams.set("forceFunctionRegion",o)),s&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&("undefined"!=typeof Blob&&s instanceof Blob||s instanceof ArrayBuffer?(i["Content-Type"]="application/octet-stream",c=s):"string"==typeof s?(i["Content-Type"]="text/plain",c=s):"undefined"!=typeof FormData&&s instanceof FormData?c=s:(i["Content-Type"]="application/json",c=JSON.stringify(s)));const u=yield this.fetch(l.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},i),this.headers),r),body:c}).catch(e=>{throw new $m(e)}),d=u.headers.get("x-relay-error");if(d&&"true"===d)throw new Hm(u);if(!u.ok)throw new Bm(u);let h,m=(null!==(n=u.headers.get("Content-Type"))&&void 0!==n?n:"text/plain").split(";")[0].trim();return h="application/json"===m?yield u.json():"application/octet-stream"===m?yield u.blob():"text/event-stream"===m?u:"multipart/form-data"===m?yield u.formData():yield u.text(),{data:h,error:null,response:u}}catch(r){return{data:null,error:r,response:r instanceof Bm||r instanceof Hm?r.context:void 0}}})}}var Km={},qm={},Gm={},Ym={},Jm={},Qm={},Xm=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();const Zm=Xm.fetch,eg=Xm.fetch.bind(Xm),tg=Xm.Headers,ng=Xm.Request,rg=Xm.Response,ag=Object.freeze(Object.defineProperty({__proto__:null,Headers:tg,Request:ng,Response:rg,default:eg,fetch:Zm},Symbol.toStringTag,{value:"Module"})),sg=n(ag);var ig={};Object.defineProperty(ig,"__esModule",{value:!0});let og=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};ig.default=og;var lg=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Qm,"__esModule",{value:!0});const cg=lg(sg),ug=lg(ig);Qm.default=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(t=e.shouldThrowOnError)&&void 0!==t&&t,this.signal=e.signal,this.isMaybeSingle=null!==(n=e.isMaybeSingle)&&void 0!==n&&n,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=cg.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,n,r,a;let s=null,i=null,o=null,l=e.status,c=e.statusText;if(e.ok){if("HEAD"!==this.method){const n=await e.text();""===n||(i="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null===(t=this.headers.get("Accept"))||void 0===t?void 0:t.includes("application/vnd.pgrst.plan+text"))?n:JSON.parse(n))}const a=null===(n=this.headers.get("Prefer"))||void 0===n?void 0:n.match(/count=(exact|planned|estimated)/),u=null===(r=e.headers.get("content-range"))||void 0===r?void 0:r.split("/");a&&u&&u.length>1&&(o=parseInt(u[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(i)&&(i.length>1?(s={code:"PGRST116",details:`Results contain ${i.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},i=null,o=null,l=406,c="Not Acceptable"):i=1===i.length?i[0]:null)}else{const t=await e.text();try{s=JSON.parse(t),Array.isArray(s)&&404===e.status&&(i=[],s=null,l=200,c="OK")}catch(u){404===e.status&&""===t?(l=204,c="No Content"):s={message:t}}if(s&&this.isMaybeSingle&&(null===(a=null==s?void 0:s.details)||void 0===a?void 0:a.includes("0 rows"))&&(s=null,l=200,c="OK"),s&&this.shouldThrowOnError)throw new ug.default(s)}return{error:s,data:i,count:o,status:l,statusText:c}});return this.shouldThrowOnError||(n=n.catch(e=>{var t,n,r;return{error:{message:`${null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null==e?void 0:e.message}`,details:`${null!==(n=null==e?void 0:e.stack)&&void 0!==n?n:""}`,hint:"",code:`${null!==(r=null==e?void 0:e.code)&&void 0!==r?r:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}};var dg=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Jm,"__esModule",{value:!0});const hg=dg(Qm);let mg=class extends hg.default{select(e){let t=!1;const n=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:a=r}={}){const s=a?`${a}.order`:"order",i=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${i?`${i},`:""}${e}.${t?"asc":"desc"}${void 0===n?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const r=void 0===n?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){const a=void 0===r?"offset":`${r}.offset`,s=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(s,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:a=!1,format:s="text"}={}){var i;const o=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,a?"wal":null].filter(Boolean).join("|"),l=null!==(i=this.headers.get("Accept"))&&void 0!==i?i:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${l}"; options=${o};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};Jm.default=mg;var gg=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ym,"__esModule",{value:!0});const pg=gg(Jm);let fg=class extends pg.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(e=>"string"==typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let a="";"plain"===r?a="pl":"phrase"===r?a="ph":"websearch"===r&&(a="w");const s=void 0===n?"":`(${n})`;return this.url.searchParams.append(e,`${a}fts${s}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}};Ym.default=fg;var vg=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Gm,"__esModule",{value:!0});const bg=vg(Ym);Gm.default=class{constructor(e,{headers:t={},schema:n,fetch:r}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=r}select(e,{head:t=!1,count:n}={}){const r=t?"HEAD":"GET";let a=!1;const s=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!a?"":('"'===e&&(a=!a),e)).join("");return this.url.searchParams.set("select",s),n&&this.headers.append("Prefer",`count=${n}`),new bg.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:n=!0}={}){var r;if(t&&this.headers.append("Prefer",`count=${t}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new bg.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(r=this.fetch)&&void 0!==r?r:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:a=!0}={}){var s;if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),void 0!==t&&this.url.searchParams.set("on_conflict",t),r&&this.headers.append("Prefer",`count=${r}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new bg.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(s=this.fetch)&&void 0!==s?s:fetch})}update(e,{count:t}={}){var n;return t&&this.headers.append("Prefer",`count=${t}`),new bg.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(n=this.fetch)&&void 0!==n?n:fetch})}delete({count:e}={}){var t;return e&&this.headers.append("Prefer",`count=${e}`),new bg.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(t=this.fetch)&&void 0!==t?t:fetch})}};var yg=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qm,"__esModule",{value:!0});const xg=yg(Gm),kg=yg(Ym);qm.default=class e{constructor(e,{headers:t={},schema:n,fetch:r}={}){this.url=e,this.headers=new Headers(t),this.schemaName=n,this.fetch=r}from(e){const t=new URL(`${this.url}/${e}`);return new xg.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new e(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(e,t={},{head:n=!1,get:r=!1,count:a}={}){var s;let i;const o=new URL(`${this.url}/rpc/${e}`);let l;n||r?(i=n?"HEAD":"GET",Object.entries(t).filter(([e,t])=>void 0!==t).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`]).forEach(([e,t])=>{o.searchParams.append(e,t)})):(i="POST",l=t);const c=new Headers(this.headers);return a&&c.set("Prefer",`count=${a}`),new kg.default({method:i,url:o,headers:c,schema:this.schemaName,body:l,fetch:null!==(s=this.fetch)&&void 0!==s?s:fetch})}};var wg=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Km,"__esModule",{value:!0}),Km.PostgrestError=Km.PostgrestBuilder=Km.PostgrestTransformBuilder=Km.PostgrestFilterBuilder=Km.PostgrestQueryBuilder=Km.PostgrestClient=void 0;const Sg=wg(qm);Km.PostgrestClient=Sg.default;const jg=wg(Gm);Km.PostgrestQueryBuilder=jg.default;const Cg=wg(Ym);Km.PostgrestFilterBuilder=Cg.default;const Ng=wg(Jm);Km.PostgrestTransformBuilder=Ng.default;const Tg=wg(Qm);Km.PostgrestBuilder=Tg.default;const Ag=wg(ig);Km.PostgrestError=Ag.default;var Eg=Km.default={PostgrestClient:Sg.default,PostgrestQueryBuilder:jg.default,PostgrestFilterBuilder:Cg.default,PostgrestTransformBuilder:Ng.default,PostgrestBuilder:Tg.default,PostgrestError:Ag.default};const{PostgrestClient:_g,PostgrestQueryBuilder:Pg,PostgrestFilterBuilder:Ig,PostgrestTransformBuilder:Lg,PostgrestBuilder:Dg,PostgrestError:Mg}=Eg;class Rg{static detectEnvironment(){var e;if("undefined"!=typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!=typeof global&&void 0!==global.WebSocket)return{type:"native",constructor:global.WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocketPair&&void 0===globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!=typeof globalThis&&globalThis.EdgeRuntime||"undefined"!=typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!=typeof process&&process.versions&&process.versions.node){const e=parseInt(process.versions.node.split(".")[0]);return e>=22?void 0!==globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${e} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${e} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`\n\nSuggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}}const Ug=1e4;var Fg,Og,$g,Hg,Bg,zg;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(Fg||(Fg={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(Og||(Og={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}($g||($g={})),function(e){e.websocket="websocket"}(Hg||(Hg={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(Bg||(Bg={}));class Vg{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const r=t.getUint8(1),a=t.getUint8(2);let s=this.HEADER_LENGTH+2;const i=n.decode(e.slice(s,s+r));s+=r;const o=n.decode(e.slice(s,s+a));s+=a;return{ref:null,topic:i,event:o,payload:JSON.parse(n.decode(e.slice(s,e.byteLength)))}}}class Wg{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(zg||(zg={}));const Kg=(e,t,n={})=>{var r;const a=null!==(r=n.skipTypes)&&void 0!==r?r:[];return Object.keys(t).reduce((n,r)=>(n[r]=qg(r,e,t,a),n),{})},qg=(e,t,n,r)=>{const a=t.find(t=>t.name===e),s=null==a?void 0:a.type,i=n[e];return s&&!r.includes(s)?Gg(s,i):Yg(i)},Gg=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return Zg(t,n)}switch(e){case zg.bool:return Jg(t);case zg.float4:case zg.float8:case zg.int2:case zg.int4:case zg.int8:case zg.numeric:case zg.oid:return Qg(t);case zg.json:case zg.jsonb:return Xg(t);case zg.timestamp:return ep(t);case zg.abstime:case zg.date:case zg.daterange:case zg.int4range:case zg.int8range:case zg.money:case zg.reltime:case zg.text:case zg.time:case zg.timestamptz:case zg.timetz:case zg.tsrange:case zg.tstzrange:default:return Yg(t)}},Yg=e=>e,Jg=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Qg=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Xg=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Zg=(e,t)=>{if("string"!=typeof e)return e;const n=e.length-1,r=e[n];if("{"===e[0]&&"}"===r){let r;const s=e.slice(1,n);try{r=JSON.parse("["+s+"]")}catch(a){r=s?s.split(","):[]}return r.map(e=>Gg(t,e))}return e},ep=e=>"string"==typeof e?e.replace(" ","T"):e,tp=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class np{constructor(e,t,n={},r=1e4){this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var rp,ap,sp,ip;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(rp||(rp={}));class op{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.joinRef=this.channel._joinRef(),this.state=op.syncState(this.state,e,t,n),this.pendingDiffs.forEach(e=>{this.state=op.syncDiff(this.state,e,t,n)}),this.pendingDiffs=[],r()}),this.channel._on(n.diff,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=op.syncDiff(this.state,e,t,n),r())}),this.onJoin((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})}),this.onLeave((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,r){const a=this.cloneDeep(e),s=this.transformState(t),i={},o={};return this.map(a,(e,t)=>{s[e]||(o[e]=t)}),this.map(s,(e,t)=>{const n=a[e];if(n){const r=t.map(e=>e.presence_ref),a=n.map(e=>e.presence_ref),s=t.filter(e=>a.indexOf(e.presence_ref)<0),l=n.filter(e=>r.indexOf(e.presence_ref)<0);s.length>0&&(i[e]=s),l.length>0&&(o[e]=l)}else i[e]=t}),this.syncDiff(a,{joins:i,leaves:o},n,r)}static syncDiff(e,t,n,r){const{joins:a,leaves:s}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(a,(t,r)=>{var a;const s=null!==(a=e[t])&&void 0!==a?a:[];if(e[t]=this.cloneDeep(r),s.length>0){const n=e[t].map(e=>e.presence_ref),r=s.filter(e=>n.indexOf(e.presence_ref)<0);e[t].unshift(...r)}n(t,s,r)}),this.map(s,(t,n)=>{let a=e[t];if(!a)return;const s=n.map(e=>e.presence_ref);a=a.filter(e=>s.indexOf(e.presence_ref)<0),e[t]=a,r(t,a,n),0===a.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const r=e[n];return t[n]="metas"in r?r.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(ap||(ap={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(sp||(sp={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(ip||(ip={}));class lp{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=Og.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new np(this,$g.join,this.params,this.timeout),this.rejoinTimer=new Wg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Og.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Og.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=Og.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Og.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=Og.errored,this.rejoinTimer.scheduleTimeout())}),this._on($g.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new op(this),this.broadcastEndpointURL=tp(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var n,r;if(this.socket.isConnected()||this.socket.connect(),this.state==Og.closed){const{config:{broadcast:a,presence:s,private:i}}=this.params,o=null!==(r=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map(e=>e.filter))&&void 0!==r?r:[],l=!!this.bindings[sp.PRESENCE]&&this.bindings[sp.PRESENCE].length>0,c={},u={broadcast:a,presence:Object.assign(Object.assign({},s),{enabled:l}),postgres_changes:o,private:i};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this._onError(t=>null==e?void 0:e(ip.CHANNEL_ERROR,t)),this._onClose(()=>null==e?void 0:e(ip.CLOSED)),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:t})=>{var n;if(this.socket.setAuth(),void 0!==t){const r=this.bindings.postgres_changes,a=null!==(n=null==r?void 0:r.length)&&void 0!==n?n:0,s=[];for(let n=0;n<a;n++){const a=r[n],{filter:{event:i,schema:o,table:l,filter:c}}=a,u=t&&t[n];if(!u||u.event!==i||u.schema!==o||u.table!==l||u.filter!==c)return this.unsubscribe(),this.state=Og.errored,void(null==e||e(ip.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));s.push(Object.assign(Object.assign({},a),{id:u.id}))}return this.bindings.postgres_changes=s,void(e&&e(ip.SUBSCRIBED))}null==e||e(ip.SUBSCRIBED)}).receive("error",t=>{this.state=Og.errored,null==e||e(ip.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null==e||e(ip.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this.state===Og.joined&&e===sp.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,n)}async send(e,t={}){var n,r;if(this._canPush()||"broadcast"!==e.type)return new Promise(n=>{var r,a,s;const i=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(s=null===(a=null===(r=this.params)||void 0===r?void 0:r.config)||void 0===a?void 0:a.broadcast)||void 0===s?void 0:s.ack)||n("ok"),i.receive("ok",()=>n("ok")),i.receive("error",()=>n("error")),i.receive("timeout",()=>n("timed out"))});{const{event:s,payload:i}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:i,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(n=t.timeout)&&void 0!==n?n:this.timeout);return await(null===(r=e.body)||void 0===r?void 0:r.cancel()),e.ok?"ok":"error"}catch(a){return"AbortError"===a.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Og.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger($g.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(r=>{n=new np(this,$g.leave,{},e),n.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{null==n||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Og.closed,this.bindings={}}async _fetchWithTimeout(e,t,n){const r=new AbortController,a=setTimeout(()=>r.abort(),n),s=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(a),s}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new np(this,e,t,n);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,a;const s=e.toLocaleLowerCase(),{close:i,error:o,leave:l,join:c}=$g;if(n&&[i,o,l,c].indexOf(s)>=0&&n!==this._joinRef())return;let u=this._onMessage(s,t,n);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?null===(r=this.bindings.postgres_changes)||void 0===r||r.filter(e=>{var t,n,r;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(r=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===r?void 0:r.toLocaleLowerCase())===s}).map(e=>e.callback(u,n)):null===(a=this.bindings[s])||void 0===a||a.filter(e=>{var n,r,a,i,o,l;if(["broadcast","presence","postgres_changes"].includes(s)){if("id"in e){const s=e.id,i=null===(n=e.filter)||void 0===n?void 0:n.event;return s&&(null===(r=t.ids)||void 0===r?void 0:r.includes(s))&&("*"===i||(null==i?void 0:i.toLocaleLowerCase())===(null===(a=t.data)||void 0===a?void 0:a.type.toLocaleLowerCase()))}{const n=null===(o=null===(i=null==e?void 0:e.filter)||void 0===i?void 0:i.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===n||n===(null===(l=null==t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===s}).map(e=>{if("object"==typeof u&&"ids"in u){const e=u.data,{schema:t,table:n,commit_timestamp:r,type:a,errors:s}=e,i={schema:t,table:n,commit_timestamp:r,eventType:a,new:{},old:{},errors:s};u=Object.assign(Object.assign({},i),this._getPayloadRecords(e))}e.callback(u,n)})}_isClosed(){return this.state===Og.closed}_isJoined(){return this.state===Og.joined}_isJoining(){return this.state===Og.joining}_isLeaving(){return this.state===Og.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const r=e.toLocaleLowerCase(),a={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(a):this.bindings[r]=[a],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(e=>{var r;return!((null===(r=e.type)||void 0===r?void 0:r.toLocaleLowerCase())===n&&lp.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on($g.close,{},e)}_onError(e){this._on($g.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Og.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=Kg(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=Kg(e.columns,e.old_record)),t}}const cp=()=>{},up=25e3,dp=10,hp=100,mp=[1e3,2e3,5e3,1e4];class gp{constructor(e,t){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ug,this.transport=null,this.heartbeatIntervalMs=up,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=cp,this.ref=0,this.reconnectTimer=null,this.logger=cp,this.conn=null,this.sendBuffer=[],this.serializer=new Vg,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Fm(async()=>{const{default:e}=await Promise.resolve().then(()=>ag);return{default:e}},void 0).then(({default:t})=>t(...e)).catch(e=>{throw new Error(`Failed to load @supabase/node-fetch: ${e.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):fetch),(...e)=>t(...e)},!(null===(n=null==t?void 0:t.params)||void 0===n?void 0:n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${Hg.websocket}`,this.httpEndpoint=tp(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null==t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Rg.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error(`${t}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`);throw new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Fg.connecting:return Bg.Connecting;case Fg.open:return Bg.Open;case Fg.closing:return Bg.Closing;default:return Bg.Closed}}isConnected(){return this.connectionState()===Bg.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e,t={config:{}}){const n=`realtime:${e}`,r=this.getChannels().find(e=>e.topic===n);if(r)return r;{const n=new lp(`realtime:${e}`,t,this);return this.channels.push(n),n}}push(e){const{topic:t,event:n,payload:r,ref:a}=e,s=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${n} (${a})`,r),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},hp);this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}else this.heartbeatCallback("disconnected")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{"phoenix"===e.topic&&"phx_reply"===e.event&&this.heartbeatCallback("ok"===e.payload.status?"ok":"error"),e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:n,payload:r,ref:a}=e,s=a?`(${a})`:"",i=r.status||"";this.log("receive",`${i} ${t} ${n} ${s}`.trim(),r),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(n,r,a)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger($g.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?";return`${e}${n}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e,t=!1){this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;t=e||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(e=>{const n={access_token:t,version:"realtime-js/2.15.1"};t&&e.updateJoinPayload(n),e.joinedOnce&&e._isJoined()&&e._push($g.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(t)}catch(ay){this.log("error",`error in ${e} callback`,ay)}})}catch(ay){this.log("error",`error triggering ${e} callbacks`,ay)}}_setupReconnectionTimer(){this.reconnectTimer=new Wg(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},dp)},this.reconnectAfterMs)}_initializeOptions(e){var t,n,r,a,s,i,o,l;if(this.transport=null!==(t=null==e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(n=null==e?void 0:e.timeout)&&void 0!==n?n:Ug,this.heartbeatIntervalMs=null!==(r=null==e?void 0:e.heartbeatIntervalMs)&&void 0!==r?r:up,this.worker=null!==(a=null==e?void 0:e.worker)&&void 0!==a&&a,this.accessToken=null!==(s=null==e?void 0:e.accessToken)&&void 0!==s?s:null,(null==e?void 0:e.params)&&(this.params=e.params),(null==e?void 0:e.logger)&&(this.logger=e.logger),((null==e?void 0:e.logLevel)||(null==e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(i=null==e?void 0:e.reconnectAfterMs)&&void 0!==i?i:e=>mp[e-1]||1e4,this.encode=null!==(o=null==e?void 0:e.encode)&&void 0!==o?o:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(l=null==e?void 0:e.decode)&&void 0!==l?l:this.serializer.decode.bind(this.serializer),this.worker){if("undefined"!=typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null==e?void 0:e.workerUrl}}}class pp extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function fp(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class vp extends pp{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class bp extends pp{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var yp=function(e,t,n,r){return new(n||(n=Promise))(function(a,s){function i(e){try{l(r.next(e))}catch(ay){s(ay)}}function o(e){try{l(r.throw(e))}catch(ay){s(ay)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};const xp=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Fm(async()=>{const{default:e}=await Promise.resolve().then(()=>ag);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},kp=e=>{if(Array.isArray(e))return e.map(e=>kp(e));if("function"==typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([e,n])=>{const r=e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[r]=kp(n)}),t};var wp=function(e,t,n,r){return new(n||(n=Promise))(function(a,s){function i(e){try{l(r.next(e))}catch(ay){s(ay)}}function o(e){try{l(r.throw(e))}catch(ay){s(ay)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};const Sp=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),jp=(e,t,n)=>wp(void 0,void 0,void 0,function*(){const r=yield yp(void 0,void 0,void 0,function*(){return"undefined"==typeof Response?(yield Fm(()=>Promise.resolve().then(()=>ag),void 0)).Response:Response});e instanceof r&&!(null==n?void 0:n.noResolveJson)?e.json().then(n=>{const r=e.status||500,a=(null==n?void 0:n.statusCode)||r+"";t(new vp(Sp(n),r,a))}).catch(e=>{t(new bp(Sp(e),e))}):t(new bp(Sp(e),e))}),Cp=(e,t,n,r)=>{const a={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"!==e&&r?((e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)})(r)?(a.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),a.body=JSON.stringify(r)):a.body=r,(null==t?void 0:t.duplex)&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),n)):a};function Np(e,t,n,r,a,s){return wp(this,void 0,void 0,function*(){return new Promise((i,o)=>{e(n,Cp(t,r,a,s)).then(e=>{if(!e.ok)throw e;return(null==r?void 0:r.noResolveJson)?e:e.json()}).then(e=>i(e)).catch(e=>jp(e,o,r))})})}function Tp(e,t,n,r){return wp(this,void 0,void 0,function*(){return Np(e,"GET",t,n,r)})}function Ap(e,t,n,r,a){return wp(this,void 0,void 0,function*(){return Np(e,"POST",t,r,a,n)})}function Ep(e,t,n,r,a){return wp(this,void 0,void 0,function*(){return Np(e,"PUT",t,r,a,n)})}function _p(e,t,n,r,a){return wp(this,void 0,void 0,function*(){return Np(e,"DELETE",t,r,a,n)})}var Pp=function(e,t,n,r){return new(n||(n=Promise))(function(a,s){function i(e){try{l(r.next(e))}catch(ay){s(ay)}}function o(e){try{l(r.throw(e))}catch(ay){s(ay)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};const Ip={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Lp={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Dp{constructor(e,t={},n,r){this.url=e,this.headers=t,this.bucketId=n,this.fetch=xp(r)}uploadOrUpdate(e,t,n,r){return Pp(this,void 0,void 0,function*(){try{let a;const s=Object.assign(Object.assign({},Lp),r);let i=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(s.upsert)});const o=s.metadata;"undefined"!=typeof Blob&&n instanceof Blob?(a=new FormData,a.append("cacheControl",s.cacheControl),o&&a.append("metadata",this.encodeMetadata(o)),a.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(a=n,a.append("cacheControl",s.cacheControl),o&&a.append("metadata",this.encodeMetadata(o))):(a=n,i["cache-control"]=`max-age=${s.cacheControl}`,i["content-type"]=s.contentType,o&&(i["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),(null==r?void 0:r.headers)&&(i=Object.assign(Object.assign({},i),r.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),u=yield("PUT"==e?Ep:Ap)(this.fetch,`${this.url}/object/${c}`,a,Object.assign({headers:i},(null==s?void 0:s.duplex)?{duplex:s.duplex}:{}));return{data:{path:l,id:u.Id,fullPath:u.Key},error:null}}catch(a){if(fp(a))return{data:null,error:a};throw a}})}upload(e,t,n){return Pp(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,r){return Pp(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),s=this._getFinalPath(a),i=new URL(this.url+`/object/upload/sign/${s}`);i.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:Lp.upsert},r),s=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!=typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,s["cache-control"]=`max-age=${t.cacheControl}`,s["content-type"]=t.contentType);return{data:{path:a,fullPath:(yield Ep(this.fetch,i.toString(),e,{headers:s})).Key},error:null}}catch(o){if(fp(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(e,t){return Pp(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);(null==t?void 0:t.upsert)&&(r["x-upsert"]="true");const a=yield Ap(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:r}),s=new URL(this.url+a.url),i=s.searchParams.get("token");if(!i)throw new pp("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:i},error:null}}catch(n){if(fp(n))return{data:null,error:n};throw n}})}update(e,t,n){return Pp(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return Pp(this,void 0,void 0,function*(){try{return{data:yield Ap(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==n?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(fp(r))return{data:null,error:r};throw r}})}copy(e,t,n){return Pp(this,void 0,void 0,function*(){try{return{data:{path:(yield Ap(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==n?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(fp(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,n){return Pp(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),a=yield Ap(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},(null==n?void 0:n.transform)?{transform:n.transform}:{}),{headers:this.headers});const s=(null==n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${s}`)},{data:a,error:null}}catch(r){if(fp(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,n){return Pp(this,void 0,void 0,function*(){try{const r=yield Ap(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),a=(null==n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return{data:r.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${a}`):null})),error:null}}catch(r){if(fp(r))return{data:null,error:r};throw r}})}download(e,t){return Pp(this,void 0,void 0,function*(){const n=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",r=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),a=r?`?${r}`:"";try{const t=this._getFinalPath(e),r=yield Tp(this.fetch,`${this.url}/${n}/${t}${a}`,{headers:this.headers,noResolveJson:!0});return{data:yield r.blob(),error:null}}catch(s){if(fp(s))return{data:null,error:s};throw s}})}info(e){return Pp(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield Tp(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:kp(e),error:null}}catch(n){if(fp(n))return{data:null,error:n};throw n}})}exists(e){return Pp(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,n,r){return wp(this,void 0,void 0,function*(){return Np(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(fp(n)&&n instanceof bp){const e=n.originalError;if([400,404].includes(null==e?void 0:e.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],a=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==a&&r.push(a);const s=void 0!==(null==t?void 0:t.transform)?"render/image":"object",i=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==i&&r.push(i);let o=r.join("&");return""!==o&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${n}${o}`)}}}remove(e){return Pp(this,void 0,void 0,function*(){try{return{data:yield _p(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(fp(t))return{data:null,error:t};throw t}})}list(e,t,n){return Pp(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},Ip),t),{prefix:e||""});return{data:yield Ap(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(fp(r))return{data:null,error:r};throw r}})}listV2(e,t){return Pp(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield Ap(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},t),error:null}}catch(n){if(fp(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Mp={"X-Client-Info":"storage-js/2.11.0"};var Rp=function(e,t,n,r){return new(n||(n=Promise))(function(a,s){function i(e){try{l(r.next(e))}catch(ay){s(ay)}}function o(e){try{l(r.throw(e))}catch(ay){s(ay)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};class Up{constructor(e,t={},n,r){const a=new URL(e);if(null==r?void 0:r.useNewHostname){/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase."))}this.url=a.href,this.headers=Object.assign(Object.assign({},Mp),t),this.fetch=xp(n)}listBuckets(){return Rp(this,void 0,void 0,function*(){try{return{data:yield Tp(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(fp(e))return{data:null,error:e};throw e}})}getBucket(e){return Rp(this,void 0,void 0,function*(){try{return{data:yield Tp(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(fp(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Rp(this,void 0,void 0,function*(){try{return{data:yield Ap(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(fp(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return Rp(this,void 0,void 0,function*(){try{return{data:yield Ep(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(fp(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Rp(this,void 0,void 0,function*(){try{return{data:yield Ap(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(fp(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Rp(this,void 0,void 0,function*(){try{return{data:yield _p(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(fp(t))return{data:null,error:t};throw t}})}}class Fp extends Up{constructor(e,t={},n,r){super(e,t,n,r)}from(e){return new Dp(this.url,this.headers,e,this.fetch)}}let Op="";Op="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const $p={headers:{"X-Client-Info":`supabase-js-${Op}/2.56.0`}},Hp={schema:"public"},Bp={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},zp={};var Vp=function(e,t,n,r){return new(n||(n=Promise))(function(a,s){function i(e){try{l(r.next(e))}catch(ay){s(ay)}}function o(e){try{l(r.throw(e))}catch(ay){s(ay)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};const Wp=e=>{let t;return t=e||("undefined"==typeof fetch?eg:fetch),(...e)=>t(...e)},Kp=(e,t,n)=>{const r=Wp(n),a="undefined"==typeof Headers?tg:Headers;return(n,s)=>Vp(void 0,void 0,void 0,function*(){var i;const o=null!==(i=yield t())&&void 0!==i?i:e;let l=new a(null==s?void 0:s.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${o}`),r(n,Object.assign(Object.assign({},s),{headers:l}))})};var qp=function(e,t,n,r){return new(n||(n=Promise))(function(a,s){function i(e){try{l(r.next(e))}catch(ay){s(ay)}}function o(e){try{l(r.throw(e))}catch(ay){s(ay)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};const Gp="2.71.1",Yp=3e4,Jp=9e4,Qp={"X-Client-Info":`gotrue-js/${Gp}`},Xp="X-Supabase-Api-Version",Zp={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},ef=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class tf extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function nf(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class rf extends tf{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}class af extends tf{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class sf extends tf{constructor(e,t,n,r){super(e,n,r),this.name=t,this.status=n}}class of extends sf{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class lf extends sf{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class cf extends sf{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class uf extends sf{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class df extends sf{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class hf extends sf{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function mf(e){return nf(e)&&"AuthRetryableFetchError"===e.name}class gf extends sf{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class pf extends sf{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const ff="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),vf=" \t\n\r=".split(""),bf=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<vf.length;t+=1)e[vf[t].charCodeAt(0)]=-2;for(let t=0;t<ff.length;t+=1)e[ff[t].charCodeAt(0)]=t;return e})();function yf(e,t,n){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(ff[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(ff[e]),t.queuedBits-=6}}function xf(e,t,n){const r=bf[e];if(!(r>-1)){if(-2===r)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function kf(e){const t=[],n=e=>{t.push(String.fromCodePoint(e))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},s=e=>{!function(e,t,n){if(0===t.utf8seq){if(e<=127)return void n(e);for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&n(t.codepoint)}}(e,r,n)};for(let i=0;i<e.length;i+=1)xf(e.charCodeAt(i),a,s);return t.join("")}function wf(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function Sf(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};for(let a=0;a<e.length;a+=1)xf(e.charCodeAt(a),n,r);return new Uint8Array(t)}function jf(e){const t=[];return function(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const t=1024*(r-55296)&65535;r=65536+(e.charCodeAt(n+1)-56320&65535|t),n+=1}wf(r,t)}}(e,e=>t.push(e)),new Uint8Array(t)}function Cf(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};return e.forEach(e=>yf(e,n,r)),yf(null,n,r),t.join("")}const Nf=()=>"undefined"!=typeof window&&"undefined"!=typeof document,Tf={tested:!1,writable:!1},Af=()=>{if(!Nf())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(ay){return!1}if(Tf.tested)return Tf.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Tf.tested=!0,Tf.writable=!0}catch(ay){Tf.tested=!0,Tf.writable=!1}return Tf.writable};const Ef=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Fm(async()=>{const{default:e}=await Promise.resolve().then(()=>ag);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},_f=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Pf=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(r){return n}},If=async(e,t)=>{await e.removeItem(t)};class Lf{constructor(){this.promise=new Lf.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function Df(e){const t=e.split(".");if(3!==t.length)throw new pf("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!ef.test(t[n]))throw new pf("JWT not in base64url format");return{header:JSON.parse(kf(t[0])),payload:JSON.parse(kf(t[1])),signature:Sf(t[2]),raw:{header:t[0],payload:t[1]}}}function Mf(e){return("0"+e.toString(16)).substr(-2)}async function Rf(e){if(!("undefined"!=typeof crypto&&void 0!==crypto.subtle&&"undefined"!=typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(n);return Array.from(r).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Uf(e,t,n=!1){const r=function(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let r=0;r<56;r++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,Mf).join("")}();let a=r;n&&(a+="/PASSWORD_RECOVERY"),await _f(e,`${t}-code-verifier`,a);const s=await Rf(r);return[s,r===s?"plain":"s256"]}Lf.promiseConstructor=Promise;const Ff=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const Of=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function $f(e){if(!Of.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Hf(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"==typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Bf(e){return JSON.parse(JSON.stringify(e))}var zf=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};const Vf=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Wf=[502,503,504];async function Kf(e){var t,n;if(!("object"==typeof(n=e)&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"==typeof n.json))throw new hf(Vf(e),0);if(Wf.includes(e.status))throw new hf(Vf(e),e.status);let r,a;try{r=await e.json()}catch(ay){throw new af(Vf(ay),ay)}const s=function(e){const t=e.headers.get(Xp);if(!t)return null;if(!t.match(Ff))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(ay){return null}}(e);if(s&&s.getTime()>=Zp.timestamp&&"object"==typeof r&&r&&"string"==typeof r.code?a=r.code:"object"==typeof r&&r&&"string"==typeof r.error_code&&(a=r.error_code),a){if("weak_password"===a)throw new gf(Vf(r),e.status,(null===(t=r.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===a)throw new of}else if("object"==typeof r&&r&&"object"==typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0))throw new gf(Vf(r),e.status,r.weak_password.reasons);throw new rf(Vf(r),e.status||500,a)}async function qf(e,t,n,r){var a;const s=Object.assign({},null==r?void 0:r.headers);s[Xp]||(s[Xp]=Zp.name),(null==r?void 0:r.jwt)&&(s.Authorization=`Bearer ${r.jwt}`);const i=null!==(a=null==r?void 0:r.query)&&void 0!==a?a:{};(null==r?void 0:r.redirectTo)&&(i.redirect_to=r.redirectTo);const o=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await async function(e,t,n,r,a,s){const i=((e,t,n,r)=>{const a={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),n))})(t,r,a,s);let o;try{o=await e(n,Object.assign({},i))}catch(ay){throw console.error(ay),new hf(Vf(ay),0)}o.ok||await Kf(o);if(null==r?void 0:r.noResolveJson)return o;try{return await o.json()}catch(ay){await Kf(ay)}}(e,t,n+o,{headers:s,noResolveJson:null==r?void 0:r.noResolveJson},{},null==r?void 0:r.body);return(null==r?void 0:r.xform)?null==r?void 0:r.xform(l):{data:Object.assign({},l),error:null}}function Gf(e){var t;let n=null;var r;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Yf(e){const t=Gf(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function Jf(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Qf(e){return{data:e,error:null}}function Xf(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:s}=e,i=zf(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:s},user:Object.assign({},i)},error:null}}function Zf(e){return e}const ev=["global","local","others"];var tv=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};class nv{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=Ef(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=ev[0]){if(ev.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ev.join(", ")}`);try{return await qf(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(nf(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await qf(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Jf})}catch(n){if(nf(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=tv(e,["options"]),r=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(r.new_email=null==n?void 0:n.newEmail,delete r.newEmail),await qf(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:Xf,redirectTo:null==t?void 0:t.redirectTo})}catch(t){if(nf(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await qf(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Jf})}catch(t){if(nf(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,r,a,s,i,o;try{const l={nextPage:null,lastPage:0,total:0},c=await qf(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(a=null===(r=null==e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==a?a:""},xform:Zf});if(c.error)throw c.error;const u=await c.json(),d=null!==(s=c.headers.get("x-total-count"))&&void 0!==s?s:0,h=null!==(o=null===(i=c.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l[`${n}Page`]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if(nf(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){$f(e);try{return await qf(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Jf})}catch(t){if(nf(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){$f(e);try{return await qf(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Jf})}catch(n){if(nf(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){$f(e);try{return await qf(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Jf})}catch(n){if(nf(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){$f(e.userId);try{const{data:t,error:n}=await qf(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(t){if(nf(t))return{data:null,error:t};throw t}}async _deleteFactor(e){$f(e.userId),$f(e.id);try{return{data:await qf(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(nf(t))return{data:null,error:t};throw t}}}function rv(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const av=!!(globalThis&&Af()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class sv extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class iv extends sv{}async function ov(e,t,n){av&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),av&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async r=>{if(!r){if(0===t)throw av&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new iv(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(av)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(ay){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",ay)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}av&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,r.name);try{return await n()}finally{av&&console.log("@supabase/gotrue-js: navigatorLock: released",e,r.name)}}))}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(ay){"undefined"!=typeof self&&(self.globalThis=self)}}();const lv={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Qp,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function cv(e,t,n){return await n()}const uv={};class dv{constructor(e){var t,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=dv.nextInstanceID,dv.nextInstanceID+=1,this.instanceID>0&&Nf()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},lv),e);if(this.logDebugMessages=!!r.debug,"function"==typeof r.debug&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new nv({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=Ef(r.fetch),this.lock=r.lock||cv,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:Nf()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=ov:this.lock=cv,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:Af()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=rv(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=rv(this.memoryStorage)),Nf()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(ay){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",ay)}null===(n=this.broadcastChannel)||void 0===n||n.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}get jwks(){var e,t;return null!==(t=null===(e=uv[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){uv[this.storageKey]=Object.assign(Object.assign({},uv[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=uv[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){uv[this.storageKey]=Object.assign(Object.assign({},uv[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Gp}) ${(new Date).toISOString()}`,...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach((e,n)=>{t[n]=e})}catch(ay){}return n.searchParams.forEach((e,n)=>{t[n]=e}),t}(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),Nf()&&this.detectSessionInUrl&&"none"!==n){const{data:r,error:a}=await this._getSessionFromURL(t,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),function(e){return nf(e)&&"AuthImplicitGrantRedirectError"===e.name}(a)){const t=null===(e=a.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:a}}return await this._removeSession(),{error:a}}const{session:s,redirectType:i}=r;return this._debug("#_initialize()","detected session in URL",s,"redirect type",i),await this._saveSession(s),setTimeout(async()=>{"recovery"===i?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return nf(t)?{error:t}:{error:new af("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,r;try{const a=await qf(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(n=null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==n?n:{},gotrue_meta_security:{captcha_token:null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken}},xform:Gf}),{data:s,error:i}=a;if(i||!s)return{data:{user:null,session:null},error:i};const o=s.session,l=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(a){if(nf(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var t,n,r;try{let a;if("email"in e){const{email:n,password:r,options:s}=e;let i=null,o=null;"pkce"===this.flowType&&([i,o]=await Uf(this.storage,this.storageKey)),a=await qf(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==s?void 0:s.emailRedirectTo,body:{email:n,password:r,data:null!==(t=null==s?void 0:s.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken},code_challenge:i,code_challenge_method:o},xform:Gf})}else{if(!("phone"in e))throw new cf("You must provide either an email or phone number and a password");{const{phone:t,password:s,options:i}=e;a=await qf(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:s,data:null!==(n=null==i?void 0:i.data)&&void 0!==n?n:{},channel:null!==(r=null==i?void 0:i.channel)&&void 0!==r?r:"sms",gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:Gf})}}const{data:s,error:i}=a;if(i||!s)return{data:{user:null,session:null},error:i};const o=s.session,l=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(a){if(nf(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:n,password:r,options:a}=e;t=await qf(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:r,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:Yf})}else{if(!("phone"in e))throw new cf("You must provide either an email or phone number and a password");{const{phone:n,password:r,options:a}=e;t=await qf(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:r,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:Yf})}}const{data:n,error:r}=t;return r?{data:{user:null,session:null},error:r}:n&&n.session&&n.user?(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r}):{data:{user:null,session:null},error:new lf}}catch(t){if(nf(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,r,a;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:null===(a=e.options)||void 0===a?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if("solana"===t)return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,n,r,a,s,i,o,l,c,u,d,h;let m,g;if("message"in e)m=e.message,g=e.signature;else{const{chain:d,wallet:h,statement:p,options:f}=e;let v;if(Nf())if("object"==typeof h)v=h;else{const e=window;if(!("solana"in e)||"object"!=typeof e.solana||!("signIn"in e.solana&&"function"==typeof e.solana.signIn||"signMessage"in e.solana&&"function"==typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");v=e.solana}else{if("object"!=typeof h||!(null==f?void 0:f.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=h}const b=new URL(null!==(t=null==f?void 0:f.url)&&void 0!==t?t:window.location.href);if("signIn"in v&&v.signIn){const e=await v.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null==f?void 0:f.signInWithSolana),{version:"1",domain:b.host,uri:b.href}),p?{statement:p}:null));let t;if(Array.isArray(e)&&e[0]&&"object"==typeof e[0])t=e[0];else{if(!(e&&"object"==typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"==typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");m="string"==typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),g=t.signature}else{if(!("signMessage"in v&&"function"==typeof v.signMessage&&"publicKey"in v&&"object"==typeof v&&v.publicKey&&"toBase58"in v.publicKey&&"function"==typeof v.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${b.host} wants you to sign in with your Solana account:`,v.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${b.href}`,`Issued At: ${null!==(r=null===(n=null==f?void 0:f.signInWithSolana)||void 0===n?void 0:n.issuedAt)&&void 0!==r?r:(new Date).toISOString()}`,...(null===(a=null==f?void 0:f.signInWithSolana)||void 0===a?void 0:a.notBefore)?[`Not Before: ${f.signInWithSolana.notBefore}`]:[],...(null===(s=null==f?void 0:f.signInWithSolana)||void 0===s?void 0:s.expirationTime)?[`Expiration Time: ${f.signInWithSolana.expirationTime}`]:[],...(null===(i=null==f?void 0:f.signInWithSolana)||void 0===i?void 0:i.chainId)?[`Chain ID: ${f.signInWithSolana.chainId}`]:[],...(null===(o=null==f?void 0:f.signInWithSolana)||void 0===o?void 0:o.nonce)?[`Nonce: ${f.signInWithSolana.nonce}`]:[],...(null===(l=null==f?void 0:f.signInWithSolana)||void 0===l?void 0:l.requestId)?[`Request ID: ${f.signInWithSolana.requestId}`]:[],...(null===(u=null===(c=null==f?void 0:f.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===u?void 0:u.length)?["Resources",...f.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");const e=await v.signMessage((new TextEncoder).encode(m),"utf8");if(!(e&&e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=e}}try{const{data:t,error:n}=await qf(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:Cf(g)},(null===(d=e.options)||void 0===d?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:Gf});if(n)throw n;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:n}):{data:{user:null,session:null},error:new lf}}catch(p){if(nf(p))return{data:{user:null,session:null},error:p};throw p}}async _exchangeCodeForSession(e){const t=await Pf(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(null!=t?t:"").split("/");try{const{data:t,error:a}=await qf(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Gf});if(await If(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!=r?r:null}),error:a}):{data:{user:null,session:null,redirectType:null},error:new lf}}catch(a){if(nf(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:t,provider:n,token:r,access_token:a,nonce:s}=e,i=await qf(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:a,nonce:s,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:Gf}),{data:o,error:l}=i;return l?{data:{user:null,session:null},error:l}:o&&o.session&&o.user?(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:l}):{data:{user:null,session:null},error:new lf}}catch(t){if(nf(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,r,a,s;try{if("email"in e){const{email:r,options:a}=e;let s=null,i=null;"pkce"===this.flowType&&([s,i]=await Uf(this.storage,this.storageKey));const{error:o}=await qf(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:r,data:null!==(t=null==a?void 0:a.data)&&void 0!==t?t:{},create_user:null===(n=null==a?void 0:a.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken},code_challenge:s,code_challenge_method:i},redirectTo:null==a?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:t,options:n}=e,{data:i,error:o}=await qf(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(r=null==n?void 0:n.data)&&void 0!==r?r:{},create_user:null===(a=null==n?void 0:n.shouldCreateUser)||void 0===a||a,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken},channel:null!==(s=null==n?void 0:n.channel)&&void 0!==s?s:"sms"}});return{data:{user:null,session:null,messageId:null==i?void 0:i.message_id},error:o}}throw new cf("You must provide either an email or phone number.")}catch(i){if(nf(i))return{data:{user:null,session:null},error:i};throw i}}async verifyOtp(e){var t,n;try{let r,a;"options"in e&&(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo,a=null===(n=e.options)||void 0===n?void 0:n.captchaToken);const{data:s,error:i}=await qf(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:r,xform:Gf});if(i)throw i;if(!s)throw new Error("An error occurred on token verification.");const o=s.session,l=s.user;return(null==o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(r){if(nf(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,n,r;try{let a=null,s=null;return"pkce"===this.flowType&&([a,s]=await Uf(this.storage,this.storageKey)),await qf(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:s}),headers:this.headers,xform:Qf})}catch(a){if(nf(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new of;const{error:r}=await qf(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(nf(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:a}=e,{error:s}=await qf(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},redirectTo:null==a?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:s}}if("phone"in e){const{phone:n,type:r,options:a}=e,{data:s,error:i}=await qf(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:null==s?void 0:s.message_id},error:i}}throw new cf("You must provide either an email or phone number and a type")}catch(t){if(nf(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch(ay){}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(ay){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await Pf(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=!!e.expires_at&&1e3*e.expires_at-Date.now()<Jp;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const t=await Pf(this.userStorage,this.storageKey+"-user");(null==t?void 0:t.user)?e.user=t.user:e.user=Hf()}if(this.storage.isServer&&e.user){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,n,r)=>(t||"user"!==n||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,n,r))})}return{data:{session:e},error:null}}const{session:r,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await qf(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Jf}):await this._useSession(async e=>{var t,n,r;const{data:a,error:s}=e;if(s)throw s;return(null===(t=a.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await qf(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(r=null===(n=a.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0,xform:Jf}):{data:{user:null},error:new of}})}catch(t){if(nf(t))return function(e){return nf(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await If(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:r,error:a}=n;if(a)throw a;if(!r.session)throw new of;const s=r.session;let i=null,o=null;"pkce"===this.flowType&&null!=e.email&&([i,o]=await Uf(this.storage,this.storageKey));const{data:l,error:c}=await qf(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:i,code_challenge_method:o}),jwt:s.access_token,xform:Jf});if(c)throw c;return s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),{data:{user:s.user},error:null}})}catch(n){if(nf(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new of;const t=Date.now()/1e3;let n=t,r=!0,a=null;const{payload:s}=Df(e.access_token);if(s.exp&&(n=s.exp,r=n<=t),r){const{session:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return{data:{user:null,session:null},error:n};if(!t)return{data:{user:null,session:null},error:null};a=t}else{const{data:r,error:s}=await this._getUser(e.access_token);if(s)throw s;a={access_token:e.access_token,refresh_token:e.refresh_token,user:r.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(t){if(nf(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:r,error:a}=t;if(a)throw a;e=null!==(n=r.session)&&void 0!==n?n:void 0}if(!(null==e?void 0:e.refresh_token))throw new of;const{session:r,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(nf(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Nf())throw new uf("No browser detected.");if(e.error||e.error_description||e.error_code)throw new uf(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new df("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new uf("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new df("No code detected.");const{data:t,error:n}=await this._exchangeCodeForSession(e.code);if(n)throw n;const r=new URL(window.location.href);return r.searchParams.delete("code"),window.history.replaceState(window.history.state,"",r.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:a,refresh_token:s,expires_in:i,expires_at:o,token_type:l}=e;if(!(a&&i&&s&&l))throw new uf("No session defined in URL");const c=Math.round(Date.now()/1e3),u=parseInt(i);let d=c+u;o&&(d=parseInt(o));const h=d-c;1e3*h<=Yp&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${u}s`);const m=d-u;c-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,d,c):c-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,d,c);const{data:g,error:p}=await this._getUser(a);if(p)throw p;const f={provider_token:n,provider_refresh_token:r,access_token:a,expires_in:u,expires_at:d,refresh_token:s,token_type:l,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:f,redirectType:e.type},error:null}}catch(n){if(nf(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Pf(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:r,error:a}=t;if(a)return{error:a};const s=null===(n=r.session)||void 0===n?void 0:n.access_token;if(s){const{error:t}=await this.admin.signOut(s,e);if(t&&(!function(e){return nf(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await If(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,r;try{const{data:{session:r},error:a}=t;if(a)throw a;await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(sy){await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",sy),console.error(sy)}})}async resetPasswordForEmail(e,t={}){let n=null,r=null;"pkce"===this.flowType&&([n,r]=await Uf(this.storage,this.storageKey,!0));try{return await qf(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(nf(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(nf(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:r}=await this._useSession(async t=>{var n,r,a,s,i;const{data:o,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(n=e.options)||void 0===n?void 0:n.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(a=e.options)||void 0===a?void 0:a.queryParams,skipBrowserRedirect:!0});return await qf(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(i=null===(s=o.session)||void 0===s?void 0:s.access_token)&&void 0!==i?i:void 0})});if(r)throw r;return Nf()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null==n?void 0:n.url),{data:{provider:e.provider,url:null==n?void 0:n.url},error:null}}catch(n){if(nf(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,r;const{data:a,error:s}=t;if(s)throw s;return await qf(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(r=null===(n=a.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0})})}catch(t){if(nf(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const a=Date.now();return await(n=async n=>(n>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await qf(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Gf})),r=(e,t)=>{const n=200*Math.pow(2,e);return t&&mf(t)&&Date.now()+n-a<Yp},new Promise((e,t)=>{(async()=>{for(let a=0;a<1/0;a++)try{const t=await n(a);if(!r(a,null,t))return void e(t)}catch(ay){if(!r(a,ay))return void t(ay)}})()}))}catch(a){if(this._debug(t,"error",a),nf(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(t,"end")}var n,r}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),Nf()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await Pf(this.storage,this.storageKey);if(a&&this.userStorage){let t=await Pf(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:a.user},await _f(this.userStorage,this.storageKey+"-user",t)),a.user=null!==(e=null==t?void 0:t.user)&&void 0!==e?e:Hf()}else if(a&&!a.user&&!a.user){const e=await Pf(this.storage,this.storageKey+"-user");e&&(null==e?void 0:e.user)?(a.user=e.user,await If(this.storage,this.storageKey+"-user"),await _f(this.storage,this.storageKey,a)):a.user=Hf()}if(this._debug(n,"session from storage",a),!this._isValidSession(a))return this._debug(n,"session is not valid"),void(null!==a&&await this._removeSession());const s=1e3*(null!==(t=a.expires_at)&&void 0!==t?t:1/0)-Date.now()<Jp;if(this._debug(n,`session has${s?"":" not"} expired with margin of 90000s`),s){if(this.autoRefreshToken&&a.refresh_token){const{error:e}=await this._callRefreshToken(a.refresh_token);e&&(console.error(e),mf(e)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(a.user&&!0===a.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(a.access_token);!t&&(null==e?void 0:e.user)?(a.user=e.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(r){console.error("Error getting user data:",r),this._debug(n,"error getting user data, skipping SIGNED_IN notification",r)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(sy){return this._debug(n,"error",sy),void console.error(sy)}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new of;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new Lf;const{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new of;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const r={session:t.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(a){if(this._debug(r,"error",a),nf(a)){const e={session:null,error:a};return mf(a)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,n=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],a=Array.from(this.stateChangeEmitters.values()).map(async n=>{try{await n.callback(e,t)}catch(ay){r.push(ay)}});if(await Promise.all(a),r.length>0){for(let e=0;e<r.length;e+=1)console.error(r[e]);throw r[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),n=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!n&&t.user&&await _f(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const r=Bf(e);await _f(this.storage,this.storageKey,r)}else{const e=Bf(t);await _f(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await If(this.storage,this.storageKey),await If(this.storage,this.storageKey+"-code-verifier"),await If(this.storage,this.storageKey+"-user"),this.userStorage&&await If(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Nf()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(ay){console.error("removing visibilitychange callback failed",ay)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Yp);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const r=Math.floor((1e3*n.expires_at-e)/Yp);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),r<=3&&await this._callRefreshToken(n.refresh_token)})}catch(ay){console.error("Auto refresh tick failed with error. This is likely a transient error.",ay)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(ay){if(!(ay.isAcquireTimeout||ay instanceof sv))throw ay;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Nf()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const r=[`provider=${encodeURIComponent(t)}`];if((null==n?void 0:n.redirectTo)&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),(null==n?void 0:n.scopes)&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),"pkce"===this.flowType){const[e,t]=await Uf(this.storage,this.storageKey),n=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});r.push(n.toString())}if(null==n?void 0:n.queryParams){const e=new URLSearchParams(n.queryParams);r.push(e.toString())}return(null==n?void 0:n.skipBrowserRedirect)&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:r,error:a}=t;return a?{data:null,error:a}:await qf(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token})})}catch(t){if(nf(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,r;const{data:a,error:s}=t;if(s)return{data:null,error:s};const i=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:o,error:l}=await qf(this.fetch,"POST",`${this.url}/factors`,{body:i,headers:this.headers,jwt:null===(n=null==a?void 0:a.session)||void 0===n?void 0:n.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(r=null==o?void 0:o.totp)||void 0===r?void 0:r.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(t){if(nf(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:a}=t;if(a)return{data:null,error:a};const{data:s,error:i}=await qf(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token});return i?{data:null,error:i}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),{data:s,error:i})})}catch(t){if(nf(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:a}=t;return a?{data:null,error:a}:await qf(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token})})}catch(t){if(nf(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(null==e?void 0:e.factors)||[],r=n.filter(e=>"totp"===e.factor_type&&"verified"===e.status),a=n.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:n,totp:r,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:r},error:a}=e;if(a)return{data:null,error:a};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=Df(r.access_token);let i=null;s.aal&&(i=s.aal);let o=i;(null!==(n=null===(t=r.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==n?n:[]).length>0&&(o="aal2");return{data:{currentLevel:i,nextLevel:o,currentAuthenticationMethods:s.amr||[]},error:null}}))}async fetchJwk(e,t={keys:[]}){let n=t.keys.find(t=>t.kid===e);if(n)return n;const r=Date.now();if(n=this.jwks.keys.find(t=>t.kid===e),n&&this.jwks_cached_at+6e5>r)return n;const{data:a,error:s}=await qf(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;return a.keys&&0!==a.keys.length?(this.jwks=a,this.jwks_cached_at=r,n=a.keys.find(t=>t.kid===e),n||null):null}async getClaims(e,t={}){try{let n=e;if(!n){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};n=e.session.access_token}const{header:r,payload:a,signature:s,raw:{header:i,payload:o}}=Df(n);(null==t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(a.exp);const l=r.alg&&!r.alg.startsWith("HS")&&r.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(r.kid,(null==t?void 0:t.keys)?{keys:t.keys}:null==t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(n);if(e)throw e;return{data:{claims:a,header:r,signature:s},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(r.alg),u=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!(await crypto.subtle.verify(c,u,s,jf(`${i}.${o}`))))throw new pf("Invalid JWT signature");return{data:{claims:a,header:r,signature:s},error:null}}catch(n){if(nf(n))return{data:null,error:n};throw n}}}dv.nextInstanceID=0;const hv=dv;class mv extends hv{constructor(e){super(e)}}var gv=function(e,t,n,r){return new(n||(n=Promise))(function(a,s){function i(e){try{l(r.next(e))}catch(ay){s(ay)}}function o(e){try{l(r.throw(e))}catch(ay){s(ay)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};class pv{constructor(e,t,n){var r,a,s;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const i=(o=e).endsWith("/")?o:o+"/";var o;const l=new URL(i);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u=function(e,t){var n,r;const{db:a,auth:s,realtime:i,global:o}=e,{db:l,auth:c,realtime:u,global:d}=t,h={db:Object.assign(Object.assign({},l),a),auth:Object.assign(Object.assign({},c),s),realtime:Object.assign(Object.assign({},u),i),storage:{},global:Object.assign(Object.assign(Object.assign({},d),o),{headers:Object.assign(Object.assign({},null!==(n=null==d?void 0:d.headers)&&void 0!==n?n:{}),null!==(r=null==o?void 0:o.headers)&&void 0!==r?r:{})}),accessToken:()=>qp(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!=n?n:{},{db:Hp,realtime:zp,auth:Object.assign(Object.assign({},Bp),{storageKey:c}),global:$p});this.storageKey=null!==(r=u.auth.storageKey)&&void 0!==r?r:"",this.headers=null!==(a=u.global.headers)&&void 0!==a?a:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(s=u.auth)&&void 0!==s?s:{},this.headers,u.global.fetch),this.fetch=Kp(t,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new _g(new URL("rest/v1",l).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new Fp(this.storageUrl.href,this.headers,this.fetch,null==n?void 0:n.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new Wm(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return gv(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return null!==(t=null===(e=n.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,storageKey:a,flowType:s,lock:i,debug:o},l,c){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new mv({url:this.authUrl.href,headers:Object.assign(Object.assign({},u),l),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,flowType:s,lock:i,debug:o,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new gp(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=n}}(function(){if("undefined"!=typeof window)return!1;if("undefined"==typeof process)return!1;const e=process.version;if(null==e)return!1;const t=e.match(/^v(\d+)\./);return!!t&&parseInt(t[1],10)<=18})()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const fv="https://bumphnqhbbtmlhiwokmy.supabase.co";console.log("Supabase configured with URL:",fv);const vv=((e,t,n)=>new pv(e,t,n))(fv,"sb_publishable__xCPNwfV7SwmDPj7sYABBw_ZHFJBGr7"),bv=z.createContext(void 0),yv=()=>{const e=z.useContext(bv);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e},xv=({children:e})=>{const[t,n]=z.useState(null),[r,a]=z.useState(null),[s,i]=z.useState(!0),[o,c]=z.useState(!1);z.useEffect(()=>{vv.auth.getSession().then(({data:{session:e}})=>{a(e),n(e?.user??null),u(e?.user),i(!1)});const{data:{subscription:e}}=vv.auth.onAuthStateChange(async(e,t)=>{a(t),n(t?.user??null),u(t?.user),i(!1)});return()=>e.unsubscribe()},[]);const u=async e=>{if(e)try{const{data:t,error:n}=await vv.from("admin_users").select("role").eq("id",e.id).single();c(!n&&"admin"===t?.role)}catch(t){console.error("Error checking admin status:",t),c(!1)}else c(!1)},d={user:t,session:r,loading:s,signIn:async(e,t)=>{const{error:n}=await vv.auth.signInWithPassword({email:e,password:t});return{error:n}},signUp:async(e,t,n)=>{const{error:r}=await vv.auth.signUp({email:e,password:t,options:{data:{name:n}}});return{error:r}},signOut:async()=>{try{const{error:e}=await vv.auth.signOut({scope:"local"});e&&console.error("Logout error:",e),n(null),a(null),c(!1)}catch(e){console.error("Logout exception:",e),n(null),a(null),c(!1)}},isAdmin:o};return l.jsx(bv.Provider,{value:d,children:e})},kv=z.createContext(void 0),wv=({children:e})=>{const[t,n]=z.useState("sv");return l.jsx(kv.Provider,{value:{language:t,setLanguage:n},children:e})},Sv=()=>{const e=z.useContext(kv);if(!e)throw new Error("useLanguage must be used within a LanguageProvider");return e},jv={appTitle:"Mina trningar",navPublic:"Anmlan",navAttendance:"Incheckning",adminCreateTrainingBtn:"Skapa trning",adminUpdateTrainingBtn:"Uppdatera trning",adminCancelBtn:"Avbryt",adminEditBtn:"Redigera",adminUpdateTrainingTitle:"Uppdatera trning",adminExistingTrainings:"Befintliga trningar",adminNoTrainings:"Inga trningar har skapats n.",adminUserNameLabel:"Visningsnamn",adminEmailLabel:"E-post",adminCreateUserBtn:"Skapa anvndare",adminExistingUsers:"Befintliga anvndare",adminSearchPlaceholder:"Sk p namn eller e-post...",adminVouchersLabel:"Trningar",adminNoUserMatches:"Inga anvndare matchar din skning.",adminNoUsers:"Inga anvndare har skapats n.",subSearchPlaceholder:"Sk efter en trning...",subSubscribedUsers:"Anmlda anvndare",subNoUsersSubscribed:"Inga anvndare anmlda n.",subSubscribeUserTitle:"Anml en anvndare",subSelectUser:"Vlj en anvndare",subSubscribeBtn:"Anml",subNoTrainingsMatch:"Inga trningar matchar din skning.",subNoTrainingsCreated:"Inga trningar har skapats n. G till Adminpanelen fr att lgga till en.",attSubscribedUsers:"Anmlda anvndare",attVouchersLabel:"Klippkort",attMarkNotPresentBtn:"Markera som Ej nrvarande",attMarkPresentBtn:"Checka in",attOpenKioskBtn:"ppna kiosklge",attNoUsersSubscribed:"Inga anvndare r anmlda till denna trning.",attNoTrainingsCreated:"Inga trningar har skapats n. G till Adminpanelen fr att lgga till en.",kioskExitBtn:"Avsluta kiosklge",kioskInstructions:"Markera din incheckning nedan",kioskPresentStatus:"Incheckad",kioskPresentBtn:"Checka in",welcomeMessage:"Vlkommen, {name}!",welcomeSubMessage:"Din incheckning har registrerats.",welcomeBalanceLabel:"Trningar kvar p kortet:",welcomeCloseBtn:"Stng",helpButtonTitle:"Hjlp",helpSystemTitle:"Hjlp",helpButtonText:"Hjlp",helpSearchPlaceholder:"Sk hjlp...",helpCategoryAll:"Alla kategorier",helpCategoryGeneral:"Allmnt",helpCategoryAdmin:"Admin",helpCategoryUser:"Anvndare",helpNoResults:"Inga avsnitt matchar din skning.",helpContactAdmin:"Behver mer hjlp? Kontakta din systemadministratr.",helpSystemVersion:"System fr Trningshantering v1.0",helpEditButton:"Redigera den hr sidan",helpSupportLink:"F hjlp",helpContactUs:"Behver du mer hjlp? Hr av dig!",helpStatusSuccess:"Hjlpinnehll har laddats frn den externa kllan.",helpStatusLoading:"Laddar hjlpinnehll...",helpStatusError:"Kunde inte ladda hjlpinnehll: {{errorMessage}}",aiHelpContextTitle:"Din kontext",aiHelpContextScreen:"Skrm",aiHelpContextAction:"Senaste tgrd",aiHelpError:"Tyvrr kunde jag inte svara just nu. Kontrollera att din API-nyckel r korrekt konfigurerad och frsk igen.",aiHelpResponseTitle:"AI Svar:",aiHelpSourcesTitle:"Kllor:",aiHelpGoToSection:"G till avsnitt: {{sectionName}}",aiHelpKnowledgeSourceTooltip:"Detta r en allmn kunskapsklla och kan inte navigeras till.",aiHelpAskButton:"Frga",aiActionNavigate:"G till vy",aiActionNavigatePublic:"G till Publik vy",aiActionNavigateAdmin:"G till Admin vy",aiActionNavigateAttendance:"G till Incheckning vy",aiActionOpenHelp:"ppna hjlpsida",aiActionSetSearch:"Stt skning: {value}",aiActionStartTour:"Starta guidad rundtur",aiActionAddUser:"Lgg till anvndare",aiActionAddTraining:"Lgg till trning",aiActionCreateTour:"Skapa rundtur",aiActionCreateShoutout:"Skapa shoutout",aiActionUnknown:"Utfr tgrd",aiChatTitle:"AI Hjlp",aiChatDescription:"Frga mig vad som helst om systemet",aiChatWelcome:"Hej! Jag r hr fr att hjlpa dig med {{context}}. Vad kan jag hjlpa dig med idag?",aiChatError:"Tyvrr kunde jag inte svara just nu. Kontrollera att din API-nyckel r korrekt konfigurerad och frsk igen.",aiChatSourcesTitle:"Kllor:",aiChatTyping:"Skriver...",aiChatPlaceholder:"Lt mig hjlpa till - frga vad du vill",aiChatFooter:"AI:n anvnder all tillgnglig dokumentation och systemkunskap fr att svara p dina frgor.",kioskCode:"Kioskkod",kioskCodePlaceholder:"Ange kioskkod fr att logga in",kioskLogin:"G till kiosklge",planProjectNameTitle:"Projektnamn",planDescriptionTitle:"Beskrivning",planKeyFeaturesTitle:"Huvudfunktioner",planNextStepsTitle:"Nsta steg",planTechStackTitle:"Rekommenderad teknikstack",inputFormProjectIdeaLabel:"Beskriv din projektid",inputFormProjectIdeaPlaceholder:"t.ex., En mobilapp som hjlper anvndare hitta de bsta lokala kaffebaren...",inputFormGeneratingButton:"Genererar...",inputFormGenerateButton:"Generera plan",errorTitle:"Fel",welcomeTitle:"Vlkommen till Trningshanteringssystemet",welcomeSubtitle:"Blddra bland tillgngliga trningar och hantera din nrvaro",signInButton:"Logga in",signOutButton:"Logga ut",viewTrainingsButton:"Visa trningar",adminLoginButton:"Admin-inloggning",loginCreateAccountTitle:"Skapa konto",loginSignInTitle:"Logga in",loginCloseButton:"Stng",loginNameLabel:"Fullstndigt namn",loginNamePlaceholder:"Ange ditt fullstndiga namn",loginEmailLabel:"E-post",loginEmailPlaceholder:"Ange din e-postadress",loginPasswordLabel:"Lsenord",loginPasswordPlaceholder:"Ange ditt lsenord",loginProcessingButton:"Bearbetar...",loginCreateAccountButton:"Skapa konto",loginSignInButton:"Logga in",loginAlreadyHaveAccount:"Har du redan ett konto? Logga in",loginDontHaveAccount:"Har du inget konto? Skapa ett",loginInvalidEmailError:"Ange en giltig e-postadress",loginPasswordLengthError:"Lsenordet mste vara minst 6 tecken lngt",loginNameRequiredError:"Namn krvs",loginGenericError:"Ett fel uppstod. Frsk igen.",authRequiredTitle:"Autentisering krvs",authRequiredMessage:"Logga in fr att komma t denna sida.",accessDeniedTitle:"tkomst nekad",accessDeniedMessage:"Du har inte behrighet att komma t denna sida.",languageSwedish:"Svenska",languageEnglish:"English",languageSwitcher:"Sprk",helpMaximizeTitle:"Maximera",helpMinimizeTitle:"Minimera",helpRefreshTitle:"Ladda om innehll",helpLoadingText:"Laddar innehll...",helpSelectSection:"Vlj ett avsnitt fr att brja.",helpContentsTitle:"Innehll",loadingText:"Laddar...",kioskMarkNotPresentTitle:"Markera som Ej nrvarande",adminEditTraining:"Redigera trning",adminCreateTraining:"Skapa trning",adminTrainingTitleLabel:"Titel",adminTrainingDescLabel:"Beskrivning",adminTrainingDateLabel:"Datum",adminTrainingTimeLabel:"Tid",unsubscribeTooltip:"Avboka",navTrainings:"Trningar",navUsers:"Anvndare",navTourManagement:"Hantera guider",navShoutoutManagement:"Hantera Shoutouts",targetGroup:"Mlgrupp",targetGroupPublic:"Allmn",targetGroupAuthenticated:"Inloggade anvndare",targetGroupAdmin:"Endast admin",addTrainingButton:"Lgg till trning",addUserButton:"Lgg till anvndare",searchTrainingsPlaceholder:"Sk trningar...",noTrainingsMatchSearch:"Inga trningar matchar din skning.",noTrainingsHint:"Klicka p 'Lgg till trning' fr att skapa din frsta trning.",noUsersHint:"Klicka p 'Lgg till anvndare' fr att skapa din frsta anvndare.",addVoucherTooltip:"Lgg till klippkort",removeVoucherTooltip:"Ta bort klippkort",adminCreateUser:"Skapa anvndare",adminEditUser:"Redigera anvndare",adminUpdateBtn:"Uppdatera",adminDeleteBtn:"Ta bort",confirmDeleteTraining:'r du sker p att du vill ta bort trningen "{name}"? Denna tgrd kan inte ngras.',trainingDatePlaceholder:"Vlj datum",trainingTimePlaceholder:"Vlj tid",trainingNoDateSet:"Inget datum angivet",trainingNoTimeSet:"Ingen tid angiven",trainingCalendar:"Trningskalender",noScheduledTrainings:"Inga trningar schemalagda n.",subscriberCountSingular:"anmld",subscriberCountPlural:"anmlda",upcomingTrainingsTitle:"Kommande trningar",bookYourSpotMessage:"Boka din plats och kom och hng med oss!",helpContentErrorTitle:"Fel vid laddning av hjlpinnehll",helpContentErrorText:"Kunde inte ladda hjlpinnehllet. Kontrollera din internetanslutning och frsk igen.",tourStartTour:"Guida mig",tourSelectTour:"Vlj en Rundtur",tourNoToursAvailable:"Inga rundturer tillgngliga",tourStatusCompleted:"Genomfrd",tourStatusSkipped:"Hoppad ver",tourStatusAvailable:"Tillgnglig",tourGuidedTours:"Guidade Rundturer",tourRestart:"Starta om",tourStart:"Starta",tourPrevious:"Fregende",tourNext:"Nsta",tourSkip:"Hoppa ver",tourExit:"Avsluta",tourComplete:"Slutfr",tourRetry:"Frsk igen",tourWelcomeName:"Vlkommen till Trningssystemet",tourWelcomeDescription:"Lr dig de huvudsakliga funktionerna i trningshanteringssystemet",tourWelcomeStep1Title:"Vlkommen!",tourWelcomeStep1Content:"Vlkommen till Trningshanteringssystemet. Denna rundtur visar dig de huvudsakliga funktionerna.",tourWelcomeStep2Title:"Trningsanmlningar",tourWelcomeStep2Content:"Hr kan du se alla tillgngliga trningssessioner och anmla dig till dem.",tourWelcomeStep3Title:"Hjlpsystem",tourWelcomeStep3Content:"Klicka p hjlpknappen nr som helst fr att f hjlp eller stlla frgor.",tourWelcomeStep4Title:"Anvndarmenyn",tourWelcomeStep4Content:"Kom t din profil och kontoinstllningar hrifrn.",tourAdminName:"Adminfunktioner Rundtur",tourAdminDescription:"Lr dig hur du hanterar anvndare, trningar och systeminstllningar",tourAdminStep1Title:"Trningshantering",tourAdminStep1Content:"Klicka hr fr att hantera trningssessioner - skapa, redigera eller ta bort trningar.",tourAdminStep2Title:"Skapa Ny Trning",tourAdminStep2Content:"Anvnd detta formulr fr att skapa nya trningssessioner med datum, tid och beskrivning.",tourAdminStep3Title:"Anvndarhantering",tourAdminStep3Content:"Navigera till anvndarhantering fr att lgga till nya anvndare och hantera deras klippkortsbalanser.",tourAdminStep4Title:"Lgg till Nya Anvndare",tourAdminStep4Content:"Skapa nya anvndarkonton med namn och e-postadress.",tourAdminStep5Title:"Klippkortssystem",tourAdminStep5Content:"Hantera anvndarnas klippkortsbalanser - lgg till eller ta bort klippkort efter behov.",tourAdminStep6Title:"Anvndarskapande Formulr",tourAdminStep6Content:"Detta formulr lter dig skapa nya anvndarkonton med namn och e-post.",tourAdminStep7Title:"Klippkortshantering",tourAdminStep7Content:"Hr kan du lgga till eller ta bort klippkort fr enskilda anvndare.",tourAttendanceName:"Nrvarohantering",tourAttendanceDescription:"Lr dig hur du markerar nrvaro och anvnder kiosklget",tourAttendanceStep1Title:"Nrvarosida",tourAttendanceStep1Content:"Navigera till nrvarosidan fr att markera vem som deltog i trningssessioner.",tourAttendanceStep2Title:"Trningssessioner",tourAttendanceStep2Content:"Varje trningssession visar anmlda anvndare. Klicka fr att markera nrvaro.",tourAttendanceStep3Title:"Kiosklge",tourAttendanceStep3Content:"Anvnd kiosklge fr enkel nrvaromarkering p surfplattor eller kiosker.",tourCinematicName:"Filmisk Rundtur Upplevelse",tourCinematicDescription:"Upplev det frbttrade rundturssystemet med mjuka animationer och vergngar",tourCinematicStep1Title:"Vlkommen till Filmiska Rundturer!",tourCinematicStep1Content:"Upplev mjuka animationer, partikeleffekter och filmiska vergngar medan vi guidar dig genom appen.",tourCinematicStep2Title:"Animerad Spotlight",tourCinematicStep2Content:"Lgg mrke till den animerade spotlighten med gldande partiklar som kretsar runt det markerade elementet.",tourCinematicStep3Title:"Mjuka vergngar",tourCinematicStep3Content:"Se hur tooltipen mjukt skalas och tonas in med filmisk timing.",tourCinematicStep4Title:"Interaktiv Navigation",tourCinematicStep4Content:"Klicka fr att se den filmiska sidvergngen med toningseffekter.",tourCinematicStep5Title:"Knappanimation",tourCinematicStep5Content:"Se knappen animeras nr den klickas, med skal- och gldeffekter.",tourCinematicStep6Title:"Formulrframtrdande",tourCinematicStep6Content:"Formulret visas med mjuka animationer. Lgg mrke till den frbttrade frloppsindikatorn med gradient- och skimrande effekter.",tourHelpName:"Hjlpsystem Rundtur",tourHelpDescription:"Lr dig hur du anvnder hjlpsystemet och AI-assistenten fr att f ut det mesta av applikationen.",tourHelpStep1Title:"Vlkommen till Hjlp",tourHelpStep1Content:"Detta r hjlpsystemet! Hr kan du hitta dokumentation, stlla frgor och f hjlp med alla funktioner.",tourHelpStep2Title:"Innehllsfrteckning",tourHelpStep2Content:"Blddra genom organiserade hjlpmnen med hjlp av innehllsfrteckningen. Klicka p valfri sektion fr att lsa detaljerad information.",tourHelpStep3Title:"Sk Dokumentation",tourHelpStep3Content:"Anvnd skfltet fr att snabbt hitta specifika mnen i hjlpdokumentationen.",tourHelpStep4Title:"AI-assistent",tourHelpStep4Content:"Stll AI-assistenten vilken frga som helst! Den frstr systemet och kan hjlpa dig med uppgifter, navigering och problemlsning.",tourHelpStep5Title:"AI-tgrder",tourHelpStep5Content:"AI:n kan utfra tgrder t dig! Leta efter bl tgrdsknappar som visas i AI-svar fr att navigera eller utfra uppgifter automatiskt.",tourHelpStep6Title:"Kontextmedveten Hjlp",tourHelpStep6Content:"Hjlpsystemet vet vad du gr och ger relevant information baserat p din nuvarande skrm och tgrder.",tourAdminTitle:"Hantera guider",tourAdminSubtitle:"Skapa, redigera och hantera guidade rundturer fr din applikation",tourAdminClose:"Stng",tourAdminTotalTours:"Totalt antal rundturer",tourAdminTotalSteps:"Totalt antal steg",tourAdminAvgSteps:"Genomsnitt steg/rundtur",tourAdminCategories:"Kategorier",tourAdminToursList:"Rundturer",tourAdminImportExport:"Importera/Exportera",tourAdminCreateTour:"Skapa rundtur",tourAdminNoTours:"Inga rundturer skapade n",tourAdminCreateFirstTour:"Skapa din frsta rundtur",tourAdminSteps:"steg",tourAdminMinutes:"min",tourAdminEdit:"Redigera",tourAdminDuplicate:"Duplicera",tourAdminDelete:"Ta bort",tourAdminSelectTour:"Vlj en rundtur",tourAdminEditTour:"Redigera rundtur",tourAdminValidationErrors:"Vnligen tgrda fljande fel:",tourAdminTourName:"Rundtursnamn",tourAdminTourNamePlaceholder:"Ange rundtursnamn",tourAdminTourDescription:"Beskrivning",tourAdminTourDescriptionPlaceholder:"Ange rundtursbeskrivning",tourAdminCategory:"Kategori",tourAdminCategoryOnboarding:"Introduktion",tourAdminCategoryFeature:"Funktion",tourAdminCategoryAdmin:"Admin",tourAdminCategoryUser:"Anvndare",tourAdminRequiredRole:"Krvd roll",tourAdminRoleAny:"Vilken anvndare som helst",tourAdminRoleAdmin:"Endast Admin",tourAdminRoleUser:"Endast Anvndare",tourAdminEstimatedDuration:"Berknad varaktighet (minuter)",tourAdminAddStep:"Lgg till Steg",tourAdminNoSteps:"Inga steg tillagda n",tourAdminAddFirstStep:"Lgg till ditt frsta steg",tourAdminMoveUp:"Flytta Upp",tourAdminMoveDown:"Flytta Ner",tourAdminCreate:"Skapa",tourAdminSave:"Spara",tourAdminCancel:"Avbryt",tourAdminSelectTourToEdit:"Vlj en rundtur frn listan fr att redigera den",tourAdminEditStep:"Redigera Steg",tourAdminStepTitle:"Stegtitel",tourAdminStepTitlePlaceholder:"Ange stegtitel",tourAdminStepContent:"Steginnehll",tourAdminStepContentPlaceholder:"Ange steginnehll",tourAdminStepTarget:"Mlvljare",tourAdminStepPosition:"Position",tourAdminPositionTop:"verst",tourAdminPositionBottom:"Underst",tourAdminPositionLeft:"Vnster",tourAdminPositionRight:"Hger",tourAdminPositionCenter:"Centrum",tourAdminStepAction:"tgrd",tourAdminActionNone:"Ingen",tourAdminActionClick:"Klicka",tourAdminActionWait:"Vnta",tourAdminActionNavigate:"Navigera",tourAdminActionScroll:"Rulla",tourAdminWaitTime:"Vntetid (ms)",tourAdminActionTarget:"tgrdsml",tourAdminRequiredView:"Krvd Vy",tourAdminSkipIfNotFound:"Hoppa ver om ml inte hittas",tourAdminAdd:"Lgg till",tourAdminExport:"Exportera",tourAdminExportDescription:"Exportera alla rundturer till en JSON-fil fr skerhetskopiering eller delning",tourAdminExportTours:"Exportera Rundturer",tourAdminImport:"Importera",tourAdminImportDescription:"Importera rundturer frn en JSON-fil",tourAdminImportPlaceholder:"Klistra in JSON-data hr...",tourAdminImportTours:"Importera rundturer",tourAdminConfirmDelete:"r du sker p att du vill ta bort denna rundtur? Denna tgrd kan inte ngras.",tourAdminManageTours:"Hantera rundturer",tourAdminDefault:"Standard",shoutoutTourSystemTitle:"Interaktivt Rundturssystem",shoutoutTourSystemDescription:"Upptck vrt nya guidade rundturssystem som hjlper dig navigera genom applikationen med steg-fr-steg instruktioner och interaktiva hjdpunkter.",shoutoutAdminToursTitle:"Admin Rundturshantering",shoutoutAdminToursDescription:"Administratrer kan nu skapa, redigera och hantera anpassade rundturer fr olika anvndarroller och scenarier.",shoutoutCinematicToursTitle:"Filmisk rundtursupplevelse",shoutoutCinematicToursDescription:"Upplev vra frbttrade rundturer med mjuka animationer, filmiska vergngar och engagerande visuella effekter.",shoutoutPerformanceTitle:"Prestandafrbttringar",shoutoutPerformanceDescription:"Vi har optimerat rundturssystemet fr snabbare laddning, mjukare animationer och bttre vergripande prestanda.",shoutoutAttendanceFixTitle:"Nrvarosida tgrdad",shoutoutAttendanceFixDescription:"tgrdat problem dr anmlda anvndare inte visades p nrvarosidan/incheckningssidan",shoutoutCategoryFeature:"Ny funktion",shoutoutCategoryImprovement:"Frbttring",shoutoutCategoryAnnouncement:"Meddelande",shoutoutCategoryBugfix:"Bugfix",shoutoutNew:"NYTT",shoutoutStartTour:"Starta Rundtur",shoutoutDismiss:"Markera som lst",shoutoutReleaseDate:"Slppt",shoutoutButtonTitle:"Nya funktioner & meddelanden",shoutoutMenuTitle:"Nyheter",shoutoutMenuSubtitle:"Upptck de senaste funktionerna och frbttringarna",shoutoutNoFeatures:"Inga nya funktioner att visa",shoutoutHasTour:"Har rundtur",shoutoutMenuFooter:"Klicka p en funktion fr att lra dig mer",shoutoutAdminTitle:"Shoutout-hantering",shoutoutAdminSubtitle:"Skapa och hantera funktionsmeddelanden",shoutoutAdminShoutoutsList:"Shoutouts",shoutoutAdminCreateShoutout:"Skapa shoutout",shoutoutAdminTotalShoutouts:"Totalt",shoutoutAdminNewShoutouts:"Nya",shoutoutAdminDefault:"STANDARD",shoutoutAdminWithTours:"Med Rundturer",shoutoutAdminNoShoutouts:"Inga shoutouts n",shoutoutAdminCreateFirstShoutout:"Skapa din frsta shoutout fr att komma igng",shoutoutAdminEdit:"Redigera",shoutoutAdminDuplicate:"Duplicera",shoutoutAdminDelete:"Ta bort",shoutoutAdminSelectShoutoutToEdit:"Vlj en shoutout att redigera",shoutoutAdminSelectShoutoutDescription:"Vlj en shoutout frn listan fr att visa och redigera dess detaljer",shoutoutAdminEditShoutout:"Redigera Shoutout",shoutoutAdminValidationErrors:"Valideringsfel",shoutoutAdminShoutoutTitle:"Titel",shoutoutAdminShoutoutTitlePlaceholder:"Ange shoutout-titel",shoutoutAdminShoutoutDescription:"Beskrivning",shoutoutAdminShoutoutDescriptionPlaceholder:"Ange shoutout-beskrivning",shoutoutAdminIcon:"Ikon",shoutoutAdminCategory:"Kategori",shoutoutAdminPriority:"Prioritet",shoutoutAdminPriorityLow:"Lg",shoutoutAdminPriorityMedium:"Medium",shoutoutAdminPriorityHigh:"Hg",shoutoutAdminReleaseDate:"Slppdatum",shoutoutAdminExpireDate:"Utgngsdatum",shoutoutAdminExpireDatePlaceholder:"Lmna tomt fr ingen utgng",shoutoutAdminExpireDateHelp:"Valfritt: Nr detta datum ns kommer shoutouten inte lngre att vara synlig fr anvndare",shoutoutAdminTourId:"Associerad rundtur",shoutoutAdminNoTour:"Ingen rundtur",shoutoutAdminIsNew:"Markera som ny",shoutoutAdminCreate:"Skapa",shoutoutAdminSave:"Spara",shoutoutAdminCancel:"Avbryt",shoutoutAdminConfirmDelete:"r du sker p att du vill ta bort denna shoutout? Denna tgrd kan inte ngras.",shoutoutAdminCannotDeleteDefault:"Kan inte ta bort standard systemshoutouts",shoutoutAdminDeleteSystemWarning:" VARNING: Du hller p att ta bort en SYSTEMSHOUTOUT!\n\nDetta kommer att ta bort en krnsystemmeddelande som anvndare frvntar sig att se. Systemshoutouts inkluderar viktiga uppdateringar om funktioner, buggfixar och frbttringar.\n\nr du helt sker p att du vill fortstta?",shoutoutAdminSystemNote:"Obs",shoutoutAdminSystemNoteText:"Systemshoutouts (Rundturssystem, Admin Rundturer, etc.) hanteras automatiskt och visas inte i denna lista. De r alltid synliga fr anvndare.",shoutoutAdminSystemNoteTextUpdated:"Systemshoutouts (mrkta med DEFAULT-badge) kan redigeras och tas bort, men detta rekommenderas inte eftersom de innehller viktiga systemmeddelanden.",shoutoutAdminManageShoutouts:"Hantera shoutouts",shoutoutManageShoutouts:"Hantera shoutouts",shoutoutAdminFilterByLanguage:"Filtrera efter sprk",shoutoutAdminAllLanguages:"Alla sprk",tourAdminFilterByLanguage:"Filtrera efter sprk",tourAdminAllLanguages:"Alla sprk",tourAdminEnglish:"Engelska",tourAdminSwedish:"Svenska",tourAdminLanguage:"Sprk",shoutoutAdminEnglish:"Engelska",shoutoutAdminSwedish:"Svenska",shoutoutAdminLanguage:"Sprk",aiAdministration:"Hantera AI",aiPrompts:"Prompter",knowledgeSources:"Kunskapskllor",training:"Trning",createNewPrompt:"Skapa ny prompt",availablePrompts:"Tillgngliga prompter",promptDetails:"Promptdetaljer",editPrompt:"Redigera prompt",createPrompt:"Skapa prompt",promptName:"Namn",promptDescription:"Beskrivning",promptCategory:"Kategori",promptContent:"Innehll",promptVariables:"Variabler (kommaseparerade)",promptActive:"Aktiv",promptPriority:"Prioritet",save:"Spara",cancel:"Avbryt",edit:"Redigera",delete:"Ta bort",system:"System",context:"Kontext",action:"tgrd",custom:"Anpassad",active:"Aktiv",inactive:"Inaktiv",activate:"Aktivera",deactivate:"Inaktivera",selectPromptToView:"Vlj en prompt fr att visa detaljer",addKnowledgeSource:"Lgg till intern klla",availableSources:"Tillgngliga kllor",sourceDetails:"Klldetaljer",editKnowledgeSource:"Redigera intern klla",sourceName:"Kllnamn",sourceDescription:"Beskrivning",sourceCategory:"Kategori",sourceLanguage:"Kllsprk",sourceKeywords:"Nyckelord (kommaseparerade)",sourceContent:"Kllinnehll",sourcePriority:"Kllprioritet",swedish:"Svenska",english:"Engelska",both:"Bda",selectSourceToView:"Vlj en kunskapsklla fr att visa detaljer",aiTraining:"AI-trning",retrainAI:"Trna om AI",trainingInProgress:"Trning pgr...",trainingStatus:"Trningsstatus",lastTraining:"Senaste trning",aiReady:"AI r redo",lastTrainingFailed:"Senaste trning misslyckades",knowledgeSourcesStatus:"Status fr kunskapskllor",trained:"Trnad",error:"Fel",nameAndContentRequired:"Namn och innehll krvs",failedToSavePrompt:"Misslyckades att spara prompt",failedToDeletePrompt:"Misslyckades att ta bort prompt",failedToSaveSource:"Misslyckades att spara kunskapsklla",failedToDeleteSource:"Misslyckades att ta bort kunskapsklla",failedToRetrainAI:"Misslyckades att trna om AI",confirmDeletePrompt:"r du sker p att du vill ta bort denna prompt?",confirmDeleteSource:"r du sker p att du vill ta bort denna kunskapsklla?",loadingAIAdministration:"Laddar AI-administration...",progress:"Framsteg",enterPromptContent:"Ange promptinnehll. Anvnd {{variable}} fr dynamiskt innehll.",enterKnowledgeContent:"Ange kunskapsinnehll...",keywordPlaceholder:"nyckelord1, nyckelord2, nyckelord3",variablePlaceholder:"context, user, language",sourceType:"Klltyp",sourceUrl:"Kll-URL",fetchFrequency:"Hmtningsfrekvens",autoFetch:"Automatisk hmtning",contentSelector:"Innehllsvljare (CSS)",maxContentLength:"Max innehllslngd",requiresAuth:"Krver autentisering",lastFetched:"Senast hmtad",fetchStatus:"Hmtningsstatus",fetchError:"Hmtningsfel",internal:"Intern",internalKnowledgeSources:"Interna Kunskapskllor",external:"Extern",forum:"Forum",webpage:"Webbsida",api:"API",manual:"Manuell",daily:"Dagligen",weekly:"Veckovis",monthly:"Mnadsvis",pending:"Vntande",success:"Lyckades",failed:"Misslyckades",disabled:"Inaktiverad",fetchNow:"Hmta nu",fetchAllPending:"Hmta alla vntande",fetchHistory:"Hmtningshistorik",externalSources:"Externa kllor",addExternalSource:"Lgg till extern klla",editExternalSource:"Redigera extern klla",testExternalSource:"Testa extern klla",sourceConfiguration:"Kllkonfiguration",authConfig:"Autentiseringskonfiguration",parserConfig:"Parserkonfiguration",filterConfig:"Filterkonfiguration",transformerConfig:"Transformerkonfiguration",noExternalSources:"Inga externa kllor konfigurerade",externalSourceHelp:"Externa kllor kan automatiskt hmta innehll frn forum, webbsidor och API:er fr att hlla AI:n uppdaterad med den senaste informationen.",urlPlaceholder:"https://example.com/forum/training-management",selectorPlaceholder:".forum-content, .post-content",authConfigPlaceholder:'{"type": "bearer", "token": "your-token"}',fetchInProgress:"Hmtning pgr...",fetchCompleted:"Hmtning slutfrd",fetchFailed:"Hmtning misslyckades",contentUpdated:"Innehll uppdaterat",noContentFetched:"Inget innehll hmtat n",manageExternalSource:"Hantera extern klla",keywords:"Nyckelord",saving:"Sparar...",elementPickerTitle:"Vlj element",elementPickerDescription:"Vlj ett element p sidan som ska anvndas som ml fr denna tour-steg",elementPickerSearchPlaceholder:"Sk efter element...",elementPickerFoundElements:"Hittade {count} element",elementPickerNoResults:"Inga element matchade din skning",elementPickerNoElements:"Inga element hittades p sidan",elementPickerPreview:"Frhandsvisning",elementPickerTip:"Klicka p ett element fr att markera det, sedan klicka p 'Vlj' fr att anvnda det",scanning:"Skannar...",refresh:"Uppdatera",highlight:"Markera",selector:"Vljare",elementType:"Elementtyp",textContent:"Textinnehll",dimensions:"Dimensioner",position:"Position",visibility:"Synlighet",visible:"Synlig",notVisible:"Inte synlig",select:"Vlj",pageAwareElementPickerTitle:"Vlj element (sidmedveten)",pageAwareElementPickerDescription:"Vlj element frn olika sidor eller anvnd vanliga element",pages:"Sidor",catalog:"Katalog",smartSuggestions:"Smarta frslag",navigateToPage:"Navigera till sida",currentPage:"Aktuell sida",currentPageDescription:"Element frn den aktuella sidan",foundElements:"Hittade {count} element",commonElements:"Vanliga element",catalogDescription:"Vanliga element som finns p flera sidor",smartSuggestionsDescription:"Frslag baserat p tour-kontext",searchElements:"Sk element...",noResults:"Inga resultat",noElementsFound:"Inga element hittades",dashboardDescription:"Huvudinstrumentpanel",usersDescription:"Anvndarhantering",trainingsDescription:"Trningshantering",helpDescription:"Hjlpsystem",aiAdministrationDescription:"AI-administration",tourAdministrationDescription:"Tour-administration",shoutoutAdministrationDescription:"Shoutout-administration",pickElement:"Vlj element",helpModal:"Hjlpmodal",helpModalDescription:"Element frn hjlpmodalen",helpContent:"Hjlpinnehll",helpContextInfo:"Hjlpkontext",scanForElementTypes:"Sk efter elementtyper",scanCurrentPageDescription:"Skanna den aktuella sidan fr element frn olika sidor",scanCurrentPageForDashboardElements:"Sk efter dashboard-element p aktuell sida",scanCurrentPageForUserElements:"Sk efter anvndarelement p aktuell sida",scanCurrentPageForTrainingElements:"Sk efter trnings-element p aktuell sida",scanCurrentPageForHelpElements:"Sk efter hjlpelement p aktuell sida",scanCurrentPageForAIElements:"Sk efter AI-element p aktuell sida",scanCurrentPageForTourElements:"Sk efter tour-element p aktuell sida",scanCurrentPageForShoutoutElements:"Sk efter shoutout-element p aktuell sida",pickElementDescription:"Vlj ett element frn den aktuella sidan fr din tour-steg",scanningElements:"Sker efter element...",noElementsFoundDescription:"Inga klickbara element hittades p denna sida. Frsk navigera till en annan sida och ppna elementvljaren igen.",scanAgain:"Sk igen",availableElements:"Tillgngliga element",type:"Typ",pickElementHint:"Hovra ver element fr att se dem markeras p sidan, klicka fr att vlja",helpEditor:"Hjlpredigerare",helpEditorRename:"Byt namn",helpEditorMove:"Flytta",helpEditorFileName:"Filnamn",helpEditorFilePath:"Filskvg",helpEditorUITextVariables:"UI-textvariabler",helpEditorAIAssistant:"AI-assistent",helpEditorPreview:"Frhandsvisning",helpEditorTogglePreview:"Vxla frhandsvisning",helpEditorCommit:"Bekrfta",helpEditorCommitMessage:"Bekrftelsemeddelande...",helpEditorCommitting:"Bekrftar...",helpEditorAIPlaceholder:"Be AI att hjlpa till med detta innehll...",helpEditorSend:"Skicka",helpEditorThinking:"Tnker...",helpEditorSearchVariables:"Sk variabler...",helpEditorDoubleClickInsert:"Dubbelklicka fr att infoga",helpEditorMarkdownPlaceholder:"Brja skriva ditt hjlpinnehll i Markdown...",helpEditorErrorLoading:"Fel vid laddning av innehll",helpEditorPendingOperation:"Vntande"},Cv={appTitle:"My trainings",navPublic:"Public Subscription Page",navAttendance:"Attendance",adminCreateTrainingBtn:"Create Training",adminUpdateTrainingBtn:"Update Training",adminCancelBtn:"Cancel",adminEditBtn:"Edit",adminUpdateTrainingTitle:"Update Training",adminExistingTrainings:"Existing Trainings",adminNoTrainings:"No trainings created yet.",adminUserNameLabel:"User Name",adminEmailLabel:"Email",adminCreateUserBtn:"Create User",adminExistingUsers:"Existing Users",adminSearchPlaceholder:"Search by name or email...",adminVouchersLabel:"Vouchers",adminNoUserMatches:"No users match your search.",adminNoUsers:"No users created yet.",subSearchPlaceholder:"Search for a training...",subSubscribedUsers:"Subscribed Users",subNoUsersSubscribed:"No users subscribed yet.",subSubscribeUserTitle:"Subscribe a User",subSelectUser:"Select a user",subSubscribeBtn:"Subscribe",subNoTrainingsMatch:"No trainings match your search.",subNoTrainingsCreated:"No trainings have been created yet. Please go to the Admin Panel to add a training.",attSubscribedUsers:"Subscribed Users",attVouchersLabel:"Vouchers",attMarkNotPresentBtn:"Mark as Not Present",attMarkPresentBtn:"Check in",attOpenKioskBtn:"Open Kiosk Mode",attNoUsersSubscribed:"No users are subscribed to this training.",attNoTrainingsCreated:"No trainings have been created yet. Please go to the Admin Panel to add a training.",kioskExitBtn:"Exit Kiosk Mode",kioskInstructions:"Check in below",kioskPresentStatus:"Checked in",kioskPresentBtn:"Check in",welcomeMessage:"Welcome, {name}!",welcomeSubMessage:"Your attendance has been registered.",welcomeBalanceLabel:"Remaining voucher balance:",welcomeCloseBtn:"Close",helpButtonTitle:"Help",helpSystemTitle:"Help",helpButtonText:"Help",helpSearchPlaceholder:"Search help...",helpCategoryAll:"All Categories",helpCategoryGeneral:"General",helpCategoryAdmin:"Admin",helpCategoryUser:"User",helpNoResults:"No sections match your search.",helpContactAdmin:"Need more help? Contact your system administrator.",helpSystemVersion:"Training Management System v1.0",helpEditButton:"Edit this page",helpSupportLink:"Get Support",helpContactUs:"Need more help? Get in touch",helpStatusSuccess:"Help content loaded successfully from the external repository.",helpStatusLoading:"Loading help content...",helpStatusError:"Failed to load help content: {{errorMessage}}",aiHelpContextTitle:"Your Context",aiHelpContextScreen:"Screen",aiHelpContextAction:"Last Action",aiHelpError:"Sorry, I couldn't get a response right now. Please check your API key configuration and try again.",aiHelpResponseTitle:"AI Response:",aiHelpSourcesTitle:"Sources:",aiHelpGoToSection:"Go to section: {{sectionName}}",aiHelpKnowledgeSourceTooltip:"This is a general knowledge source and cannot be navigated to.",aiHelpAskButton:"Ask",aiActionNavigate:"Go to view",aiActionNavigatePublic:"Go to Public view",aiActionNavigateAdmin:"Go to Admin view",aiActionNavigateAttendance:"Go to Attendance view",aiActionOpenHelp:"Open help section",aiActionSetSearch:"Set search: {value}",aiActionStartTour:"Start guided tour",aiActionAddUser:"Add user",aiActionAddTraining:"Add training",aiActionCreateTour:"Create tour",aiActionCreateShoutout:"Create shoutout",aiActionUnknown:"Do action",aiChatTitle:"AI Help",aiChatDescription:"Ask me anything about the system",aiChatWelcome:"Hi! I'm here to help you with {{context}}. What can I help you with today?",aiChatError:"Sorry, I couldn't get a response right now. Please check your API key configuration and try again.",aiChatSourcesTitle:"Sources:",aiChatTyping:"Typing...",aiChatPlaceholder:"Let me help  ask me anything",aiChatFooter:"The AI uses all available documentation and system knowledge to answer your questions.",kioskCode:"Kiosk Code",kioskCodePlaceholder:"Enter kiosk code to log in",kioskLogin:"Enter Kiosk Mode",planProjectNameTitle:"Project Name",planDescriptionTitle:"Description",planKeyFeaturesTitle:"Key Features",planNextStepsTitle:"Next Steps",planTechStackTitle:"Recommended Tech Stack",inputFormProjectIdeaLabel:"Describe your project idea",inputFormProjectIdeaPlaceholder:"e.g., A mobile app that helps users find the best local coffee shops...",inputFormGeneratingButton:"Generating...",inputFormGenerateButton:"Generate Plan",errorTitle:"Error",welcomeTitle:"Welcome to the Training Management System",welcomeSubtitle:"Browse available trainings and manage your check-ins",signInButton:"Sign In",signOutButton:"Sign Out",viewTrainingsButton:"View Trainings",adminLoginButton:"Admin Login",loginCreateAccountTitle:"Create Account",loginSignInTitle:"Sign In",loginCloseButton:"Close",loginNameLabel:"Full Name",loginNamePlaceholder:"Enter your full name",loginEmailLabel:"Email",loginEmailPlaceholder:"Enter your email address",loginPasswordLabel:"Password",loginPasswordPlaceholder:"Enter your password",loginProcessingButton:"Processing...",loginCreateAccountButton:"Create Account",loginSignInButton:"Sign In",loginAlreadyHaveAccount:"Already have an account? Sign in",loginDontHaveAccount:"Don't have an account? Create one",loginInvalidEmailError:"Please enter a valid email address",loginPasswordLengthError:"Password must be at least 6 characters long",loginNameRequiredError:"Name is required",loginGenericError:"An error occurred. Please try again.",authRequiredTitle:"Authentication Required",authRequiredMessage:"Please sign in to access this page.",accessDeniedTitle:"Access Denied",accessDeniedMessage:"You don't have permission to access this page.",languageSwedish:"Svenska",languageEnglish:"English",languageSwitcher:"Language",helpMaximizeTitle:"Maximize",helpMinimizeTitle:"Minimize",helpRefreshTitle:"Refresh Content",helpLoadingText:"Loading content...",helpSelectSection:"Select a section to begin.",helpContentsTitle:"Contents",loadingText:"Loading...",kioskMarkNotPresentTitle:"Mark as Not Present",adminEditTraining:"Edit Training",adminCreateTraining:"Create Training",adminTrainingTitleLabel:"Title",adminTrainingDescLabel:"Description",adminTrainingDateLabel:"Date",adminTrainingTimeLabel:"Time",unsubscribeTooltip:"Unsubscribe",navTrainings:"Trainings",navUsers:"Users",navTourManagement:"Tour Management",navShoutoutManagement:"Manage Shoutouts",targetGroup:"Target Group",targetGroupPublic:"Public",targetGroupAuthenticated:"Authenticated Users",targetGroupAdmin:"Admin Only",addTrainingButton:"Add Training",addUserButton:"Add User",searchTrainingsPlaceholder:"Search trainings...",noTrainingsMatchSearch:"No trainings match your search.",noTrainingsHint:"Click 'Add Training' to create your first training.",noUsersHint:"Click 'Add User' to create your first user.",addVoucherTooltip:"Add voucher",removeVoucherTooltip:"Remove voucher",adminCreateUser:"Create User",adminEditUser:"Edit User",adminUpdateBtn:"Update",adminDeleteBtn:"Delete",confirmDeleteTraining:'Are you sure you want to delete the training "{name}"? This action cannot be undone.',trainingDatePlaceholder:"Select date",trainingTimePlaceholder:"Select time",trainingNoDateSet:"No date set",trainingNoTimeSet:"No time set",trainingCalendar:"Training Calendar",noScheduledTrainings:"No trainings scheduled yet.",subscriberCountSingular:"registered",subscriberCountPlural:"registered",upcomingTrainingsTitle:"Upcoming trainings",bookYourSpotMessage:"Book your spot and join us!",helpContentErrorTitle:"Error loading help content",helpContentErrorText:"Could not load help content. Check your internet connection and try again.",tourStartTour:"Guide me",tourSelectTour:"Select a Tour",tourNoToursAvailable:"No tours available",tourStatusCompleted:"Completed",tourStatusSkipped:"Skipped",tourStatusAvailable:"Available",tourGuidedTours:"Guided Tours",tourRestart:"Restart",tourStart:"Start",tourPrevious:"Previous",tourNext:"Next",tourSkip:"Skip",tourExit:"Exit",tourComplete:"Complete",tourRetry:"Retry",tourWelcomeName:"Welcome to the Training System",tourWelcomeDescription:"Get familiar with the main features of the training management system",tourWelcomeStep1Title:"Welcome!",tourWelcomeStep1Content:"Welcome to the Training Management System. This tour will show you the main features.",tourWelcomeStep2Title:"Training Subscriptions",tourWelcomeStep2Content:"Here you can see all available training sessions and subscribe to them.",tourWelcomeStep3Title:"Help System",tourWelcomeStep3Content:"Click the help button anytime to get assistance or ask questions.",tourWelcomeStep4Title:"User Menu",tourWelcomeStep4Content:"Access your profile and account settings from here.",tourAdminName:"Admin Features Tour",tourAdminDescription:"Learn how to manage users, trainings, and system settings",tourAdminStep1Title:"Training Management",tourAdminStep1Content:"Click here to manage training sessions - create, edit, or delete trainings.",tourAdminStep2Title:"Create New Training",tourAdminStep2Content:"Use this form to create new training sessions with date, time, and description.",tourAdminStep3Title:"User Management",tourAdminStep3Content:"Navigate to user management to add new users and manage their voucher balances.",tourAdminStep4Title:"Add New Users",tourAdminStep4Content:"Create new user accounts with name and email address.",tourAdminStep5Title:"Voucher System",tourAdminStep5Content:"Manage user voucher balances - add or remove vouchers as needed.",tourAdminStep6Title:"User Creation Form",tourAdminStep6Content:"This form allows you to create new user accounts with name and email.",tourAdminStep7Title:"Voucher Management",tourAdminStep7Content:"Here you can add or remove vouchers for individual users.",tourAttendanceName:"Attendance Management",tourAttendanceDescription:"Learn how to mark attendance and use the kiosk mode",tourAttendanceStep1Title:"Attendance Page",tourAttendanceStep1Content:"Navigate to the attendance page to mark who attended training sessions.",tourAttendanceStep2Title:"Training Sessions",tourAttendanceStep2Content:"Each training session shows subscribed users. Click to mark attendance.",tourAttendanceStep3Title:"Kiosk Mode",tourAttendanceStep3Content:"Use kiosk mode for easy attendance marking on tablets or kiosks.",tourCinematicName:"Cinematic Tour Experience",tourCinematicDescription:"Experience the enhanced tour system with smooth animations and transitions",tourCinematicStep1Title:"Welcome to Cinematic Tours!",tourCinematicStep1Content:"Experience smooth animations, particle effects, and cinematic transitions as we guide you through the app.",tourCinematicStep2Title:"Animated Spotlight",tourCinematicStep2Content:"Notice the animated spotlight with glowing particles orbiting around the highlighted element.",tourCinematicStep3Title:"Smooth Transitions",tourCinematicStep3Content:"Watch how the tooltip smoothly scales and fades in with cinematic timing.",tourCinematicStep4Title:"Interactive Navigation",tourCinematicStep4Content:"Click to see the cinematic page transition with fade effects.",tourCinematicStep5Title:"Button Animation",tourCinematicStep5Content:"Watch the button animate when clicked, with scale and glow effects.",tourCinematicStep6Title:"Form Reveal",tourCinematicStep6Content:"The form appears with smooth animations. Notice the enhanced progress bar with gradient and shimmer effects.",tourHelpName:"Help System Tour",tourHelpDescription:"Learn how to use the help system and AI assistant to get the most out of the application.",tourHelpStep1Title:"Welcome to Help",tourHelpStep1Content:"This is the help system! Here you can find documentation, ask questions, and get assistance with any feature.",tourHelpStep2Title:"Table of Contents",tourHelpStep2Content:"Browse through organized help topics using the table of contents. Click on any section to read detailed information.",tourHelpStep3Title:"Search Documentation",tourHelpStep3Content:"Use the search field to quickly find specific topics in the help documentation.",tourHelpStep4Title:"AI Assistant",tourHelpStep4Content:"Ask the AI assistant any question! It understands the system and can help you with tasks, navigation, and problem-solving.",tourHelpStep5Title:"AI Actions",tourHelpStep5Content:"The AI can perform actions for you! Look for blue action buttons that appear in AI responses to navigate or perform tasks automatically.",tourHelpStep6Title:"Context-Aware Help",tourHelpStep6Content:"The help system knows what you're doing and provides relevant information based on your current screen and actions.",tourAdminTitle:"Tour Management",tourAdminSubtitle:"Create, edit, and manage guided tours for your application",tourAdminClose:"Close",tourAdminTotalTours:"Total Tours",tourAdminTotalSteps:"Total Steps",tourAdminAvgSteps:"Avg Steps/Tour",tourAdminCategories:"Categories",tourAdminToursList:"Tours",tourAdminImportExport:"Import/Export",tourAdminCreateTour:"Create Tour",tourAdminNoTours:"No tours created yet",tourAdminCreateFirstTour:"Create Your First Tour",tourAdminSteps:"steps",tourAdminMinutes:"min",tourAdminEdit:"Edit",tourAdminDuplicate:"Duplicate",tourAdminDelete:"Delete",tourAdminSelectTour:"Select a Tour",tourAdminEditTour:"Edit Tour",tourAdminValidationErrors:"Please fix the following errors:",tourAdminTourName:"Tour Name",tourAdminTourNamePlaceholder:"Enter tour name",tourAdminTourDescription:"Description",tourAdminTourDescriptionPlaceholder:"Enter tour description",tourAdminCategory:"Category",tourAdminCategoryOnboarding:"Onboarding",tourAdminCategoryFeature:"Feature",tourAdminCategoryAdmin:"Admin",tourAdminCategoryUser:"User",tourAdminRequiredRole:"Required Role",tourAdminRoleAny:"Any User",tourAdminRoleAdmin:"Admin Only",tourAdminRoleUser:"User Only",tourAdminEstimatedDuration:"Estimated Duration (minutes)",tourAdminAddStep:"Add Step",tourAdminNoSteps:"No steps added yet",tourAdminAddFirstStep:"Add Your First Step",tourAdminMoveUp:"Move Up",tourAdminMoveDown:"Move Down",tourAdminCreate:"Create",tourAdminSave:"Save",tourAdminCancel:"Cancel",tourAdminSelectTourToEdit:"Select a tour from the list to edit it",tourAdminEditStep:"Edit Step",tourAdminStepTitle:"Step Title",tourAdminStepTitlePlaceholder:"Enter step title",tourAdminStepContent:"Step Content",tourAdminStepContentPlaceholder:"Enter step content",tourAdminStepTarget:"Target Selector",tourAdminStepPosition:"Position",tourAdminPositionTop:"Top",tourAdminPositionBottom:"Bottom",tourAdminPositionLeft:"Left",tourAdminPositionRight:"Right",tourAdminPositionCenter:"Center",tourAdminStepAction:"Action",tourAdminActionNone:"None",tourAdminActionClick:"Click",tourAdminActionWait:"Wait",tourAdminActionNavigate:"Navigate",tourAdminActionScroll:"Scroll",tourAdminWaitTime:"Wait Time (ms)",tourAdminActionTarget:"Action Target",tourAdminRequiredView:"Required View",tourAdminSkipIfNotFound:"Skip if target not found",tourAdminAdd:"Add",tourAdminExport:"Export",tourAdminExportDescription:"Export all tours to a JSON file for backup or sharing",tourAdminExportTours:"Export Tours",tourAdminImport:"Import",tourAdminImportDescription:"Import tours from a JSON file",tourAdminImportPlaceholder:"Paste JSON data here...",tourAdminImportTours:"Import Tours",tourAdminConfirmDelete:"Are you sure you want to delete this tour? This action cannot be undone.",tourAdminManageTours:"Manage Tours",tourAdminDefault:"Default",shoutoutTourSystemTitle:"Interactive Tour System",shoutoutTourSystemDescription:"Discover our new guided tour system that helps you navigate through the application with step-by-step instructions and interactive highlights.",shoutoutAdminToursTitle:"Admin Tour Management",shoutoutAdminToursDescription:"Administrators can now create, edit, and manage custom tours for different user roles and scenarios.",shoutoutCinematicToursTitle:"Cinematic Tour Experience",shoutoutCinematicToursDescription:"Experience our enhanced tours with smooth animations, cinematic transitions, and engaging visual effects.",shoutoutPerformanceTitle:"Performance Improvements",shoutoutPerformanceDescription:"We've optimized the tour system for faster loading, smoother animations, and better overall performance.",shoutoutAttendanceFixTitle:"Attendance Page Fixed",shoutoutAttendanceFixDescription:"Fixed issue where subscribed users were not displaying on the attendance/check-in page",shoutoutCategoryFeature:"New Feature",shoutoutCategoryImprovement:"Improvement",shoutoutCategoryAnnouncement:"Announcement",shoutoutCategoryBugfix:"Bug Fix",shoutoutNew:"NEW",shoutoutStartTour:"Start Tour",shoutoutDismiss:"Mark as read",shoutoutReleaseDate:"Released",shoutoutButtonTitle:"New Features & Announcements",shoutoutMenuTitle:"What's New",shoutoutMenuSubtitle:"Discover the latest features and improvements",shoutoutNoFeatures:"No new features to show",shoutoutHasTour:"Has Tour",shoutoutMenuFooter:"Click on any feature to learn more",shoutoutAdminTitle:"Shoutout Management",shoutoutAdminSubtitle:"Create and manage feature announcements",shoutoutAdminShoutoutsList:"Shoutouts",shoutoutAdminCreateShoutout:"Create Shoutout",shoutoutAdminTotalShoutouts:"Total",shoutoutAdminNewShoutouts:"New",shoutoutAdminDefault:"DEFAULT",shoutoutAdminWithTours:"With Tours",shoutoutAdminNoShoutouts:"No shoutouts yet",shoutoutAdminCreateFirstShoutout:"Create your first shoutout to get started",shoutoutAdminEdit:"Edit",shoutoutAdminDuplicate:"Duplicate",shoutoutAdminDelete:"Delete",shoutoutAdminSelectShoutoutToEdit:"Select a shoutout to edit",shoutoutAdminSelectShoutoutDescription:"Choose a shoutout from the list to view and edit its details",shoutoutAdminEditShoutout:"Edit Shoutout",shoutoutAdminValidationErrors:"Validation Errors",shoutoutAdminShoutoutTitle:"Title",shoutoutAdminShoutoutTitlePlaceholder:"Enter shoutout title",shoutoutAdminShoutoutDescription:"Description",shoutoutAdminShoutoutDescriptionPlaceholder:"Enter shoutout description",shoutoutAdminIcon:"Icon",shoutoutAdminCategory:"Category",shoutoutAdminPriority:"Priority",shoutoutAdminPriorityLow:"Low",shoutoutAdminPriorityMedium:"Medium",shoutoutAdminPriorityHigh:"High",shoutoutAdminReleaseDate:"Release Date",shoutoutAdminExpireDate:"Expire Date",shoutoutAdminExpireDatePlaceholder:"Leave empty for no expiration",shoutoutAdminExpireDateHelp:"Optional: When this date is reached, the shoutout will no longer be visible to users",shoutoutAdminTourId:"Associated Tour",shoutoutAdminNoTour:"No tour",shoutoutAdminIsNew:"Mark as new",shoutoutAdminCreate:"Create",shoutoutAdminSave:"Save",shoutoutAdminCancel:"Cancel",shoutoutAdminConfirmDelete:"Are you sure you want to delete this shoutout? This action cannot be undone.",shoutoutAdminCannotDeleteDefault:"Cannot delete default system shoutouts",shoutoutAdminDeleteSystemWarning:" WARNING: You are about to delete a SYSTEM SHOUTOUT!\n\nThis will remove a core system announcement that users expect to see. System shoutouts include important updates about features, bug fixes, and improvements.\n\nAre you absolutely sure you want to proceed?",shoutoutAdminSystemNote:"Note",shoutoutAdminSystemNoteText:"System shoutouts (Tour System, Admin Tours, etc.) are managed automatically and don't appear in this list. They are always visible to users.",shoutoutAdminSystemNoteTextUpdated:"System shoutouts (marked with DEFAULT badge) can be edited and deleted, but this is not recommended as they contain important system announcements.",shoutoutAdminManageShoutouts:"Manage Shoutouts",shoutoutManageShoutouts:"Manage Shoutouts",shoutoutAdminFilterByLanguage:"Filter by Language",shoutoutAdminAllLanguages:"All Languages",tourAdminFilterByLanguage:"Filter by Language",tourAdminAllLanguages:"All Languages",tourAdminEnglish:"English",tourAdminSwedish:"Swedish",tourAdminLanguage:"Language",shoutoutAdminEnglish:"English",shoutoutAdminSwedish:"Swedish",shoutoutAdminLanguage:"Language",aiAdministration:"AI Administration",aiPrompts:"AI Prompts",knowledgeSources:"Knowledge Sources",training:"Training",createNewPrompt:"Create New Prompt",availablePrompts:"Available Prompts",promptDetails:"Prompt Details",editPrompt:"Edit Prompt",createPrompt:"Create Prompt",promptName:"Name",promptDescription:"Description",promptCategory:"Category",promptContent:"Content",promptVariables:"Variables (comma-separated)",promptActive:"Active",promptPriority:"Priority",save:"Save",cancel:"Cancel",edit:"Edit",delete:"Delete",system:"System",context:"Context",action:"Action",custom:"Custom",active:"Active",inactive:"Inactive",activate:"Activate",deactivate:"Deactivate",selectPromptToView:"Select a prompt to view details",addKnowledgeSource:"Add Internal Source",availableSources:"Available Sources",sourceDetails:"Source Details",editKnowledgeSource:"Edit Internal Source",sourceName:"Source Name",sourceDescription:"Description",sourceCategory:"Category",sourceLanguage:"Source Language",sourceKeywords:"Keywords (comma-separated)",sourceContent:"Source Content",sourcePriority:"Source Priority",swedish:"Swedish",english:"English",both:"Both",selectSourceToView:"Select a knowledge source to view details",aiTraining:"AI Training",retrainAI:"Retrain AI",trainingInProgress:"Training...",trainingStatus:"Training Status",lastTraining:"Last training",aiReady:"AI is ready",lastTrainingFailed:"Last training failed",knowledgeSourcesStatus:"Knowledge Sources Status",trained:"Trained",error:"Error",nameAndContentRequired:"Name and content are required",failedToSavePrompt:"Failed to save prompt",failedToDeletePrompt:"Failed to delete prompt",failedToSaveSource:"Failed to save knowledge source",failedToDeleteSource:"Failed to delete knowledge source",failedToRetrainAI:"Failed to retrain AI",confirmDeletePrompt:"Are you sure you want to delete this prompt?",confirmDeleteSource:"Are you sure you want to delete this knowledge source?",loadingAIAdministration:"Loading AI Administration...",progress:"Progress",enterPromptContent:"Enter prompt content. Use {{variable}} for dynamic content.",enterKnowledgeContent:"Enter knowledge content...",keywordPlaceholder:"keyword1, keyword2, keyword3",variablePlaceholder:"context, user, language",sourceType:"Source Type",sourceUrl:"Source URL",fetchFrequency:"Fetch Frequency",autoFetch:"Auto Fetch",contentSelector:"Content Selector (CSS)",maxContentLength:"Max Content Length",requiresAuth:"Requires Authentication",lastFetched:"Last Fetched",fetchStatus:"Fetch Status",fetchError:"Fetch Error",internal:"Internal",internalKnowledgeSources:"Internal Knowledge Sources",external:"External",forum:"Forum",webpage:"Webpage",api:"API",manual:"Manual",daily:"Daily",weekly:"Weekly",monthly:"Monthly",pending:"Pending",success:"Success",failed:"Failed",disabled:"Disabled",fetchNow:"Fetch Now",fetchAllPending:"Fetch All Pending",fetchHistory:"Fetch History",externalSources:"External Sources",addExternalSource:"Add External Source",editExternalSource:"Edit External Source",testExternalSource:"Test External Source",sourceConfiguration:"Source Configuration",authConfig:"Authentication Configuration",parserConfig:"Parser Configuration",filterConfig:"Filter Configuration",transformerConfig:"Transformer Configuration",noExternalSources:"No external sources configured",externalSourceHelp:"External sources can automatically fetch content from forums, webpages, and APIs to keep the AI updated with the latest information.",urlPlaceholder:"https://example.com/forum/training-management",selectorPlaceholder:".forum-content, .post-content",authConfigPlaceholder:'{"type": "bearer", "token": "your-token"}',fetchInProgress:"Fetch in progress...",fetchCompleted:"Fetch completed",fetchFailed:"Fetch failed",contentUpdated:"Content updated",noContentFetched:"No content fetched yet",manageExternalSource:"Manage external source",keywords:"Keywords",saving:"Saving...",elementPickerTitle:"Select Element",elementPickerDescription:"Select an element on the page to use as a target for this tour step",elementPickerSearchPlaceholder:"Search for elements...",elementPickerFoundElements:"Found {count} elements",elementPickerNoResults:"No elements matched your search",elementPickerNoElements:"No elements found on the page",elementPickerPreview:"Preview",elementPickerTip:"Click on an element to select it, then click 'Select' to use it",scanning:"Scanning...",refresh:"Refresh",highlight:"Highlight",selector:"Selector",elementType:"Element Type",textContent:"Text Content",dimensions:"Dimensions",position:"Position",visibility:"Visibility",visible:"Visible",notVisible:"Not Visible",select:"Select",pageAwareElementPickerTitle:"Select Element (Page-Aware)",pageAwareElementPickerDescription:"Select elements from different pages or use common elements",pages:"Pages",catalog:"Catalog",smartSuggestions:"Smart Suggestions",navigateToPage:"Navigate to Page",currentPage:"Current Page",currentPageDescription:"Elements from the current page",foundElements:"Found {count} elements",commonElements:"Common Elements",catalogDescription:"Common elements that exist on multiple pages",smartSuggestionsDescription:"Suggestions based on tour context",searchElements:"Search elements...",noResults:"No results",noElementsFound:"No elements found",dashboardDescription:"Main dashboard",usersDescription:"User management",trainingsDescription:"Training management",helpDescription:"Help system",aiAdministrationDescription:"AI administration",tourAdministrationDescription:"Tour administration",shoutoutAdministrationDescription:"Shoutout administration",pickElement:"Pick Element",helpModal:"Help Modal",helpModalDescription:"Elements from the help modal",helpContent:"Help Content",helpContextInfo:"Help Context",scanForElementTypes:"Scan for Element Types",scanCurrentPageDescription:"Scan the current page for elements from different pages",scanCurrentPageForDashboardElements:"Scan current page for dashboard elements",scanCurrentPageForUserElements:"Scan current page for user elements",scanCurrentPageForTrainingElements:"Scan current page for training elements",scanCurrentPageForHelpElements:"Scan current page for help elements",scanCurrentPageForAIElements:"Scan current page for AI elements",scanCurrentPageForTourElements:"Scan current page for tour elements",scanCurrentPageForShoutoutElements:"Scan current page for shoutout elements",pickElementDescription:"Select an element from the current page for your tour step",scanningElements:"Scanning for elements...",noElementsFoundDescription:"No clickable elements found on this page. Try navigating to another page and opening the element picker again.",scanAgain:"Scan again",availableElements:"Available elements",type:"Type",pickElementHint:"Hover over elements to see them highlighted on the page, click to select",helpEditor:"Help Editor",helpEditorRename:"Rename",helpEditorMove:"Move",helpEditorFileName:"File name",helpEditorFilePath:"File path",helpEditorUITextVariables:"UI Text Variables",helpEditorAIAssistant:"AI Assistant",helpEditorPreview:"Preview",helpEditorTogglePreview:"Toggle Preview",helpEditorCommit:"Commit",helpEditorCommitMessage:"Commit message...",helpEditorCommitting:"Committing...",helpEditorAIPlaceholder:"Ask AI to help with this content...",helpEditorSend:"Send",helpEditorThinking:"Thinking...",helpEditorSearchVariables:"Search variables...",helpEditorDoubleClickInsert:"Double-click to insert",helpEditorMarkdownPlaceholder:"Start writing your help content in Markdown...",helpEditorErrorLoading:"Error loading content",helpEditorPendingOperation:"Pending"},Nv={sv:jv,en:Cv},Tv=()=>{const{language:e}=Sv();return{t:(t,n)=>{let r=Nv[e][t]||t;return n&&Object.keys(n).forEach(e=>{const t=n[e];r=r.replace(`{${e}}`,String(t))}),r}}},Av=z.createContext(void 0),Ev=({children:e})=>{const[t,n]=z.useState({screen:"Dashboard",action:"N/A",data:{}}),r=z.useCallback(e=>{n(t=>({...t,...e}))},[]);return l.jsx(Av.Provider,{value:{context:t,setContext:r},children:e})},_v=()=>{const e=z.useContext(Av);if(!e)throw new Error("useUserInteraction must be used within a UserInteractionProvider");return e},Pv=({className:e="w-6 h-6"})=>l.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Iv=({date:e,time:t,className:n=""})=>{if(!e)return null;const r=new Date(e);if(isNaN(r.getTime()))return null;const a=r.toLocaleDateString("sv-SE",{weekday:"short"}),s=r.getDate(),i=r.toLocaleDateString("sv-SE",{month:"short"}),o=t?t.substring(0,5):"";return l.jsxs("div",{className:`bg-white border border-slate-200 rounded-lg shadow-sm ${n}`,children:[l.jsx("div",{className:"bg-cyan-500 text-white text-center py-1 px-2 rounded-t-lg",children:l.jsx("span",{className:"font-semibold text-xs",children:a})}),l.jsxs("div",{className:"text-center py-1",children:[l.jsx("div",{className:"text-xl font-bold text-slate-800",children:s}),l.jsx("div",{className:"text-xs text-slate-500",children:i})]}),o&&l.jsx("div",{className:"border-t border-slate-200 text-center py-1",children:l.jsx("div",{className:"text-xs text-slate-500",children:o})})]})},Lv=({training:e,allUsers:t,subscribedUserIds:n,onSubscribe:r,onUnsubscribe:a})=>{const{t:s}=Tv(),[i,o]=z.useState(""),c=z.useMemo(()=>t.filter(e=>n.has(e.id)),[t,n]),u=z.useMemo(()=>t.filter(e=>!n.has(e.id)),[t,n]);return l.jsxs("div",{className:"bg-white p-6 rounded-xl border-l-4 border-l-blue-500 border border-slate-200 shadow-sm flex flex-col hover:shadow-md transition-shadow duration-200 relative overflow-visible","data-tour":"subscription-cards",children:[l.jsx("div",{className:"flex items-start justify-between mb-4",children:l.jsxs("div",{className:"flex items-start space-x-4 flex-1",children:[(e.training_date||e.training_time)&&l.jsx("div",{className:"flex-shrink-0",children:l.jsx(Iv,{date:e.training_date,time:e.training_time,className:"w-20"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h2",{className:"text-2xl font-bold text-cyan-600 mb-2",children:e.name}),l.jsxs("div",{className:"inline-flex items-center px-2 py-1 text-xs font-medium text-slate-600 bg-slate-100 rounded-md mb-2",children:[e.subscriberCount||0," ",1===(e.subscriberCount||0)?s("subscriberCountSingular"):s("subscriberCountPlural")]})]})]})}),e.description&&l.jsx("div",{className:"mb-4 w-full",children:l.jsx("p",{className:"text-slate-500 flex-grow",children:e.description})}),l.jsxs("div",{className:"mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-600 mb-2",children:s("subSubscribedUsers")}),c.length>0?l.jsx("ul",{className:"space-y-2",children:c.map(t=>l.jsxs("li",{className:"flex items-center justify-between text-slate-700 bg-slate-100 px-3 py-1 rounded-md",children:[l.jsx("span",{children:t.name}),l.jsx("button",{onClick:()=>a(e.id,t.id),className:"p-1 text-slate-500 hover:text-red-600 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 opacity-60 hover:opacity-100 transition-opacity","aria-label":`Unsubscribe ${t.name}`,title:s("unsubscribeTooltip"),children:l.jsx(Pv,{className:"w-5 h-5"})})]},t.id))}):l.jsx("p",{className:"text-slate-500 italic",children:s("subNoUsersSubscribed")})]}),u.length>0&&l.jsxs("div",{className:"mt-auto pt-4 border-t border-slate-200",children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-600 mb-2",children:s("subSubscribeUserTitle")}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[l.jsxs("select",{value:i,onChange:e=>o(e.target.value),className:"w-full bg-white border border-slate-300 rounded-lg p-3 text-slate-900 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition duration-200",children:[l.jsx("option",{value:"",disabled:!0,children:s("subSelectUser")}),u.map(e=>l.jsx("option",{value:e.id,children:e.name},e.id))]}),l.jsx("button",{onClick:()=>{i&&(r(e.id,i),o(""))},disabled:!i,className:"px-6 py-3 border border-transparent font-medium rounded-lg shadow-sm text-white bg-cyan-500 hover:bg-cyan-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-white focus:ring-cyan-500 disabled:bg-slate-300 disabled:cursor-not-allowed transition-colors duration-200 w-full sm:w-auto",children:s("subSubscribeBtn")})]})]})]})},Dv=({users:e,trainings:t,subscriptions:n,onSubscribe:r,onUnsubscribe:a,onHelpClick:s})=>{const{user:i}=yv(),{t:o}=Tv(),{setContext:c}=_v();z.useEffect(()=>{c({screen:"Subscription Page",action:"Viewing subscriptions"})},[]);const[u,d]=z.useState(""),h=t.filter(e=>e.name.toLowerCase().includes(u.toLowerCase())||e.description.toLowerCase().includes(u.toLowerCase()));return l.jsxs("div",{className:"animate-fade-in",children:[l.jsx("div",{className:"relative mb-8 rounded-xl overflow-hidden shadow-lg",children:l.jsxs("div",{className:"relative h-48 md:h-64",children:[l.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url(/ntr_banner.png)"}}),l.jsxs("div",{className:"relative z-10 h-full flex flex-col items-center justify-center text-center px-6",children:[l.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-white mb-4 drop-shadow-lg",children:o("upcomingTrainingsTitle")}),l.jsx("p",{className:"text-lg md:text-xl lg:text-2xl text-blue-100 max-w-2xl drop-shadow-md",children:o("bookYourSpotMessage")}),l.jsx("div",{className:"absolute top-4 left-4 w-2 h-2 bg-white/30 rounded-full"}),l.jsx("div",{className:"absolute top-8 right-8 w-1 h-1 bg-white/40 rounded-full"}),l.jsx("div",{className:"absolute bottom-6 left-8 w-1.5 h-1.5 bg-white/25 rounded-full"}),l.jsx("div",{className:"absolute bottom-4 right-4 w-2 h-2 bg-white/35 rounded-full"})]}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/40 to-black/20"})]})}),t.length>0&&l.jsx("div",{className:"mb-6",children:l.jsx("input",{type:"text",placeholder:o("subSearchPlaceholder"),value:u,onChange:e=>d(e.target.value),className:"w-full bg-white border border-slate-300 rounded-lg p-3 text-slate-900 placeholder-slate-400 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition duration-200"})}),t.length>0?h.length>0?l.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(t=>l.jsx(Lv,{training:t,allUsers:e,subscribedUserIds:n.get(t.id)||new Set,onSubscribe:r,onUnsubscribe:a},t.id))}):l.jsx("div",{className:"text-center py-10",children:l.jsx("p",{className:"text-slate-500 text-lg",children:o("subNoTrainingsMatch")})}):l.jsx("div",{className:"text-center py-10",children:l.jsx("p",{className:"text-slate-500 text-lg",children:o("subNoTrainingsCreated")})})]})},Mv=({user:e,onClose:t})=>{const{t:n}=Tv(),[r,a]=V.useState({width:480,height:420}),[s,i]=V.useState({x:0,y:0}),o=V.useRef(null),[c,u]=V.useState(!1),[d,h]=V.useState(""),[m,g]=V.useState({x:0,y:0}),[p,f]=V.useState({width:0,height:0}),[v,b]=V.useState({x:0,y:0}),y=(e,t)=>{e.stopPropagation(),console.log("WelcomeModal resize started:",t,"at:",{x:e.clientX,y:e.clientY}),h(t),g({x:e.clientX,y:e.clientY}),f({width:r.width,height:r.height}),b({x:s.x,y:s.y}),u(!0)},x=e=>{if(c&&o.current){o.current.getBoundingClientRect();const t=e.clientX-m.x,n=e.clientY-m.y;let r=p.width,s=p.height,l=v.x,c=v.y;d.includes("e")&&(r=p.width+t),d.includes("w")&&(r=p.width-t,l=v.x+t),d.includes("s")&&(s=p.height+n),d.includes("n")&&(s=p.height-n,c=v.y+n);const u=360,h=300,g=window.innerWidth-20,f=window.innerHeight-20;r=Math.max(u,Math.min(g,r)),s=Math.max(h,Math.min(f,s)),l=Math.max(10,Math.min(window.innerWidth-r-10,l)),c=Math.max(10,Math.min(window.innerHeight-s-10,c)),console.log("WelcomeModal resize move:",{deltaX:t,deltaY:n,newWidth:r,newHeight:s,newX:l,newY:c}),a({width:r,height:s}),i({x:l,y:c})}},k=()=>{u(!1),h("")};V.useEffect(()=>{if(c)return document.addEventListener("mousemove",x),document.addEventListener("mouseup",k),()=>{document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",k)}},[c,d]),z.useEffect(()=>{const e=setTimeout(()=>{t()},5e3);return()=>clearTimeout(e)},[t]),z.useEffect(()=>{const e=(window.innerWidth-r.width)/2,t=(window.innerHeight-r.height)/2;i({x:e,y:t})},[]);const w=e.voucherBalance>0?e.voucherBalance-1:0;return l.jsx("div",{className:"fixed inset-0 bg-slate-900/60 z-50 animate-fade-in",children:l.jsxs("div",{ref:o,style:{width:`${r.width}px`,height:`${r.height}px`,left:`${s.x}px`,top:`${s.y}px`},className:"absolute bg-white rounded-2xl p-8 md:p-12 border border-slate-200 shadow-2xl text-center relative select-none",children:[l.jsx("h2",{className:"text-3xl sm:text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-purple-500 to-cyan-600 mb-4",children:n("welcomeMessage",{name:e.name})}),l.jsx("p",{className:"text-slate-600 text-lg mb-6",children:n("welcomeSubMessage")}),l.jsxs("div",{className:"bg-slate-100 rounded-lg p-4 border border-slate-200",children:[l.jsx("p",{className:"text-slate-500",children:n("welcomeBalanceLabel")}),l.jsx("p",{className:"text-slate-900 text-3xl font-bold",children:w})]}),l.jsx("button",{onClick:t,className:"mt-8 w-full px-6 py-3 border border-transparent text-base font-medium rounded-lg shadow-sm text-white bg-cyan-500 hover:bg-cyan-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-white focus:ring-cyan-500 transition-colors duration-200",children:n("welcomeCloseBtn")}),l.jsx("div",{className:"absolute top-0 left-2 right-2 h-2 cursor-n-resize z-50 hover:bg-blue-500 hover:opacity-30",onMouseDown:e=>y(e,"n")}),l.jsx("div",{className:"absolute bottom-0 left-2 right-2 h-2 cursor-s-resize z-50 hover:bg-blue-500 hover:opacity-30",onMouseDown:e=>y(e,"s")}),l.jsx("div",{className:"absolute top-2 bottom-2 left-0 w-2 cursor-w-resize z-50 hover:bg-blue-500 hover:opacity-30",onMouseDown:e=>y(e,"w")}),l.jsx("div",{className:"absolute top-2 bottom-2 right-0 w-2 cursor-e-resize z-50 hover:bg-blue-500 hover:opacity-30",onMouseDown:e=>y(e,"e")}),l.jsx("div",{className:"absolute top-0 left-0 w-4 h-4 cursor-nw-resize z-50 hover:bg-blue-500 hover:opacity-50",onMouseDown:e=>y(e,"nw")}),l.jsx("div",{className:"absolute top-0 right-0 w-4 h-4 cursor-ne-resize z-50 hover:bg-blue-500 hover:opacity-50",onMouseDown:e=>y(e,"ne")}),l.jsx("div",{className:"absolute bottom-0 left-0 w-4 h-4 cursor-sw-resize z-50 hover:bg-blue-500 hover:opacity-50",onMouseDown:e=>y(e,"sw")}),l.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 cursor-se-resize z-50 hover:bg-blue-500 hover:opacity-50",onMouseDown:e=>y(e,"se")})]})})},Rv=({training:e,allUsers:t,subscribedUserIds:n,attendeeIds:r,onMarkAttendance:a,onUnmarkAttendance:s,onClose:i})=>{const{t:o}=Tv(),[c,u]=z.useState(null),d=z.useMemo(()=>t.filter(e=>n.has(e.id)).sort((e,t)=>e.name.localeCompare(t.name)),[t,n]);return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"fixed inset-0 bg-slate-100/95 backdrop-blur-sm z-40 p-4 sm:p-8 flex flex-col items-center animate-fade-in",children:[l.jsx("button",{onClick:i,className:"absolute top-4 right-4 px-5 py-3 text-base font-medium rounded-lg transition-colors duration-200 bg-slate-200 text-slate-700 hover:bg-slate-300",children:o("kioskExitBtn")}),l.jsxs("div",{className:"text-center w-full max-w-4xl mx-auto",children:[l.jsx("h1",{className:"text-3xl sm:text-5xl font-extrabold text-cyan-600",children:e.name}),l.jsxs("div",{className:"inline-flex items-center px-3 py-1.5 text-sm font-medium text-slate-600 bg-slate-100 rounded-md mt-3 mb-2",children:[e.subscriberCount||0," ",1===(e.subscriberCount||0)?o("subscriberCountSingular"):o("subscriberCountPlural")]}),l.jsx("p",{className:"text-lg sm:text-xl text-slate-500 mt-2",children:o("kioskInstructions")})]}),l.jsx("div",{className:"mt-8 w-full max-w-4xl mx-auto overflow-y-auto flex-grow",children:l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(t=>{const n=r.has(t.id);return l.jsxs("div",{className:"p-6 rounded-xl text-center transition-all duration-300 flex flex-col justify-center relative "+(n?"bg-green-100 border border-green-300":"bg-white border border-slate-200 shadow-sm"),children:[n&&l.jsx("button",{onClick:()=>(t=>{r.has(t.id)&&s(e.id,t.id)})(t),className:"absolute top-2 right-2 p-2 text-slate-600 bg-white border border-slate-300 rounded-md hover:bg-slate-100 hover:text-slate-900 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:ring-offset-2 transition-colors duration-200",title:o("kioskMarkNotPresentTitle"),children:l.jsx(Pv,{className:"w-5 h-5"})}),l.jsx("p",{className:"text-xl font-semibold text-slate-800 truncate",children:t.name}),n?l.jsx("div",{className:"mt-4 flex flex-col items-center",children:l.jsx("p",{className:"text-green-700 font-bold text-lg",children:o("kioskPresentStatus")})}):l.jsx("button",{onClick:()=>(t=>{t.voucherBalance>0&&!r.has(t.id)&&(a(e.id,t.id),u(t))})(t),disabled:t.voucherBalance<=0,className:"mt-4 w-full px-6 py-4 text-lg font-semibold rounded-lg shadow-sm text-white bg-cyan-500 hover:bg-cyan-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-100 focus:ring-cyan-500 disabled:bg-slate-300 disabled:cursor-not-allowed transition-colors duration-200",children:o("kioskPresentBtn")})]},t.id)})})})]}),c&&l.jsx(Mv,{user:c,onClose:()=>u(null)})]})},Uv=({training:e,allUsers:t,subscribedUserIds:n,attendeeIds:r,onMarkAttendance:a,onUnmarkAttendance:s,onOpenKiosk:i})=>{const{t:o}=Tv(),c=z.useMemo(()=>t.filter(e=>n.has(e.id)),[t,n]);return l.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-md flex flex-col relative overflow-visible","data-tour":"attendance-cards",children:[l.jsx("div",{className:"flex items-start justify-between mb-4",children:l.jsxs("div",{className:"flex items-start space-x-4 flex-1",children:[(e.training_date||e.training_time)&&l.jsx("div",{className:"flex-shrink-0",children:l.jsx(Iv,{date:e.training_date,time:e.training_time,className:"w-20"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h2",{className:"text-2xl font-bold text-cyan-600 mb-2",children:e.name}),l.jsxs("div",{className:"inline-flex items-center px-2 py-1 text-xs font-medium text-slate-600 bg-slate-100 rounded-md",children:[e.subscriberCount||0," ",1===(e.subscriberCount||0)?o("subscriberCountSingular"):o("subscriberCountPlural")]})]})]})}),l.jsxs("div",{className:"flex-grow",children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-600 mb-2 border-b border-slate-200 pb-2",children:o("attSubscribedUsers")}),c.length>0?l.jsx("ul",{className:"space-y-3 mt-3",children:c.map(t=>{const n=r.has(t.id);return l.jsxs("li",{className:"flex items-center justify-between p-3 rounded-lg relative transition-all duration-300 "+(n?"bg-green-100 border border-green-300":"bg-slate-50"),children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-slate-800",children:t.name}),l.jsxs("p",{className:"text-xs text-slate-500",children:[o("attVouchersLabel"),": ",t.voucherBalance]})]}),n?l.jsx("button",{onClick:()=>s(e.id,t.id),className:"p-2 text-slate-600 bg-white border border-slate-300 rounded-md hover:bg-slate-100 hover:text-slate-900 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:ring-offset-2 transition-colors duration-200",title:o("attMarkNotPresentBtn"),children:l.jsx(Pv,{className:"w-4 h-4"})}):l.jsx("button",{onClick:()=>a(e.id,t.id),disabled:t.voucherBalance<=0,className:"px-4 py-2 text-sm font-medium rounded-lg shadow-sm text-white bg-cyan-500 hover:bg-cyan-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-white focus:ring-cyan-500 disabled:bg-slate-300 disabled:cursor-not-allowed disabled:opacity-50 transition-colors duration-200",children:o("attMarkPresentBtn")})]},t.id)})}):l.jsx("p",{className:"text-slate-500 italic mt-3",children:o("attNoUsersSubscribed")})]}),l.jsx("div",{className:"mt-4 pt-4 border-t border-slate-200",children:l.jsx("button",{onClick:i,"data-tour":"kiosk-mode",className:"w-full text-center px-6 py-3 text-base font-medium rounded-lg transition-colors duration-200 bg-slate-200 text-slate-700 hover:bg-slate-300",children:o("attOpenKioskBtn")})})]})},Fv=({users:e,trainings:t,subscriptions:n,attendance:r,onMarkAttendance:a,onUnmarkAttendance:s,onHelpClick:i})=>{const{user:o}=yv(),{t:c}=Tv(),{setContext:u}=_v();z.useEffect(()=>{u({screen:"Attendance Page",action:"Viewing attendance"})},[]);const[d,h]=z.useState(null),m=()=>{h(null)};return d?l.jsx(Rv,{training:d,allUsers:e,subscribedUserIds:n.get(d.id)||new Set,attendeeIds:r.get(d.id)||new Set,onMarkAttendance:a,onUnmarkAttendance:s,onClose:m}):l.jsxs("div",{className:"animate-fade-in",children:[l.jsx("div",{className:"flex items-center justify-between mb-6",children:l.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:c("navAttendance")})}),t.length>0?l.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(t=>l.jsx(Uv,{training:t,allUsers:e,subscribedUserIds:n.get(t.id)||new Set,attendeeIds:r.get(t.id)||new Set,onMarkAttendance:a,onUnmarkAttendance:s,onOpenKiosk:()=>(e=>{h(e)})(t)},t.id))}):l.jsx("div",{className:"text-center py-10",children:l.jsx("p",{className:"text-slate-500 text-lg",children:c("attNoTrainingsCreated")})})]})},Ov=({id:e,label:t,value:n,onChange:r,type:a="text",isTextArea:s=!1})=>l.jsxs("div",{children:[l.jsx("label",{htmlFor:e,className:"block text-sm font-medium text-slate-600 mb-1",children:t}),s?l.jsx("textarea",{id:e,value:n,onChange:r,rows:3,className:"w-full bg-slate-50 border border-slate-300 rounded-md p-2 text-slate-900 placeholder-slate-400 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition duration-200 resize-none"}):l.jsx("input",{id:e,type:a,value:n,onChange:r,className:"w-full bg-slate-50 border border-slate-300 rounded-md p-2 text-slate-900 placeholder-slate-400 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition duration-200"})]}),$v=({trainings:e,onCreateTraining:t,onUpdateTraining:n,onDeleteTraining:r,onHelpClick:a})=>{const{user:s}=yv(),{t:i}=Tv(),{setContext:o}=_v();z.useEffect(()=>{o({screen:"Trainings Page",action:"Viewing trainings list",data:{}})},[]);const[c,u]=z.useState(!1),[d,h]=z.useState(null),[m,g]=z.useState(""),[p,f]=z.useState(""),[v,b]=z.useState(""),[y,x]=z.useState("");V.useEffect(()=>{const e=()=>{console.log(" AI triggered: Opening add training form"),u(!0)};return window.addEventListener("open-add-training-form",e),()=>window.removeEventListener("open-add-training-form",e)},[]);const[k,w]=z.useState(""),S=(e,t,n)=>{e(n),o(e=>({...e,action:d?"Editing training":"Creating new training",data:{...e.data,[t]:n}}))},j=()=>{h(null),g(""),f(""),b(""),x("")},C=e.filter(e=>e.name.toLowerCase().includes(k.toLowerCase())||e.description.toLowerCase().includes(k.toLowerCase())),N=null!==d;return l.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-8",children:[l.jsx("div",{className:"flex items-center space-x-4",children:l.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:i("navTrainings")})}),l.jsxs("button",{onClick:()=>u(!0),disabled:N,"data-tour":"add-training-button",className:"px-6 py-3 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:ring-offset-2 disabled:bg-slate-300 disabled:cursor-not-allowed transition-colors duration-200 flex items-center space-x-2",children:[l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),l.jsx("span",{children:i("addTrainingButton")})]})]}),l.jsx("div",{className:"mb-6",children:l.jsx("input",{type:"text",placeholder:i("searchTrainingsPlaceholder"),value:k,onChange:e=>w(e.target.value),className:"w-full bg-white border border-slate-300 rounded-lg p-3 text-slate-900 placeholder-slate-400 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition duration-200"})}),(c||N)&&l.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-md mb-8","data-tour":"create-training-form",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:i(N?"adminEditTraining":"adminCreateTraining")}),l.jsx("button",{onClick:N?j:()=>{u(!1),g(""),f(""),b(""),x("")},className:"text-slate-400 hover:text-slate-600 transition-colors",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx(Ov,{id:"training-title",label:i("adminTrainingTitleLabel"),value:m,onChange:e=>S(g,"trainingTitle",e.target.value)}),l.jsx(Ov,{id:"training-desc",label:i("adminTrainingDescLabel"),value:p,onChange:e=>S(f,"trainingDescription",e.target.value),isTextArea:!0}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx(Ov,{id:"training-date",label:i("adminTrainingDateLabel"),value:v,onChange:e=>S(b,"trainingDate",e.target.value),type:"date"}),l.jsx(Ov,{id:"training-time",label:i("adminTrainingTimeLabel"),value:y,onChange:e=>S(x,"trainingTime",e.target.value),type:"time"})]})]}),l.jsx("div",{className:"flex gap-4 mt-6",children:N?l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>{d&&m.trim()&&(n(d,m,p,v||void 0,y||void 0),h(null),g(""),f(""),b(""),x(""))},className:"px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-colors duration-200",children:i("adminUpdateBtn")}),l.jsx("button",{onClick:j,className:"px-6 py-3 bg-slate-300 text-slate-700 rounded-lg hover:bg-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-500 focus:ring-offset-2 transition-colors duration-200",children:i("adminCancelBtn")})]}):l.jsx("button",{onClick:()=>{m.trim()&&(t(m,p,v||void 0,y||void 0),g(""),f(""),b(""),x(""),u(!1))},disabled:!m.trim(),className:"px-6 py-3 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:ring-offset-2 disabled:bg-slate-300 disabled:cursor-not-allowed transition-colors duration-200",children:i("adminCreateTrainingBtn")})})]}),l.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-md",children:[l.jsx("div",{className:"p-6 border-b border-slate-200",children:l.jsxs("h2",{className:"text-xl font-semibold text-slate-800",children:[i("adminExistingTrainings")," (",C.length,")"]})}),l.jsx("div",{className:"p-6",children:C.length>0?l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:C.map(e=>l.jsxs("div",{className:"flex flex-col min-h-64 p-4 bg-slate-50 rounded-lg border border-slate-200 hover:shadow-md transition-shadow duration-200 relative overflow-visible",children:[l.jsx("div",{className:"mb-3",children:l.jsxs("div",{className:"flex items-start space-x-4",children:[(e.training_date||e.training_time)&&l.jsx("div",{className:"flex-shrink-0",children:l.jsx(Iv,{date:e.training_date,time:e.training_time,className:"w-20"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-semibold text-cyan-600 text-lg mb-2",children:e.name}),l.jsxs("div",{className:"inline-flex items-center px-2 py-1 text-xs font-medium text-slate-600 bg-slate-100 rounded-md mb-2",children:[e.subscriberCount||0," ",1===(e.subscriberCount||0)?i("subscriberCountSingular"):i("subscriberCountPlural")]})]})]})}),l.jsx("div",{className:"flex-grow",children:e.description&&l.jsx("div",{className:"w-full",children:l.jsx("p",{className:"text-sm text-slate-600",children:e.description})})}),l.jsxs("div",{className:"flex items-center justify-end space-x-2 mt-4 pt-3 border-t border-slate-200",children:[l.jsx("button",{onClick:()=>(e=>{h(e.id),g(e.name),f(e.description),b(e.training_date||""),x(e.training_time||""),u(!1)})(e),disabled:N||c,title:i("adminEditBtn"),className:"p-2 text-slate-600 bg-white border border-slate-300 rounded-md hover:bg-slate-100 hover:text-slate-900 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:ring-offset-2 disabled:bg-slate-200 disabled:text-slate-400 disabled:cursor-not-allowed transition-colors duration-200",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),l.jsx("button",{onClick:()=>(e=>{window.confirm(i("confirmDeleteTraining",{name:e.name}))&&r(e.id)})(e),disabled:N||c,title:i("adminDeleteBtn"),className:"p-2 text-red-600 bg-white border border-red-300 rounded-md hover:bg-red-50 hover:text-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 disabled:bg-slate-200 disabled:text-slate-400 disabled:cursor-not-allowed transition-colors duration-200",children:l.jsx(Pv,{className:"w-4 h-4"})})]})]},e.id))}):l.jsxs("div",{className:"text-center py-12",children:[l.jsx("svg",{className:"w-16 h-16 text-slate-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),l.jsx("h3",{className:"text-lg font-medium text-slate-600 mb-2",children:i(k?"noTrainingsMatchSearch":"adminNoTrainings")}),!k&&l.jsx("p",{className:"text-slate-500",children:i("noTrainingsHint")})]})})]})]})},Hv=({id:e,label:t,value:n,onChange:r,type:a="text"})=>l.jsxs("div",{children:[l.jsx("label",{htmlFor:e,className:"block text-sm font-medium text-slate-600 mb-1",children:t}),l.jsx("input",{id:e,type:a,value:n,onChange:r,className:"w-full bg-slate-50 border border-slate-300 rounded-md p-2 text-slate-900 placeholder-slate-400 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition duration-200"})]}),Bv=({users:e,onCreateUser:t,onUpdateUser:n,onAddVoucher:r,onRemoveVoucher:a,onHelpClick:s})=>{const{user:i}=yv(),{t:o}=Tv(),{setContext:c}=_v();z.useEffect(()=>{c({screen:"Users Page",action:"Viewing users list",data:{}})},[]);const[u,d]=z.useState(!1),[h,m]=z.useState(null),[g,p]=z.useState(""),[f,v]=z.useState(""),[b,y]=z.useState("");V.useEffect(()=>{const e=()=>{console.log(" AI triggered: Opening add user form"),d(!0)};return window.addEventListener("open-add-user-form",e),()=>window.removeEventListener("open-add-user-form",e)},[]);const x=(e,t,n)=>{e(n),c(e=>({...e,action:h?"Editing user":"Creating a new user",data:{...e.data,[t]:n}}))},k=()=>{m(null),p(""),v("")},w=()=>{d(!1),p(""),v("")},S=e.filter(e=>e.name.toLowerCase().includes(b.toLowerCase())||e.email.toLowerCase().includes(b.toLowerCase())),j=null!==h;return l.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-8",children:[l.jsx("div",{className:"flex items-center space-x-4",children:l.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:o("navUsers")})}),l.jsxs("button",{onClick:()=>d(!0),disabled:j,"data-tour":"add-user-button",className:"px-6 py-3 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:ring-offset-2 disabled:bg-slate-300 disabled:cursor-not-allowed transition-colors duration-200 flex items-center space-x-2",children:[l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),l.jsx("span",{children:o("addUserButton")})]})]}),l.jsx("div",{className:"mb-6",children:l.jsx("input",{type:"text",placeholder:o("adminSearchPlaceholder"),value:b,onChange:e=>y(e.target.value),className:"w-full bg-white border border-slate-300 rounded-lg p-3 text-slate-900 placeholder-slate-400 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition duration-200"})}),(u||j)&&l.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-md mb-8","data-tour":"create-user-form",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:o(j?"adminEditUser":"adminCreateUser")}),l.jsx("button",{onClick:j?k:w,className:"text-slate-400 hover:text-slate-600 transition-colors",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx(Hv,{id:"user-name",label:o("adminUserNameLabel"),value:g,onChange:e=>x(p,"userName",e.target.value)}),l.jsx(Hv,{id:"user-email",label:o("adminEmailLabel"),value:f,onChange:e=>x(v,"userEmail",e.target.value),type:"email"})]}),l.jsx("div",{className:"flex gap-4 mt-6",children:j?l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>{h&&g.trim()&&f.trim()&&(n(h,g,f),m(null),p(""),v(""))},disabled:!g.trim()||!f.trim(),className:"px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:bg-slate-300 disabled:cursor-not-allowed transition-colors duration-200",children:o("adminUpdateBtn")}),l.jsx("button",{onClick:k,className:"px-6 py-3 bg-slate-300 text-slate-700 rounded-lg hover:bg-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-500 focus:ring-offset-2 transition-colors duration-200",children:o("adminCancelBtn")})]}):l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>{g.trim()&&f.trim()&&(t(g,f),p(""),v(""),d(!1))},disabled:!g.trim()||!f.trim(),className:"px-6 py-3 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:ring-offset-2 disabled:bg-slate-300 disabled:cursor-not-allowed transition-colors duration-200",children:o("adminCreateUserBtn")}),l.jsx("button",{onClick:w,className:"px-6 py-3 bg-slate-300 text-slate-700 rounded-lg hover:bg-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-500 focus:ring-offset-2 transition-colors duration-200",children:o("adminCancelBtn")})]})})]}),l.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-md",children:[l.jsx("div",{className:"p-6 border-b border-slate-200",children:l.jsxs("h2",{className:"text-xl font-semibold text-slate-800",children:[o("adminExistingUsers")," (",S.length,")"]})}),l.jsx("div",{className:"p-6",children:S.length>0?l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:S.map(e=>l.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg border border-slate-200 hover:shadow-md transition-shadow duration-200",children:[l.jsxs("div",{className:"flex items-start justify-between mb-3",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-10 h-10 bg-cyan-500 rounded-full flex items-center justify-center text-white font-semibold",children:e.name.charAt(0).toUpperCase()}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-cyan-600",children:e.name}),l.jsx("p",{className:"text-sm text-slate-500",children:e.email})]})]}),l.jsx("button",{onClick:()=>(e=>{m(e.id),p(e.name),v(e.email),d(!1)})(e),disabled:j||u,title:o("adminEditBtn"),className:"p-2 text-slate-600 bg-white border border-slate-300 rounded-md hover:bg-slate-100 hover:text-slate-900 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:ring-offset-2 disabled:bg-slate-200 disabled:text-slate-400 disabled:cursor-not-allowed transition-colors duration-200",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("svg",{className:"w-4 h-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"})}),l.jsxs("span",{className:"text-sm text-slate-600",children:[o("adminVouchersLabel"),": ",l.jsx("span",{className:"font-bold text-slate-900",children:e.voucherBalance})]})]}),l.jsxs("div",{className:"flex gap-2","data-tour":"voucher-management",children:[l.jsx("button",{onClick:()=>r(e.id),className:"w-8 h-8 flex items-center justify-center text-sm font-bold bg-green-100 text-green-700 rounded-full hover:bg-green-200 transition-colors",title:o("addVoucherTooltip"),children:"+"}),l.jsx("button",{onClick:()=>a(e.id),disabled:e.voucherBalance<=0,className:"w-8 h-8 flex items-center justify-center text-sm font-bold bg-red-100 text-red-700 rounded-full hover:bg-red-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:o("removeVoucherTooltip"),children:"-"})]})]})]},e.id))}):l.jsxs("div",{className:"text-center py-12",children:[l.jsx("svg",{className:"w-16 h-16 text-slate-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})}),l.jsx("h3",{className:"text-lg font-medium text-slate-600 mb-2",children:o(b?"adminNoUserMatches":"adminNoUsers")}),!b&&l.jsx("p",{className:"text-slate-500",children:o("noUsersHint")})]})})]})]})},zv={async getAll(){const{data:e,error:t}=await vv.from("users").select("*").order("created_at",{ascending:!1});if(t)throw console.error("Error fetching users:",t),t;return e?.map(e=>({id:e.id,name:e.name,email:e.email,voucherBalance:e.voucher_balance}))||[]},async create(e,t){const n=crypto.randomUUID();let r,a=null;try{const{data:e,error:n}=await vv.from("users").select("id, name, email, voucher_balance").eq("email",t).maybeSingle();n?console.error("Error checking existing user:",n):e&&(a=e)}catch(s){console.error("Exception checking existing user:",s)}if(a)try{const{data:t,error:n}=await vv.from("users").update({name:e,voucher_balance:0}).eq("id",a.id).select().single();if(n)throw console.error("Error updating existing user:",n),n;r=t}catch(s){throw console.error("Exception updating existing user:",s),s}else try{const{data:a,error:s}=await vv.from("users").insert([{id:n,name:e,email:t,voucher_balance:0}]).select().single();if(s)throw console.error("Error creating new user:",s),s;r=a}catch(s){throw console.error("Exception creating new user:",s),s}return console.log(`User ${e} created as participant/subscriber (no login access)`),{id:r.id,name:r.name,email:r.email,voucherBalance:r.voucher_balance}},async update(e,t,n){const{data:r,error:a}=await vv.from("users").update({name:t,email:n}).eq("id",e).select().single();if(a)throw console.error("Error updating user:",a),a;return{id:r.id,name:r.name,email:r.email,voucherBalance:r.voucher_balance}},async updateVoucherBalance(e,t){const{error:n}=await vv.from("users").update({voucher_balance:t}).eq("id",e);if(n)throw console.error("Error updating user voucher balance:",n),n}},Vv={async getAll(){const{data:e,error:t}=await vv.from("trainings").select("*").order("created_at",{ascending:!1});if(t)throw console.error("Error fetching trainings:",t),t;const{data:n,error:r}=await vv.from("subscriptions").select("training_id");if(r)throw console.error("Error fetching subscriptions:",r),r;const a=new Map;return n?.forEach(e=>{a.set(e.training_id,(a.get(e.training_id)||0)+1)}),e?.map(e=>({id:e.id,name:e.name,description:e.description,training_date:e.training_date,training_time:e.training_time,subscriberCount:a.get(e.id)||0}))||[]},async create(e,t,n,r){const{data:a,error:s}=await vv.from("trainings").insert([{id:crypto.randomUUID(),name:e,description:t,training_date:n,training_time:r}]).select().single();if(s)throw console.error("Error creating training:",s),s;return{id:a.id,name:a.name,description:a.description,training_date:a.training_date,training_time:a.training_time,subscriberCount:0}},async update(e,t,n,r,a){const{error:s}=await vv.from("trainings").update({name:t,description:n,training_date:r,training_time:a}).eq("id",e);if(s)throw console.error("Error updating training:",s),s},async delete(e){const{error:t}=await vv.from("trainings").delete().eq("id",e);if(t)throw console.error("Error deleting training:",t),t}},Wv={async getAll(){const{data:e,error:t}=await vv.from("subscriptions").select("training_id, user_id");if(t)throw console.error("Error fetching subscriptions:",t),t;const n=new Map;return e?.forEach(e=>{n.has(e.training_id)||n.set(e.training_id,new Set),n.get(e.training_id).add(e.user_id)}),n},async subscribe(e,t){const{error:n}=await vv.from("subscriptions").insert([{id:crypto.randomUUID(),training_id:e,user_id:t}]).select();if(n){if("23505"===n.code)return void console.warn("User is already subscribed, ignoring error.");throw console.error("Error creating subscription:",n),n}},async unsubscribe(e,t){const{error:n}=await vv.from("subscriptions").delete().eq("training_id",e).eq("user_id",t);if(n)throw console.error("Error deleting subscription:",n),n}},Kv={async getAll(){const{data:e,error:t}=await vv.from("attendance").select("training_id, user_id");if(t)throw console.error("Error fetching attendance:",t),t;const n=new Map;return e?.forEach(e=>{n.has(e.training_id)||n.set(e.training_id,new Set),n.get(e.training_id).add(e.user_id)}),n},async markAttendance(e,t){const{error:n}=await vv.from("attendance").insert([{id:crypto.randomUUID(),training_id:e,user_id:t}]).select();if(n){if("23505"===n.code)return void console.warn("Attendance is already marked, ignoring error.");throw console.error("Error marking attendance:",n),n}},async unmarkAttendance(e,t){const{error:n}=await vv.from("attendance").delete().eq("training_id",e).eq("user_id",t);if(n)throw console.error("Error unmarking attendance:",n),n}},qv=()=>{const{t:e}=Tv();return l.jsxs("div",{className:"flex justify-center items-center py-10",children:[l.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-10 w-10 text-cyan-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),l.jsx("span",{className:"text-slate-500 text-lg",children:e("loadingText")})]})},Gv='# Help Content Guidelines\r\n\r\n## Content Management Standards\r\n\r\n### Language Priority\r\n- **Swedish is the master language** - All content should be written in Swedish first\r\n- **English is secondary** - English versions should be translated from Swedish\r\n- **Keep both versions in sync** - When updating one language, update the other\r\n\r\n## Developer Guidelines for UI Text\r\n\r\n### CRITICAL: Never Hardcode UI Text\r\n\r\n**The Problem:** Developers often hardcode English text directly in UI components, which creates several issues:\r\n- Text cannot be easily translated\r\n- Help documentation becomes outdated when UI text changes\r\n- Inconsistent user experience across languages\r\n- Difficult maintenance and updates\r\n\r\n**The Solution:** Always use the localization system with Swedish-first approach.\r\n\r\n### Step-by-Step Process for Adding New UI Text\r\n\r\n#### 1. **Write Text in Swedish First**\r\n- Think about what the text should say in Swedish\r\n- Write it naturally, following the tone and voice guidelines\r\n- Consider the context and user needs\r\n\r\n#### 2. **Add to Swedish Locale File**\r\n- Open `locales/sv.json`\r\n- Add a new key with descriptive name\r\n- Use camelCase naming convention\r\n- Example: `"newFeatureButton": "Skapa ny funktion"`\r\n\r\n#### 3. **Translate to English**\r\n- Open `locales/en.json`\r\n- Add the same key with English translation\r\n- Maintain the same meaning and tone\r\n- Example: `"newFeatureButton": "Create new feature"`\r\n\r\n#### 4. **Use in UI Component**\r\n- Import the translation hook: `import { useTranslations } from \'../hooks/useTranslations\'`\r\n- Use the key in your component: `const t = useTranslations(); <button>{t(\'newFeatureButton\')}</button>`\r\n\r\n### Examples of Correct vs Incorrect Implementation\r\n\r\n####  INCORRECT - Hardcoded English Text\r\n```tsx\r\n// DON\'T DO THIS\r\nfunction CreateUserButton() {\r\n  return <button>Create User</button>;\r\n}\r\n```\r\n\r\n####  INCORRECT - Hardcoded Swedish Text\r\n```tsx\r\n// DON\'T DO THIS\r\nfunction CreateUserButton() {\r\n  return <button>Skapa anvndare</button>;\r\n}\r\n```\r\n\r\n####  CORRECT - Using Localization System\r\n```tsx\r\n// DO THIS\r\nfunction CreateUserButton() {\r\n  const t = useTranslations();\r\n  return <button>{t(\'adminCreateUserBtn\')}</button>;\r\n}\r\n```\r\n\r\n### Key Naming Conventions\r\n\r\n**Use descriptive, hierarchical naming:**\r\n- `adminCreateUserBtn` - Admin panel, create user button\r\n- `navAttendance` - Navigation, attendance link\r\n- `subSearchPlaceholder` - Subscription page, search placeholder\r\n- `attMarkPresentBtn` - Attendance page, mark present button\r\n\r\n**Avoid generic names:**\r\n-  `button1`, `text1`, `label1`\r\n-  `createBtn`, `saveBtn`, `cancelBtn` (too generic)\r\n-  `adminCreateTrainingBtn`, `adminSaveTrainingBtn`, `adminCancelBtn`\r\n\r\n### Complete Workflow Example\r\n\r\n**Scenario:** Adding a new "Delete Training" button to the admin panel\r\n\r\n#### Step 1: Write Swedish Text\r\nThink: "Ta bort trning" (Delete training)\r\n\r\n#### Step 2: Add to Swedish Locale\r\n```json\r\n// locales/sv.json\r\n{\r\n  "adminDeleteTrainingBtn": "Ta bort trning"\r\n}\r\n```\r\n\r\n#### Step 3: Translate to English\r\n```json\r\n// locales/en.json\r\n{\r\n  "adminDeleteTrainingBtn": "Delete Training"\r\n}\r\n```\r\n\r\n#### Step 4: Use in Component\r\n```tsx\r\n// components/TrainingManagementPage.tsx\r\nfunction TrainingManagementPage() {\r\n  const t = useTranslations();\r\n  \r\n  return (\r\n    <div>\r\n      <button onClick={handleDelete}>\r\n        {t(\'adminDeleteTrainingBtn\')}\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n```\r\n\r\n### Verification Checklist for Developers\r\n\r\nBefore committing any UI changes:\r\n- [ ] **No hardcoded text** in any UI component\r\n- [ ] **Swedish text added first** to `locales/sv.json`\r\n- [ ] **English translation added** to `locales/en.json`\r\n- [ ] **Key names are descriptive** and follow naming convention\r\n- [ ] **Component uses translation hook** correctly\r\n- [ ] **Both languages tested** in the application\r\n- [ ] **Text follows tone and voice guidelines** (Swedish first)\r\n\r\n### Common Mistakes to Avoid\r\n\r\n1. **Hardcoding any text** - Always use localization keys\r\n2. **Writing English first** - Swedish is the master language\r\n3. **Generic key names** - Use descriptive, hierarchical names\r\n4. **Missing English translation** - Both languages must be added\r\n5. **Inconsistent naming** - Follow the established pattern\r\n6. **Forgetting to test** - Verify both languages work correctly\r\n\r\n### Why This Approach Works\r\n\r\n- **Consistent translations** - Swedish-first ensures natural language flow\r\n- **Easy maintenance** - Update text in one place, affects entire application\r\n- **Help documentation stays current** - Uses same keys as interface\r\n- **Better user experience** - Proper localization support\r\n- **Developer efficiency** - Clear process prevents confusion\r\n\r\n### Real-World Examples\r\n\r\n#### Example 1: Adding a New Button\r\n\r\n**Scenario:** Adding a "Save Changes" button to the training edit form\r\n\r\n** WRONG WAY:**\r\n```tsx\r\n// Component with hardcoded English text\r\nfunction TrainingEditForm() {\r\n  return (\r\n    <form>\r\n      <button type="submit">Save Changes</button>\r\n    </form>\r\n  );\r\n}\r\n```\r\n\r\n** CORRECT WAY:**\r\n```json\r\n// locales/sv.json (Swedish first)\r\n{\r\n  "adminSaveChangesBtn": "Spara ndringar"\r\n}\r\n```\r\n\r\n```json\r\n// locales/en.json (English translation)\r\n{\r\n  "adminSaveChangesBtn": "Save Changes"\r\n}\r\n```\r\n\r\n```tsx\r\n// Component using localization\r\nfunction TrainingEditForm() {\r\n  const t = useTranslations();\r\n  return (\r\n    <form>\r\n      <button type="submit">{t(\'adminSaveChangesBtn\')}</button>\r\n    </form>\r\n  );\r\n}\r\n```\r\n\r\n#### Example 2: Adding Form Labels\r\n\r\n**Scenario:** Adding labels for a new user registration form\r\n\r\n** WRONG WAY:**\r\n```tsx\r\n// Hardcoded Swedish text\r\nfunction UserRegistrationForm() {\r\n  return (\r\n    <form>\r\n      <label>Frnamn</label>\r\n      <input type="text" />\r\n      <label>Efternamn</label>\r\n      <input type="text" />\r\n    </form>\r\n  );\r\n}\r\n```\r\n\r\n** CORRECT WAY:**\r\n```json\r\n// locales/sv.json\r\n{\r\n  "userFirstNameLabel": "Frnamn",\r\n  "userLastNameLabel": "Efternamn"\r\n}\r\n```\r\n\r\n```json\r\n// locales/en.json\r\n{\r\n  "userFirstNameLabel": "First Name",\r\n  "userLastNameLabel": "Last Name"\r\n}\r\n```\r\n\r\n```tsx\r\n// Component using localization\r\nfunction UserRegistrationForm() {\r\n  const t = useTranslations();\r\n  return (\r\n    <form>\r\n      <label>{t(\'userFirstNameLabel\')}</label>\r\n      <input type="text" />\r\n      <label>{t(\'userLastNameLabel\')}</label>\r\n      <input type="text" />\r\n    </form>\r\n  );\r\n}\r\n```\r\n\r\n#### Example 3: Adding Error Messages\r\n\r\n**Scenario:** Adding validation error messages\r\n\r\n** WRONG WAY:**\r\n```tsx\r\n// Hardcoded English error message\r\nfunction validateEmail(email) {\r\n  if (!email.includes(\'@\')) {\r\n    return "Please enter a valid email address";\r\n  }\r\n}\r\n```\r\n\r\n** CORRECT WAY:**\r\n```json\r\n// locales/sv.json\r\n{\r\n  "validationEmailInvalid": "Ange en giltig e-postadress"\r\n}\r\n```\r\n\r\n```json\r\n// locales/en.json\r\n{\r\n  "validationEmailInvalid": "Please enter a valid email address"\r\n}\r\n```\r\n\r\n```tsx\r\n// Using localization for error messages\r\nfunction validateEmail(email, t) {\r\n  if (!email.includes(\'@\')) {\r\n    return t(\'validationEmailInvalid\');\r\n  }\r\n}\r\n```\r\n\r\n### Key Benefits Demonstrated\r\n\r\n1. **Automatic Translation:** When you change `adminSaveChangesBtn` from "Spara ndringar" to "Spara alla ndringar", both the UI and help documentation automatically update.\r\n\r\n2. **Consistent Experience:** Users see the same terminology across all parts of the application.\r\n\r\n3. **Easy Maintenance:** Update text in one place (locale files) instead of searching through multiple components.\r\n\r\n4. **Help Documentation Sync:** Help writers can reference `{adminSaveChangesBtn}` and it will always show the current button text.\r\n\r\n### Quick Reference for Developers\r\n\r\n**Always follow this pattern:**\r\n1. Think in Swedish first\r\n2. Add to `locales/sv.json`\r\n3. Translate to `locales/en.json`\r\n4. Use `{t(\'keyName\')}` in component\r\n5. Test both languages\r\n\r\n**Never do this:**\r\n- Hardcode any text in components\r\n- Write English first, then translate\r\n- Use generic key names\r\n- Skip testing both languages\r\n\r\n## Information Types and Structure\r\n\r\n### Different Levels of Information\r\n\r\nWhen writing help texts, we work with different types of topics/levels of information. The basic "start kit level" should include **Concept** and **Instruction** information types. Additional types are added based on complexity and user needs.\r\n\r\n### 1. Concept Pages\r\n\r\n**Purpose:** Serve as introduction to an area and can be used as landing pages when linking from external sites.\r\n\r\n**Content should help readers understand:**\r\n- If the feature is suitable for their task\r\n- Any prerequisites to consider\r\n- What to do next (next steps or related features)\r\n\r\n**Structure:**\r\n- Clear introduction to the main purpose\r\n- How it relates to other parts of the system\r\n- Best practice workflows (illustrations can complement text)\r\n- Prerequisites and requirements\r\n\r\n**Example:** System overview, voucher system explanation\r\n\r\n### 2. Instructions\r\n\r\n**Purpose:** Guide readers through performing specific tasks in the software.\r\n\r\n**Structure:**\r\n1. **Brief preamble** - Explain purpose and specify prerequisites\r\n2. **Numbered action points** - Step-by-step instructions\r\n3. **Use imperative mood** - "Click", "Select", "Enter" (not "You click", "You select")\r\n4. **Combine minor steps** - Group related actions in one major step\r\n\r\n**Interface Text Guidelines:**\r\n- Make interface texts **bold**\r\n- Use exact wording from the interface\r\n- Initial letter in uppercase\r\n- Example: "Select **Sales** - **Sales invoices** - **New sales invoice**"\r\n\r\n**Additional Information:**\r\n- Use info boxes for non-action information\r\n- Distinguish between "need to know" vs "nice to know"\r\n- Keep instructions focused and not too lengthy\r\n\r\n### 3. Field Explanations\r\n\r\n**Purpose:** Explain specific fields, buttons, or settings.\r\n\r\n**Content should explain:**\r\n- What the field/term means\r\n- Whether it\'s relevant to use\r\n- What information to enter\r\n- Consequences/benefits of filling it out\r\n- Where information comes from (if auto-filled)\r\n\r\n**Note:** Only explain fields that are not self-explanatory in the interface.\r\n\r\n### 4. Checklists\r\n\r\n**Purpose:** Guide through processes involving multiple instructions across different parts of the system.\r\n\r\n**Structure:**\r\n- Can be standalone topics or part of concept topics\r\n- Include instructions as steps or link to separate instruction topics\r\n- Focus on "what and why" for each step\r\n\r\n### 5. FAQ (Frequently Asked Questions)\r\n\r\n**Purpose:** Provide quick answers to common questions and help users narrow down problems.\r\n\r\n**Content should:**\r\n1. Answer common "hang-ups" (Where do I find...? How do I...? When should I...?)\r\n2. Help users phrase their questions and find more information\r\n3. Provide links to detailed topics (not full instructions)\r\n\r\n**Header format:** Write as questions\r\n- "How do I delete an invoice?"\r\n- "Why can\'t I access the user settings?"\r\n\r\n### 6. Troubleshooting/Problem Solving\r\n\r\n**Purpose:** Guide users to correct mistakes and solve problems.\r\n\r\n**Structure:**\r\n- Separate from instructions (don\'t mix with "how to do it right")\r\n- Focus on correcting specific mistakes\r\n- Header should be a statement describing the problem\r\n\r\n**Header format:** Write as problem statements\r\n- "I have entered an incorrect date on an unpaid invoice"\r\n- "I have posted an invoice to the ledger by mistake"\r\n\r\n## Writing Principles\r\n\r\n### KISS - Keep It Short and Simple\r\n\r\n**Goal:** Make texts possible to "consume at a glance"\r\n\r\n**Techniques:**\r\n- Use short, simple words\r\n- Write short sentences\r\n- Use keywords in headers\r\n- Start with the takeaway of the text\r\n- Help readers quickly understand if they\'re in the right place\r\n\r\n### Language Usage\r\n\r\n**Tone and Voice Guidelines:**\r\n\r\n#### 1. ENKLA: RAKT P SAK / SMIDIGA / INTUITIVA\r\n- **Keep it simple:** Ju enklare desto bttre\r\n- **Avoid technical jargon:** Use everyday language instead of complex terms\r\n- **Short, clear headings:** Scale down word count in headers\r\n- **No metaphors:** Avoid unnecessary comparisons and analogies\r\n\r\n**Examples:**\r\n```\r\n Bad: "Genom en realtidsuppfljning av intkter kan du ka vrdet p de materiella tillgngarna."\r\n Good: "Om du fljer dina intkter lpande kan du ka vrdet p dina fysiska tillgngar."\r\n\r\n Bad: "Vrt ekonomisystem gr det superenkelt att logga in och se ver alla dina fakturor p nolltid."\r\n Good: "Checka in, checka av, checka ut."\r\n```\r\n\r\n#### 2. ENGAGERADE: HJLPSAMMA / PEPPANDE / LTTILLGNGLIGA\r\n- **Be generous and guiding:** Create positive experiences\r\n- **Feel like a knowledgeable colleague:** Friendly and helpful without complications\r\n- **Celebrate small wins:** Create "moments of joy" naturally\r\n- **Make it feel easy and safe:** Guide users forward clearly\r\n\r\n**Examples:**\r\n```\r\n Bad: "Fr att komma igng behver du frst navigera till instllningar och vlja rtt behrigheter innan du kan aktivera din tjnst."\r\n Good: "Tre steg och du r igng  vi guidar dig hela vgen!"\r\n\r\n Bad: "Du har registrerat ditt konto."\r\n Good: "Har du registrerat ditt konto? D r vi igng!"\r\n```\r\n\r\n#### 3. MNSKLIGA: EMPATISKA / KUNDCENTRERADE / INKLUDERANDE\r\n- **Sound human:** Write as if talking face-to-face\r\n- **Focus on real benefits:** Not what we offer, but what it means for the user\r\n- **Recognize life outside work:** People have interests, feelings, and lives\r\n- **Show empathy and warmth:** Create recognition and connection\r\n\r\n**Examples:**\r\n```\r\n Bad: "Vr innovativa plattform frbttrar dina affrsprocesser."\r\n Good: "Vi har tagit fram en lsning som gr din vardag som fretagare enklare."\r\n\r\n Bad: "Med Spiris minskar din administrativa brda genom automatiserade processer."\r\n Good: "Glm adminstress. Vi fixar allt det dr trkiga, s att du kan fokusera p livet  hmta barnen i tid eller ta en extra kafferast."\r\n\r\n Bad: "Vi har effektiva tjnster."\r\n Good: "Tid ver till det du tycker om."\r\n```\r\n\r\n**Terminology Guidelines:**\r\n- **Avoid:** "produkt", "system", "program", "applikation", "tillval", "tillgg", "tjnst"\r\n- **Use instead:** "funktioner", "ekonomiplattform", "plattform"\r\n- **Use "abonnemang"** instead of "avtal", "licens", or similar\r\n- **Keep it unified:** Convey the feeling of one cohesive system\r\n\r\n**Interface References:**\r\n- Always use exact words/phrases from the interface\r\n- Mark interface texts in **bold**\r\n- Use consistent wording for same actions\r\n\r\n**CRITICAL: Use Localization Keys, Not Hardcoded Text**\r\n\r\nWhen referencing interface elements in help documentation, you must use the localization keys from the locales JSON files, not the actual displayed text values. This ensures help documentation stays synchronized when interface texts are updated.\r\n\r\n**How to Reference Interface Text Correctly:**\r\n\r\n1. **Find the localization key** in `locales/sv.json` or `locales/en.json`\r\n2. **Use the key format** in your documentation: `{keyName}`\r\n3. **Include both languages** when documenting: `{keyName}` (Swedish: "Displayed Text", English: "Displayed Text")\r\n\r\n**Examples:**\r\n\r\n```\r\n Correct: Click **{adminCreateTrainingBtn}** to create a new training\r\n   (Swedish: "Skapa trning", English: "Create Training")\r\n\r\n Correct: Select **{navAttendance}** from the menu\r\n   (Swedish: "Incheckning", English: "Attendance")\r\n\r\n Incorrect: Click **Skapa trning** to create a new training\r\n Incorrect: Select **Incheckning** from the menu\r\n```\r\n\r\n**Why This Matters:**\r\n- When interface texts are updated in the code, help documentation automatically reflects the changes\r\n- Prevents outdated help content that shows old button names or menu items\r\n- Ensures consistency between interface and documentation\r\n- Makes maintenance easier for developers\r\n\r\n**Example:**\r\n```\r\n Good: Select **{navPublic}** - **{adminExistingTrainings}**\r\n Bad: Go to the sales section and click on articles\r\n```\r\n\r\n**Comprehensive Examples:**\r\n\r\n**Creating a Training:**\r\n```\r\n Correct: Click **{adminCreateTrainingBtn}** to start creating a new training\r\n   (Swedish: "Skapa trning", English: "Create Training")\r\n\r\n Incorrect: Click **Skapa trning** to start creating a new training\r\n Incorrect: Click **Create Training** to start creating a new training\r\n```\r\n\r\n**User Management:**\r\n```\r\n Correct: Go to **{adminExistingUsers}** to see all registered users\r\n   (Swedish: "Befintliga anvndare", English: "Existing Users")\r\n\r\n Incorrect: Go to **Befintliga anvndare** to see all registered users\r\n Incorrect: Go to **Existing Users** to see all registered users\r\n```\r\n\r\n**Navigation:**\r\n```\r\n Correct: Select **{navAttendance}** from the main menu\r\n   (Swedish: "Incheckning", English: "Attendance")\r\n\r\n Incorrect: Select **Incheckning** from the main menu\r\n Incorrect: Select **Attendance** from the main menu\r\n```\r\n\r\n**Search Functionality:**\r\n```\r\n Correct: Use **{adminSearchPlaceholder}** to find specific users\r\n   (Swedish: "Sk p namn eller e-post...", English: "Search by name or email...")\r\n\r\n Incorrect: Use **Sk p namn eller e-post...** to find specific users\r\n Incorrect: Use **Search by name or email...** to find specific users\r\n```\r\n\r\n**Multi-step Instructions:**\r\n```\r\n Correct: \r\n1. Click **{adminCreateTrainingBtn}**\r\n2. Fill in **{adminUserNameLabel}** field\r\n3. Click **{adminUpdateTrainingBtn}** to save\r\n\r\n Incorrect:\r\n1. Click **Skapa trning**\r\n2. Fill in **Visningsnamn** field  \r\n3. Click **Uppdatera trning** to save\r\n```\r\n\r\n**Why the Correct Approach Works:**\r\n- When developers update `adminCreateTrainingBtn` from "Skapa trning" to "Skapa ny trning", help documentation automatically reflects the change\r\n- No need to manually update help files when interface text changes\r\n- Maintains consistency across all documentation\r\n- Reduces maintenance overhead and prevents outdated help content\r\n\r\n### Structure and Headers\r\n\r\n**Headers by Topic Type:**\r\n- **Concept topics:** Mirror the interface (e.g., "Sales", "Purchasing")\r\n- **Instructions:** Start with verb in infinitive (e.g., "Create invoice", "Add customer")\r\n- **FAQs:** Write as questions (e.g., "How do I delete an invoice?")\r\n- **Field explanations:** Mirror the interface detail (e.g., "Terms of delivery")\r\n- **Troubleshooting:** Write as problem statements (e.g., "I have entered an incorrect date")\r\n\r\n**Drop-down Menus:**\r\n- Use for long content with clear divisions\r\n- Maximum two levels\r\n- Helps readers select amount of text to read\r\n\r\n### Links and Related Information\r\n\r\n**Guidelines:**\r\n- Place related links at bottom of help topics\r\n- Only include truly related links\r\n- Use two-column table with media type symbols\r\n- Internal links: move to linked page\r\n- External links: open in new tab\r\n- Link text should match the header of target page\r\n\r\n**Example:**\r\n```\r\n [Create invoice](link-to-create-invoice)\r\n [Video tutorial](external-video-link)\r\n```\r\n\r\n## Content Sections\r\n\r\nCurrent help sections:\r\n- `overview.md` - System overview and introduction (Concept)\r\n- `vouchers.md` - Voucher system explanation (Concept)\r\n- `user-management.md` - Admin guide for user management (Concept + Instructions)\r\n- `training-management.md` - Admin guide for training management (Concept + Instructions)\r\n- `subscriptions.md` - User guide for training registration (Concept + Instructions)\r\n- `attendance.md` - User guide for attendance management (Concept + Instructions)\r\n- `troubleshooting.md` - Common problems and solutions (Troubleshooting)\r\n\r\n## Update Process\r\n\r\nWhen updating help content:\r\n\r\n1. **Update Swedish version first**\r\n2. **Translate to English** maintaining the same structure\r\n3. **Review both versions** for consistency\r\n4. **Test the content** in the application\r\n5. **Commit both files** together\r\n\r\n## Quality Checklist\r\n\r\nBefore committing changes:\r\n- [ ] Swedish content is natural and comprehensive\r\n- [ ] English content matches Swedish structure\r\n- [ ] Both versions cover the same topics\r\n- [ ] Technical terms are consistent\r\n- [ ] Interface text is bold and exact\r\n- [ ] Instructions use imperative mood\r\n- [ ] Headers follow appropriate format for content type\r\n- [ ] Content follows KISS principle\r\n- [ ] Examples are relevant and helpful\r\n- [ ] No broken links or references\r\n- [ ] Content is up-to-date with current system features\r\n- [ ] Text has been read aloud for readability test\r\n- [ ] Someone has tested the instructions by following them\r\n\r\n## File Naming Convention\r\n- Swedish: `docs/help/sv/filename.md`\r\n- English: `docs/help/en/filename.md`\r\n- Both files should have the same filename\r\n\r\n## Review Process\r\n\r\n**Fact Checking:**\r\n- Have someone with software knowledge check facts\r\n- Ask reviewer to follow instructions as end user would\r\n\r\n**Readability Test:**\r\n- Read text out loud\r\n- Check: Can you read without stumbling?\r\n- Check: Are sentences short enough to read in one breath?\r\n- Check: Does language sound natural?\r\n- Check: Can you easily and accurately translate it?\r\n',Yv='# Tone and Voice Guidelines\r\n\r\n## Our Voice: Expertis, Roll, och Personlighet\r\n\r\n**Expertis:** Du r knd fr att f alla texter att genomsyras av enkelhet, engagemang och mnsklighet.\r\n\r\n**Roll:** Du r en professionell svensk skribent som arbetar p Spiris, ett svenskt mjukvarufretag som utvecklar ekonomiprogram fr sm och medelstora fretag och redovisningsbyrer.\r\n\r\n**Motto:** "Spiris r en flexibel ekonomiplattform dr fretag abonnerar p olika funktioner och kan skta sin ekonomi var som helst."\r\n\r\n## vergripande Riktlinjer fr Tonalitet\r\n\r\n### 1. ENKLA: RAKT P SAK / SMIDIGA / INTUITIVA\r\n\r\n**Huvudprincip:** Ju enklare desto bttre. Hll kommunikationen s enkel som mjligt.\r\n\r\n#### Vad att gra:\r\n- Undvik svra tekniska och ekonomiska termer\r\n- Anvnd vardagligt sprk istllet fr komplexa termer\r\n- Skala ner antalet ord i rubriker\r\n- Knn intuitivt och rakt p sak\r\n- Undvik metaforer i den mn det gr\r\n- Var sparsam med liknelser\r\n\r\n#### Exempel:\r\n```\r\n "Genom en realtidsuppfljning av intkter kan du ka vrdet p de materiella tillgngarna."\r\n "Om du fljer dina intkter lpande kan du ka vrdet p dina fysiska tillgngar."\r\n\r\n "Vrt ekonomisystem gr det superenkelt att logga in och se ver alla dina fakturor p nolltid."\r\n "Checka in, checka av, checka ut."\r\n\r\n "Tjnsten r just nu i vilolge, men vi jobbar p att vcka den till liv igen."\r\n "Vrt team undersker problemet just nu. Vi uppskattar ditt tlamod och hr av oss s snart vi har en lsning."\r\n```\r\n\r\n### 2. ENGAGERADE: HJLPSAMMA / PEPPANDE / LTTILLGNGLIGA\r\n\r\n**Huvudprincip:** Var geners, vgledande och skapa en positiv upplevelse.\r\n\r\n#### Vad att gra:\r\n- Knn som en kunnig och vnlig kollega\r\n- Guide utan att krngla till det\r\n- Skapa enkelt och tryggt\r\n- Fira alla sm vinster\r\n- Lyft mottagaren lngs vgen\r\n- Skapa "moments of joy" dr det knns naturligt\r\n\r\n#### Exempel:\r\n```\r\n "Fr att komma igng behver du frst navigera till instllningar och vlja rtt behrigheter innan du kan aktivera din tjnst."\r\n "Tre steg och du r igng  vi guidar dig hela vgen!"\r\n\r\n "Du har registrerat ditt konto."\r\n "Har du registrerat ditt konto? D r vi igng!"\r\n\r\n "Du har skickat din frsta faktura."\r\n "Skickat ivg din frsta faktura? Dr satt den!"\r\n```\r\n\r\n### 3. MNSKLIGA: EMPATISKA / KUNDCENTRERADE / INKLUDERANDE\r\n\r\n**Huvudprincip:** Lt texterna lta mnskliga och inte som identitetslsa robotar.\r\n\r\n#### Vad att gra:\r\n- Skriv som om du pratar med ngon ansikte mot ansikte\r\n- Fokusera p verklig nytta fr mottagaren\r\n- Erknn att lsarna har intressen, knslor och liv utanfr jobbet\r\n- Skapa igenknning och vrme\r\n- Prata inte om vad vi erbjuder, utan lyft fram verklig nytta\r\n\r\n#### Exempel:\r\n```\r\n "Vr innovativa plattform frbttrar dina affrsprocesser."\r\n "Vi har tagit fram en lsning som gr din vardag som fretagare enklare."\r\n\r\n "Med Spiris minskar din administrativa brda genom automatiserade processer."\r\n "Glm adminstress. Vi fixar allt det dr trkiga, s att du kan fokusera p livet  hmta barnen i tid eller ta en extra kafferast."\r\n\r\n "Vi har effektiva tjnster."\r\n "Tid ver till det du tycker om."\r\n```\r\n\r\n## Textregler fr Termer\r\n\r\n### Undvik dessa termer:\r\n- "produkt"\r\n- "system" \r\n- "program"\r\n- "applikation"\r\n- "tillval"\r\n- "tillgg"\r\n- "tjnst"\r\n\r\n### Anvnd istllet:\r\n- "funktioner"\r\n- "ekonomiplattform"\r\n- "plattform"\r\n\r\n### Undvik formuleringar som:\r\n- "vr lsning" (fr att erstta ovanstende termer)\r\n\r\n### Skriv hellre om helt med en neutral formulering fr att undvika det helt.\r\n\r\n### Anvnd "abonnemang" istllet fr:\r\n- "avtal"\r\n- "licens"\r\n- eller liknande\r\n\r\n## Produktnamn\r\n\r\n### Anvnd \'bokfringen\', \'bokfring\', eller \'din bokfring\' istllet fr \'Visma eEkonomi\', svida det inte r en del av ett variantnamn som "Visma eEkonomi Smart".\r\n\r\n### Ta bort verfldiga variant-/produktnamn och rensa i texten fr bttre lsbarhet.\r\n\r\n### "Visma" eller "Visma Spcs" ska ersttas med "Spiris" svida det inte r en del av ett produktnamn.\r\n\r\n## Praktiska Tips fr Hjlptexter\r\n\r\n### Nr du skriver instruktioner:\r\n- Fokusera p vad anvndaren fr ut av det\r\n- Anvnd korta, tydliga steg\r\n- Fira nr de r klara\r\n- Gr det knns enkelt och tryggt\r\n\r\n### Nr du frklarar funktioner:\r\n- Tala om vad det betyder fr deras vardag\r\n- Undvik teknisk mumbo-jumbo\r\n- Fokusera p tid och energi de sparar\r\n- Koppla till livet utanfr jobbet\r\n\r\n### Nr du hjlper med problem:\r\n- Visa frstelse fr frustrationen\r\n- Ge tydliga, enkla steg\r\n- Uppmuntra och std\r\n- Fira nr problemet r lst\r\n\r\n## Checklista fr Tonalitet\r\n\r\n### ENKLA:\r\n- [ ] Undvik teknisk jargon\r\n- [ ] Anvnd vardagligt sprk\r\n- [ ] Korta, tydliga rubriker\r\n- [ ] Inga ondiga metaforer\r\n\r\n### ENGAGERADE:\r\n- [ ] Knn som en vnlig kollega\r\n- [ ] Guide utan att krngla\r\n- [ ] Fira sm vinster\r\n- [ ] Skapa "moments of joy"\r\n\r\n### MNSKLIGA:\r\n- [ ] Skriv som du pratar\r\n- [ ] Fokusera p verklig nytta\r\n- [ ] Erknn liv utanfr jobbet\r\n- [ ] Skapa igenknning och vrme\r\n\r\n### TERMINOLOGI:\r\n- [ ] Undvik "produkt", "system", "program", etc.\r\n- [ ] Anvnd "funktioner", "plattform" istllet\r\n- [ ] Anvnd "abonnemang" istllet fr "avtal"\r\n- [ ] Rensa bort verfldiga produktnamn\r\n',Jv='# Help Text Writing Checklist\r\n\r\n## Developer UI Text Checklist\r\n\r\n### Before Adding Any UI Text\r\n- [ ] **Swedish text written first** - Think about what it should say in Swedish\r\n- [ ] **Key name chosen** - Descriptive, hierarchical naming (e.g., `adminCreateUserBtn`)\r\n- [ ] **Swedish locale updated** - Added to `locales/sv.json`\r\n- [ ] **English translation added** - Added to `locales/en.json`\r\n- [ ] **Component uses translation hook** - `const t = useTranslations(); {t(\'keyName\')}`\r\n- [ ] **No hardcoded text** - All text comes from localization files\r\n- [ ] **Both languages tested** - Verify Swedish and English work correctly\r\n\r\n### Common UI Text Mistakes to Avoid\r\n- [ ]  Hardcoding "Create User" directly in component\r\n- [ ]  Hardcoding "Skapa anvndare" directly in component  \r\n- [ ]  Writing English text first, then translating to Swedish\r\n- [ ]  Using generic key names like `button1` or `text1`\r\n- [ ]  Adding only Swedish or only English translation\r\n- [ ]  Forgetting to test both languages in the application\r\n\r\n### Correct UI Text Implementation\r\n- [ ]  Swedish text: `"adminCreateUserBtn": "Skapa anvndare"`\r\n- [ ]  English text: `"adminCreateUserBtn": "Create User"`\r\n- [ ]  Component: `<button>{t(\'adminCreateUserBtn\')}</button>`\r\n- [ ]  Both languages tested and working\r\n\r\n## Pre-Writing Checklist\r\n\r\n### Content Planning\r\n- [ ] **Determine information type:** Concept, Instruction, FAQ, Troubleshooting, etc.\r\n- [ ] **Identify target audience:** Admin, User, or both\r\n- [ ] **Define scope:** What exactly will this help text cover?\r\n- [ ] **Check prerequisites:** What should users know before reading this?\r\n\r\n### Research\r\n- [ ] **Test the feature:** Follow the exact steps as a user would\r\n- [ ] **Note interface text:** Write down exact button names, menu items, field labels\r\n- [ ] **Find localization keys:** Look up the corresponding keys in `locales/sv.json` and `locales/en.json`\r\n- [ ] **Identify common issues:** What problems do users typically encounter?\r\n- [ ] **Check related features:** What other parts of the system are connected?\r\n\r\n## Writing Checklist\r\n\r\n### Structure and Organization\r\n- [ ] **Header format correct** for content type:\r\n  - [ ] Concept: Mirror interface (e.g., "Sales", "User Management")\r\n  - [ ] Instructions: Start with verb in infinitive (e.g., "Create training", "Add user")\r\n  - [ ] FAQ: Write as question (e.g., "How do I delete a training?")\r\n  - [ ] Troubleshooting: Write as problem statement (e.g., "I can\'t mark attendance")\r\n\r\n- [ ] **Content follows appropriate structure:**\r\n  - [ ] Concept: Introduction  Purpose  Prerequisites  Next steps\r\n  - [ ] Instructions: Preamble  Numbered steps  Additional info\r\n  - [ ] FAQ: Question  Brief answer  Link to detailed topic\r\n  - [ ] Troubleshooting: Problem  Solution steps  Prevention tips\r\n\r\n### Language and Style\r\n- [ ] **KISS principle applied:**\r\n  - [ ] Short, simple words used\r\n  - [ ] Short sentences (readable in one breath)\r\n  - [ ] Keywords in headers\r\n  - [ ] Takeaway information first\r\n\r\n- [ ] **Tone and voice guidelines followed:**\r\n  - [ ] **ENKLA:** Avoid technical jargon, use everyday language\r\n  - [ ] **ENKLA:** Short, clear headings (scale down word count)\r\n  - [ ] **ENKLA:** No unnecessary metaphors or analogies\r\n  - [ ] **ENGAGERADE:** Create positive, encouraging experiences\r\n  - [ ] **ENGAGERADE:** Feel like a knowledgeable, friendly colleague\r\n  - [ ] **ENGAGERADE:** Celebrate small wins and create "moments of joy"\r\n  - [ ] **MNSKLIGA:** Write as if talking face-to-face\r\n  - [ ] **MNSKLIGA:** Focus on real benefits for the user\r\n  - [ ] **MNSKLIGA:** Recognize life outside work (family, interests, etc.)\r\n  - [ ] **Terminology:** Avoid "produkt", "system", "program", "applikation", "tillval", "tillgg", "tjnst"\r\n  - [ ] **Terminology:** Use "funktioner", "ekonomiplattform", "plattform" instead\r\n  - [ ] **Terminology:** Use "abonnemang" instead of "avtal", "licens"\r\n\r\n- [ ] **Tone is appropriate:**\r\n  - [ ] Direct, warm, and friendly\r\n  - [ ] "You" used appropriately (not overused)\r\n  - [ ] Imperative mood for instructions ("Click", "Select", "Enter")\r\n  - [ ] **ENKLA:** Simple, direct, intuitive language\r\n  - [ ] **ENGAGERADE:** Helpful, encouraging, accessible\r\n  - [ ] **MNSKLIGA:** Empathetic, customer-centered, inclusive\r\n\r\n- [ ] **Interface text handled correctly:**\r\n  - [ ] Exact wording from interface used\r\n  - [ ] Interface text in **bold**\r\n  - [ ] Initial letter uppercase\r\n  - [ ] Consistent terminology throughout\r\n  - [ ] **CRITICAL: Used localization keys, not hardcoded text**\r\n  - [ ] **Verified all interface references use {keyName} format**\r\n  - [ ] **Checked that keys exist in both locales/sv.json and locales/en.json**\r\n  - [ ] **Included both language examples where appropriate: {keyName} (Swedish: "Text", English: "Text")**\r\n\r\n\r\n### Content Quality\r\n- [ ] **Instructions are complete:**\r\n  - [ ] All necessary steps included\r\n  - [ ] Steps are in correct order\r\n  - [ ] Minor steps combined logically\r\n  - [ ] Prerequisites clearly stated\r\n\r\n- [ ] **Information is accurate:**\r\n  - [ ] All facts verified\r\n  - [ ] Steps tested by following them\r\n  - [ ] No outdated information\r\n  - [ ] Links work correctly\r\n\r\n- [ ] **User needs addressed:**\r\n  - [ ] Common questions answered\r\n  - [ ] Potential problems covered\r\n  - [ ] Next steps provided\r\n  - [ ] Related topics linked\r\n\r\n## Post-Writing Checklist\r\n\r\n### Review and Testing\r\n- [ ] **Readability test:**\r\n  - [ ] Read text out loud\r\n  - [ ] No stumbling on words\r\n  - [ ] Sentences short enough\r\n  - [ ] Language sounds natural\r\n\r\n- [ ] **Fact checking:**\r\n  - [ ] Someone with software knowledge reviewed\r\n  - [ ] Instructions followed exactly as written\r\n  - [ ] All interface elements verified\r\n  - [ ] Links tested and working\r\n\r\n- [ ] **User perspective:**\r\n  - [ ] Would a new user understand this?\r\n  - [ ] Are all terms explained?\r\n  - [ ] Is the information findable?\r\n  - [ ] Does it solve the user\'s problem?\r\n\r\n### Technical Quality\r\n- [ ] **Markdown formatting:**\r\n  - [ ] Headers properly formatted\r\n  - [ ] Lists correctly structured\r\n  - [ ] Bold text for interface elements\r\n  - [ ] Links properly formatted\r\n\r\n- [ ] **Content structure:**\r\n  - [ ] Logical flow of information\r\n  - [ ] Appropriate use of sections\r\n  - [ ] Drop-down menus used if needed (max 2 levels)\r\n  - [ ] Related links included at bottom\r\n\r\n### Localization Verification\r\n- [ ] **All interface references verified:**\r\n  - [ ] No hardcoded interface text found in documentation\r\n  - [ ] All interface elements use {keyName} format\r\n  - [ ] Keys exist in both Swedish and English locale files\r\n  - [ ] Both language versions included where appropriate\r\n  - [ ] Examples show both languages: {keyName} (Swedish: "Text", English: "Text")\r\n\r\n- [ ] **Key validation:**\r\n  - [ ] Checked `locales/sv.json` for Swedish keys\r\n  - [ ] Checked `locales/en.json` for English keys\r\n  - [ ] Verified keys match exactly (case-sensitive)\r\n  - [ ] Confirmed keys are still in use in the application\r\n\r\n### Translation Preparation\r\n- [ ] **Swedish version complete:**\r\n  - [ ] Natural Swedish (not translated from English)\r\n  - [ ] All sections included\r\n  - [ ] Examples relevant to Swedish users\r\n\r\n- [ ] **English version ready:**\r\n  - [ ] Same structure as Swedish\r\n  - [ ] Same level of detail\r\n  - [ ] Technical terms consistent\r\n  - [ ] Idioms adapted appropriately\r\n\r\n## Final Quality Check\r\n\r\n### Before Committing\r\n- [ ] **Both language versions complete**\r\n- [ ] **Content follows Visma guidelines**\r\n- [ ] **Instructions tested and working**\r\n- [ ] **No broken links or references**\r\n- [ ] **Content is up-to-date**\r\n- [ ] **File names follow convention**\r\n- [ ] **Both files committed together**\r\n\r\n### UI Development Quality Check\r\n- [ ] **No hardcoded UI text** - All text uses localization keys\r\n- [ ] **Swedish-first approach** - Swedish text written before English\r\n- [ ] **Both locale files updated** - `locales/sv.json` and `locales/en.json`\r\n- [ ] **Descriptive key names** - Following naming convention\r\n- [ ] **Translation hook used** - Components use `useTranslations()`\r\n- [ ] **Both languages tested** - Swedish and English work correctly\r\n- [ ] **Help documentation updated** - Uses same localization keys\r\n\r\n### Content Types Checklist\r\n\r\n#### For Concept Pages\r\n- [ ] Introduces the feature clearly\r\n- [ ] Explains purpose and benefits\r\n- [ ] Lists prerequisites\r\n- [ ] Shows how it relates to other features\r\n- [ ] Provides next steps\r\n\r\n#### For Instructions\r\n- [ ] Starts with purpose and prerequisites\r\n- [ ] Uses numbered steps\r\n- [ ] Uses imperative mood\r\n- [ ] Makes interface text bold\r\n- [ ] Combines minor steps logically\r\n- [ ] Includes additional info in boxes\r\n\r\n#### For FAQs\r\n- [ ] Answers common questions\r\n- [ ] Provides brief, helpful answers\r\n- [ ] Links to detailed topics\r\n- [ ] Uses question format in headers\r\n- [ ] Helps users find more information\r\n\r\n#### For Troubleshooting\r\n- [ ] Focuses on specific problems\r\n- [ ] Provides step-by-step solutions\r\n- [ ] Uses problem statement headers\r\n- [ ] Separated from regular instructions\r\n- [ ] Includes prevention tips\r\n\r\n## Quick Reference\r\n\r\n### Header Formats\r\n- **Concept:** "User Management", "Training System"\r\n- **Instructions:** "Create user", "Add training"\r\n- **FAQ:** "How do I delete a user?"\r\n- **Troubleshooting:** "I can\'t mark attendance"\r\n\r\n### Interface Text Examples\r\n-  "Click **{adminCreateTrainingBtn}**" (Swedish: "Skapa trning", English: "Create Training")\r\n-  "Select **{navAttendance}** - **{adminExistingTrainings}**"\r\n-  "Go to the admin section and click create user"\r\n-  "Click **Skapa trning**" (hardcoded text - will become outdated)\r\n\r\n### Imperative Mood Examples\r\n-  "Click the button"\r\n-  "Enter your name"\r\n-  "You click the button"\r\n-  "You should enter your name"\r\n\r\n### Tone and Voice Examples\r\n\r\n#### ENKLA (Simple)\r\n-  "Genom en realtidsuppfljning av intkter kan du ka vrdet p de materiella tillgngarna."\r\n-  "Om du fljer dina intkter lpande kan du ka vrdet p dina fysiska tillgngar."\r\n\r\n#### ENGAGERADE (Engaging)\r\n-  "Fr att komma igng behver du frst navigera till instllningar och vlja rtt behrigheter."\r\n-  "Tre steg och du r igng  vi guidar dig hela vgen!"\r\n\r\n#### MNSKLIGA (Human)\r\n-  "Vr innovativa plattform frbttrar dina affrsprocesser."\r\n-  "Vi har tagit fram en lsning som gr din vardag som fretagare enklare."\r\n\r\n#### Terminology\r\n-  "vrt system", "produkten", "tjnsten"\r\n-  "plattformen", "funktionerna", "abonnemanget"\r\n',Qv='# Shoutout Management\r\n\r\nThe shoutout management system allows administrators to create, edit, and manage news announcements and feature highlights to inform users about system updates and new features.\r\n\r\n## Overview\r\n\r\nNews announcements (shoutouts) are messages that:\r\n- Inform users about new features\r\n- Announce system updates\r\n- Highlight improvements\r\n- Provide important system notifications\r\n\r\n## Creating a News Announcement\r\n\r\n### Basic Information\r\n\r\n1. **Title**: Enter a clear and engaging title\r\n2. **Description**: Write a detailed description of the news\r\n3. **Category**: Choose from:\r\n   - **Feature**: New features or functionality\r\n   - **Improvement**: Enhancements to existing features\r\n   - **Announcement**: Important system notifications or updates\r\n\r\n### Priority and Visibility\r\n\r\n- **Low**: Displayed normally, no special emphasis\r\n- **Medium**: Displayed with light emphasis\r\n- **High**: Displayed with strong emphasis and higher visibility\r\n\r\n### Expiration Date\r\n\r\n- **No expiration date**: The message is displayed until manually removed\r\n- **Specific date**: The message automatically disappears after the specified date\r\n- **Automatic cleanup**: The system automatically cleans up expired messages\r\n\r\n## Linking to Tours\r\n\r\n### Integration with Tour System\r\n\r\nYou can link news announcements to existing tours to:\r\n- Give users direct access to guidance\r\n- Create a smooth transition from information to practical guidance\r\n- Improve user experience\r\n\r\n### How to Link to a Tour\r\n\r\n1. **Select Tour**: Choose an existing tour from the list\r\n2. **Automatic Linking**: The system automatically creates a link to the tour\r\n3. **Button Text**: Users see a "Start Guided Tour" button in the message\r\n\r\n## Managing Existing Messages\r\n\r\n### Edit Message\r\n\r\n1. In the message list, click **Edit** next to the message\r\n2. Make your changes\r\n3. Click **Save** to update the message\r\n\r\n### Duplicate Message\r\n\r\n1. Click **Duplicate** next to an existing message\r\n2. A copy is created with the name "Copy of [original title]"\r\n3. Edit the copy according to your needs\r\n\r\n### Delete Message\r\n\r\n1. Click **Delete** next to the message\r\n2. Confirm the deletion in the dialog\r\n3. **Warning**: This action cannot be undone\r\n\r\n### Mark as Read\r\n\r\nUsers can mark messages as read. Administrators can see:\r\n- Number of users who have read the message\r\n- Number of users who have not read the message\r\n- Read statistics per message\r\n\r\n## Message Statistics\r\n\r\nThe system tracks the following statistics for each message:\r\n- **Total Messages**: Number of created messages\r\n- **Active Messages**: Messages currently displayed to users\r\n- **Expired Messages**: Messages that have passed their expiration date\r\n- **Categories**: Number of messages per category\r\n- **Priority Distribution**: Number of messages per priority level\r\n\r\n## Import and Export\r\n\r\n### Export Messages\r\n\r\n1. Click **Export** in the news management panel\r\n2. The system generates a JSON file with all messages\r\n3. Save the file for backup or sharing\r\n\r\n### Import Messages\r\n\r\n1. Click **Import** in the news management panel\r\n2. Paste JSON data into the text field\r\n3. Click **Import Messages** to load the data\r\n\r\n## "New" Indicator\r\n\r\n### Automatic Marking\r\n\r\n- **New Messages**: Displayed with a "New" indicator\r\n- **Automatic Update**: The indicator disappears when the user reads the message\r\n- **Visual Emphasis**: The "New" indicator helps users discover new content\r\n\r\n### Managing Indicators\r\n\r\n- **User View**: Users see the "New" indicator until they read the message\r\n- **Admin Overview**: Administrators can see which messages are new for users\r\n- **Statistics**: Track how many users have seen each message\r\n\r\n## Best Practices\r\n\r\n### Writing Effective Messages\r\n\r\n- **Clear Title**: Use a title that explains what the news is about\r\n- **Specific Description**: Describe specifically what has changed or been added\r\n- **User-Centered**: Focus on benefits for the user\r\n- **Short and Concise**: Keep the message brief but informative\r\n\r\n### Choosing the Right Category\r\n\r\n- **Feature**: Use for completely new features or significant additions\r\n- **Improvement**: Use for enhancements to existing features\r\n- **Announcement**: Use for system updates, maintenance, or important notifications\r\n\r\n### Managing Priority\r\n\r\n- **High Priority**: Use sparingly for critical messages\r\n- **Medium Priority**: Use for important but not critical updates\r\n- **Low Priority**: Use for less important messages\r\n\r\n### Planning Expiration Dates\r\n\r\n- **Time-Limited Campaigns**: Use expiration dates for temporary messages\r\n- **Permanent Information**: Leave without expiration date for important information\r\n- **Automatic Cleanup**: Let the system automatically clean up expired messages\r\n\r\n## Troubleshooting\r\n\r\n### Common Issues\r\n\r\n**Message not displaying**\r\n- Check that the message is active\r\n- Verify that the expiration date has not passed\r\n- Check that the user has the right role\r\n\r\n**"New" indicator not disappearing**\r\n- Check that the user has clicked on the message\r\n- Verify that the read status is updating correctly\r\n- Check the browser\'s cache\r\n\r\n**Tour not linking correctly**\r\n- Check that the tour still exists\r\n- Verify that the user has access to the tour\r\n- Check that the link is correctly configured\r\n\r\n### Debug Tips\r\n\r\n1. **Test as User**: Log in as a regular user to see messages\r\n2. **Check Dates**: Verify that expiration dates are correctly specified\r\n3. **Check Roles**: Make sure the user has the right permissions\r\n\r\n## Integration with Other Systems\r\n\r\n### Tour System\r\n\r\n- **Automatic Linking**: Create smooth transitions from information to practical guidance\r\n- **Contextual Help**: Give users direct access to relevant tours\r\n- **Improved User Experience**: Combine information with interactive guidance\r\n\r\n### Help System\r\n\r\n- **Contextual Help**: Link to relevant help documentation\r\n- **AI Assistant**: Use the AI assistant to answer questions about messages\r\n- **Search Function**: Users can search for specific messages in the help system\r\n',Xv='# Tour Management\r\n\r\nThe tour management system allows administrators to create, edit, and manage guided tours to help users learn the system\'s features.\r\n\r\n## Overview\r\n\r\nGuided tours are interactive walkthroughs that help users:\r\n- Learn new features\r\n- Understand the system\'s structure\r\n- Navigate through complex workflows\r\n- Get contextual help\r\n\r\n## Creating a New Tour\r\n\r\n### Basic Information\r\n\r\n1. **Tour Name**: Enter a descriptive name for the tour\r\n2. **Description**: Write a brief description of what the tour covers\r\n3. **Category**: Choose from:\r\n   - **Onboarding**: For new users\r\n   - **Feature**: For specific features\r\n   - **Admin**: For administrative functions\r\n   - **User**: For user functions\r\n\r\n### Role Requirements\r\n\r\n- **Any User**: All users can see the tour\r\n- **Admin Only**: Only administrators can see the tour\r\n- **User Only**: Only regular users can see the tour\r\n\r\n### Estimated Duration\r\n\r\nSpecify how long (in minutes) the tour is estimated to take.\r\n\r\n## Managing Tour Steps\r\n\r\n### Step Types\r\n\r\nEach step in a tour can have different action types:\r\n\r\n#### Navigate\r\n- Moves the user to a specific page\r\n- Used to show different parts of the system\r\n\r\n#### Click\r\n- Highlights an element the user should click\r\n- Used to show interactive elements\r\n\r\n#### Scroll\r\n- Shows the user they should scroll on the page\r\n- Used to show content that\'s not visible\r\n\r\n#### Wait\r\n- Pauses the tour for a specified time\r\n- Used to give the user time to read\r\n\r\n#### Highlight\r\n- Highlights an element without clicking\r\n- Used to draw attention to important elements\r\n\r\n### Step Configuration\r\n\r\nFor each step, specify:\r\n\r\n1. **Step Title**: A short title for the step\r\n2. **Step Content**: Detailed description of what the user should do\r\n3. **Target Selector**: CSS selector for the element to be highlighted\r\n4. **Position**: Where the tooltip should appear (top, bottom, left, right, center)\r\n5. **Action**: What type of action should be performed\r\n6. **Required View**: Which page must be active for the step\r\n7. **Skip if Target Not Found**: Whether the step should be skipped if the element doesn\'t exist\r\n\r\n### Target Selectors (data-tour attributes)\r\n\r\nFor a tour to work correctly, target selectors must match `data-tour` attributes in the code:\r\n\r\n```html\r\n\x3c!-- Example of data-tour attributes --\x3e\r\n<button data-tour="create-training-btn">Create Training</button>\r\n<div data-tour="user-list">User List</div>\r\n```\r\n\r\n## Tour Statistics\r\n\r\nThe system tracks the following statistics for each tour:\r\n- **Total Tours**: Number of created tours\r\n- **Total Steps**: Total number of steps in all tours\r\n- **Average Steps/Tour**: Average number of steps per tour\r\n- **Categories**: Number of tours per category\r\n\r\n## Import and Export\r\n\r\n### Export Tours\r\n\r\n1. Click **Export** in the tour management panel\r\n2. The system generates a JSON file with all tours\r\n3. Save the file for backup or sharing\r\n\r\n### Import Tours\r\n\r\n1. Click **Import** in the tour management panel\r\n2. Paste JSON data into the text field\r\n3. Click **Import Tours** to load the data\r\n\r\n## Editing Existing Tours\r\n\r\n### Selecting a Tour to Edit\r\n\r\n1. In the tour list, click **Edit** next to the tour you want to modify\r\n2. The tour loads in edit mode\r\n3. Make your changes and click **Save**\r\n\r\n### Duplicate Tour\r\n\r\n1. Click **Duplicate** next to an existing tour\r\n2. A copy is created with the name "Copy of [original name]"\r\n3. Edit the copy according to your needs\r\n\r\n### Delete Tour\r\n\r\n1. Click **Delete** next to the tour\r\n2. Confirm the deletion in the dialog\r\n3. **Warning**: This action cannot be undone\r\n\r\n## Best Practices\r\n\r\n### Planning Your Tour\r\n\r\n- **Start with goals**: What should the user learn?\r\n- **Break into steps**: Each step should focus on one thing\r\n- **Test the flow**: Go through the tour as a user would\r\n\r\n### Writing Effective Steps\r\n\r\n- **Be clear**: Use simple, direct instructions\r\n- **Be specific**: Specify exactly what the user should do\r\n- **Keep it short**: Each step should be easy to understand quickly\r\n\r\n### Choosing the Right Target Selectors\r\n\r\n- **Use data-tour attributes**: This is the best method\r\n- **Test selectors**: Verify that the element is found correctly\r\n- **Plan for changes**: Choose stable elements that don\'t change often\r\n\r\n## Troubleshooting\r\n\r\n### Common Issues\r\n\r\n**Tour doesn\'t start**\r\n- Check that all steps have valid target selectors\r\n- Verify that required views are correctly specified\r\n- Check that the user has the right role\r\n\r\n**Steps are skipped unexpectedly**\r\n- Check that the target selector matches an element on the page\r\n- Verify that the element is visible when the step runs\r\n- Check the "Skip if target not found" setting\r\n\r\n**Tooltip appears in wrong place**\r\n- Adjust the position (top, bottom, left, right, center)\r\n- Check that there\'s enough space\r\n- Test on different screen sizes\r\n\r\n### Debug Tips\r\n\r\n1. **Use developer tools**: Inspect elements to find the right selector\r\n2. **Test step by step**: Run the tour and check each step\r\n3. **Check the console**: Look for error messages in the browser console\r\n\r\n## Integration with News System\r\n\r\nTours can be linked to news announcements to:\r\n- Announce new features\r\n- Give users direct access to guidance\r\n- Create a smooth user experience\r\n\r\nWhen creating a news announcement, you can link it to an existing tour to give users both information and practical guidance.\r\n',Zv='# Training Management\r\n\r\n## Overview\r\n\r\nAs an administrator, you now have a dedicated page for managing all trainings. On the **Trainings** page, you\'ll find everything you need to create, edit, and organize training sessions in a simple and efficient way.\r\n\r\n### Key Features\r\n- **Subscriber count**: See instantly how many people have registered for each training\r\n- **Uniform cards**: All training cards have the same height for better overview\r\n- **Action buttons**: Edit and delete buttons are now positioned at the bottom of each card\r\n\r\n## Accessing training management\r\n\r\n### Here\'s how you do it\r\n1. Log in as administrator\r\n2. Click on **Trainings** in the navigation menu\r\n3. You now see an overview of all trainings\r\n\r\n## Create new trainings\r\n\r\n### Here\'s how you do it\r\n1. Click on **Add Training** (the button with plus symbol)\r\n2. Fill in:\r\n   - **Title**: A clear name for the training (e.g., "React Basics")\r\n   - **Description**: A description of what the training is about\r\n3. Click on **Create Training**\r\n\r\n### What happens next?\r\n- The training is created directly\r\n- It appears in the training list\r\n- Users can register directly\r\n- You can edit the training at any time\r\n\r\n## Edit existing trainings\r\n\r\n### Here\'s how you do it\r\n1. Find the training in the list\r\n2. Click on the **edit icon** (pen) at the bottom of the training card\r\n3. Change title and/or description\r\n4. Click on **Update**\r\n\r\n### What you can change\r\n- **Title**: Update the name of the training\r\n- **Description**: Change or improve the description\r\n- **All changes are immediately visible** to all users\r\n\r\n## Delete trainings\r\n\r\n### Here\'s how you do it\r\n1. Find the training in the list\r\n2. Click on the **delete icon** (trash can) at the bottom of the training card\r\n3. Confirm the deletion in the popup dialog\r\n4. The training is permanently removed\r\n\r\n### Important notes\r\n- **This action cannot be undone** - the training will be permanently deleted\r\n- **All subscriptions** to this training will also be removed\r\n- **Users will no longer see** this training in their available options\r\n- **Make sure you really want to delete** before confirming\r\n\r\n## Search and filter trainings\r\n\r\n### Here\'s how you do it\r\n1. Use the search field at the top of the page\r\n2. Type in name or description to filter\r\n3. Results update automatically\r\n\r\n### Search tips\r\n- Search for parts of the name or description\r\n- Search is not case sensitive\r\n- Clear the search field to see all trainings again\r\n\r\n## Training overview\r\n\r\n### What you see for each training\r\n- **Title and description**: Basic information about the training\r\n- **Subscriber count**: Shows how many people have registered (e.g., "3 registered")\r\n- **Edit button**: Pen icon to edit the training (at bottom)\r\n- **Delete button**: Trash can icon to delete the training (at bottom)\r\n- **Uniform cards**: All training cards have the same height for neat overview\r\n\r\n### Organize trainings smartly\r\n- **Use clear titles**: "React Basics" instead of "Training 1"\r\n- **Include level**: "JavaScript for beginners", "Advanced CSS"\r\n- **Add details**: "React Workshop 2024"\r\n- **Be consistent**: Use the same pattern for similar trainings\r\n\r\n## Tips for effective training management\r\n\r\n### Write good descriptions\r\n- **Learning objectives**: What should participants learn?\r\n- **Prerequisites**: What do they need to know in advance?\r\n- **Time**: How long will it take?\r\n- **Format**: Practical, theoretical, or both?\r\n- **Target audience**: Who is it for?\r\n\r\n### Example of a good description\r\n```\r\n"React Basics - An introduction to React for web developers who already know HTML, CSS and JavaScript. We go through components, state and props. Practical workshop with hands-on exercises. Suitable for React beginners."\r\n```\r\n\r\n### Plan ahead\r\n- **Create trainings early**: Give users time to register\r\n- **Balance the offering**: Mix different types of trainings\r\n- **Listen to feedback**: Adapt to user preferences\r\n\r\n## Troubleshooting\r\n\r\n### Common problems\r\n**Cannot create training**\r\n- Check that all fields are filled in\r\n- Make sure you have the right permissions\r\n- Refresh the page and try again\r\n\r\n**Changes are not saved**\r\n- Check that you clicked **Update**\r\n- Refresh the page to see the changes\r\n- Contact support if the problem persists\r\n\r\n**Training is not visible**\r\n- Check that the training is correctly created\r\n- Make sure it\'s not hidden\r\n- Refresh the platform if needed\r\n\r\n## Security and permissions\r\n\r\n- Only administrators can access training management\r\n- All changes are automatically saved\r\n- Training data is protected according to data protection rules\r\n- Security updates are done automatically\r\n\r\n## Tips for effective administration\r\n\r\n### Communication\r\n- **Inform users**: Tell them when new trainings are added\r\n- **Collect feedback**: Ask what users want\r\n- **Document**: Keep track of what works\r\n\r\n### Quality assurance\r\n- **Review regularly**: Remove outdated trainings\r\n- **Update descriptions**: Keep them updated\r\n- **Collect feedback**: Ask users what they think\r\n\r\n### Continuous improvement\r\n- **Add new trainings**: Based on interests\r\n- **Improve existing ones**: Update based on feedback\r\n- **Experiment**: Try new formats\r\n',eb="# User Management\r\n\r\n## Overview\r\n\r\nAs an administrator, you now have a dedicated page for managing all users. On the **Users** page, you'll find everything you need to create, edit, and manage user accounts in a simple and efficient way.\r\n\r\n## Accessing user management\r\n\r\n### Here's how you do it\r\n1. Log in as administrator\r\n2. Click on **Users** in the navigation menu\r\n3. You now see an overview of all users\r\n\r\n## Create new users\r\n\r\n### Here's how you do it\r\n1. Click on **Add User** (the button with plus symbol)\r\n2. Fill in:\r\n   - **Display Name**: User's name (first name and last name)\r\n   - **Email**: An email address that is not already in use\r\n3. Click on **Create User**\r\n\r\n### What happens next?\r\n- The user is created directly\r\n- They start with 0 vouchers (completely normal)\r\n- They can log in directly with their email\r\n- You can start managing their vouchers right away\r\n\r\n## Edit existing users\r\n\r\n### Here's how you do it\r\n1. Find the user in the list\r\n2. Click on the **edit icon** (pen) next to the user\r\n3. Change name and/or email\r\n4. Click on **Update**\r\n\r\n### What you can change\r\n- **Display Name**: Update the user's name\r\n- **Email**: Change the email address\r\n- **All changes are immediately visible** to all users\r\n\r\n## Manage vouchers\r\n\r\n### Adding vouchers\r\n1. Find the user in the list\r\n2. Look for their current balance\r\n3. Click on **\"+\"** next to the balance\r\n4. A voucher will be added immediately\r\n\r\n### Remove vouchers\r\n1. Find the user in the list\r\n2. Click on **\"-\"** next to the balance\r\n3. A voucher is deleted (only if the balance is above 0)\r\n\r\n### Important to remember\r\n- You cannot delete more vouchers than the user has\r\n- Changes are visible immediately\r\n- All changes are saved for future use\r\n\r\n## Search and filter users\r\n\r\n### Here's how you do it\r\n1. Use the search field at the top of the page\r\n2. Type in name or email to filter\r\n3. Results update automatically\r\n\r\n### Search tips\r\n- Search for parts of the name or email address\r\n- Search is not case sensitive\r\n- Clear the search field to see all users again\r\n\r\n## User overview\r\n\r\n### What you see for each user\r\n- **Name and email**: Contact information\r\n- **Voucher balance**: Number of vouchers at the moment\r\n- **Edit button**: Pen icon to edit the user\r\n- **Voucher management**: Plus and minus buttons to manage vouchers\r\n\r\n### Find users easily\r\n- Sort by name, email or balance\r\n- Use the search function to find specific users\r\n- Filter for a better overview\r\n\r\n## Tips for administrators\r\n\r\n### Manage vouchers in a smart way\r\n- **Set clear rules**: Decide how many vouchers different users should have\r\n- **Keep track**: See who is using their vouchers quickly\r\n- **Hand out regularly**: Consider handing out the vouchers regularly instead of all at once\r\n\r\n### Communicate with users\r\n- **Explain how it works**: Make sure users understand the voucher system\r\n- **Clear rules**: Explain clearly when and how the vouchers can be used\r\n- **Be accessible**: Answer questions about the vouchers and the platform\r\n\r\n### Manage efficiently\r\n- **Large groups**: For many users, create them in groups\r\n- **Check regularly**: Check users and vouchers regularly\r\n- **Save important information**: Keep track of important user data\r\n\r\n## Troubleshooting\r\n\r\n### Common problems\r\n**User cannot log in**\r\n- Check that the email address is correct\r\n- Check that the user has not been deleted\r\n\r\n**Vouchers are not displayed correctly**\r\n- Refresh the page to see the latest changes\r\n- Check that you have the correct permissions\r\n\r\n**Cannot create user**\r\n- Check that the email address is unique\r\n- Make sure all fields are filled in\r\n\r\n**Cannot edit user**\r\n- Check that you clicked **Update**\r\n- Refresh the page to see the changes\r\n- Contact support if the problem persists\r\n\r\n## Security and permissions\r\n\r\n- Only administrators can access user management\r\n- All changes are automatically saved\r\n- Only administrators can manage vouchers\r\n- User data is protected according to data protection rules\r\n- Security updates are done automatically\r\n\r\n## Tips for effective administration\r\n\r\n### Communication\r\n- **Inform users**: Tell them when new features are added\r\n- **Collect feedback**: Ask what users want\r\n- **Document**: Keep track of what works\r\n\r\n### Automate\r\n- **Create templates**: For similar users\r\n- **Use replication**: Copy existing ones as a starting point\r\n- **Plan ahead**: Create users for upcoming periods\r\n\r\n### Quality assurance\r\n- **Review regularly**: Review the user list\r\n- **Update continuously**: Keep user data updated\r\n- **Measure success**: Track usage and feedback\r\n",tb="# Check-in management - Participate in trainings\n\n## Overview\n\nHere you mark when you actually attend trainings and manage your training card. It's the heart of the platform - simple and easy.\n\n## Mark check-in\n\n### Here's how you do it\n1. Go to the **Check-in** view\n2. Find the training you want to attend in the list\n3. Look for your name in the list of participants\n4. Click on **\"Mark check-in\"** next to your name\n5. Confirm that you want to mark check-in\n\n### What happens when you mark check-in?\n- A voucher is deducted directly from your balance\n- Your check-in is registered\n- You receive a confirmation that check-in has been marked\n- Administrators can see that you have attended the training\n\n### Requirements to mark check-in\n- **You must be enrolled**: You can only mark check-in for courses you are enrolled in\n- **Sufficient vouchers**: You need at least 1 voucher in your account\n- **Once per session**: You can only mark check-in once per session\n\n## Cancel check-in\n\n### When and why cancel?\nYou can cancel your check-in if you:\n- Changed your mind and cannot attend\n- Marked check-in by mistake\n- Need to release the voucher for another course\n\n### How to cancel\n1. Go to the **Check-in** view\n2. Find the course where you marked check-in\n3. Click on **\"Cancel check-in\"** next to your name\n4. Confirm that you want to cancel your check-in\n\n### What happens when you cancel?\n- Your voucher is immediately refunded\n- Your check-in will be removed from the course\n- You can mark check-in again if you want\n\n## Important rules\n\n### Check-in vs registration\n- **Registration is free**: You can register for training sessions without using a punch card\n- **Check-in costs**: Punch cards are only deducted when you mark check-in\n- **Flexibility**: You can register for multiple trainings and choose which ones you actually attend\n\n### Timeframes\n- **No time limit**: You can cancel your check-in at any time\n- **Immediate refund**: vouchers are immediately refunded when you cancel\n- **Plan ahead**: Sign up for trainings in advance, mark check-in when you are sure\n\n## Tips for smart check-in management\n\n### Plan your training sessions\n1. **Sign up in advance**: sign up for trainings you are interested in\n2. **Mark check-in when you're sure**: Wait to mark check-in until you're sure you can attend\n3. **Keep track of your balance**: Check the balance of your voucher regularly\n\n### Manage changes\n1. **Cancel on time**: If you cannot attend, cancel as soon as possible\n2. **Communicate**: Inform the trainer if you cannot attend\n3. **Reschedule**: Use your refunded voucher for other training sessions\n\n### Troubleshooting\n- **Unable to mark check-in**: Check that you are registered and have enough punch cards\n- **Button not working**: Refresh the page and try again\n- **Punch card not swiped**: Check your balance and contact the administrator if the problem persists\n\n## Frequently asked questions and answers\n\n**Can I mark check-in for someone else?\nNo, only you can mark your own check-in.\n\n**What happens if I mark check-in by mistake?\nYou can cancel check-in immediately and get your voucher back.\n\n**Can I mark check-in several times for the same course?\nNo, you can only mark check-in once per training.\n\n**Must I mark check-in immediately when the training starts?\nNo, you can mark check-in at any time, but it is good to do so in advance so that the trainer knows you are coming.\n\n**What happens if I fail to mark check-in?\nIf you do not mark check-in, no voucher will be used, but the trainer will not know that you have attended.\n",nb="# Guided Tours\r\n\r\nGuided tours help you learn the system's features through interactive walkthroughs that show you where different functions are located and how to use them.\r\n\r\n## What are Guided Tours?\r\n\r\nGuided tours are interactive walkthroughs that:\r\n- Show you where different functions are located in the system\r\n- Explain how to use specific features\r\n- Provide step-by-step practical guidance\r\n- Help you become familiar with the system\r\n\r\n## Getting Started with Tours\r\n\r\n### Finding Available Tours\r\n\r\n1. **From News Announcements**: Click \"Start Guided Tour\" in relevant news announcements\r\n2. **From Help System**: Use the help system to find tours\r\n3. **From User Menu**: Some tours may be available from the user menu\r\n\r\n### Starting a Tour\r\n\r\n1. **Select Tour**: Click on the tour you want to start\r\n2. **Confirm Start**: Click \"Start\" to begin the tour\r\n3. **Follow Instructions**: Read each step and follow the instructions\r\n\r\n## Navigating Through Tours\r\n\r\n### Tour Controls\r\n\r\n- **Previous**: Go back to the previous step\r\n- **Next**: Move forward to the next step\r\n- **Skip**: Skip the current step\r\n- **Exit**: Exit the tour completely\r\n\r\n### Step Types\r\n\r\nTours can contain different types of steps:\r\n\r\n#### Navigate\r\n- The system moves you to a specific page\r\n- Used to show different parts of the system\r\n\r\n#### Click\r\n- An element is highlighted that you should click\r\n- Follow the instructions to click on the highlighted element\r\n\r\n#### Scroll\r\n- You get instructions to scroll on the page\r\n- Used to show content that's not visible\r\n\r\n#### Wait\r\n- The tour pauses for a specified time\r\n- Use the time to read the information\r\n\r\n#### Highlight\r\n- An element is highlighted without requiring a click\r\n- Used to draw attention to important elements\r\n\r\n## Exiting and Resuming Tours\r\n\r\n### Exiting a Tour\r\n\r\n- **Early Exit**: Click \"Exit\" to stop the tour\r\n- **Complete**: Follow all steps to complete the tour\r\n- **Automatic Exit**: Some tours exit automatically\r\n\r\n### Resuming a Tour\r\n\r\n- **From Beginning**: Restart the tour from the beginning\r\n- **From Last Step**: Some tours can be resumed from the last step\r\n- **From News Announcements**: Click the link in the news announcement\r\n\r\n## Troubleshooting\r\n\r\n### Common Issues\r\n\r\n**Tour doesn't start**\r\n- Check that you have the right permissions\r\n- Refresh the page and try again\r\n- Contact the administrator if the problem persists\r\n\r\n**Steps don't display correctly**\r\n- Check that you're on the right page\r\n- Refresh the page and try again\r\n- Check that the element is visible\r\n\r\n**Tour skips steps**\r\n- This may be normal if the element doesn't exist on the page\r\n- Check that you're following the instructions correctly\r\n- Contact the administrator if many steps are skipped\r\n\r\n### Tips for Best Experience\r\n\r\n1. **Follow Instructions**: Read each step carefully\r\n2. **Take Your Time**: You can pause and resume tours\r\n3. **Ask for Help**: Use the help system if you need more information\r\n4. **Test Functions**: Try using the functions after the tour\r\n\r\n## Integration with Other Features\r\n\r\n### News Announcements\r\n\r\n- **Direct Linking**: Click \"Start Guided Tour\" in news announcements\r\n- **Contextual Guidance**: Get guidance directly related to the news\r\n- **Smooth Transition**: Go from information to practical guidance\r\n\r\n### Help System\r\n\r\n- **Contextual Help**: Get help related to what you're doing\r\n- **AI Assistant**: Ask questions about tours or features\r\n- **Search Function**: Find specific tours or help\r\n\r\n### User Experience\r\n\r\n- **Personalized Guidance**: Tours are adapted to your role and needs\r\n- **Interactive Learning**: Learn by doing, not just reading\r\n- **Practical Application**: Use the functions directly after the tour\r\n",rb='# News Announcements\r\n\r\nNews announcements inform you about new features, system updates, and important notifications in the system.\r\n\r\n## What are News Announcements?\r\n\r\nNews announcements are messages that:\r\n- Inform you about new features\r\n- Announce system updates\r\n- Highlight improvements\r\n- Provide important system notifications\r\n\r\n## Viewing News Announcements\r\n\r\n### Finding Messages\r\n\r\n1. **Main Menu**: News announcements are displayed in the main menu\r\n2. **Help System**: Use the help system to find messages\r\n3. **Direct Links**: Click links in emails or other notifications\r\n\r\n### Reading Messages\r\n\r\n1. **Click on Message**: Click on the message to read it\r\n2. **Read Content**: Read the title and description carefully\r\n3. **Follow Instructions**: Follow any instructions in the message\r\n\r\n## Interacting with Messages\r\n\r\n### Mark as Read\r\n\r\n- **Automatic**: The message is marked as read when you click on it\r\n- **Manual**: Some messages can be marked as read manually\r\n- **Status Update**: The "New" indicator disappears when you read the message\r\n\r\n### Start Guided Tours\r\n\r\n- **Direct Linking**: Click "Start Guided Tour" to start a related tour\r\n- **Contextual Guidance**: Get practical guidance related to the news\r\n- **Smooth Transition**: Go from information to practical guidance\r\n\r\n## Message Types\r\n\r\n### Features\r\n\r\n- **New Features**: Information about completely new features\r\n- **Feature Updates**: Updates to existing features\r\n- **Feature Improvements**: Improvements to existing features\r\n\r\n### Improvements\r\n\r\n- **User Experience**: Improvements to the user experience\r\n- **Performance**: Performance improvements\r\n- **Security**: Security improvements\r\n\r\n### Announcements\r\n\r\n- **System Updates**: Information about system updates\r\n- **Maintenance**: Notifications about planned maintenance\r\n- **Important Messages**: Critical system notifications\r\n\r\n## Priority and Visibility\r\n\r\n### Priority Levels\r\n\r\n- **High Priority**: Important messages that require your attention\r\n- **Medium Priority**: Important but not critical messages\r\n- **Low Priority**: Less important messages\r\n\r\n### Visual Indicators\r\n\r\n- **"New" Indicator**: Shown for messages you haven\'t read\r\n- **Priority Colors**: Different colors for different priority levels\r\n- **Icons**: Icons that indicate message type\r\n\r\n## Managing Messages\r\n\r\n### Sort Messages\r\n\r\n- **Date**: Sort by publication date\r\n- **Priority**: Sort by priority level\r\n- **Category**: Sort by message type\r\n- **Read Status**: Sort by read/unread status\r\n\r\n### Filter Messages\r\n\r\n- **All Messages**: Show all messages\r\n- **Unread**: Show only unread messages\r\n- **Read**: Show only read messages\r\n- **Category**: Filter by specific category\r\n\r\n### Search Messages\r\n\r\n- **Search Text**: Use the search field to find specific messages\r\n- **Keywords**: Search for keywords in title or description\r\n- **Date Range**: Search for messages within a specific date range\r\n\r\n## Expiration Dates\r\n\r\n### Automatic Cleanup\r\n\r\n- **Expired Messages**: Messages with expiration dates automatically disappear\r\n- **Permanent Messages**: Messages without expiration dates are shown until manually removed\r\n- **Notifications**: You get notifications about messages that are about to expire\r\n\r\n### Managing Expiration Dates\r\n\r\n- **Check Dates**: Check expiration dates for important messages\r\n- **Save Information**: Save important information before the message expires\r\n- **Contact Support**: Contact support if you need access to expired messages\r\n\r\n## Troubleshooting\r\n\r\n### Common Issues\r\n\r\n**Message not displaying**\r\n- Check that you have the right permissions\r\n- Refresh the page and try again\r\n- Check that the message hasn\'t expired\r\n\r\n**"New" indicator not disappearing**\r\n- Check that you\'ve clicked on the message\r\n- Refresh the page and try again\r\n- Check the browser\'s cache\r\n\r\n**Tour not starting**\r\n- Check that the tour still exists\r\n- Check that you have access to the tour\r\n- Contact the administrator if the problem persists\r\n\r\n### Tips for Best Experience\r\n\r\n1. **Read Regularly**: Check news announcements regularly\r\n2. **Follow Instructions**: Follow instructions in messages\r\n3. **Start Tours**: Use guided tours to learn new features\r\n4. **Save Important Information**: Save important information from messages\r\n\r\n## Integration with Other Features\r\n\r\n### Guided Tours\r\n\r\n- **Direct Linking**: Start tours directly from messages\r\n- **Contextual Guidance**: Get guidance related to the news\r\n- **Practical Application**: Use the functions directly after the tour\r\n\r\n### Help System\r\n\r\n- **Contextual Help**: Get help related to the message\r\n- **AI Assistant**: Ask questions about messages or features\r\n- **Search Function**: Find specific messages or help\r\n\r\n### User Experience\r\n\r\n- **Personalized Information**: Messages are adapted to your role and needs\r\n- **Interactive Learning**: Learn by interacting with messages\r\n- **Practical Application**: Use the functions directly after reading the message\r\n',ab="# Register for trainings\n\n## Overview\n\nEasily register for trainings that interest you. That's the first step - registering is free and allows you to participate when the time comes.\n\n### Visual design\n**Anmlan** (Public Subscription Page) is the open page in the system and has a special visual design to make it clear that it's accessible to everyone:\n- **Blue color scheme**: Uses blue colors to indicate openness and accessibility\n- **Minimalistic design**: Clean and modern design without unnecessary elements\n- **Enhanced navigation**: Navigation element has special blue styling when active\n- **Visual indicators**: Small blue dot next to the page title to mark it as an open page\n- **Consistent design**: All elements use the same blue color scheme for unity\n\n## How things work\n\n### What is a registration?\nA registration means that you show interest in joining. It's like 'reserving a seat' - you show interest but don't commit to actually attending.\n\n### Benefits of registering\n- **Free**: There is no cost to register for a training session with us\n- **Flexibility**: You can unsubscribe at any time\n- **Overview**: You see all the trainings you are interested in\n- **Reminders**: You remember which trainings are available\n\n## Register for trainings\n\n### Here's how you do it\n1. Go to **{{navPublic}}**\n2. Browse the available trainings\n3. Read the description of each training\n4. Click **{{subSubscribeBtn}}** next to the training you want to attend\n5. Confirm your registration\n\n### What you see for each training\n- **Title and description**: What the training is about\n- **Date and time**: When the training takes place\n- **Location**: Where the training is held\n- **Available seats**: How many people can attend\n- **Registration status**: Whether you are already registered or not\n\n## Manage your registrations\n\n### View your subscriptions\n- **{{navPublic}}**: Shows all trainings you are registered for\n- **{{navAttendance}}**: Shows the registration status of each training\n- **Overview**: You can clearly see which trainings you plan to attend\n\n### Unsubscribe from trainings\nThe unsubscription process is simple and can be done by any user on the platform, including administrators.\n\n**How to Unsubscribe a User:**\n1. Go to the **{{navPublic}}**.\n2. Find the training you wish to manage.\n3. In the **{{subSubscribedUsers}}** list, locate the user you want to remove.\n4. Click the **trashcan icon** next to the user's name. A tooltip with the text \"{{unsubscribeTooltip}}\" will appear on hover.\n\nThe user is immediately removed from the subscription list. This action does not affect voucher balances and the spot becomes available for other users.\n\n### What happens when you unsubscribe?\n- You will be removed from the participant list\n- The balance of your voucher will not be affected\n- You can re-register if you wish\n- The place becomes available to others\n\n## Rules that we want you to be aware of\n\n### Registration vs check-in\n- **Registration is free**: You can register for as many trainings as you want\n- **Check-in costs**: Clip cards are only drawn when you mark check-in\n- **No obligation**: Registration does not mean you have to attend\n\n### Timeframes\n- **Register in advance**: Register as soon as you know you are interested\n- **Cancel in time**: Cancel your registration if you know you cannot attend\n- **No time limit**: You can withdraw at any time\n\n## Tips for smart registration management\n\n### Plan your training sessions\n1. **Sign up for interesting trainings**: Sign up for trainings that seem interesting\n2. **Keep an eye on your schedule**: Make sure your workouts don't clash with other activities\n3. **Be realistic**: Don't sign up for more workouts than you can handle\n\n### Manage changes\n1. **Cancel in time**: If you know you can't attend, cancel as soon as possible\n2. **Communicate**: Inform the trainer if you cannot attend\n3. **Reschedule**: Use your time for other trainings instead\n\n### Organize your registrations\n1. **Prioritize**: Focus on the trainings that are most important to you\n2. **Balance**: Mix different types of training\n3. **Update regularly**: Review your registrations regularly\n\n## Frequently asked questions and answers\n\n**Can I sign up for several trainings at the same time?\nYes, you can register for as many trainings as you want.\n\n**What happens if I sign up for a training that is full?\nYou will be notified that the training is full and you will not be able to register.\n\n**Can I register for trainings that have already started?\nNo, you can only register for future trainings.\n\n**Do I have to register in order to participate in a training session?\nYes, you need to register first and then mark check-in when the time comes.\n\n**What happens if I forget to deregister?\nNothing serious - you can still unregister later and no trainings will be consumed until you are marked as checked-in.\n\n**Can I see who is registered for a training?\nIt depends on the platform settings - ask the administrator about this.\n\n## Troubleshooting\n\n**Cannot register**\n- Check that the training is not full\n- Check that the training has not already started\n- Refresh the page and try again\n\n**Registration is not displayed**\n- Refresh the page to see the latest changes\n- Contact the administrator if the problem persists\n",sb="# The training card - Your ticket to training sessions\n\n## What is a training card?\n\nThink of clip cards as tickets to training sessions - simple and clear. Each training session costs one card. It makes it easy to keep track of who's coming to what and gives you control over training usage.\n\n## Here's how it works\n\n### When you start\nAs a new user, you start with 0 punch cards. This is perfectly normal! You will receive cards from an administrator before you can participate in training courses.\n\n### Registration versus check-in\n- **Register for free**: Register for as many trainings as you want - no card is used\n- **Check-in costs**: A card is drawn only when you actually mark check-in\n\n### Get your card back\nIf you cancel your check-in, you get your card back immediately. It's that simple!\n\n## Important rules\n\n### You need a card to attend\n- Without a card you cannot mark check-in\n- Always check your balance before marking check-in\n- Do you need more cards? Contact an administrator\n\n### Balance cannot go negative\n- The platform prevents the balance from going below 0\n- You cannot mark check-in without at least one card\n\n### Administrators manage cards\n- Only administrators can add or remove cards\n- Ask for more cards when you need them\n- Administrators see all users' balances\n\n## Tips for using cards in a smart way\n\n1. **Plan ahead**: Sign up for training early, but only mark check-in when you're sure\n2. **Keep track**: Check your balance regularly\n3. **Cancel on time**: Can't make it? Cancel your check-in as soon as possible\n4. **Request more**: Contact the administrator before it runs out, not after\n\n## Frequently asked questions\n\n**Can I use someone else's punch card?\nNo, punch cards are personal and cannot be shared.\n\n**What happens if I mark check-in by mistake?\nCancel the check-in immediately and you will get the card back.\n\n**If I miss a training session, will I get my card back?\nOnly if you marked check-in and then canceled it. Have you never marked check-in? Then no card will be used.\n",ib="# Welcome to your new world - the world of training!\nHere we make it easy! A crazy simple and easy solution to organize trainings - so you can focus on what really matters.\n## What do you get out of it?\n### As a participant:\n- **Easy to join**: Sign up for trainings in seconds\n- **Clip cards that work**: Use your cards to attend trainings\n- **Mark check-in easily**: Click and done - no hassle\n- **All in one place**: See your registrations and check-in instantly\n### As an administrator:\n- **Manage users easily**: Create and update accounts with ease\n- **Organize trainings smoothly**: Create, edit and plan activities\n- **Hand out punch cards**: Manage cards for all users\n- **Track what's happening**: View statistics and reports\n## This is how it works\nIt is simple! We have three things that we look at:\n1. **Users** - Participants who want to join trainings\n2. **Trainings** - Courses and activities that users can join\n3. **Clipboard** - What is used to participate in trainings\n\n## Visual design and user experience\nThe platform has a modern, minimalistic design focused on user-friendliness:\n- **Blue color scheme**: Consistent use of blue colors to indicate openness and accessibility\n- **Responsive design**: Works equally well on mobile and desktop\n- **Clear navigation**: Easy to find functions and pages\n## Technical basis\n- ** Works everywhere**: Opens in all browsers\n- **Updates instantly**: Changes are visible immediately without reloading\n- **Secure**: All information is stored securely\n- **Grows with you**: Works equally well for small and large groups\n## Get started\nExplore the help sections to learn how to best use the platform. Each section contains clear instructions and tips to help you get the most out of your time.\n",ob='# Troubleshooting - Solve common problems\n\n## Overview\n\nHere you will find help to solve common problems that may occur when using the platform. Most problems can be solved easily by following the steps below.\n\n## Common problems and solutions\n\n### "Cannot mark check-in"\n\n**Symptoms:** The "Mark check-in" button does not work or is grayed out.\n\n**Possible causes:**\n- You do not have enough punch cards\n- You are not registered for the training\n- You have already marked check-in for this training\n- The platform is still loading\n\n**Here is how to solve it:**\n1. **Check the balance of your voucher**\n   - Go to Admin view or check your profile\n   - You need at least 1 punch card to mark check-in\n\n2. **Check your registration**\n   - Go to the registration page\n   - Make sure you are registered for the training\n   - Register first if you are not\n\n3. **Check your previous check-in**\n   - Go to the Check-in view\n   - See if you have already marked check-in for this course\n   - Cancel previous check-in if you want to mark again\n\n4. **Refresh the page\n   - Press F5 or click on the refresh button\n   - Wait a few seconds and try again\n\n### "The exercise does not appear in the list"\n\n**Symptom:** An exercise you expected to see is not in the list.\n\n**Possible causes:**\n- The exercise has been removed by the administrator\n- The exercise has been moved or renamed\n- The platform is still loading\n- Problem with the network\n\n**Here is how to solve it:**\n1. **Refresh the page**\n   - Press F5 or click on the refresh button\n   - Wait a few seconds\n\n2. **Check the network connection**\n   - Check that you have an internet connection\n   - Try to reload the page\n\n3. **Check with the administrator\n   - Ask the administrator if the training is still available\n   - Ask them to check if it has been removed or moved\n\n### "The balance in the clipboard is not updated"\n\n**Symptoms:** The balance shows the wrong value or is not updated after an action.\n\n**Possible causes:**\n- Delay in the network\n- Problem with the browser cache\n- Platform error\n- Synchronization problems\n\n**Here\'s how to solve it:**\n1. **Wait and refresh**\n   - Wait 10-15 seconds\n   - Refresh the page (F5)\n   - Click on the refresh button in the help system\n\n2. **Clear the browser cache**\n   - Press Ctrl+F5 (or Cmd+Shift+R on Mac)\n   - This will force the browser to reload everything\n\n3. **Try a different browser**\n   - Open the platform in a different browser\n   - Check if the problem persists\n\n4. **Check with the administrator\n   - Ask the administrator to check your balance\n   - They can see the actual value in the platform\n\n### "Unable to register for training"\n\n**Symptoms:** The "Register" button does not work or gives an error message.\n\n**Possible causes:**\n- The training is full\n- The training has already started\n- You are already registered\n- Error on the platform\n\n**Here\'s how to fix it:**\n1. **Check the status of the training\n   - See if the training is fully subscribed\n   - Check the date and time\n   - See if you are already enrolled\n\n2. **Refresh and try again\n   - Refresh the page\n   - Wait a few seconds\n   - Try again\n\n3. **Contact the administrator\n   - Ask them to check the training settings\n   - They can see if there are technical problems\n\n### "The help system is not working"\n\n**Symptoms:** The help button (?) does not work or the content does not load.\n\n**Possible causes:**\n- Problem with the network\n- Browser cache\n- JavaScript error\n\n**How to fix it\n1. **Refresh the page\n   - Press the F5 key\n   - Wait until the page is fully loaded\n\n2. **Clear the cache**\n   - Press Ctrl+F5\n   - This will force a restart of all resources\n\n3. **Check JavaScript**\n   - Check that JavaScript is enabled in your browser\n   - Try to disable and re-enable JavaScript\n\n## When to contact the administrator\n\n### Contact the administrator if:\n- You have followed all the steps above but the problem persists\n- You receive error messages that you do not understand\n- The platform works completely differently than expected\n- You suspect it is a platform error\n\n### What to include when contacting the administrator:\n- **Your email address**: so they can identify your account\n- **Description of the problem**: What is happening and what you expect\n- **Steps you have tried**: List what you have already tried\n- **Error messages**: Copy any error messages\n- **Browser and device**: What browser and device you are using\n\n## Preventive measures\n\n### To avoid problems:\n1. **Refresh regularly**: Reload the page when you notice that something seems strange\n2. **Check the balance**: Check the balance of your voucher regularly\n3. **Register on time**: Register for training courses as soon as you know you are interested\n4. **Mark check-in when you are sure**: Wait to mark check-in until you are sure you can attend\n\n### Technical tips:\n- **Use modern browsers**: Chrome, Firefox, Safari or Edge\n- **Keep your browser up-to-date**: Install updates regularly\n- **Clear your cache regularly**: This can solve many problems\n- **Check your internet connection**: Make sure you have a stable connection\n\n## Quick guide to common actions\n\n### Refresh the page\n- **Windows/Linux**: Press F5\n- **Mac**: Press Cmd+R\n- **Alternatively**: Click on the refresh button in the browser\n\n### Clear cache\n- **Windows/Linux**: Press Ctrl+F5\n- **Mac**: Press Cmd+Shift+R\n\n### Check JavaScript\n- **Chrome**: Settings  Advanced  Privacy and security  Content settings  JavaScript\n- **Firefox**: Settings  Privacy & Security  Permissions  JavaScript\n- **Safari**: Settings  Privacy  Block all cookies  Uncheck\n\n### Check the network connection\n- Try to open another web page\n- Check that you are not offline\n- Try restarting the router if the problem persists\n',lb="# Training Management System Help\n\nWelcome to the comprehensive help documentation for the Training Management System. This guide provides detailed information for both administrators and users to effectively manage training programs, user accounts, and attendance tracking.\n\n## Quick Start\n\nChoose your role to get started:\n\n###  For Users\n- **[Training Subscriptions](en/subscriptions.md)** - Learn how to register for training sessions\n- **[Check-in Management](en/attendance.md)** - Mark your check-in and manage your schedule\n- **[Voucher System](en/vouchers.md)** - Understand how the credit system works\n\n###  For Administrators\n- **[User Management](en/user-management.md)** - Create and manage user accounts\n- **[Training Management](en/training-management.md)** - Set up and organize training sessions\n- **[System Overview](en/overview.md)** - Understand the complete system architecture\n\n###  Language Options\nAll documentation is available in both Swedish and English. Use the navigation menu to switch between languages.\n\n## System Overview\n\nThe Training Management System is designed to streamline the process of organizing and managing training sessions. Key features include:\n\n- **User Management** - Create and manage user accounts with role-based access\n- **Training Sessions** - Schedule and organize training programs\n- **Voucher System** - Credit-based system for training access\n- **Check-in Tracking** - Monitor participation and manage schedules\n- **Multi-language Support** - Available in Swedish and English\n\n## Getting Help\n\nIf you encounter any issues or have questions:\n\n1. **Check the [Troubleshooting](en/troubleshooting.md)** section for common problems and solutions\n2. **Review the [System Overview](en/overview.md)** for a complete understanding of the system\n3. **Contact support** if you need additional assistance\n\n## Documentation Guidelines\n\nThis documentation follows established guidelines to ensure clarity and consistency:\n\n- **[Content Guidelines](CONTENT_GUIDELINES.md)** - Standards for writing help content\n- **[Tone and Voice Guidelines](TONE_AND_VOICE_GUIDELINES.md)** - Writing style and approach\n- **[Writing Checklist](WRITING_CHECKLIST.md)** - Quality assurance checklist\n\n---\n\n*Last updated: {{ git_revision_date_localized }}*\n",cb='# StackEdit Markdown Editor\r\n\r\nThis page provides an integrated StackEdit editor for creating and editing markdown content.\r\n\r\n## Features\r\n\r\n- **Real-time preview**: See your markdown rendered as you type\r\n- **File management**: Save, load, and manage your markdown files\r\n- **Export options**: Export to various formats (HTML, PDF, etc.)\r\n- **GitHub integration**: Direct integration with GitHub repositories\r\n- **Cloud storage**: Save to Google Drive, Dropbox, and more\r\n\r\n## Usage\r\n\r\nThe editor below is fully functional and allows you to:\r\n1. Write markdown content\r\n2. Preview in real-time\r\n3. Save to various cloud services\r\n4. Export to different formats\r\n\r\n<div style="width: 100%; height: 800px; border: 1px solid #ccc; border-radius: 4px;">\r\n    <iframe src="https://stackedit.io/app#" \r\n            style="width: 100%; height: 100%; border: none; border-radius: 4px;"\r\n            title="StackEdit Markdown Editor"\r\n            allowfullscreen>\r\n    </iframe>\r\n</div>\r\n\r\n## Keyboard Shortcuts\r\n\r\n- `Ctrl+S` - Save\r\n- `Ctrl+Shift+S` - Save as\r\n- `Ctrl+O` - Open file\r\n- `Ctrl+Shift+O` - Open from\r\n- `Ctrl+Shift+P` - Export to\r\n- `Ctrl+Shift+E` - Toggle editor/preview mode\r\n\r\n## Supported Markdown Extensions\r\n\r\n- Standard Markdown\r\n- GitHub Flavored Markdown\r\n- MathJax for mathematical expressions\r\n- Mermaid diagrams\r\n- PlantUML diagrams\r\n- And many more...\r\n\r\n## Integration with This Documentation\r\n\r\nYou can use this editor to:\r\n- Draft new documentation pages\r\n- Edit existing content\r\n- Preview markdown before committing\r\n- Test markdown syntax and formatting\r\n\r\n## Tips for Best Results\r\n\r\n1. **Save frequently** - Use cloud storage to avoid losing work\r\n2. **Use preview mode** - Toggle between editor and preview to check formatting\r\n3. **Export regularly** - Export your work to backup formats\r\n4. **Sync with GitHub** - Connect your GitHub account for seamless integration\r\n',ub='# Hantera nyheter\r\n\r\nNyhetshanteringssystemet lter administratrer skapa, redigera och hantera nyhetsmeddelanden och funktionsannonser fr att informera anvndare om systemuppdateringar och nya funktioner.\r\n\r\n## versikt\r\n\r\nNyhetsmeddelanden (shoutouts) r meddelanden som:\r\n- Informerar anvndare om nya funktioner\r\n- Annonserar systemuppdateringar\r\n- Hjdpunkter frbttringar\r\n- Ger viktiga systemmeddelanden\r\n\r\n## Skapa ett nyhetsmeddelande\r\n\r\n### Grundlggande information\r\n\r\n1. **Titel**: Ange en tydlig och engagerande titel\r\n2. **Beskrivning**: Skriv en detaljerad beskrivning av nyheten\r\n3. **Kategori**: Vlj mellan:\r\n   - **Funktion**: Nya funktioner eller funktionalitet\r\n   - **Frbttring**: Frbttringar av befintliga funktioner\r\n   - **Meddelande**: Viktiga systemmeddelanden eller uppdateringar\r\n\r\n### Prioritet och synlighet\r\n\r\n- **Lg**: Visas normalt, ingen srskild betoning\r\n- **Medium**: Visas med ltt betoning\r\n- **Hg**: Visas med stark betoning och hgre synlighet\r\n\r\n### Utgngsdatum\r\n\r\n- **Inget utgngsdatum**: Meddelandet visas tills det tas bort manuellt\r\n- **Specifikt datum**: Meddelandet frsvinner automatiskt efter det angivna datumet\r\n- **Automatisk rensning**: Systemet rensar automatiskt utgngna meddelanden\r\n\r\n## Lnka till rundturer\r\n\r\n### Integration med rundtursystem\r\n\r\nDu kan lnka nyhetsmeddelanden till befintliga rundturer fr att:\r\n- Ge anvndare direkt tillgng till guidning\r\n- Skapa en smidig vergng frn information till praktisk vgledning\r\n- Frbttra anvndarupplevelsen\r\n\r\n### S hr lnkar du till en rundtur\r\n\r\n1. **Vlj rundtur**: Vlj en befintlig rundtur frn listan\r\n2. **Automatisk lnkning**: Systemet skapar automatiskt en lnk till rundturen\r\n3. **Knapptext**: Anvndare ser en "Starta guidad rundtur" knapp i meddelandet\r\n\r\n## Hantera befintliga meddelanden\r\n\r\n### Redigera meddelande\r\n\r\n1. I meddelandelistan, klicka p **Redigera** bredvid meddelandet\r\n2. Gr dina ndringar\r\n3. Klicka p **Spara** fr att uppdatera meddelandet\r\n\r\n### Duplicera meddelande\r\n\r\n1. Klicka p **Duplicera** bredvid ett befintligt meddelande\r\n2. En kopia skapas med namnet "Kopia av [originaltitel]"\r\n3. Redigera kopian enligt dina behov\r\n\r\n### Ta bort meddelande\r\n\r\n1. Klicka p **Ta bort** bredvid meddelandet\r\n2. Bekrfta borttagningen i dialogrutan\r\n3. **Varning**: Denna tgrd kan inte ngras\r\n\r\n### Markera som lst\r\n\r\nAnvndare kan markera meddelanden som lsta. Administratrer kan se:\r\n- Antal anvndare som har lst meddelandet\r\n- Antal anvndare som inte har lst meddelandet\r\n- Lsstatistik per meddelande\r\n\r\n## Meddelandestatistik\r\n\r\nSystemet sprar fljande statistik fr varje meddelande:\r\n- **Totalt antal meddelanden**: Antal skapade meddelanden\r\n- **Aktiva meddelanden**: Meddelanden som visas fr anvndare\r\n- **Utgngna meddelanden**: Meddelanden som har passerat sitt utgngsdatum\r\n- **Kategorier**: Antal meddelanden per kategori\r\n- **Prioritetsfrdelning**: Antal meddelanden per prioritetsniv\r\n\r\n## Importera och exportera\r\n\r\n### Exportera meddelanden\r\n\r\n1. Klicka p **Exportera** i nyhetshanteringspanelen\r\n2. Systemet genererar en JSON-fil med alla meddelanden\r\n3. Spara filen fr skerhetskopiering eller delning\r\n\r\n### Importera meddelanden\r\n\r\n1. Klicka p **Importera** i nyhetshanteringspanelen\r\n2. Klistra in JSON-data i textfltet\r\n3. Klicka p **Importera meddelanden** fr att lsa in data\r\n\r\n## "Nytt" indikator\r\n\r\n### Automatisk markering\r\n\r\n- **Nya meddelanden**: Visas med en "Nytt" indikator\r\n- **Automatisk uppdatering**: Indikatorn frsvinner nr anvndaren lser meddelandet\r\n- **Visuell betoning**: "Nytt" indikatorn hjlper anvndare att upptcka nya innehll\r\n\r\n### Hantera indikatorer\r\n\r\n- **Anvndarvisning**: Anvndare ser "Nytt" indikatorn tills de lser meddelandet\r\n- **Adminversikt**: Administratrer kan se vilka meddelanden som r nya fr anvndare\r\n- **Statistik**: Spra hur mnga anvndare som har sett varje meddelande\r\n\r\n## Bsta praxis\r\n\r\n### Skriv effektiva meddelanden\r\n\r\n- **Tydlig titel**: Anvnd en titel som frklarar vad nyheten handlar om\r\n- **Konkret beskrivning**: Beskriv specifikt vad som har ndrats eller tillagts\r\n- **Anvndarcentrerat**: Fokusera p frdelar fr anvndaren\r\n- **Kort och koncis**: Hll meddelandet kort men informativt\r\n\r\n### Vlj rtt kategori\r\n\r\n- **Funktion**: Anvnd fr helt nya funktioner eller betydande tillgg\r\n- **Frbttring**: Anvnd fr frbttringar av befintliga funktioner\r\n- **Meddelande**: Anvnd fr systemuppdateringar, underhll eller viktiga meddelanden\r\n\r\n### Hantera prioritet\r\n\r\n- **Hg prioritet**: Anvnd sparsamt fr kritiska meddelanden\r\n- **Medium prioritet**: Anvnd fr viktiga men inte kritiska uppdateringar\r\n- **Lg prioritet**: Anvnd fr mindre viktiga meddelanden\r\n\r\n### Planera utgngsdatum\r\n\r\n- **Tidsbegrnsade kampanjer**: Anvnd utgngsdatum fr tillflliga meddelanden\r\n- **Permanent information**: Lmna utan utgngsdatum fr viktig information\r\n- **Automatisk rensning**: Lt systemet rensa utgngna meddelanden automatiskt\r\n\r\n## Felskning\r\n\r\n### Vanliga problem\r\n\r\n**Meddelandet visas inte**\r\n- Kontrollera att meddelandet r aktivt\r\n- Verifiera att utgngsdatumet inte har passerat\r\n- Kontrollera att anvndaren har rtt roll\r\n\r\n**"Nytt" indikator frsvinner inte**\r\n- Kontrollera att anvndaren har klickat p meddelandet\r\n- Verifiera att lsstatusen uppdateras korrekt\r\n- Kontrollera webblsarens cache\r\n\r\n**Rundtur lnkas inte korrekt**\r\n- Kontrollera att rundturen fortfarande existerar\r\n- Verifiera att anvndaren har tillgng till rundturen\r\n- Kontrollera att lnken r korrekt konfigurerad\r\n\r\n### Debug-tips\r\n\r\n1. **Testa som anvndare**: Logga in som en vanlig anvndare fr att se meddelanden\r\n2. **Kontrollera datum**: Verifiera att utgngsdatum r korrekt angivna\r\n3. **Kontrollera roller**: Se till att anvndaren har rtt behrigheter\r\n\r\n## Integration med andra system\r\n\r\n### Rundtursystem\r\n\r\n- **Automatisk lnkning**: Skapa smidiga vergngar frn information till praktisk vgledning\r\n- **Kontextuell hjlp**: Ge anvndare direkt tillgng till relevanta rundturer\r\n- **Frbttrad anvndarupplevelse**: Kombinera information med interaktiv vgledning\r\n\r\n### Hjlpsystem\r\n\r\n- **Kontextuell hjlp**: Lnka till relevant hjlpdokumentation\r\n- **AI-assistent**: Anvnd AI-assistenten fr att svara p frgor om meddelanden\r\n- **Skfunktion**: Anvndare kan ska efter specifika meddelanden i hjlpsystemet\r\n',db='# Rundturshantering\r\n\r\nRundturshanteringssystemet lter administratrer skapa, redigera och hantera guidade rundturer fr att hjlpa anvndare att lra sig systemets funktioner.\r\n\r\n## versikt\r\n\r\nGuidade rundturer r interaktiva vgledningar som hjlper anvndare att:\r\n- Lr sig nya funktioner\r\n- Frst systemets struktur\r\n- Navigera genom komplexa arbetsflden\r\n- F kontextuell hjlp\r\n\r\n## Skapa en ny rundtur\r\n\r\n### Grundlggande information\r\n\r\n1. **Rundtursnamn**: Ange ett beskrivande namn fr rundturen\r\n2. **Beskrivning**: Skriv en kort beskrivning av vad rundturen tcker\r\n3. **Kategori**: Vlj mellan:\r\n   - **Introduktion**: Fr nya anvndare\r\n   - **Funktion**: Fr specifika funktioner\r\n   - **Admin**: Fr administrativa funktioner\r\n   - **Anvndare**: Fr anvndarfunktioner\r\n\r\n### Rollkrav\r\n\r\n- **Vilken anvndare som helst**: Alla anvndare kan se rundturen\r\n- **Endast Admin**: Endast administratrer kan se rundturen\r\n- **Endast Anvndare**: Endast vanliga anvndare kan se rundturen\r\n\r\n### Berknad varaktighet\r\n\r\nAnge hur lng tid (i minuter) rundturen berknas att ta.\r\n\r\n## Hantera rundturssteg\r\n\r\n### Stegtyper\r\n\r\nVarje steg i en rundtur kan ha olika tgrdstyper:\r\n\r\n#### Navigera\r\n- Flyttar anvndaren till en specifik sida\r\n- Anvnds fr att visa olika delar av systemet\r\n\r\n#### Klicka\r\n- Markerar ett element som anvndaren ska klicka p\r\n- Anvnds fr att visa interaktiva element\r\n\r\n#### Rulla\r\n- Visar anvndaren att de ska scrolla p sidan\r\n- Anvnds fr att visa innehll som inte r synligt\r\n\r\n#### Vnta\r\n- Pausar rundturen i en bestmd tid\r\n- Anvnds fr att ge anvndaren tid att lsa\r\n\r\n#### Markera\r\n- Hjdpunkter ett element utan klick\r\n- Anvnds fr att uppmrksamma viktiga element\r\n\r\n### Stegkonfiguration\r\n\r\nFr varje steg anger du:\r\n\r\n1. **Stegtitel**: En kort titel fr steget\r\n2. **Steginnehll**: Detaljerad beskrivning av vad anvndaren ska gra\r\n3. **Mlvljare**: CSS-vljare fr elementet som ska markeras\r\n4. **Position**: Var tooltipen ska visas (verst, underst, vnster, hger, centrum)\r\n5. **tgrd**: Vilken typ av tgrd som ska utfras\r\n6. **Krvd vy**: Vilken sida som mste vara aktiv fr steget\r\n7. **Hoppa ver om ml inte hittas**: Om steget ska hoppas ver om elementet inte finns\r\n\r\n### Mlvljare (data-tour attribut)\r\n\r\nFr att en rundtur ska fungera korrekt mste mlvljarna matcha `data-tour` attribut i koden:\r\n\r\n```html\r\n\x3c!-- Exempel p data-tour attribut --\x3e\r\n<button data-tour="create-training-btn">Skapa trning</button>\r\n<div data-tour="user-list">Anvndarlista</div>\r\n```\r\n\r\n## Rundtursstatistik\r\n\r\nSystemet sprar fljande statistik fr varje rundtur:\r\n- **Totalt antal rundturer**: Antal skapade rundturer\r\n- **Totalt antal steg**: Totalt antal steg i alla rundturer\r\n- **Genomsnitt steg/rundtur**: Genomsnittligt antal steg per rundtur\r\n- **Kategorier**: Antal rundturer per kategori\r\n\r\n## Importera och exportera\r\n\r\n### Exportera rundturer\r\n\r\n1. Klicka p **Exportera** i rundturshanteringspanelen\r\n2. Systemet genererar en JSON-fil med alla rundturer\r\n3. Spara filen fr skerhetskopiering eller delning\r\n\r\n### Importera rundturer\r\n\r\n1. Klicka p **Importera** i rundturshanteringspanelen\r\n2. Klistra in JSON-data i textfltet\r\n3. Klicka p **Importera rundturer** fr att lsa in data\r\n\r\n## Redigera befintliga rundturer\r\n\r\n### Vlja rundtur att redigera\r\n\r\n1. I rundturslistan, klicka p **Redigera** bredvid den rundtur du vill ndra\r\n2. Rundturen laddas i redigeringslge\r\n3. Gr dina ndringar och klicka p **Spara**\r\n\r\n### Duplicera rundtur\r\n\r\n1. Klicka p **Duplicera** bredvid en befintlig rundtur\r\n2. En kopia skapas med namnet "Kopia av [originalnamn]"\r\n3. Redigera kopian enligt dina behov\r\n\r\n### Ta bort rundtur\r\n\r\n1. Klicka p **Ta bort** bredvid rundturen\r\n2. Bekrfta borttagningen i dialogrutan\r\n3. **Varning**: Denna tgrd kan inte ngras\r\n\r\n## Bsta praxis\r\n\r\n### Planera din rundtur\r\n\r\n- **Brja med ml**: Vad ska anvndaren lra sig?\r\n- **Bryt ner i steg**: Varje steg ska fokusera p en sak\r\n- **Testa fldet**: G igenom rundturen som en anvndare skulle gra\r\n\r\n### Skriv effektiva steg\r\n\r\n- **Var tydlig**: Anvnd enkla, direkta instruktioner\r\n- **Var konkret**: Specificera exakt vad anvndaren ska gra\r\n- **Hll det kort**: Varje steg ska vara ltt att frst snabbt\r\n\r\n### Vlj rtt mlvljare\r\n\r\n- **Anvnd data-tour attribut**: Detta r den bsta metoden\r\n- **Testa vljare**: Kontrollera att elementet hittas korrekt\r\n- **Planera fr ndringar**: Vlj stabila element som inte ndras ofta\r\n\r\n## Felskning\r\n\r\n### Vanliga problem\r\n\r\n**Rundturen startar inte**\r\n- Kontrollera att alla steg har giltiga mlvljare\r\n- Verifiera att krvda vyer r korrekt angivna\r\n- Kontrollera att anvndaren har rtt roll\r\n\r\n**Steg hoppas ver ovntat**\r\n- Kontrollera att mlvljaren matchar ett element p sidan\r\n- Verifiera att elementet r synligt nr steget krs\r\n- Kontrollera "Hoppa ver om ml inte hittas" instllningen\r\n\r\n**Tooltip visas p fel plats**\r\n- Justera positionen (verst, underst, vnster, hger, centrum)\r\n- Kontrollera att det finns tillrckligt med utrymme\r\n- Testa p olika skrmstorlekar\r\n\r\n### Debug-tips\r\n\r\n1. **Anvnd utvecklarverktyg**: Inspektera element fr att hitta rtt vljare\r\n2. **Testa steg fr steg**: Kr rundturen och kontrollera varje steg\r\n3. **Kontrollera konsolen**: Leta efter felmeddelanden i webblsarens konsol\r\n\r\n## Integration med nyhetssystem\r\n\r\nRundturer kan lnkas till nyhetsmeddelanden fr att:\r\n- Annonsera nya funktioner\r\n- Ge anvndare direkt tillgng till guidning\r\n- Skapa en smidig anvndarupplevelse\r\n\r\nNr du skapar ett nyhetsmeddelande kan du lnka det till en befintlig rundtur fr att ge anvndare bde information och praktisk vgledning.\r\n',hb='# Trningshantering\r\n\r\n## versikt\r\n\r\nSom administratr har du nu en dedikerad sida fr att hantera alla trningar. P sidan **Trningar** hittar du allt du behver fr att skapa, redigera och organisera trningspass p ett enkelt och effektivt stt.\r\n\r\n### Nyckelfunktioner\r\n- **Antal anmlda**: Se direkt hur mnga som har anmlt sig till varje trning\r\n- **Enhetliga kort**: Alla trningskort har samma hjd fr bttre versikt\r\n- **tgrdsknappar**: Redigera och ta bort-knappar r nu placerade lngst ner p varje kort\r\n\r\n## Komma t trningshanteringen\r\n\r\n### S hr gr du\r\n1. Logga in som administratr\r\n2. Klicka p **Trningar** i navigationsmenyn\r\n3. Du ser nu en versikt ver alla trningar\r\n\r\n## Skapa nya trningar\r\n\r\n### S hr gr du\r\n1. Klicka p **Lgg till trning** (knappen med plussymbol)\r\n2. Fyll i:\r\n   - **Titel**: Ett tydligt namn fr trningen (t.ex. "React Grundkurs")\r\n   - **Beskrivning**: En beskrivning av vad trningen handlar om\r\n3. Klicka p **Skapa trning**\r\n\r\n### Vad hnder hrnst?\r\n- Trningen skapas direkt\r\n- Den visas i trningslistan\r\n- Anvndarna kan anmla sig direkt\r\n- Du kan redigera trningen nr som helst\r\n\r\n## Redigera befintliga trningar\r\n\r\n### S hr gr du\r\n1. Hitta trningen i listan\r\n2. Klicka p **redigeringsikonen** (pennan) lngst ner p trningskortet\r\n3. ndra titel och/eller beskrivning\r\n4. Klicka p **Uppdatera**\r\n\r\n### Vad du kan ndra\r\n- **Titel**: Uppdatera namnet p trningen\r\n- **Beskrivning**: ndra eller frbttra beskrivningen\r\n- **Alla ndringar r omedelbart synliga** fr alla anvndare\r\n\r\n## Ta bort trningar\r\n\r\n### S hr gr du\r\n1. Hitta trningen i listan\r\n2. Klicka p **papperskorgen** (soptunna) lngst ner p trningskortet\r\n3. Bekrfta borttagningen i popup-dialogen\r\n4. Trningen tas bort permanent\r\n\r\n### Viktiga anteckningar\r\n- **Denna tgrd kan inte ngras** - trningen kommer att tas bort permanent\r\n- **Alla anmlningar** till denna trning tas ocks bort\r\n- **Anvndarna kommer inte lngre att se** denna trning i sina tillgngliga alternativ\r\n- **Se till att du verkligen vill ta bort** innan du bekrftar\r\n\r\n## Ska och filtrera trningar\r\n\r\n### S hr gr du\r\n1. Anvnd skfltet hgst upp p sidan\r\n2. Skriv in namn eller beskrivning fr att filtrera\r\n3. Resultaten uppdateras automatiskt\r\n\r\n### Tips fr skning\r\n- Sk p delar av namnet eller beskrivningen\r\n- Skningen r inte knslig fr stora/sm bokstver\r\n- Tm skfltet fr att se alla trningar igen\r\n\r\n## Trningsversikt\r\n\r\n### Vad du ser fr varje trning\r\n- **Titel och beskrivning**: Grundinformation om trningen\r\n- **Antal anmlda**: Visar hur mnga som har anmlt sig (t.ex. "3 anmlda")\r\n- **Redigeringsknapp**: Pennikon fr att redigera trningen (lngst ner)\r\n- **Ta bort-knapp**: Papperskorgsikon fr att ta bort trningen (lngst ner)\r\n- **Enhetliga kort**: Alla trningskort har samma hjd fr snygg versikt\r\n\r\n### Organisera trningar smart\r\n- **Anvnd tydliga titlar**: "React Grundkurs" istllet fr "Trning 1"\r\n- **Inkludera niv**: "JavaScript fr nybrjare", "Avancerad CSS"\r\n- **Lgg till detaljer**: "React Workshop 2024"\r\n- **Var konsekvent**: Anvnd samma mnster fr liknande trningar\r\n\r\n## Tips fr effektiv trningshantering\r\n\r\n### Skriv bra beskrivningar\r\n- **Lrandeml**: Vad ska deltagarna lra sig?\r\n- **Frutsttningar**: Vad behver de veta i frvg?\r\n- **Tid**: Hur lng tid kommer det att ta?\r\n- **Format**: Praktiskt, teoretiskt eller bde och?\r\n- **Mlgrupp**: Vem r det fr?\r\n\r\n### Exempel p en bra beskrivning\r\n```\r\n"React Grundkurs - En introduktion till React fr webbutvecklare som redan kan HTML, CSS och JavaScript. Vi gr igenom komponenter, state och props. Praktisk workshop med hands-on vningar. Lmplig fr nybrjare p React."\r\n```\r\n\r\n### Planera i frvg\r\n- **Skapa trningar tidigt**: Ge anvndarna tid att anmla sig\r\n- **Balansera erbjudandet**: Blanda olika typer av trningar\r\n- **Lyssna p feedback**: Anpassa efter anvndarnas preferenser\r\n\r\n## Felskning\r\n\r\n### Vanliga problem\r\n**Kan inte skapa trning**\r\n- Kontrollera att alla flt r ifyllda\r\n- Se till att du har rtt behrigheter\r\n- Uppdatera sidan och frsk igen\r\n\r\n**ndringar sparas inte**\r\n- Kontrollera att du klickade p **Uppdatera**\r\n- Uppdatera sidan fr att se ndringarna\r\n- Kontakta support om problemet kvarstr\r\n\r\n**Trningen visas inte**\r\n- Kontrollera att trningen r korrekt skapad\r\n- Se till att den inte r dold\r\n- Uppdatera plattformen om det behvs\r\n\r\n## Skerhet och behrigheter\r\n\r\n- Endast administratrer kan komma t trningshanteringen\r\n- Alla ndringar sparas automatiskt\r\n- Trningsdata skyddas enligt regler fr dataskydd\r\n- Skerhetsuppdateringar grs automatiskt\r\n\r\n## Tips fr effektiv administration\r\n\r\n### Kommunikation\r\n- **Informera anvndarna**: Bertta fr dem nr nya trningar lggs till\r\n- **Samla in feedback**: Frga vad anvndarna vill ha\r\n- **Dokumentera**: Hlla reda p vad som fungerar\r\n\r\n### Kvalitetsskring\r\n- **Granska regelbundet**: Ta bort frldrade trningar\r\n- **Uppdatera beskrivningar**: Hll dem uppdaterade\r\n- **Samla in feedback**: Frga anvndarna vad de tycker\r\n\r\n### Frbttra kontinuerligt\r\n- **Lgga till nya trningar**: Baserat p intressen\r\n- **Frbttra befintliga**: Uppdatera baserat p feedback\r\n- **Experimentera**: Testa nya format',mb='# Anvndare\r\n\r\n## versikt\r\n\r\nSom bvcbcv har du nu en speciell sida fr att hantera alla anvndare. P sidan **Anvndare** hittar du allt du behver fr att skapa, redigera och hantera anvndarkonton p ett enkelt och effektivt stt.\r\n\r\n## Komma t anvndarhanteringen\r\n\r\n### S hr gr du\r\n1. Logga in som administratr\r\n2. Klicka p **Anvndare** i navigationsmenyn\r\n3. Du ser nu en versikt ver alla anvndare\r\n\r\n## Skapa nya anvndare\r\n\r\n### S hr gr du\r\n1. Klicka p **Lgg till anvndare** (knappen med plussymbol)\r\n2. Fyll i:\r\n   - **Visningsnamn**: Anvndarens namn (frnamn och efternamn)\r\n   - **E-post**: En e-postadress som inte redan r anvnd\r\n3. Klicka p **Skapa anvndare**\r\n\r\n### Vad hnder hrnst?\r\n- Anvndaren skapas direkt\r\n- De brjar med 0 klippkort (helt normalt)\r\n- De kan logga in direkt med sin e-post\r\n- Du kan brja hantera deras kort direkt\r\n\r\n## Redigera befintliga anvndare\r\n\r\n### S hr gr du\r\n1. Hitta anvndaren i listan\r\n2. Klicka p **redigeringsikonen** (pennan) bredvid anvndaren\r\n3. ndra namn och/eller e-post\r\n4. Klicka p **Uppdatera**\r\n\r\n### Vad du kan ndra\r\n- **Visningsnamn**: Uppdatera anvndarens namn\r\n- **E-post**: ndra e-postadressen\r\n- **Alla ndringar r omedelbart synliga** fr alla anvndare\r\n\r\n## Hantera klippkort\r\n\r\n### Lgga till kort\r\n1. Hitta anvndaren i listan\r\n2. Leta efter deras aktuella saldo\r\n3. Klicka p **"+"** bredvid saldot\r\n4. Ett kort kommer att lggas till omedelbart\r\n\r\n### Ta bort kort\r\n1. Hitta anvndaren i listan\r\n2. Klicka p **"-"** bredvid saldot\r\n3. Ett kort tas bort (endast om saldot r ver 0)\r\n\r\n### Viktigt att komma ihg\r\n- Du kan inte radera fler kort n vad anvndaren har\r\n- ndringar syns omedelbart\r\n- Alla ndringar sparas fr framtida bruk\r\n\r\n## Ska och filtrera anvndare\r\n\r\n### S hr gr du\r\n1. Anvnd skfltet hgst upp p sidan\r\n2. Skriv in namn eller e-post fr att filtrera\r\n3. Resultaten uppdateras automatiskt\r\n\r\n### Tips fr skning\r\n- Sk p delar av namnet eller e-postadressen\r\n- Skningen r inte knslig fr stora/sm bokstver\r\n- Tm skfltet fr att se alla anvndare igen\r\n\r\n## Anvndarversikt\r\n\r\n### Vad du ser fr varje anvndare\r\n- **Namn och e-post**: Kontaktinformation\r\n- **Klippkortets saldo**: Antal kort fr tillfllet\r\n- **Redigeringsknapp**: Pennikon fr att redigera anvndaren\r\n- **Kortshantering**: Plus- och minusknappar fr att hantera klippkort\r\n\r\n### Hitta anvndare enkelt\r\n- Sortera efter namn, e-post eller saldo\r\n- Anvnd skfunktionen fr att hitta specifika anvndare\r\n- Filtrera fr en bttre verblick\r\n\r\n## Tips fr administratrer\r\n\r\n### Hantera klippkort p ett smart stt\r\n- **Stt tydliga regler**: Bestm hur mnga kort olika anvndare ska ha\r\n- **Hll koll**: Se vem som anvnder sina kort snabbt\r\n- **Lmna ut regelbundet**: vervg att dela ut korten regelbundet i stllet fr alla p en gng\r\n\r\n### Kommunicera med anvndarna\r\n- **Frklara hur det fungerar**: Se till att anvndarna frstr klippkortssystemet\r\n- **Tydliga regler**: Frklara tydligt nr och hur korten kan anvndas\r\n- **Vara tillgnglig**: Svara p frgor om korten och plattformen\r\n\r\n### Hantera effektivt\r\n- **Stora grupper**: Fr mnga anvndare, skapa dem i grupper\r\n- **Kontrollera regelbundet**: Kontrollera anvndare och kort regelbundet\r\n- **Spara viktig information**: Hll reda p viktig anvndardata\r\n\r\n## Felskning\r\n\r\n### Vanliga problem\r\n**Anvndaren kan inte logga in**\r\n- Kontrollera att e-postadressen r korrekt\r\n- Kontrollera att anvndaren inte har tagits bort\r\n\r\n**Klippkorten visas inte korrekt**\r\n- Uppdatera sidan fr att se de senaste ndringarna\r\n- Kontrollera att du har rtt behrigheter\r\n\r\n**Kan inte skapa anvndare**\r\n- Kontrollera att e-postadressen r unik\r\n- Se till att alla flt r ifyllda\r\n\r\n**Kan inte redigera anvndare**\r\n- Kontrollera att du klickade p **Uppdatera**\r\n- Uppdatera sidan fr att se ndringarna\r\n- Kontakta support om problemet kvarstr\r\n\r\n## Skerhet och behrigheter\r\n\r\n- Endast administratrer kan komma t anvndarhanteringen\r\n- Alla ndringar sparas automatiskt\r\n- Endast administratrer kan hantera klippkort\r\n- Anvndardata skyddas enligt regler fr dataskydd\r\n- Skerhetsuppdateringar grs automatiskt\r\n\r\n## Tips fr effektiv administration\r\n\r\n### Kommunikation\r\n- **Informera anvndarna**: Bertta fr dem nr nya funktioner lggs till\r\n- **Samla in feedback**: Frga vad anvndarna vill ha\r\n- **Dokumentera**: Hlla reda p vad som fungerar\r\n\r\n### Automatisera\r\n- **Skapa mallar**: Fr liknande anvndare\r\n- **Anvnd replikering**: Kopiera befintliga som en utgngspunkt\r\n- **Planera framt**: Skapa anvndare fr kommande perioder\r\n\r\n### Kvalitetsskring\r\n- **Granska regelbundet**: Granska anvndarlistan\r\n- **Uppdatera kontinuerligt**: Hll anvndardata uppdaterat\r\n- **Mt framgng**: Spra anvndning och feedback\r\n',gb='# Incheckning - Markera att du deltar i trningar\r\n\r\n## versikt\r\n\r\nHr markerar du nr du faktiskt deltar i trningar och hanterar ditt trningskort. Det r hjrtat i plattformen - enkelt och smidigt.\r\n\r\n## Markera incheckning\r\n\r\n### S hr gr du\r\n1. G till vyn **Incheckning**\r\n2. Leta upp den trning du vill delta i i listan\r\n3. Leta efter ditt namn i listan ver deltagare\r\n4. Klicka p **"Markera incheckning"** bredvid ditt namn\r\n5. Bekrfta att du vill markera incheckning\r\n\r\n### Vad hnder nr du markerar incheckning?\r\n- En voucher dras av direkt frn ditt saldo\r\n- Din incheckning registreras\r\n- Du fr en bekrftelse p att incheckningn har markerats\r\n- Administratrer kan se att du har deltagit i trningen\r\n\r\n### Krav fr att markera incheckning\r\n- **Du mste vara registrerad**: Du kan bara markera incheckning fr kurser som du r anmld till\r\n- **Tillrckligt med vouchers**: Du behver minst 1 voucher p ditt konto\r\n- **En gng per session**: Du kan bara markera incheckning en gng per session\r\n\r\n## Avboka incheckning\r\n\r\n### Nr och varfr avbryta?\r\nDu kan avbryta din incheckning om du:\r\n- ndrat dig och inte kan delta\r\n- Markerat incheckning av misstag\r\n- Behver frigra vouchern fr en annan kurs\r\n\r\n### Hur man avbokar\r\n1. G till vyn **Incheckning**\r\n2. Hitta den kurs dr du markerat incheckning\r\n3. Klicka p **"Avboka incheckning"** bredvid ditt namn\r\n4. Bekrfta att du vill avboka din incheckning\r\n\r\n### Vad hnder nr du avbokar?\r\n- Din voucher terbetalas omedelbart\r\n- Din incheckning kommer att tas bort frn kursen\r\n- Du kan markera incheckning igen om du vill\r\n\r\n## Viktiga regler\r\n\r\n### Incheckning vs registrering\r\n- **Registrering r gratis**: Du kan registrera dig fr trningstillfllen utan att anvnda ett hlkort\r\n- **Incheckning kostar**: Stmpelkort dras endast av nr du markerar incheckning\r\n- **Flexibilitet**: Du kan anmla dig till flera trningar och vlja vilka du faktiskt deltar i\r\n\r\n### Tidsramar\r\n- **Ingen tidsgrns**: Du kan avboka din incheckning nr som helst\r\n- **Omedelbar terbetalning**: Vouchers terbetalas omedelbart nr du avbokar\r\n- **Planera i frvg**: Anml dig till trningar i frvg, markera incheckning nr du r sker p att du kan delta\r\n\r\n## Tips fr smart incheckninghantering\r\n\r\n### Planera dina trningstillfllen\r\n1. **Anml dig i frvg**: anml dig till trningar som du r intresserad av\r\n2. **Markera incheckning nr du r sker**: Vnta med att markera incheckning tills du r sker p att du kan delta\r\n3. **Hll koll p ditt saldo**: Kontrollera saldot p din voucher regelbundet\r\n\r\n### Hantera ndringar\r\n1. **Avboka i tid**: Om du inte kan delta, avboka s snart som mjligt\r\n2. **Kommunicera**: Informera utbildaren om du inte kan delta\r\n3. **Omplanera**: Anvnd din terbetalda voucher fr andra trningstillfllen\r\n\r\n### Felskning\r\n- **Det gr inte att markera incheckning**: Kontrollera att du r registrerad och har tillrckligt med hlkort\r\n- **Knappen fungerar inte**: Uppdatera sidan och frsk igen\r\n- **Stmpelkortet har inte dragits**: Kontrollera ditt saldo och kontakta administratren om problemet kvarstr\r\n\r\n## Vanliga frgor och svar\r\n\r\n**Kan jag markera incheckning fr ngon annan?\r\nNej, det r bara du som kan markera din egen incheckning.\r\n\r\n**Vad hnder om jag av misstag markerar incheckning?\r\nDu kan avbryta incheckningn omedelbart och f tillbaka din voucher.\r\n\r\n**Kan jag markera incheckning flera gnger fr samma kurs?\r\nNej, du kan bara markera incheckning en gng per trning.\r\n\r\n**Mste jag markera incheckning direkt nr trningen brjar?\r\nNej, du kan markera incheckning nr som helst, men det r bra att gra det i frvg s att trnaren vet att du kommer.\r\n\r\n**Vad hnder om jag missar att markera incheckning?\r\nOm du inte markerar incheckning kommer ingen voucher att anvndas, men trnaren vet inte att du har deltagit.\r\n',pb='# Guidade rundturer\r\n\r\nGuidade rundturer hjlper dig att lra dig systemets funktioner genom interaktiva vgledningar som visar dig var olika funktioner finns och hur du anvnder dem.\r\n\r\n## Vad r guidade rundturer?\r\n\r\nGuidade rundturer r interaktiva vgledningar som:\r\n- Visar dig var olika funktioner finns i systemet\r\n- Frklarar hur du anvnder specifika funktioner\r\n- Ger dig praktisk vgledning steg fr steg\r\n- Hjlper dig att bli bekant med systemet\r\n\r\n## Komma igng med rundturer\r\n\r\n### Hitta tillgngliga rundturer\r\n\r\n1. **Frn nyhetsmeddelanden**: Klicka p "Starta guidad rundtur" i relevanta nyhetsmeddelanden\r\n2. **Frn hjlpsystemet**: Anvnd hjlpsystemet fr att hitta rundturer\r\n3. **Frn anvndarmenyn**: Vissa rundturer kan vara tillgngliga frn anvndarmenyn\r\n\r\n### Starta en rundtur\r\n\r\n1. **Vlj rundtur**: Klicka p den rundtur du vill starta\r\n2. **Bekrfta start**: Klicka p "Starta" fr att brja rundturen\r\n3. **Flj instruktionerna**: Ls varje steg och flj instruktionerna\r\n\r\n## Navigera genom rundturer\r\n\r\n### Rundturskontroller\r\n\r\n- **Fregende**: G tillbaka till fregende steg\r\n- **Nsta**: G vidare till nsta steg\r\n- **Hoppa ver**: Hoppa ver det aktuella steget\r\n- **Avsluta**: Avsluta rundturen helt\r\n\r\n### Stegtyper\r\n\r\nRundturer kan innehlla olika typer av steg:\r\n\r\n#### Navigera\r\n- Systemet flyttar dig till en specifik sida\r\n- Anvnds fr att visa olika delar av systemet\r\n\r\n#### Klicka\r\n- Ett element markeras som du ska klicka p\r\n- Flj instruktionerna fr att klicka p det markerade elementet\r\n\r\n#### Rulla\r\n- Du fr instruktioner att scrolla p sidan\r\n- Anvnds fr att visa innehll som inte r synligt\r\n\r\n#### Vnta\r\n- Rundturen pausas i en bestmd tid\r\n- Anvnd tiden fr att lsa informationen\r\n\r\n#### Markera\r\n- Ett element hjdpunktas utan att krva klick\r\n- Anvnds fr att uppmrksamma viktiga element\r\n\r\n## Avsluta och teruppta rundturer\r\n\r\n### Avsluta en rundtur\r\n\r\n- **Tidigt avslut**: Klicka p "Avsluta" fr att stoppa rundturen\r\n- **Slutfra**: Flj alla steg fr att slutfra rundturen\r\n- **Automatiskt avslut**: Vissa rundturer avslutas automatiskt\r\n\r\n### teruppta en rundtur\r\n\r\n- **Frn brjan**: Starta om rundturen frn brjan\r\n- **Frn senaste steg**: Vissa rundturer kan terupptas frn senaste steg\r\n- **Frn nyhetsmeddelanden**: Klicka p lnken i nyhetsmeddelandet\r\n\r\n## Felskning\r\n\r\n### Vanliga problem\r\n\r\n**Rundturen startar inte**\r\n- Kontrollera att du har rtt behrigheter\r\n- Uppdatera sidan och frsk igen\r\n- Kontakta administratren om problemet kvarstr\r\n\r\n**Steg visas inte korrekt**\r\n- Kontrollera att du r p rtt sida\r\n- Uppdatera sidan och frsk igen\r\n- Kontrollera att elementet r synligt\r\n\r\n**Rundturen hoppar ver steg**\r\n- Detta kan vara normalt om elementet inte finns p sidan\r\n- Kontrollera att du fljer instruktionerna korrekt\r\n- Kontakta administratren om mnga steg hoppas ver\r\n\r\n### Tips fr bsta upplevelse\r\n\r\n1. **Flj instruktionerna**: Ls varje steg noggrant\r\n2. **Ta din tid**: Du kan pausa och teruppta rundturer\r\n3. **Frga om hjlp**: Anvnd hjlpsystemet om du behver mer information\r\n4. **Testa funktionerna**: Prova att anvnda funktionerna efter rundturen\r\n\r\n## Integration med andra funktioner\r\n\r\n### Nyhetsmeddelanden\r\n\r\n- **Direktlnkning**: Klicka p "Starta guidad rundtur" i nyhetsmeddelanden\r\n- **Kontextuell vgledning**: F vgledning direkt relaterad till nyheten\r\n- **Smidig vergng**: G frn information till praktisk vgledning\r\n\r\n### Hjlpsystem\r\n\r\n- **Kontextuell hjlp**: F hjlp relaterad till vad du gr\r\n- **AI-assistent**: Stll frgor om rundturer eller funktioner\r\n- **Skfunktion**: Hitta specifika rundturer eller hjlp\r\n\r\n### Anvndarupplevelse\r\n\r\n- **Personlig vgledning**: Rundturer anpassas efter din roll och behov\r\n- **Interaktiv lrande**: Lr dig genom att gra, inte bara lsa\r\n- **Praktisk tillmpning**: Anvnd funktionerna direkt efter rundturen\r\n',fb='# Nyhetsmeddelanden\r\n\r\nNyhetsmeddelanden informerar dig om nya funktioner, systemuppdateringar och viktiga meddelanden i systemet.\r\n\r\n## Vad r nyhetsmeddelanden?\r\n\r\nNyhetsmeddelanden r meddelanden som:\r\n- Informerar dig om nya funktioner\r\n- Annonserar systemuppdateringar\r\n- Hjdpunkter frbttringar\r\n- Ger viktiga systemmeddelanden\r\n\r\n## Visa nyhetsmeddelanden\r\n\r\n### Hitta meddelanden\r\n\r\n1. **Huvudmeny**: Nyhetsmeddelanden visas i huvudmenyn\r\n2. **Hjlpsystem**: Anvnd hjlpsystemet fr att hitta meddelanden\r\n3. **Direktlnkar**: Klicka p lnkar i e-post eller andra meddelanden\r\n\r\n### Ls meddelanden\r\n\r\n1. **Klicka p meddelandet**: Klicka p meddelandet fr att lsa det\r\n2. **Ls innehllet**: Ls titel och beskrivning noggrant\r\n3. **Flj instruktioner**: Flj eventuella instruktioner i meddelandet\r\n\r\n## Interagera med meddelanden\r\n\r\n### Markera som lst\r\n\r\n- **Automatiskt**: Meddelandet markeras som lst nr du klickar p det\r\n- **Manuellt**: Vissa meddelanden kan markeras som lsta manuellt\r\n- **Statusuppdatering**: "Nytt" indikatorn frsvinner nr du lst meddelandet\r\n\r\n### Starta guidade rundturer\r\n\r\n- **Direktlnkning**: Klicka p "Starta guidad rundtur" fr att starta en relaterad rundtur\r\n- **Kontextuell vgledning**: F praktisk vgledning relaterad till nyheten\r\n- **Smidig vergng**: G frn information till praktisk vgledning\r\n\r\n## Meddelandetyper\r\n\r\n### Funktioner\r\n\r\n- **Nya funktioner**: Information om helt nya funktioner\r\n- **Funktionsuppdateringar**: Uppdateringar av befintliga funktioner\r\n- **Funktionsfrbttringar**: Frbttringar av befintliga funktioner\r\n\r\n### Frbttringar\r\n\r\n- **Anvndarupplevelse**: Frbttringar av anvndarupplevelsen\r\n- **Prestanda**: Prestandafrbttringar\r\n- **Skerhet**: Skerhetsfrbttringar\r\n\r\n### Meddelanden\r\n\r\n- **Systemuppdateringar**: Information om systemuppdateringar\r\n- **Underhll**: Meddelanden om planerat underhll\r\n- **Viktiga meddelanden**: Kritiska systemmeddelanden\r\n\r\n## Prioritering och synlighet\r\n\r\n### Prioritetsniver\r\n\r\n- **Hg prioritet**: Viktiga meddelanden som krver din uppmrksamhet\r\n- **Medium prioritet**: Viktiga men inte kritiska meddelanden\r\n- **Lg prioritet**: Mindre viktiga meddelanden\r\n\r\n### Visuella indikatorer\r\n\r\n- **"Nytt" indikator**: Visas fr meddelanden du inte har lst\r\n- **Prioritetsfrger**: Olika frger fr olika prioritetsniver\r\n- **Ikoner**: Ikoner som indikerar meddelandetyp\r\n\r\n## Hantera meddelanden\r\n\r\n### Sortera meddelanden\r\n\r\n- **Datum**: Sortera efter publiceringsdatum\r\n- **Prioritet**: Sortera efter prioritetsniv\r\n- **Kategori**: Sortera efter meddelandetyp\r\n- **Lsstatus**: Sortera efter lst/olst status\r\n\r\n### Filtrera meddelanden\r\n\r\n- **Alla meddelanden**: Visa alla meddelanden\r\n- **Olsta**: Visa endast olsta meddelanden\r\n- **Lsta**: Visa endast lsta meddelanden\r\n- **Kategori**: Filtrera efter specifik kategori\r\n\r\n### Sk meddelanden\r\n\r\n- **Sktext**: Anvnd skfltet fr att hitta specifika meddelanden\r\n- **Nyckelord**: Sk efter nyckelord i titel eller beskrivning\r\n- **Datumintervall**: Sk efter meddelanden inom ett specifikt datumintervall\r\n\r\n## Utgngsdatum\r\n\r\n### Automatisk rensning\r\n\r\n- **Utgngna meddelanden**: Meddelanden med utgngsdatum frsvinner automatiskt\r\n- **Permanenta meddelanden**: Meddelanden utan utgngsdatum visas tills de tas bort manuellt\r\n- **Notifikationer**: Du fr notifikationer om meddelanden som snart gr ut\r\n\r\n### Hantera utgngsdatum\r\n\r\n- **Kontrollera datum**: Kontrollera utgngsdatum fr viktiga meddelanden\r\n- **Spara information**: Spara viktig information innan meddelandet gr ut\r\n- **Kontakta support**: Kontakta support om du behver tillgng till utgngna meddelanden\r\n\r\n## Felskning\r\n\r\n### Vanliga problem\r\n\r\n**Meddelandet visas inte**\r\n- Kontrollera att du har rtt behrigheter\r\n- Uppdatera sidan och frsk igen\r\n- Kontrollera att meddelandet inte har gtt ut\r\n\r\n**"Nytt" indikator frsvinner inte**\r\n- Kontrollera att du har klickat p meddelandet\r\n- Uppdatera sidan och frsk igen\r\n- Kontrollera webblsarens cache\r\n\r\n**Rundtur startar inte**\r\n- Kontrollera att rundturen fortfarande existerar\r\n- Kontrollera att du har tillgng till rundturen\r\n- Kontakta administratren om problemet kvarstr\r\n\r\n### Tips fr bsta upplevelse\r\n\r\n1. **Ls regelbundet**: Kontrollera nyhetsmeddelanden regelbundet\r\n2. **Flj instruktioner**: Flj instruktioner i meddelanden\r\n3. **Starta rundturer**: Anvnd guidade rundturer fr att lra dig nya funktioner\r\n4. **Spara viktig information**: Spara viktig information frn meddelanden\r\n\r\n## Integration med andra funktioner\r\n\r\n### Guidade rundturer\r\n\r\n- **Direktlnkning**: Starta rundturer direkt frn meddelanden\r\n- **Kontextuell vgledning**: F vgledning relaterad till nyheten\r\n- **Praktisk tillmpning**: Anvnd funktionerna direkt efter rundturen\r\n\r\n### Hjlpsystem\r\n\r\n- **Kontextuell hjlp**: F hjlp relaterad till meddelandet\r\n- **AI-assistent**: Stll frgor om meddelanden eller funktioner\r\n- **Skfunktion**: Hitta specifika meddelanden eller hjlp\r\n\r\n### Anvndarupplevelse\r\n\r\n- **Personlig information**: Meddelanden anpassas efter din roll och behov\r\n- **Interaktiv lrande**: Lr dig genom att interagera med meddelanden\r\n- **Praktisk tillmpning**: Anvnd funktionerna direkt efter att ha lst meddelandet\r\n',vb='# Anmlan\r\n\r\n## versikt\r\n\r\nAnml dig enkelt fr trningar som intresserar dig. Detta r det frsta steget - att anmla sig r gratis och gr att du kan delta nr det r dags.\r\n\r\n## Hur det funkar\r\n\r\n### Vad r en registrering?\r\nEn anmlan innebr att du visar intresse fr att vara med. Det r som att "reservera en plats" - du visar intresse men frbinder dig inte att faktiskt delta.\r\n\r\n## Anml dig fr trningar\r\n\r\n### S hr gr du\r\n1. G till **{{navPublic}}**\r\n2. Blddra bland trningarna i listan\r\n3. Ls beskrivningen av varje trning\r\n4. Klicka p **{{subSubscribeBtn}}** bredvid den trning du vill delta i\r\n5. Bekrfta din registrering\r\n\r\n### Vad du ser fr varje trning\r\n- **Titel och beskrivning**: Vad trningen handlar om\r\n- **Datum och tid**: Nr trningen ger rum\r\n- **Plats**: Var trningen hlls\r\n- **Tillgngliga platser**: Hur mnga personer som kan delta\r\n- **Registreringsstatus**: Om du redan r anmld eller inte\r\n\r\n## Hantera dina registreringar\r\n\r\n### Visa dina prenumerationer\r\n- **{{navPublic}}**: Visar alla trningar som du r anmld fr\r\n- **{{navAttendance}}**: Visar registreringsstatus fr varje trning\r\n- **versikt**: Du kan tydligt se vilka trningar du planerar att delta i\r\n\r\n### Avanml dig frn trningar\r\nProcessen fr att avboka r enkel och kan gras av vilken anvndare som helst p plattformen, inklusive administratrer.\r\n\r\n**Hur man avbokar en anvndare:**\r\n1. G till **{{navPublic}}**.\r\n2. Hitta den trning du vill hantera.\r\n3. I listan **{{subSubscribedUsers}}**, leta reda p den anvndare du vill ta bort.\r\n4. Klicka p **papperskorgsikonen** bredvid anvndarens namn. En tooltip med texten "{{unsubscribeTooltip}}" kommer att visas nr du fr muspekaren ver.\r\n\r\nAnvndaren tas omedelbart bort frn prenumerationslistan. Denna tgrd pverkar inte saldot fr klippkort och platsen blir tillgnglig fr andra anvndare.\r\n\r\n### Vad hnder nr du avanmler dig?\r\n- Du kommer att tas bort frn deltagarlistan\r\n- Saldot p din voucher kommer inte att pverkas\r\n- Du kan avanmla dig om du vill\r\n- Platsen blir tillgnglig fr andra\r\n\r\n## Regler som vi vill att du ska knna till\r\n\r\n### Registrering vs incheckning\r\n- **Registrering r gratis**: Du kan anmla dig till s mnga trningar du vill\r\n- **Incheckning kostar**: Klippkort dras endast nr du markerar incheckning\r\n- **Ingen skyldighet**: Registrering innebr inte att du mste delta\r\n\r\n### Tidsramar\r\n- **Anml i frvg**: Anml dig s snart du vet att du r intresserad\r\n- **Avboka i tid**: Avboka din anmlan om du vet att du inte kan delta\r\n- **Ingen tidsbegrnsning**: Du kan dra dig ur nr som helst\r\n\r\n## Tips fr smart registreringshantering\r\n\r\n### Planera dina trningspass\r\n1. **Anml dig till intressanta trningar**: Anml dig till trningar som verkar intressanta\r\n2. **Hll ett ga p ditt schema**: Se till att dina trningspass inte krockar med andra aktiviteter\r\n3. **Var realistisk**: Anml dig inte till fler trningspass n du klarar av\r\n\r\n### Hantera frndringar\r\n1. **Avboka i tid**: Om du vet att du inte kan delta, avboka s snart som mjligt\r\n2. **Kommunicera**: Informera utbildaren om du inte kan delta\r\n3. **Omplanera**: Anvnd din tid till andra trningar istllet\r\n\r\n### Organisera dina registreringar\r\n1. **Prioritera**: Fokusera p de trningar som r viktigast fr dig\r\n2. **Balans**: Blanda olika typer av trningar\r\n3. **Uppdatera regelbundet**: Se ver dina registreringar regelbundet\r\n\r\n## Ofta stllda frgor och svar\r\n\r\n**Kan jag anmla mig till flera trningar samtidigt?\r\nJa, du kan anmla dig till s mnga trningar som du vill.\r\n\r\n**Vad hnder om jag anmler mig till en trning som r fulltecknad?\r\nDu kommer att f ett meddelande om att trningen r full och du kommer inte att kunna anmla dig.\r\n\r\n**Kan jag anmla mig till trningar som redan har startat?\r\nNej, du kan bara anmla dig fr framtida trningar.\r\n\r\n** Mste jag anmla mig fr att kunna delta i en trning?\r\nJa, du mste anmla dig frst och sedan markera incheckning nr det r dags.\r\n\r\n**Vad hnder om jag glmmer att avanmla mig?\r\nInget allvarligt - du kan fortfarande avanmla dig senare och inga trningar kommer att konsumeras frrn du har markerats som incheckad.\r\n\r\n**Kan jag se vem som r anmld fr en trning?\r\nDet beror p plattformsinstllningarna - frga administratren om detta.\r\n\r\n## Felskning\r\n\r\n**Kan inte anmla mig**\r\n- Kontrollera att trningen inte r fulltecknad\r\n- Kontrollera att trningen inte redan har startat\r\n- Uppdatera sidan och frsk igen\r\n\r\n**Registreringen visas inte**\r\n- Uppdatera sidan fr att se de senaste ndringarna\r\n- Kontakta administratren om problemet kvarstr\r\n',bb="# Trningskortet- Din biljett till trningstillfllena\r\n\r\n## Vad r ett trningskort?\r\n\r\nTnk p trningskort som biljetter till trningstillfllen - enkelt och tydligt. Varje trningsstillflle kostar ett kort. Det gr det enkelt att hlla reda p vem som kommer till vad och ger dig kontroll ver trningsanvndningen.\r\n\r\n## S hr fungerar det\r\n\r\n### Nr du brjar\r\nSom ny anvndare brjar du med 0 stmpelkort. Detta r helt normalt! Du kommer att f kort frn en administratr innan du kan delta i trningar.\r\n\r\n### Registrering kontra incheckning\r\n- **Registrera dig gratis**: Registrera dig fr s mnga trningar du vill - inget kort anvnds\r\n- **Incheckning kostar**: Ett kort dras endast nr du faktiskt markerar incheckning\r\n\r\n## Viktiga regler\r\n\r\n### Du behver ett kort fr att delta\r\n- Utan kort kan du inte markera incheckning\r\n- Kontrollera alltid ditt saldo innan du markerar incheckning\r\n- Behver du fler kort? Kontakta en administratr\r\n\r\n### Saldot kan inte bli negativt\r\n- Plattformen hindrar saldot frn att g under 0\r\n- Du kan inte markera att du r nrvarande utan minst ett kort\r\n\r\n### Administratrer hanterar kort\r\n- Endast administratrer kan lgga till eller ta bort kort\r\n- Be om fler kort nr du behver dem\r\n- Coacherna ser alla anvndares saldon\r\n\r\n## Tips fr att anvnda kort p ett smart stt\r\n\r\n1. **Planera i frvg**: Anml dig till trning tidigt, men markera incheckning frst nr du r sker p att\r\n2. **Hll koll**: Kontrollera ditt saldo regelbundet\r\n3. **Avboka i tid**: Kan du inte komma? Avboka din incheckning s snart som mjligt\r\n4. **Begra mer**: Kontakta coacherna innan det tar slut, inte efter\r\n\r\n## FAQ\r\n\r\n**Kan jag anvnda ngon annans trningskort?\r\nNej, korten  r personliga och kan inte delas.\r\n\r\n**Vad hnder om jag markerar incheckning av misstag?\r\nAvboka incheckningn omedelbart s fr du tillbaka kortet.\r\n\r\n**Om jag missar ett trningstillflle, fr jag tillbaka mitt kort?\r\nBara om du har markerat incheckning och sedan avbrutit den. Har du aldrig markerat incheckning? D kommer inget kort att anvndas.\r\n",yb="# Vlkommen till din nya vrld - trningsvrlden!\nHr gr vi det enkelt! En galet enkel och smidig lsning fr att organisera trningar - s att du kan fokusera p det som verkligen betyder ngot.\n## Vad fr du ut av det?\n### Som deltagare:\n- **Ltt att g med**: Registrera dig fr trningar p ngra sekunder\n- **Klippkort som fungerar**: Anvnd dina kort fr att delta i trningar\n- **Markera incheckning enkelt**: Klicka och klart - inget krngel\n- **Allt p ett stlle**: Se dina registreringar och incheckning direkt\n### Som administratr:\n- **Hantera anvndare enkelt**: Skapa och uppdatera konton med ltthet\n- **Organisera trningar p ett smidigt stt**: Skapa, redigera och planera aktiviteter\n- **Utdela stmpelkort**: Hantera kort fr alla anvndare\n- **Flj vad som hnder**: Visa statistik och rapporter\n## S hr fungerar det\nDet r enkelt! Vi har tre saker som vi tittar p:\n1. **Anvndare** - Deltagare som vill g med i trningar\n2. **Trningar** - Kurser och aktiviteter som anvndare kan delta i\n3. **Klippkort** - Det som anvnds fr att delta i trningar\n\n## Visuell design och anvndarupplevelse\nPlattformen har en modern, minimalistisk design med fokus p anvndarvnlighet:\n- **Bl frgschema**: Konsekvent anvndning av bl frger fr att indikera ppenhet och tillgnglighet\n- **Responsiv design**: Fungerar lika bra p mobil som p dator\n- **Tydlig navigation**: Enkla att hitta funktioner och sidor\n## Teknisk bas\n- ** Fungerar verallt**: ppnas i alla webblsare\n- **Uppdateras omedelbart**: ndringar syns omedelbart utan omladdning\n- **Skert**: All information lagras p ett skert stt\n- **Vxer med dig**: Fungerar lika bra fr sm som fr stora grupper\n## Kom igng\nUtforska hjlpavsnitten fr att lra dig hur du anvnder plattformen p bsta stt. Varje avsnitt innehller tydliga instruktioner och tips som hjlper dig att f ut mesta mjliga av din tid.\n",xb='# Felskning - Ls vanliga problem\r\n\r\n## versikt\r\n\r\nHr hittar du hjlp med att lsa vanliga problem som kan uppst nr du anvnder plattformen. De flesta problem kan lsas enkelt genom att flja stegen nedan.\r\n\r\n## Vanliga problem och lsningar\r\n\r\n### "Kan inte markera incheckning"\r\n\r\n**Symtom:** Knappen "Markera incheckning" fungerar inte eller r grtonad.\r\n\r\n**Mjliga orsaker:**\r\n- Du har inte tillrckligt med hlkort\r\n- Du r inte registrerad fr trningen\r\n- Du har redan markerat incheckning fr den hr trningen\r\n- Plattformen hller fortfarande p att laddas\r\n\r\n**Hr r hur du lser det:**\r\n1. **Kontrollera saldot p din voucher**\r\n   - G till administratrsvyn eller kolla din profil\r\n   - Du behver minst 1 stmpelkort fr att markera incheckning\r\n\r\n2. **Kontrollera din registrering**\r\n   - G till registreringssidan\r\n   - Se till att du r registrerad fr trningen\r\n   - Registrera dig frst om du inte r det\r\n\r\n3. **Kontrollera din tidigare incheckning**\r\n   - G till vyn Incheckning\r\n   - Se om du redan har markerat incheckning fr den hr kursen\r\n   - Avbryt tidigare incheckning om du vill markera igen\r\n\r\n4. **Uppdatera sidan\r\n   - Tryck p F5 eller klicka p uppdateringsknappen\r\n   - Vnta ngra sekunder och frsk igen\r\n\r\n### "vningen visas inte i listan"\r\n\r\n**Symtom:** En vning som du frvntade dig att se finns inte i listan.\r\n\r\n**Mjliga orsaker:**\r\n- vningen har tagits bort av administratren\r\n- vningen har flyttats eller bytt namn\r\n- Plattformen hller fortfarande p att laddas\r\n- Problem med ntverket\r\n\r\n**S hr lser du det:**\r\n1. **Aktualisera sidan**\r\n   - Tryck p F5 eller klicka p uppdateringsknappen\r\n   - Vnta ngra sekunder\r\n\r\n2. **Kontrollera ntverksanslutningen**\r\n   - Kontrollera att du har en internetanslutning\r\n   - Frsk att ladda om sidan\r\n\r\n3. **Kolla med administratren\r\n   - Frga administratren om trningen fortfarande r tillgnglig\r\n   - Be dem kontrollera om den har tagits bort eller flyttats\r\n\r\n### "Saldot i klippbordet r inte uppdaterat"\r\n\r\n**Symtom:** Saldot visar fel vrde eller uppdateras inte efter en tgrd.\r\n\r\n**Mjliga orsaker:**\r\n- Frdrjning i ntverket\r\n- Problem med webblsarens cache\r\n- Fel p plattformen\r\n- Synkroniseringsproblem\r\n\r\n**S hr lser du det:**\r\n1. **Vnta och uppdatera**\r\n   - Vnta 10-15 sekunder\r\n   - Uppdatera sidan (F5)\r\n   - Klicka p uppdateringsknappen i hjlpsystemet\r\n\r\n2. **Rensa webblsarens cache**\r\n   - Tryck p Ctrl+F5 (eller Cmd+Shift+R p Mac)\r\n   - Detta kommer att tvinga webblsaren att ladda om allt\r\n\r\n3. **Testa en annan webblsare**\r\n   - ppna plattformen i en annan webblsare\r\n   - Kontrollera om problemet kvarstr\r\n\r\n4. **Kontrollera med administratren\r\n   - Be administratren att kontrollera ditt saldo\r\n   - De kan se det faktiska vrdet i plattformen\r\n\r\n### "Det gr inte att registrera sig fr utbildning"\r\n\r\n**Symtom:** Knappen "Registrera" fungerar inte eller ger ett felmeddelande.\r\n\r\n**Mjliga orsaker:**\r\n- Utbildningen r fulltecknad\r\n- Utbildningen har redan startat\r\n- Du r redan registrerad\r\n- Fel p plattformen\r\n\r\n**S hr tgrdar du det:**\r\n1. **Kontrollera statusen fr utbildningen\r\n   - Se om utbildningen r fulltecknad\r\n   - Kontrollera datum och tid\r\n   - Se om du redan r anmld\r\n\r\n2. **Uppdatera och frsk igen\r\n   - Uppdatera sidan\r\n   - Vnta ngra sekunder\r\n   - Frsk igen\r\n\r\n3. **Kontakta administratren\r\n   - Be dem att kontrollera trningsinstllningarna\r\n   - De kan se om det finns tekniska problem\r\n\r\n### "Hjlpsystemet fungerar inte"\r\n\r\n**Symtom:** Hjlpknappen (?) fungerar inte eller innehllet laddas inte.\r\n\r\n**Mjliga orsaker:**\r\n- Problem med ntverket\r\n- Webblsarens cache\r\n- JavaScript-fel\r\n\r\n**Hur man tgrdar det\r\n1. **Uppdatera sidan\r\n   - Tryck p F5-tangenten\r\n   - Vnta tills sidan r fulladdad\r\n\r\n2. **Rensa cacheminnet**\r\n   - Tryck p Ctrl+F5\r\n   - Detta kommer att tvinga fram en omstart av alla resurser\r\n\r\n3. **Kontrollera JavaScript**\r\n   - Kontrollera att JavaScript r aktiverat i din webblsare\r\n   - Frsk att inaktivera och teraktivera JavaScript\r\n\r\n## Nr ska du kontakta administratren\r\n\r\n### Kontakta administratren om:\r\n- Du har fljt alla steg ovan men problemet kvarstr\r\n- Du fr felmeddelanden som du inte frstr\r\n- Plattformen fungerar helt annorlunda n frvntat\r\n- Du misstnker att det r ett plattformsfel\r\n\r\n### Vad du ska inkludera nr du kontaktar administratren:\r\n- **Din e-postadress**: s att de kan identifiera ditt konto\r\n- **Beskrivning av problemet**: Vad som hnder och vad du frvntar dig\r\n- **Steg du har provat**: Lista vad du redan har frskt\r\n- **Felmeddelanden**: Kopiera eventuella felmeddelanden\r\n- **Webblsare och enhet**: Vilken webblsare och enhet du anvnder\r\n\r\n## Frebyggande tgrder\r\n\r\n### Fr att undvika problem:\r\n1. **Aktualisera regelbundet**: Ladda om sidan nr du mrker att ngot verkar konstigt\r\n2. **Kontrollera saldot**: Kontrollera saldot p din voucher regelbundet\r\n3. **Registrera i tid**: Anml dig till trningar s snart du vet att du r intresserad\r\n4. **Markera incheckning nr du r sker**: Vnta med att markera incheckning tills du r sker p att du kan delta\r\n\r\n### Tekniska tips:\r\n- **Anvnd moderna webblsare**: Chrome, Firefox, Safari eller Edge\r\n- **Hll din webblsare uppdaterad**: Installera uppdateringar regelbundet\r\n- **Rensa din cache regelbundet**: Detta kan lsa mnga problem\r\n- **Kontrollera din internetanslutning**: Se till att du har en stabil anslutning\r\n\r\n## Snabbguide till vanliga tgrder\r\n\r\n### Uppdatera sidan\r\n- **Windows/Linux**: Tryck p F5\r\n- **Mac**: Tryck p Cmd+R\r\n- **Alternativt**: Klicka p uppdateringsknappen i webblsaren\r\n\r\n### Rensa cache\r\n- **Windows/Linux**: Tryck Ctrl+F5\r\n- **Mac**: Tryck p Cmd+Shift+R\r\n\r\n### Kontrollera JavaScript\r\n- **Chrome**: Instllningar  Avancerat  Sekretess och skerhet  Innehllsinstllningar  JavaScript\r\n- **Firefox**: Instllningar  Sekretess och skerhet  Behrigheter  JavaScript\r\n- **Safari**: Instllningar  Sekretess  Blockera alla cookies  Avmarkera\r\n\r\n### Kontrollera ntverksanslutningen\r\n- Frsk att ppna en annan webbsida\r\n- Kontrollera att du inte r offline\r\n- Frsk starta om routern om problemet kvarstr\r\n',kb={sections:[{id:"overview",title:{sv:"Systemversikt",en:"System Overview"},keywords:["overview","system","features","architecture"],category:"general"},{id:"vouchers",title:{sv:"Klippkortssystem",en:"Voucher System"},keywords:["voucher","credits","balance","cost","refund"],category:"general"},{id:"user-management",title:{sv:"Anvndarhantering (Admin)",en:"User Management (Admin)"},keywords:["create user","add user","manage vouchers","admin","user list","anvndare","anvndarhantering","skapa anvndare","redigera anvndare","klippkort","vouchers","anvndarlista","anvndarversikt","lgg till anvndare","uppdatera anvndare","creating a new user","editing user","users page","viewing users list"],category:"admin"},{id:"training-management",title:{sv:"Trningshantering (Admin)",en:"Training Management (Admin)"},keywords:["create training","edit training","admin training","training management","trningar","trningshantering","skapa trning","redigera trning","trningslista","trningsversikt","trningspass","lgg till trning","uppdatera trning","creating new training","editing training","trainings page","viewing trainings list","subscriber count","anmlda","antal anmlda","registered","card height","uniform cards","action buttons","bottom buttons"],category:"admin"},{id:"subscriptions",title:{sv:"Trningsanmlningar (Anvndare)",en:"Training Subscriptions (User)"},keywords:["subscribe","unsubscribe","subscription","public view","user subscription","subscription page","viewing subscriptions","anmlan","open page","public page","visual indicator","navigation","blue styling","minimalistic design"],category:"user"},{id:"attendance",title:{sv:"Incheckninghantering (Anvndare)",en:"Attendance Management (User)"},keywords:["mark attendance","cancel attendance","attendance view","voucher deduction","refund","attendance page","viewing attendance","incheckning","incheckninghantering"],category:"user"},{id:"troubleshooting",title:{sv:"Felskning",en:"Troubleshooting"},keywords:["error","problem","issue","cannot mark","not appearing","balance not updating"],category:"general"},{id:"tour-management",title:{sv:"Rundturshantering (Admin)",en:"Tour Management (Admin)"},keywords:["rundtur","guidad rundtur","tour","guida","steg","navigera","klicka","scrolla","vnta","markera","tour management","create tour","edit tour","tour steps","tour statistics","tour import","tour export","rundturshantering","skapa rundtur","redigera rundtur","rundturssteg","rundtursstatistik","importera rundtur","exportera rundtur","guided tour","step","navigate","click","scroll","wait","highlight","guide"],category:"admin"},{id:"shoutout-management",title:{sv:"Hantera nyheter (Admin)",en:"Shoutout Management (Admin)"},keywords:["nyheter","meddelanden","funktioner","frbttringar","utgngsdatum","markera som lst","nytt","news","announcements","features","improvements","expire date","mark as read","new","shoutout management","create shoutout","edit shoutout","news items","feature announcements","nyhetshantering","skapa nyhet","redigera nyhet","nyhetsmeddelanden","funktionsannonser"],category:"admin"},{id:"guided-tours",title:{sv:"Guidade rundturer (Anvndare)",en:"Guided Tours (User)"},keywords:["rundtur","guidad rundtur","tour","guida","steg","navigera","klicka","scrolla","vnta","markera","guided tour","step","navigate","click","scroll","wait","highlight","guide","interactive walkthrough","user guidance","step by step"],category:"user"},{id:"news-announcements",title:{sv:"Nyhetsmeddelanden (Anvndare)",en:"News Announcements (User)"},keywords:["nyheter","meddelanden","funktioner","frbttringar","utgngsdatum","markera som lst","nytt","news","announcements","features","improvements","expire date","mark as read","new","system updates","feature highlights","notifications"],category:"user"}]},wb={async loadStructureMap(){try{const e="/",t=await fetch(`${e}docs/structure-map.json?t=${Date.now()}`,{cache:"no-store",headers:{"Cache-Control":"no-store, no-cache, must-revalidate, max-age=0"}});if(t.ok){const e=await t.json();return console.log(" Structure map loaded from runtime fetch"),e}return console.warn(" Could not load structure map, falling back to auto-discovery"),null}catch(e){return console.warn(" Error loading structure map:",e),null}},async getAllSections(e="sv",t=!1){let n=[];try{for(const r of kb.sections){const a=await this.loadMarkdownContentFromGitHub(r.id,e,t),s=this.extractMarkdownTitle(a)||r.title[e]||r.id,i=r.keywords||[],o=this.deriveCategoryFromId(r.id)||r.category||"general",l=this.splitPathSegments(r.id);n.push({id:r.id,title:s,content:a,keywords:i,category:o,pathSegments:l})}}catch(r){throw console.error("Error loading help sections:",r),new Error(`Failed to load help sections: ${r instanceof Error?r.message:String(r)}`)}return n},async buildSectionsFromStructure(e,t,n){const r=[],a=n?.languages[t];if(a?.rootSections)for(const[s,i]of Object.entries(a.rootSections))if(e[s]){const t=e[s],n=this.extractMarkdownTitle(t)||i.title;r.push({id:s,title:n,content:t,keywords:[],category:"general",pathSegments:[s],description:i.description,order:i.order})}if(a?.folders)for(const[s,i]of Object.entries(a.folders))for(const[t,n]of Object.entries(i.sections)){const a=`${s}/${t}`;if(e[a]){const o=e[a],l=this.extractMarkdownTitle(o)||n.title,c=this.deriveCategoryFromId(s)||"general";r.push({id:a,title:l,content:o,keywords:n.keywords||[],category:c,pathSegments:[s,t],folderPath:s,description:n.description,order:n.order,icon:i.icon})}}for(const[s,i]of Object.entries(e)){if(!r.find(e=>e.id===s)){const e=this.extractMarkdownTitle(i)||s.split("/").pop()||s,t=this.deriveCategoryFromId(s)||"general",n=this.splitPathSegments(s);r.push({id:s,title:e,content:i,keywords:[],category:t,pathSegments:n})}}return r.sort((e,t)=>void 0!==e.order&&void 0!==t.order?e.order-t.order:void 0!==e.order?-1:void 0!==t.order?1:e.title.localeCompare(t.title))},async getSection(e,t="sv",n=!1){const r=await this.loadMarkdownContentFromGitHub(e,t,n),a=this.extractMarkdownTitle(r),s=kb.sections.find(t=>t.id===e),i=a||(s?s.title[t]:e),o=s?s.keywords:[],l=this.deriveCategoryFromId(e)||(s?s.category:"general"),c=this.splitPathSegments(e);return{id:e,title:i||e,content:r,keywords:o,category:l||"general",pathSegments:c}},extractMarkdownTitle(e){if(!e)return null;const t=e.split(/\r?\n/);for(const n of t){const e=n.trim();if(e&&e.startsWith("# "))return e.replace(/^#\s+/,"").trim()}return null},discoverDocs(e){try{const t="sv"===e?"sv":"en",n={...Object.assign({"/docs/CONTENT_GUIDELINES.md":Gv,"/docs/TONE_AND_VOICE_GUIDELINES.md":Yv,"/docs/WRITING_CHECKLIST.md":Jv,"/docs/en/Administrator/shoutout-management.md":Qv,"/docs/en/Administrator/tour-management.md":Xv,"/docs/en/Administrator/training-management.md":Zv,"/docs/en/Administrator/user-management.md":eb,"/docs/en/User/attendance.md":tb,"/docs/en/User/guided-tours.md":nb,"/docs/en/User/news-announcements.md":rb,"/docs/en/User/subscriptions.md":ab,"/docs/en/User/vouchers.md":sb,"/docs/en/overview.md":ib,"/docs/en/troubleshooting.md":ob,"/docs/index.md":lb,"/docs/stackedit-editor.md":cb,"/docs/sv/Administratr/shoutout-management.md":ub,"/docs/sv/Administratr/tour-management.md":db,"/docs/sv/Administratr/training-management.md":hb,"/docs/sv/Administratr/user-management.md":mb,"/docs/sv/Anvndare/attendance.md":gb,"/docs/sv/Anvndare/guided-tours.md":pb,"/docs/sv/Anvndare/news-announcements.md":fb,"/docs/sv/Anvndare/subscriptions.md":vb,"/docs/sv/Anvndare/vouchers.md":bb,"/docs/sv/overview.md":yb,"/docs/sv/troubleshooting.md":xb}),...Object.assign({"../docs/CONTENT_GUIDELINES.md":Gv,"../docs/TONE_AND_VOICE_GUIDELINES.md":Yv,"../docs/WRITING_CHECKLIST.md":Jv,"../docs/en/Administrator/shoutout-management.md":Qv,"../docs/en/Administrator/tour-management.md":Xv,"../docs/en/Administrator/training-management.md":Zv,"../docs/en/Administrator/user-management.md":eb,"../docs/en/User/attendance.md":tb,"../docs/en/User/guided-tours.md":nb,"../docs/en/User/news-announcements.md":rb,"../docs/en/User/subscriptions.md":ab,"../docs/en/User/vouchers.md":sb,"../docs/en/overview.md":ib,"../docs/en/troubleshooting.md":ob,"../docs/index.md":lb,"../docs/stackedit-editor.md":cb,"../docs/sv/Administratr/shoutout-management.md":ub,"../docs/sv/Administratr/tour-management.md":db,"../docs/sv/Administratr/training-management.md":hb,"../docs/sv/Administratr/user-management.md":mb,"../docs/sv/Anvndare/attendance.md":gb,"../docs/sv/Anvndare/guided-tours.md":pb,"../docs/sv/Anvndare/news-announcements.md":fb,"../docs/sv/Anvndare/subscriptions.md":vb,"../docs/sv/Anvndare/vouchers.md":bb,"../docs/sv/overview.md":yb,"../docs/sv/troubleshooting.md":xb})},r={};return Object.keys(n).forEach(e=>{const a=e.replace(/\\/g,"/"),s=`/docs/${t}/`;if(a.startsWith(s)){const t=a.substring(s.length);if(t.toLowerCase().endsWith(".md")){const a=t.substring(0,t.length-3),s=n[e];r[a]=s}}}),r}catch(ay){return console.warn("Doc discovery via import.meta.glob failed; falling back to static config.",ay),{}}},deriveCategoryFromId(e){if(!e)return"general";const t=e.replace(/^\/+|\/+$/g,""),n=t.indexOf("/");if(-1===n)return"general";return t.substring(0,n).trim()||"general"},splitPathSegments:e=>e?e.replace(/^\/+|\/+$/g,"").split("/").filter(Boolean):[],getActualFilePath(e,t){const n="sv"===t?"sv":"en",r={sv:{overview:"overview",troubleshooting:"troubleshooting",vouchers:"Anvndare/vouchers",subscriptions:"Anvndare/subscriptions",attendance:"Anvndare/attendance","guided-tours":"Anvndare/guided-tours","news-announcements":"Anvndare/news-announcements","user-management":"Administratr/user-management","training-management":"Administratr/training-management","tour-management":"Administratr/tour-management","shoutout-management":"Administratr/shoutout-management"},en:{overview:"overview",troubleshooting:"troubleshooting",vouchers:"User/vouchers",subscriptions:"User/subscriptions",attendance:"User/attendance","guided-tours":"User/guided-tours","news-announcements":"User/news-announcements","user-management":"Admin/user-management","training-management":"Admin/training-management","tour-management":"Admin/tour-management","shoutout-management":"Admin/shoutout-management"}}[n]?.[e];return r?`docs/${n}/${r}.md`:`docs/${n}/${e}.md`},async loadMarkdownContentFromGitHub(e,t,n=!1){try{const n="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname,a=`/api/help/content?section=${encodeURIComponent(e)}&lang=${encodeURIComponent(t)}&source=github`,s=`&_t=${Date.now()}&_r=${Math.random()}`,i=a+s;try{const e=await fetch(i,{cache:"no-store",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"}});if(e.ok){const t=await e.json();if(t.success&&t.content)return t.content}}catch(r){}const o=`/api/help/content?section=${encodeURIComponent(e)}&lang=${encodeURIComponent(t)}&source=local`+s,l=await fetch(o,{cache:"no-store",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"}});if(l.ok){const e=await l.json();if(e.success&&e.content)return e.content}if(404===l.status)return this.generateNotFoundContent(e,t);const c=await l.json().catch(()=>({error:l.statusText}));return this.generateErrorContent(e,t,c.error||l.statusText,n)}catch(a){console.error(` Error loading content for ${e} in ${t}:`,a);const n="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname;return this.generateErrorContent(e,t,a instanceof Error?a.message:String(a),n)}},generateErrorContent:(e,t,n,r)=>`# Content Loading Error\n\nThis help content could not be loaded.\n\n**Error:** ${n}\n\n**Possible causes:**\n- File doesn't exist in the repository yet\n- Network connectivity issues  \n- API server error\n${r?"- Local file not found in docs folder":"- GitHub API rate limiting or access issues"}\n\n**Solutions:**\n1. **${r?"Check local files":"Check repository"}**: Verify the file exists at \`docs/${"sv"===t?"sv":"en"}/${e}.md\`\n2. **Refresh**: Try refreshing the help system\n3. **Create content**: Use the help editor to create this section\n4. **Contact support**: If the issue persists\n\n**Debug Info:**\n- Section: ${e}\n- Language: ${t}\n- Time: ${(new Date).toISOString()}\n- Environment: ${r?"Local Development":"Production"}\n\n---\n*${r?"Loading from local docs folder via internal API.":"Loading from GitHub via internal API."}*`,generateNotFoundContent:(e,t)=>`# Help Content Not Found\n\nThis help section does not exist yet.\n\n**Section:** ${e}\n\n**What you can do:**\n1. **Create new content**: Use the "Edit" button to create this help section\n2. **Check spelling**: Verify the section ID is correct\n3. **Browse available topics**: Return to the help overview to see available sections\n\n**Debug Info:**\n- Section: ${e}\n- Language: ${t}\n- Time: ${(new Date).toISOString()}\n\n---\n*This section can be created using the help editor.*`,async loadMarkdownContentLocal(e,t,n=!1){try{const r=Date.now(),a=Math.random().toString(36).substr(2,15),s=Math.random().toString(36).substr(2,10),i=performance.now().toString().replace(".",""),o=Math.random().toString(36).substr(2,20),l=`?${[`t=${r}`,`v=${a}`,`_fresh=${Date.now()}`,`_session=${s}`,`_bust=${Math.random()}`,`_micro=${i}`,`_nano=${o}`,"_force="+(n?"1":"0"),`_r=${Math.floor(999999*Math.random())}`,`_ts=${(new Date).getTime()}`].join("&")}`,c="sv"===t?"sv":"en",u="/",d=`${u}docs/${c}/${e}.md${l}`;console.log(` Loading content from: ${d.substring(0,100)}...`);const h={"Cache-Control":"no-store, no-cache, must-revalidate, max-age=0, private, proxy-revalidate",Pragma:"no-cache",Expires:"0","If-Modified-Since":"0","If-None-Match":"*","X-Requested-With":"XMLHttpRequest","X-Cache-Buster":`${r}-${a}-${s}`,"X-Force-Refresh":n.toString(),"X-Timestamp":r.toString(),"X-Random":Math.random().toString()},m=await fetch(d,{cache:"no-store",method:"GET",headers:h});if(m.ok){const n=await m.text();return console.log(` Fresh content loaded for ${e} (${t}), length: ${n.length}`),n}console.warn(` Response ${m.status} for ${e}, trying fallbacks...`);const g=`${u}docs/${c}/${e}.md?_=${Date.now()}`;console.log(` Fallback 1: ${g}`);const p=await fetch(g,{cache:"no-store",method:"GET",headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});if(p.ok){const n=await p.text();return console.log(` Content loaded for ${e} (${t}) via fallback 1.`),n}const f=`${u}docs/${c}/${e}.md?v=${Math.random()}`;console.log(` Fallback 2: ${f}`);const v=await fetch(f,{cache:"no-store",method:"GET"});if(v.ok){const n=await v.text();return console.log(` Content loaded for ${e} (${t}) via fallback 2.`),n}const b=`${u}docs/${c}/${e}.md`;console.log(` Fallback 3: ${b}`);const y=await fetch(b,{cache:"no-store"});if(y.ok){const n=await y.text();return console.log(` Content loaded for ${e} (${t}) via fallback 3.`),n}throw new Error(`All fetch attempts failed. Last status: ${m.status} ${m.statusText}`)}catch(r){console.error(` Error loading content for ${e} in ${t}:`,r);return`# Content not available\n\nThis help content is currently not available.\n\n**Error:** ${r}\n\n**Possible causes:**\n- Documentation file not found\n- Network connectivity issues  \n- File path configuration error\n- Caching issues\n\n**Solutions:**\n1. **Check file exists**: Verify the file exists at \`docs/${"sv"===t?"sv":"en"}/${e}.md\`\n2. **Check connection**: Verify internet connectivity\n3. **Hard refresh**: Try Ctrl+F5 to bypass all caches\n4. **Wait and retry**: File changes may take a moment to propagate\n5. **Contact support**: If the issue persists\n\n**Debug Info:**\n- Section: ${e}\n- Language: ${t}\n- Time: ${(new Date).toISOString()}\n- Mode: Local Documentation\n- Force Refresh: ${n}\n\n---\n*Attempting to load fresh content...*`}},getConfig:()=>kb.sections,getAvailableSections:(e="sv")=>kb.sections.map(e=>e.id),async clearAllCaches(){if("caches"in window)try{const e=await caches.keys();await Promise.all(e.map(e=>caches.delete(e)))}catch(e){}try{void 0}catch(e){}},async verifyContentChange(e,t,n){try{const r=await this.loadMarkdownContentFromGitHub(e,t,!0);return{changed:r!==n,newContent:r,contentLength:r.length}}catch(r){return{changed:!1,newContent:n,contentLength:n.length}}},async forceReload(e="sv"){return this.getAllSections(e,!0)}};const Sb=new class{async getShoutouts(e="en"){try{const{data:t,error:n}=await vv.from("help_shoutouts").select("*").eq("is_active",!0).eq("language",e).order("release_date",{ascending:!1});if(n)return console.error("Error fetching shoutouts:",n),[];const r=(new Date).toISOString().split("T")[0];return t?.filter(e=>!e.expire_date||e.expire_date>=r)||[]}catch(t){return console.error("Error fetching shoutouts:",t),[]}}async createShoutout(e){try{const{data:t,error:n}=await vv.from("help_shoutouts").insert([e]).select().single();return n?(console.error("Error creating shoutout:",n),null):t}catch(t){return console.error("Error creating shoutout:",t),null}}async updateShoutout(e,t){try{const{data:n,error:r}=await vv.from("help_shoutouts").update({...t,updated_at:(new Date).toISOString()}).eq("id",e).select().single();return r?(console.error("Error updating shoutout:",r),null):n}catch(n){return console.error("Error updating shoutout:",n),null}}async deleteShoutout(e){try{const{error:t}=await vv.from("help_shoutouts").delete().eq("id",e);return!t||(console.error("Error deleting shoutout:",t),!1)}catch(t){return console.error("Error deleting shoutout:",t),!1}}async getTours(e){try{let t=vv.from("help_tours").select("*").eq("is_active",!0);e&&(t=t.or(`language.eq.${e},language.is.null`));const{data:n,error:r}=await t.order("name");return r?(console.error("Error fetching tours:",r),[]):n||[]}catch(t){return console.error("Error fetching tours:",t),[]}}async getTourSteps(e,t){try{let n=vv.from("help_tour_steps").select("*").eq("tour_id",e);t&&(n=n.or(`language.eq.${t},language.is.null`));const{data:r,error:a}=await n.order("step_order");return a?(console.error("Error fetching tour steps:",a),[]):r||[]}catch(n){return console.error("Error fetching tour steps:",n),[]}}async createTour(e){try{const{data:t,error:n}=await vv.from("help_tours").insert([e]).select().single();return n?(console.error("Error creating tour:",n),null):t}catch(t){return console.error("Error creating tour:",t),null}}async updateTour(e,t){try{const{data:n,error:r}=await vv.from("help_tours").update({...t,updated_at:(new Date).toISOString()}).eq("id",e).select().single();return r?(console.error("Error updating tour:",r),null):n}catch(n){return console.error("Error updating tour:",n),null}}async deleteTour(e){try{const{error:t}=await vv.from("help_tours").delete().eq("id",e);return!t||(console.error("Error deleting tour:",t),!1)}catch(t){return console.error("Error deleting tour:",t),!1}}async createTourStep(e){try{const{data:t,error:n}=await vv.from("help_tour_steps").insert([e]).select().single();return n?(console.error("Error creating tour step:",n),null):t}catch(t){return console.error("Error creating tour step:",t),null}}async updateTourStep(e,t){try{const{data:n,error:r}=await vv.from("help_tour_steps").update({...t,updated_at:(new Date).toISOString()}).eq("id",e).select().single();return r?(console.error("Error updating tour step:",r),null):n}catch(n){return console.error("Error updating tour step:",n),null}}async deleteTourStep(e){try{const{error:t}=await vv.from("help_tour_steps").delete().eq("id",e);return!t||(console.error("Error deleting tour step:",t),!1)}catch(t){return console.error("Error deleting tour step:",t),!1}}async deleteTourSteps(e){try{const{error:t}=await vv.from("help_tour_steps").delete().eq("tour_id",e);return!t||(console.error("Error deleting tour steps:",t),!1)}catch(t){return console.error("Error deleting tour steps:",t),!1}}async getHelpContent(e,t="en"){try{let n=vv.from("help_content").select("*").eq("is_active",!0).eq("language",t).order("title");e&&(n=n.eq("category",e));const{data:r,error:a}=await n;return a?(console.error("Error fetching help content:",a),[]):r||[]}catch(n){return console.error("Error fetching help content:",n),[]}}async recordInteraction(e){try{const{data:t,error:n}=await vv.from("help_user_interactions").insert([e]).select().single();return n?(console.error("Error recording interaction:",n),null):t}catch(t){return console.error("Error recording interaction:",t),null}}async getUserInteractions(e){try{const{data:t,error:n}=await vv.from("help_user_interactions").select("*").eq("user_id",e).order("created_at",{ascending:!1});return n?(console.error("Error fetching user interactions:",n),[]):t||[]}catch(t){return console.error("Error fetching user interactions:",t),[]}}},jb=z.createContext(void 0),Cb=()=>{const e=z.useContext(jb);if(void 0===e)throw new Error("useTour must be used within a TourProvider");return e},Nb=({children:e})=>{const{t:t}=Tv(),{user:n,isAdmin:r}=yv(),{currentLanguage:a}=Sv(),[s,i]=z.useState(null),[o,c]=z.useState(0),[u,d]=z.useState(!1),[h,m]=z.useState(new Set),[g,p]=z.useState(new Set),f=z.useCallback(()=>{document.body.style.opacity="",document.body.style.transition="",document.body.style.pointerEvents="",document.body.style.overflow=""},[]);z.useEffect(()=>{f()},[f]),z.useEffect(()=>{u||f()},[u,f]),z.useEffect(()=>{["tour-completed","tour-skipped"].forEach(e=>{try{const t=localStorage.getItem(e);t&&"[]"!==t&&"null"!==t&&JSON.parse(t)}catch(t){console.warn(`Clearing corrupted tour data for key: ${e}`,t),localStorage.removeItem(e)}});const e=localStorage.getItem("tour-completed"),t=localStorage.getItem("tour-skipped");if(e)try{const t=JSON.parse(e);Array.isArray(t)&&m(new Set(t))}catch(n){console.warn("Invalid tour-completed data in localStorage, clearing:",n),localStorage.removeItem("tour-completed")}if(t)try{const e=JSON.parse(t);Array.isArray(e)&&p(new Set(e))}catch(n){console.warn("Invalid tour-skipped data in localStorage, clearing:",n),localStorage.removeItem("tour-skipped")}},[]);const v=z.useCallback((e,t)=>{"completed"===t?m(t=>{const n=new Set(t);return n.add(e),localStorage.setItem("tour-completed",JSON.stringify([...n])),n}):p(t=>{const n=new Set(t);return n.add(e),localStorage.setItem("tour-skipped",JSON.stringify([...n])),n})},[]);z.useCallback(()=>[{id:"welcome-tour",name:t("tourWelcomeName"),description:t("tourWelcomeDescription"),category:"onboarding",requiredRole:"any",target_group:"public",estimatedDuration:3,steps:[{id:"welcome-1",title:t("tourWelcomeStep1Title"),content:t("tourWelcomeStep1Content"),target:"app-title",position:"bottom",action:"none",skipIfNotFound:!0},{id:"welcome-2",title:t("tourWelcomeStep2Title"),content:t("tourWelcomeStep2Content"),target:"subscription-cards",position:"top",action:"none",skipIfNotFound:!0}]},{id:"admin-tour",name:t("tourAdminName"),description:t("tourAdminDescription"),category:"admin",requiredRole:"admin",target_group:"admin",estimatedDuration:5,steps:[{id:"admin-1",title:t("tourAdminStep1Title"),content:t("tourAdminStep1Content"),target:"nav-trainings",position:"bottom",action:"navigate",actionTarget:"trainings",requiredView:"trainings",skipIfNotFound:!0},{id:"admin-2",title:t("tourAdminStep2Title"),content:t("tourAdminStep2Content"),target:"add-training-button",position:"bottom",action:"click",skipIfNotFound:!0},{id:"admin-3",title:t("tourAdminStep3Title"),content:t("tourAdminStep3Content"),target:"create-training-form",position:"top",action:"none",skipIfNotFound:!0,beforeStep:async()=>{const e=document.querySelector('[data-tour="add-training-button"]');e&&!document.querySelector('[data-tour="create-training-form"]')&&(e.click(),await new Promise(e=>setTimeout(e,300)))}},{id:"admin-4",title:t("tourAdminStep4Title"),content:t("tourAdminStep4Content"),target:"nav-users",position:"bottom",action:"navigate",actionTarget:"users",requiredView:"users",skipIfNotFound:!0},{id:"admin-5",title:t("tourAdminStep5Title"),content:t("tourAdminStep5Content"),target:"add-user-button",position:"bottom",action:"click",skipIfNotFound:!0},{id:"admin-6",title:t("tourAdminStep6Title"),content:t("tourAdminStep6Content"),target:"create-user-form",position:"top",action:"none",skipIfNotFound:!0,beforeStep:async()=>{const e=document.querySelector('[data-tour="add-user-button"]');e&&!document.querySelector('[data-tour="create-user-form"]')&&(e.click(),await new Promise(e=>setTimeout(e,300)))}},{id:"admin-7",title:t("tourAdminStep7Title"),content:t("tourAdminStep7Content"),target:"voucher-management",position:"top",action:"none",skipIfNotFound:!0}]},{id:"attendance-tour",name:t("tourAttendanceName"),description:t("tourAttendanceDescription"),category:"feature",requiredRole:"any",estimatedDuration:4,steps:[{id:"attendance-1",title:t("tourAttendanceStep1Title"),content:t("tourAttendanceStep1Content"),target:"nav-attendance",position:"bottom",action:"navigate",actionTarget:"attendance",requiredView:"attendance",skipIfNotFound:!0,beforeStep:async()=>{document.querySelector('[data-tour="nav-attendance"]')}},{id:"attendance-2",title:t("tourAttendanceStep2Title"),content:t("tourAttendanceStep2Content"),target:"attendance-cards",position:"top",action:"none",skipIfNotFound:!0},{id:"attendance-3",title:t("tourAttendanceStep3Title"),content:t("tourAttendanceStep3Content"),target:"kiosk-mode",position:"top",action:"none",skipIfNotFound:!0}]},{id:"cinematic-demo",name:t("tourCinematicName"),description:t("tourCinematicDescription"),category:"feature",requiredRole:"any",estimatedDuration:8,steps:[{id:"cinematic-1",title:t("tourCinematicStep1Title"),content:t("tourCinematicStep1Content"),target:"app-title",position:"bottom",action:"none",skipIfNotFound:!0},{id:"cinematic-2",title:t("tourCinematicStep2Title"),content:t("tourCinematicStep2Content"),target:"help-button",position:"left",action:"click",skipIfNotFound:!0},{id:"cinematic-3",title:t("tourCinematicStep3Title"),content:t("tourCinematicStep3Content"),target:"subscription-cards",position:"top",action:"none",skipIfNotFound:!0}]},{id:"help-tour",name:t("tourHelpName"),description:t("tourHelpDescription"),category:"feature",requiredRole:"any",target_group:"authenticated",estimatedDuration:6,steps:[{id:"help-1",title:t("tourHelpStep1Title"),content:t("tourHelpStep1Content"),target:"help-window",position:"center",action:"none",skipIfNotFound:!0,beforeStep:async()=>{if(!document.querySelector('[data-tour="help-window"]')){const e=document.querySelector('[data-tour="help-button"]');e?(e.click(),await new Promise(e=>setTimeout(e,500))):console.warn("Help button not found, cannot open help system")}}},{id:"help-2",title:t("tourHelpStep2Title"),content:t("tourHelpStep2Content"),target:"help-toc",position:"right",action:"none",skipIfNotFound:!0},{id:"help-3",title:t("tourHelpStep3Title"),content:t("tourHelpStep3Content"),target:"help-search",position:"bottom",action:"none",skipIfNotFound:!0},{id:"help-4",title:t("tourHelpStep4Title"),content:t("tourHelpStep4Content"),target:"help-ai-input",position:"top",action:"none",skipIfNotFound:!0},{id:"help-5",title:t("tourHelpStep5Title"),content:t("tourHelpStep5Content"),target:"help-ai-response",position:"top",action:"none",skipIfNotFound:!0},{id:"help-6",title:t("tourHelpStep6Title"),content:t("tourHelpStep6Content"),target:"help-context-info",position:"bottom",action:"none",skipIfNotFound:!0}]}],[t]);const b=z.useCallback(async()=>{try{const e=await Sb.getTours(a),t=[];for(const n of e){const e=await Sb.getTourSteps(n.id,a),r={id:n.id,name:n.name,description:n.description||"",category:n.category,requiredRole:n.required_role,target_group:n.target_group,estimatedDuration:n.estimated_duration,language:n.language,steps:e.map(e=>({id:e.id,title:e.title,content:e.content,target:e.target,position:e.position,action:e.action,actionTarget:e.action_target,actionData:e.action_data,waitTime:e.wait_time,requiredView:e.required_view,skipIfNotFound:e.skip_if_not_found}))};t.push(r)}return n?r?t:t.filter(e=>"public"===e.target_group||"authenticated"===e.target_group):t.filter(e=>"public"===e.target_group)}catch(e){return console.error("Error loading tours from database:",e),[]}},[n,r,a]),y=z.useCallback(async e=>{if(e.action&&"none"!==e.action)switch(e.action){case"click":if(e.actionTarget){const t=document.querySelector(`[data-tour="${e.actionTarget}"]`);t&&(t.style.transform="scale(0.95)",t.style.boxShadow="0 0 20px rgba(59, 130, 246, 0.5)",await new Promise(e=>setTimeout(e,100)),t.click(),await new Promise(e=>setTimeout(e,100)),t.style.transform="",t.style.boxShadow="")}break;case"navigate":if(e.actionTarget){document.body.style.opacity="0.7",document.body.style.transition="opacity 0.3s ease";const t=new CustomEvent("ai-action",{detail:{type:"navigate",payload:{view:e.actionTarget}}});window.dispatchEvent(t),await new Promise(e=>setTimeout(e,150)),document.body.style.opacity="1",setTimeout(()=>{document.body.style.transition=""},300)}break;case"wait":await new Promise(t=>setTimeout(t,Math.min(e.waitTime||1e3,1e3)));break;case"scroll":if(e.actionTarget){const t=document.querySelector(`[data-tour="${e.actionTarget}"]`);t&&(t.scrollIntoView({behavior:"smooth",block:"center"}),await new Promise(e=>setTimeout(e,200)))}break;case"open-help":const t=new CustomEvent("open-help-system");document.dispatchEvent(t),await new Promise(e=>setTimeout(e,500))}},[]),x=z.useCallback(async e=>{const t=(await b()).find(t=>t.id===e);t&&(document.body.style.opacity="0.8",document.body.style.transition="opacity 0.5s ease",i(t),c(0),d(!0),await new Promise(e=>setTimeout(e,500)),document.body.style.opacity="1")},[b]),k=z.useCallback(async()=>{if(!s)return;const e=s.steps[o];if(e){if(e.target&&(e.target.includes("help")||"help-window"===e.target||"help-button"===e.target)){if(!document.querySelector('[data-tour="help-window"]')){const e=new CustomEvent("open-help-system");document.dispatchEvent(e),await new Promise(e=>setTimeout(e,1e3))}if("help-button"!==e.target){let t=0;const n=10;for(;t<n;){if(document.querySelector(`[data-tour="${e.target}"]`))break;await new Promise(e=>setTimeout(e,200)),t++}}}await y(e)}o<s.steps.length-1?c(e=>e+1):S()},[s,o,y]),w=z.useCallback(()=>{o>0&&c(e=>e-1)},[o]),S=z.useCallback(()=>{s&&(v(s.id,"completed"),document.body.style.opacity="0.8",document.body.style.transition="opacity 0.5s ease",setTimeout(()=>{i(null),c(0),d(!1),document.body.style.opacity="1"},500))},[s,v]),j=z.useCallback(()=>{s&&(v(s.id,"skipped"),document.body.style.opacity="0.8",document.body.style.transition="opacity 0.5s ease",setTimeout(()=>{i(null),c(0),d(!1),document.body.style.opacity="1"},500))},[s,v]),C={currentTour:s,currentStepIndex:o,isActive:u,completedTours:Array.from(h),skippedTours:Array.from(g),startTour:x,nextStep:k,previousStep:w,completeTour:S,skipTour:j,getAvailableTours:b};return l.jsx(jb.Provider,{value:C,children:e})};const Tb=new class{constructor(){this.STORAGE_KEY="admin-tours",this.SHOUTOUT_STORAGE_KEY="admin-shoutouts",this.VERSION="1.0.0"}generateId(){return"id-"+Date.now()+"-"+Math.random().toString(36).substr(2,9)}getTours(){try{const e=localStorage.getItem(this.STORAGE_KEY);if(e){return JSON.parse(e).tours||[]}}catch(e){console.error("Error loading tours:",e)}return[]}getAllToursForManagement(e){const t=this.getTours(),n=new Map;return e.forEach(e=>{n.set(e.id,{...e,category:e.category||"onboarding"})}),t.forEach(e=>{n.set(e.id,e)}),Array.from(n.values())}isDefaultTour(e,t){return t.some(t=>t.id===e)}saveTours(e){try{const t={tours:e,lastModified:(new Date).toISOString(),version:this.VERSION};return localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t)),!0}catch(t){return console.error("Error saving tours:",t),!1}}getTourById(e){return this.getTours().find(t=>t.id===e)||null}createTour(e){const t=this.getTours(),n={...e,id:this.generateTourId(e.name)};return t.find(e=>e.id===n.id)&&(n.id=this.generateUniqueTourId(e.name,t)),t.push(n),this.saveTours(t)?n:null}updateTour(e,t){const n=this.getTours(),r=n.findIndex(t=>t.id===e);return-1===r?null:(n[r]={...n[r],...t},this.saveTours(n)?n[r]:null)}deleteTour(e){const t=this.getTours(),n=t.filter(t=>t.id!==e);return n.length!==t.length&&this.saveTours(n)}duplicateTour(e){const t=this.getTourById(e);if(!t)return null;const n={...t,id:this.generateUniqueTourId(`${t.name} (Copy)`,this.getTours()),name:`${t.name} (Copy)`,steps:t.steps.map(e=>({...e,id:this.generateStepId(e.title)}))},r=this.getTours();return r.push(n),this.saveTours(r)?n:null}reorderTours(e){const t=this.getTours(),n=[];return e.forEach(e=>{const r=t.find(t=>t.id===e);r&&n.push(r)}),t.forEach(t=>{e.includes(t.id)||n.push(t)}),this.saveTours(n)}exportTours(){return localStorage.getItem(this.STORAGE_KEY)||"[]"}importTours(e){try{const t=JSON.parse(e);if(t.tours&&Array.isArray(t.tours))return this.saveTours(t.tours)}catch(t){console.error("Error importing tours:",t)}return!1}resetToDefaults(){return this.saveTours([])}getTourStats(){const e=this.getTours(),t=e.length,n=e.reduce((e,t)=>e+t.steps.length,0);return{totalTours:t,totalSteps:n,toursByCategory:e.reduce((e,t)=>(e[t.category||"other"]=(e[t.category||"other"]||0)+1,e),{}),averageStepsPerTour:t>0?n/t:0}}generateTourId(e){return e.toLowerCase().replace(/[^a-z0-9\s]/g,"").replace(/\s+/g,"-").substring(0,50)}generateUniqueTourId(e,t){let n=this.generateTourId(e),r=1,a=n;for(;t.find(e=>e.id===a);)a=`${n}-${r}`,r++;return a}generateStepId(e){return e.toLowerCase().replace(/[^a-z0-9\s]/g,"").replace(/\s+/g,"-").substring(0,30)}validateTour(e){const t=[];return e.name&&0!==e.name.trim().length||t.push("Tour name is required"),e.description&&0!==e.description.trim().length||t.push("Tour description is required"),e.steps&&0!==e.steps.length||t.push("Tour must have at least one step"),e.steps&&e.steps.forEach((e,n)=>{e.title&&0!==e.title.trim().length||t.push(`Step ${n+1}: Title is required`),e.content&&0!==e.content.trim().length||t.push(`Step ${n+1}: Content is required`),e.target&&0!==e.target.trim().length||t.push(`Step ${n+1}: Target selector is required`)}),e.estimatedDuration&&e.estimatedDuration<1&&t.push("Estimated duration must be at least 1 minute"),{isValid:0===t.length,errors:t}}getShoutouts(){try{const e=localStorage.getItem(this.SHOUTOUT_STORAGE_KEY);if(e){return JSON.parse(e).shoutouts||[]}}catch(e){console.error("Error loading shoutouts:",e)}return[]}saveShoutouts(e){try{const t={shoutouts:e,lastModified:(new Date).toISOString(),version:this.VERSION};localStorage.setItem(this.SHOUTOUT_STORAGE_KEY,JSON.stringify(t))}catch(t){console.error("Error saving shoutouts:",t)}}createShoutout(e){const t=this.getShoutouts(),n={id:e.id||this.generateId(),title:e.title,description:e.description,image:e.image,icon:e.icon,tourId:e.tourId,category:e.category,priority:e.priority,releaseDate:e.releaseDate,expireDate:e.expireDate,isNew:e.isNew||!0};return t.push(n),this.saveShoutouts(t),n}updateShoutout(e,t){const n=this.getShoutouts(),r=n.findIndex(t=>t.id===e);if(-1===r)return null;const a={...n[r],title:t.title,description:t.description,image:t.image,icon:t.icon,tourId:t.tourId,category:t.category,priority:t.priority,releaseDate:t.releaseDate,expireDate:t.expireDate,isNew:t.isNew};return n[r]=a,this.saveShoutouts(n),a}deleteShoutout(e){const t=this.getShoutouts(),n=t.filter(t=>t.id!==e);return n.length!==t.length&&(this.saveShoutouts(n),!0)}duplicateShoutout(e){const t=this.getShoutouts(),n=t.find(t=>t.id===e);if(!n)return null;const r={...n,id:this.generateId(),title:`${n.title} (Copy)`,isNew:!0};return t.push(r),this.saveShoutouts(t),r}exportShoutouts(){const e={shoutouts:this.getShoutouts(),lastModified:(new Date).toISOString(),version:this.VERSION};return JSON.stringify(e,null,2)}importShoutouts(e){try{const t=JSON.parse(e);if(!t.shoutouts||!Array.isArray(t.shoutouts))return{success:!1,message:"Invalid shoutout data format",count:0};const n=this.validateShoutouts(t.shoutouts);return n.isValid?(this.saveShoutouts(t.shoutouts),{success:!0,message:"Shoutouts imported successfully",count:t.shoutouts.length}):{success:!1,message:`Validation failed: ${n.errors.join(", ")}`,count:0}}catch(t){return{success:!1,message:"Invalid JSON format",count:0}}}getShoutoutStats(){const e=this.getShoutouts(),t={},n={};return e.forEach(e=>{t[e.category]=(t[e.category]||0)+1,n[e.priority]=(n[e.priority]||0)+1}),{total:e.length,byCategory:t,byPriority:n}}validateShoutouts(e){const t=[];return Array.isArray(e)?(e.forEach((e,n)=>{e.id&&0!==e.id.trim().length||t.push(`Shoutout ${n+1}: ID is required`),e.title&&0!==e.title.trim().length||t.push(`Shoutout ${n+1}: Title is required`),e.description&&0!==e.description.trim().length||t.push(`Shoutout ${n+1}: Description is required`),e.category&&["feature","improvement","announcement","bugfix"].includes(e.category)||t.push(`Shoutout ${n+1}: Valid category is required`),e.priority&&["low","medium","high"].includes(e.priority)||t.push(`Shoutout ${n+1}: Valid priority is required`),e.releaseDate&&!isNaN(Date.parse(e.releaseDate))||t.push(`Shoutout ${n+1}: Valid release date is required`)}),{isValid:0===t.length,errors:t}):(t.push("Shoutouts must be an array"),{isValid:!1,errors:t})}};class Ab{static getInstance(){return Ab.instance||(Ab.instance=new Ab),Ab.instance}scanForElements(){const e=[];return["button","a[href]",'input[type="button"]','input[type="submit"]','input[type="reset"]','input[type="checkbox"]','input[type="radio"]',"select","textarea","nav","nav a","nav button",'[role="navigation"]','[role="menuitem"]','[role="tab"]','[role="button"]',"form","fieldset","legend","label",'input:not([type="hidden"])',"main","section","article","header","footer","aside","[data-tour]","[data-testid]","[data-cy]",".btn",".button",".nav-item",".menu-item",".tab",".card",".modal",".dropdown",".tooltip",".help-button",".help-icon","#help-button","#user-menu","#main-navigation","#sidebar","#content-area",".page-header",".page-content",".page-footer"].forEach(t=>{try{document.querySelectorAll(t).forEach(n=>{if(this.isElementSuitable(n)){const r=this.createElementInfo(n,t);r&&e.push(r)}})}catch(n){console.warn("Error scanning selector:",t,n)}}),this.deduplicateAndSort(e)}isElementSuitable(e){if(0===e.offsetWidth&&0===e.offsetHeight)return!1;const t=window.getComputedStyle(e);if("none"===t.display||"hidden"===t.visibility||"0"===t.opacity)return!1;if(e.offsetWidth<10||e.offsetHeight<10)return!1;const n=e.getBoundingClientRect();return!(n.top<-1e3||n.left<-1e3)}createElementInfo(e,t){try{const t=e.getBoundingClientRect(),n=this.getDisplayText(e);return{selector:this.generateSelector(e),tagName:e.tagName.toLowerCase(),id:e.id||void 0,className:e.className||void 0,text:n,textContent:n,type:e.type||void 0,href:e.href||void 0,title:e.title||void 0,"data-tour":e.getAttribute("data-tour")||void 0,"data-testid":e.getAttribute("data-testid")||void 0,"aria-label":e.getAttribute("aria-label")||void 0,"aria-labelledby":e.getAttribute("aria-labelledby")||void 0,visible:this.isElementVisible(e),position:{top:t.top,left:t.left,width:t.width,height:t.height}}}catch(n){return console.warn("Error creating element info:",n),null}}generateSelector(e){if(e.id)return`#${e.id}`;const t=e.getAttribute("data-tour");if(t)return`[data-tour="${t}"]`;const n=e.getAttribute("data-testid");if(n)return`[data-testid="${n}"]`;let r=e.tagName.toLowerCase();if(e.className){const t=e.className.split(" ").filter(e=>e.trim());if(t.length>0){const e=t.find(e=>!e.includes("hover:")&&!e.includes("focus:")&&!e.includes("active:")&&e.length>2);e&&(r+=`.${e}`)}}const a=e.parentElement;if(a){const t=Array.from(a.children).filter(t=>t.tagName===e.tagName);if(t.length>1){r+=`:nth-child(${t.indexOf(e)+1})`}}return r}getDisplayText(e){if(["button","a"].includes(e.tagName.toLowerCase()))return e.textContent?.trim().substring(0,50)||"";if("input"===e.tagName.toLowerCase()){const t=e;return t.placeholder||t.type||""}return e.title||e.getAttribute("aria-label")||e.textContent?.trim().substring(0,30)||""}isElementVisible(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=window.innerHeight&&t.right<=window.innerWidth}deduplicateAndSort(e){const t=e.filter((e,t,n)=>t===n.findIndex(t=>t.selector===e.selector));return t.sort((e,t)=>{if(e.id&&!t.id)return-1;if(!e.id&&t.id)return 1;if(e["data-tour"]&&!t["data-tour"])return-1;if(!e["data-tour"]&&t["data-tour"])return 1;const n=["button","a","input","select","textarea"],r=n.includes(e.tagName),a=n.includes(t.tagName);return r&&!a?-1:!r&&a?1:Math.abs(e.position.top-t.position.top)>10?e.position.top-t.position.top:e.position.left-t.position.left})}highlightElement(e){try{this.removeAllHighlights();const t=document.querySelector(e);t&&(t.classList.add("tour-highlight"),t.scrollIntoView({behavior:"smooth",block:"center"}))}catch(t){console.warn("Error highlighting element:",t)}}removeAllHighlights(){try{document.querySelectorAll(".tour-highlight").forEach(e=>{e.classList.remove("tour-highlight")})}catch(e){console.warn("Error removing highlights:",e)}}getElementInfo(e){try{const t=document.querySelector(e);if(t&&this.isElementSuitable(t))return this.createElementInfo(t,e)}catch(t){console.warn("Error getting element info:",t)}return null}}const Eb=Ab.getInstance(),_b=({isOpen:e,onClose:t,onSelect:n,currentSelector:r,tourContext:a})=>{const{t:s}=Tv(),[i,o]=z.useState(!1),[c,u]=z.useState([]),[d,h]=z.useState(null),m=z.useCallback(async()=>{o(!0);try{const e=Eb.scanForElements();u(e),console.log(" Found",e.length,"elements on current page")}catch(e){console.error("Error scanning page:",e)}finally{o(!1)}},[]);z.useEffect(()=>{e&&m()},[e,m]);const g=()=>{h(null);const e=document.querySelector(d?.selector||"");e&&e.classList.remove("tour-highlight")};return e?l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[80vh] flex flex-col",children:[l.jsx("div",{className:"p-6 border-b border-slate-200",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:s("pickElement")}),l.jsx("p",{className:"text-sm text-slate-600 mt-1",children:s("pickElementDescription")})]}),l.jsx("button",{onClick:t,className:"text-slate-400 hover:text-slate-600 transition-colors",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),l.jsx("div",{className:"flex-1 overflow-hidden",children:i?l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),l.jsx("p",{className:"text-slate-600",children:s("scanningElements")})]})}):l.jsx("div",{className:"p-6",children:0===c.length?l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"text-slate-400 mb-4",children:l.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 12h6m-6-4h6m2 5.291A7.962 7.962 0 0112 15c-2.34 0-4.29-1.009-5.824-2.709"})})}),l.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-2",children:s("noElementsFound")}),l.jsx("p",{className:"text-slate-600 mb-4",children:s("noElementsFoundDescription")}),l.jsx("button",{onClick:m,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:s("scanAgain")})]}):l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h3",{className:"font-medium text-slate-900",children:[s("availableElements")," (",c.length,")"]}),l.jsx("button",{onClick:m,className:"text-sm text-blue-600 hover:text-blue-700 transition-colors",children:s("refresh")})]}),l.jsx("div",{className:"grid gap-3 max-h-96 overflow-y-auto",children:c.map((e,r)=>l.jsx("div",{className:"p-4 border border-slate-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 cursor-pointer transition-colors",onClick:()=>(e=>{n(e),t()})(e),onMouseEnter:()=>(e=>{h(e),Eb.highlightElement(e.selector)})(e),onMouseLeave:g,children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"font-medium text-slate-900 mb-1",children:e.text||e.selector}),l.jsx("div",{className:"text-sm text-slate-600 font-mono",children:e.selector}),e.type&&l.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[s("type"),": ",e.type]})]}),l.jsx("div",{className:"text-slate-400",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})},r))})]})})}),l.jsx("div",{className:"p-6 border-t border-slate-200 bg-slate-50",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-sm text-slate-600",children:s("pickElementHint")}),l.jsx("div",{className:"flex space-x-3",children:l.jsx("button",{onClick:t,className:"px-4 py-2 text-slate-600 hover:text-slate-800 transition-colors",children:s("cancel")})})]})})]})}):null},Pb=({onClose:e})=>{const{t:t}=Tv();let n=null;try{n=Cb()}catch(O){console.warn("TourProvider not available, tour management will work without tour integration")}const{getAvailableTours:r}=n||{getAvailableTours:()=>[]},[a,s]=z.useState([]),[i,o]=z.useState([]),[c,u]=z.useState(null),[d,h]=z.useState(!1),[m,g]=z.useState(!1),[p,f]=z.useState(!1);V.useEffect(()=>{const e=()=>{console.log(" AI triggered: Opening create tour form"),g(!0)};return window.addEventListener("open-create-tour-form",e),()=>window.removeEventListener("open-create-tour-form",e)},[]);const[v,b]=z.useState(-1),[y,x]=z.useState({id:"",name:"",description:"",category:"onboarding",requiredRole:"any",estimatedDuration:3,language:"en",steps:[]}),[k,w]=z.useState({id:"",target:"",title:"",content:"",position:"top",action:void 0,actionTarget:"",waitTime:void 0,requiredView:"",skipIfNotFound:!1}),[S,j]=z.useState([]),[C,N]=z.useState(!1),[T,A]=z.useState(""),[E,_]=z.useState("all"),[P,I]=z.useState(!1),L=z.useMemo(()=>"all"===E?a:a.filter(e=>e.language===E),[a,E]),D=z.useCallback(async()=>{try{const e=await Sb.getTours(),t=[];for(const n of e){const e=await Sb.getTourSteps(n.id),r={id:n.id,name:n.name,description:n.description||"",category:n.category,requiredRole:n.required_role,target_group:n.target_group,estimatedDuration:n.estimated_duration,steps:e.map(e=>({id:e.id,title:e.title,content:e.content,target:e.target,position:e.position,action:e.action,actionTarget:e.action_target,actionData:e.action_data,waitTime:e.wait_time,requiredView:e.required_view,skipIfNotFound:e.skip_if_not_found}))};t.push(r)}s(t),o([])}catch(O){console.error("Error loading tours from database:",O),s([]),o([])}},[]);z.useEffect(()=>{D()},[D]);const M=()=>{const e=`tour-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;x({id:e,name:"",description:"",category:"onboarding",requiredRole:"any",estimatedDuration:3,language:"en",steps:[]}),u(null),g(!0),h(!1),j([])},R=()=>{w({id:"",target:"",title:"",content:"",position:"top",action:void 0,actionTarget:"",waitTime:void 0,requiredView:"",skipIfNotFound:!1}),b(-1),f(!0)},U=(e,t)=>{const n=[...y.steps],[r]=n.splice(e,1);n.splice(t,0,r),x({...y,steps:n})},F=Tb.getTourStats();return l.jsx("div",{className:"min-h-screen bg-slate-50 p-6",children:l.jsxs("div",{className:"max-w-7xl mx-auto",children:[l.jsxs("div",{className:"flex items-center justify-between mb-8",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:t("tourAdminTitle")}),l.jsx("p",{className:"text-slate-600 mt-2",children:t("tourAdminSubtitle")})]}),e&&l.jsx("button",{onClick:e,className:"px-4 py-2 text-slate-600 hover:text-slate-800 hover:bg-slate-100 rounded-lg transition-colors",children:t("tourAdminClose")})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[l.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[l.jsx("h3",{className:"text-sm font-medium text-slate-500",children:t("tourAdminTotalTours")}),l.jsx("p",{className:"text-2xl font-bold text-slate-900",children:F.totalTours})]}),l.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[l.jsx("h3",{className:"text-sm font-medium text-slate-500",children:t("tourAdminTotalSteps")}),l.jsx("p",{className:"text-2xl font-bold text-slate-900",children:F.totalSteps})]}),l.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[l.jsx("h3",{className:"text-sm font-medium text-slate-500",children:t("tourAdminAvgSteps")}),l.jsx("p",{className:"text-2xl font-bold text-slate-900",children:F.averageStepsPerTour.toFixed(1)})]}),l.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[l.jsx("h3",{className:"text-sm font-medium text-slate-500",children:t("tourAdminCategories")}),l.jsx("p",{className:"text-2xl font-bold text-slate-900",children:Object.keys(F.toursByCategory).length})]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[l.jsx("div",{className:"p-6 border-b",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:t("tourAdminToursList")}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("button",{onClick:()=>N(!0),className:"px-3 py-2 text-sm text-slate-600 hover:text-slate-800 hover:bg-slate-100 rounded-md transition-colors",children:t("tourAdminImportExport")}),l.jsx("button",{onClick:M,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:t("tourAdminCreateTour")})]})]})}),l.jsxs("div",{className:"px-6 pb-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("tourAdminFilterByLanguage")}),l.jsxs("select",{value:E,onChange:e=>_(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[l.jsx("option",{value:"all",children:t("tourAdminAllLanguages")}),l.jsx("option",{value:"en",children:t("tourAdminEnglish")}),l.jsx("option",{value:"sv",children:t("tourAdminSwedish")})]})]}),l.jsx("div",{className:"p-6",children:0===a.length?l.jsxs("div",{className:"text-center py-8",children:[l.jsx("p",{className:"text-slate-500",children:t("tourAdminNoTours")}),l.jsx("button",{onClick:M,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:t("tourAdminCreateFirstTour")})]}):l.jsx("div",{className:"space-y-3",children:L.map(e=>{const n=Tb.isDefaultTour(e.id,i);return l.jsx("div",{className:"p-4 border rounded-lg cursor-pointer transition-colors "+(c?.id===e.id?"border-blue-500 bg-blue-50":"border-slate-200 hover:border-slate-300"),onClick:()=>u(e),children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("h3",{className:"font-medium text-slate-900",children:e.name}),n&&l.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded",children:t("tourAdminDefault")})]}),l.jsx("p",{className:"text-sm text-slate-600",children:e.description}),l.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[l.jsx("span",{className:"text-xs bg-slate-100 text-slate-600 px-2 py-1 rounded",children:e.category}),l.jsxs("span",{className:"text-xs text-slate-500",children:[e.steps.length," ",t("tourAdminSteps")]}),l.jsxs("span",{className:"text-xs text-slate-500",children:[e.estimatedDuration," ",t("tourAdminMinutes")]})]})]}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("button",{onClick:t=>{t.stopPropagation(),(e=>{x({id:e.id,name:e.name,description:e.description,category:e.category||"onboarding",requiredRole:e.requiredRole||"any",estimatedDuration:e.estimatedDuration||3,language:e.language||"en",steps:e.steps}),u(e),h(!0),g(!1),j([])})(e)},className:"p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-md transition-colors",title:t("tourAdminEdit"),children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),l.jsx("button",{onClick:t=>{t.stopPropagation(),(async e=>{try{const t={id:`${e.id}-copy-${Date.now()}`,name:`${e.name} (Copy)`,description:e.description,category:e.category,required_role:e.requiredRole,target_group:e.target_group,estimated_duration:e.estimatedDuration,language:e.language||"en",is_active:!0,created_by:"admin",updated_by:"admin"},n=await Sb.createTour(t);if(n){for(let t=0;t<e.steps.length;t++){const r=e.steps[t];await Sb.createTourStep({tour_id:n.id,step_order:t+1,target:r.target,title:r.title,content:r.content,position:r.position,action:r.action,action_target:r.actionTarget,action_data:r.actionData,wait_time:r.waitTime,required_view:r.requiredView,skip_if_not_found:r.skipIfNotFound,language:e.language||"en"})}await D()}}catch(O){console.error("Error duplicating tour:",O),j(["Failed to duplicate tour. Please try again."])}})(e)},className:"p-2 text-slate-400 hover:text-green-600 hover:bg-green-50 rounded-md transition-colors",title:t("tourAdminDuplicate"),children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),l.jsx("button",{onClick:n=>{n.stopPropagation(),(async e=>{if(window.confirm(t("tourAdminConfirmDelete")))try{await Sb.deleteTourSteps(e),await Sb.deleteTour(e)&&(await D(),c?.id===e&&(u(null),h(!1)))}catch(O){console.error("Error deleting tour:",O),j(["Failed to delete tour. Please try again."])}})(e.id)},className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-md transition-colors",title:t("tourAdminDelete"),children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},e.id)})})})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[l.jsx("div",{className:"p-6 border-b",children:l.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:t(m?"tourAdminCreateTour":d?"tourAdminEditTour":"tourAdminSelectTour")})}),l.jsx("div",{className:"p-6",children:m||d?l.jsxs("div",{className:"space-y-6",children:[S.length>0&&l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[l.jsx("h4",{className:"text-sm font-medium text-red-800 mb-2",children:t("tourAdminValidationErrors")}),l.jsx("ul",{className:"text-sm text-red-700 space-y-1",children:S.map((e,t)=>l.jsxs("li",{children:[" ",e]},t))})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:t("tourAdminTourName")}),l.jsx("input",{type:"text",value:y.name||"",onChange:e=>{x(t=>({...t,name:e.target.value}))},className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-slate-900",placeholder:t("tourAdminTourNamePlaceholder"),autoComplete:"off"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:t("tourAdminTourDescription")}),l.jsx("textarea",{value:y.description,onChange:e=>x({...y,description:e.target.value}),className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-slate-900",rows:3,placeholder:t("tourAdminTourDescriptionPlaceholder")})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:t("tourAdminCategory")}),l.jsxs("select",{value:y.category,onChange:e=>x({...y,category:e.target.value}),className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-slate-900",children:[l.jsx("option",{value:"onboarding",children:t("tourAdminCategoryOnboarding")}),l.jsx("option",{value:"feature",children:t("tourAdminCategoryFeature")}),l.jsx("option",{value:"admin",children:t("tourAdminCategoryAdmin")}),l.jsx("option",{value:"user",children:t("tourAdminCategoryUser")})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:t("tourAdminRequiredRole")}),l.jsxs("select",{value:y.requiredRole,onChange:e=>x({...y,requiredRole:e.target.value}),className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-slate-900",children:[l.jsx("option",{value:"any",children:t("tourAdminRoleAny")}),l.jsx("option",{value:"admin",children:t("tourAdminRoleAdmin")}),l.jsx("option",{value:"user",children:t("tourAdminRoleUser")})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:t("tourAdminLanguage")}),l.jsxs("select",{value:y.language,onChange:e=>x({...y,language:e.target.value}),className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-slate-900",children:[l.jsx("option",{value:"en",children:t("tourAdminEnglish")}),l.jsx("option",{value:"sv",children:t("tourAdminSwedish")})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:t("tourAdminEstimatedDuration")}),l.jsx("input",{type:"number",min:"1",value:y.estimatedDuration,onChange:e=>x({...y,estimatedDuration:parseInt(e.target.value)||1}),className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-slate-900"})]})]},`form-${y.id}-${d}-${m}`),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-lg font-medium text-slate-900",children:t("tourAdminSteps")}),l.jsx("button",{onClick:R,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:t("tourAdminAddStep")})]}),0===y.steps.length?l.jsxs("div",{className:"text-center py-8 border-2 border-dashed border-slate-300 rounded-lg",children:[l.jsx("p",{className:"text-slate-500 mb-4",children:t("tourAdminNoSteps")}),l.jsx("button",{onClick:R,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:t("tourAdminAddFirstStep")})]}):l.jsx("div",{className:"space-y-3",children:y.steps.map((e,n)=>l.jsx("div",{className:"p-4 border border-slate-200 rounded-lg",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"font-medium text-slate-900",children:e.title}),l.jsx("p",{className:"text-sm text-slate-600 mt-1",children:e.content}),l.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[l.jsx("span",{className:"text-xs bg-slate-100 text-slate-600 px-2 py-1 rounded",children:e.position}),l.jsx("span",{className:"text-xs text-slate-500",children:e.target}),e.action&&l.jsx("span",{className:"text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded",children:e.action})]})]}),l.jsxs("div",{className:"flex space-x-2 ml-4",children:[n>0&&l.jsx("button",{onClick:()=>U(n,n-1),className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-md transition-colors",title:t("tourAdminMoveUp"),children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})}),n<y.steps.length-1&&l.jsx("button",{onClick:()=>U(n,n+1),className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-md transition-colors",title:t("tourAdminMoveDown"),children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})}),l.jsx("button",{onClick:()=>(e=>{const t=y.steps[e];w({id:t.id,target:t.target,title:t.title,content:t.content,position:t.position||"top",action:t.action,actionTarget:t.actionTarget||"",actionData:t.actionData,waitTime:t.waitTime,requiredView:t.requiredView||"",skipIfNotFound:t.skipIfNotFound||!1}),b(e),f(!0)})(n),className:"p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-md transition-colors",title:t("tourAdminEdit"),children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),l.jsx("button",{onClick:()=>(e=>{const t=y.steps.filter((t,n)=>n!==e);x({...y,steps:t})})(n),className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-md transition-colors",title:t("tourAdminDelete"),children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},e.id))})]}),l.jsxs("div",{className:"flex space-x-4 pt-6 border-t",children:[l.jsx("button",{onClick:async()=>{const e=Tb.validateTour(y);if(e.isValid)try{if(m){const e={id:y.id||`tour-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:y.name,description:y.description,category:y.category,required_role:y.requiredRole,target_group:"public",estimated_duration:y.estimatedDuration,language:y.language,is_active:!0,created_by:"admin",updated_by:"admin"},t=await Sb.createTour(e);if(t)for(let n=0;n<y.steps.length;n++){const e=y.steps[n];await Sb.createTourStep({tour_id:t.id,step_order:n+1,target:e.target,title:e.title,content:e.content,position:e.position,action:e.action,action_target:e.actionTarget,action_data:e.actionData,wait_time:e.waitTime,required_view:e.requiredView,skip_if_not_found:e.skipIfNotFound,language:y.language})}}else if(d&&c){const e={name:y.name,description:y.description,category:y.category,required_role:y.requiredRole,estimated_duration:y.estimatedDuration,language:y.language,updated_by:"admin"};await Sb.updateTour(c.id,e),await Sb.deleteTourSteps(c.id);for(let t=0;t<y.steps.length;t++){const e=y.steps[t];await Sb.createTourStep({tour_id:c.id,step_order:t+1,target:e.target,title:e.title,content:e.content,position:e.position,action:e.action,action_target:e.actionTarget,action_data:e.actionData,wait_time:e.waitTime,required_view:e.requiredView,skip_if_not_found:e.skipIfNotFound,language:y.language})}}await D(),g(!1),h(!1),u(null),j([])}catch(O){console.error("Error saving tour:",O),j(["Failed to save tour. Please try again."])}else j(e.errors)},className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:t(m?"tourAdminCreate":"tourAdminSave")}),l.jsx("button",{onClick:()=>{g(!1),h(!1),u(null),j([])},className:"px-6 py-2 text-slate-600 hover:text-slate-800 hover:bg-slate-100 rounded-lg transition-colors",children:t("tourAdminCancel")})]})]}):l.jsxs("div",{className:"text-center py-12",children:[l.jsx("svg",{className:"w-16 h-16 text-slate-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),l.jsx("p",{className:"text-slate-500",children:t("tourAdminSelectTourToEdit")})]})})]})]}),p&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[l.jsx("div",{className:"p-6 border-b",children:l.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:t(v>=0?"tourAdminEditStep":"tourAdminAddStep")})}),l.jsxs("div",{className:"p-6 space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:t("tourAdminStepTitle")}),l.jsx("input",{type:"text",value:k.title,onChange:e=>w({...k,title:e.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:t("tourAdminStepTitlePlaceholder")})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:t("tourAdminStepContent")}),l.jsx("textarea",{value:k.content,onChange:e=>w({...k,content:e.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3,placeholder:t("tourAdminStepContentPlaceholder")})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:t("tourAdminStepTarget")}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("input",{type:"text",value:k.target,onChange:e=>w({...k,target:e.target.value}),className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"[data-tour='example']"}),l.jsx("button",{type:"button",onClick:()=>I(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",title:t("pickElement"),children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"})})})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:t("tourAdminStepPosition")}),l.jsxs("select",{value:k.position,onChange:e=>w({...k,position:e.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[l.jsx("option",{value:"top",children:t("tourAdminPositionTop")}),l.jsx("option",{value:"bottom",children:t("tourAdminPositionBottom")}),l.jsx("option",{value:"left",children:t("tourAdminPositionLeft")}),l.jsx("option",{value:"right",children:t("tourAdminPositionRight")}),l.jsx("option",{value:"center",children:t("tourAdminPositionCenter")})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:t("tourAdminStepAction")}),l.jsxs("select",{value:k.action||"",onChange:e=>w({...k,action:e.target.value||void 0}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[l.jsx("option",{value:"",children:t("tourAdminActionNone")}),l.jsx("option",{value:"click",children:t("tourAdminActionClick")}),l.jsx("option",{value:"wait",children:t("tourAdminActionWait")}),l.jsx("option",{value:"navigate",children:t("tourAdminActionNavigate")}),l.jsx("option",{value:"scroll",children:t("tourAdminActionScroll")})]})]})]}),"wait"===k.action&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:t("tourAdminWaitTime")}),l.jsx("input",{type:"number",min:"0",value:k.waitTime||"",onChange:e=>w({...k,waitTime:parseInt(e.target.value)||void 0}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"2000"})]}),("navigate"===k.action||"click"===k.action)&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:t("tourAdminActionTarget")}),l.jsx("input",{type:"text",value:k.actionTarget,onChange:e=>w({...k,actionTarget:e.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"navigate"===k.action?"trainings":'[data-tour="button"]'})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:t("tourAdminRequiredView")}),l.jsx("input",{type:"text",value:k.requiredView,onChange:e=>w({...k,requiredView:e.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"public, trainings, users, attendance"})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",id:"skipIfNotFound",checked:k.skipIfNotFound,onChange:e=>w({...k,skipIfNotFound:e.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-slate-300 rounded"}),l.jsx("label",{htmlFor:"skipIfNotFound",className:"ml-2 block text-sm text-slate-700",children:t("tourAdminSkipIfNotFound")})]})]}),l.jsxs("div",{className:"p-6 border-t flex space-x-4",children:[l.jsx("button",{onClick:()=>{if(!k.title||!k.content||!k.target)return;const e={id:k.id||`step-${Date.now()}`,target:k.target,title:k.title,content:k.content,position:k.position,action:k.action,actionTarget:k.actionTarget,actionData:k.actionData,waitTime:k.waitTime,requiredView:k.requiredView,skipIfNotFound:k.skipIfNotFound},t=[...y.steps];v>=0?t[v]=e:t.push(e),x({...y,steps:t}),f(!1),b(-1)},className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:t(v>=0?"tourAdminSave":"tourAdminAdd")}),l.jsx("button",{onClick:()=>f(!1),className:"px-6 py-2 text-slate-600 hover:text-slate-800 hover:bg-slate-100 rounded-lg transition-colors",children:t("tourAdminCancel")})]})]})}),C&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full",children:[l.jsx("div",{className:"p-6 border-b",children:l.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:t("tourAdminImportExport")})}),l.jsxs("div",{className:"p-6 space-y-6",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"text-md font-medium text-slate-900 mb-4",children:t("tourAdminExport")}),l.jsx("p",{className:"text-sm text-slate-600 mb-4",children:t("tourAdminExportDescription")}),l.jsx("button",{onClick:()=>{const e=Tb.exportTours(),t=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download="tours-export.json",r.click(),URL.revokeObjectURL(n)},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:t("tourAdminExportTours")})]}),l.jsxs("div",{className:"border-t pt-6",children:[l.jsx("h4",{className:"text-md font-medium text-slate-900 mb-4",children:t("tourAdminImport")}),l.jsx("p",{className:"text-sm text-slate-600 mb-4",children:t("tourAdminImportDescription")}),l.jsx("textarea",{value:T,onChange:e=>A(e.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:8,placeholder:t("tourAdminImportPlaceholder")}),l.jsxs("div",{className:"flex space-x-4 mt-4",children:[l.jsx("button",{onClick:()=>{Tb.importTours(T)&&(D(),A(""),N(!1))},disabled:!T.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:t("tourAdminImportTours")}),l.jsx("button",{onClick:()=>{A(""),N(!1)},className:"px-4 py-2 text-slate-600 hover:text-slate-800 hover:bg-slate-100 rounded-lg transition-colors",children:t("tourAdminCancel")})]})]})]})]})}),(d||m)&&l.jsx(_b,{isOpen:P,onClose:()=>I(!1),onSelect:e=>{w({...k,target:e}),I(!1)},currentSelector:k.target,tourContext:{category:y.category,targetGroup:y.target_group}})]})})},Ib=({onClose:e})=>{const{t:t}=Tv();let n=null;try{n=Cb()}catch(E){console.warn("TourProvider not available, shoutout management will work without tour integration")}const[r,a]=z.useState([]),[s,i]=z.useState(null),[o,c]=z.useState(!1),[u,d]=z.useState(!1),[h,m]=z.useState(!1);V.useEffect(()=>{const e=()=>{console.log(" AI triggered: Opening create shoutout form"),d(!0)};return window.addEventListener("open-create-shoutout-form",e),()=>window.removeEventListener("open-create-shoutout-form",e)},[]);const[g,p]=z.useState({id:"",title:"",description:"",image:"",icon:"",tourId:"",category:"feature",priority:"medium",language:"en",target_group:"public",releaseDate:(new Date).toISOString().split("T")[0],expireDate:void 0,isNew:!0}),[f,v]=z.useState([]),[b,y]=z.useState(""),[x,k]=z.useState("all"),w=z.useMemo(()=>"all"===x?r:r.filter(e=>e.language===x),[r,x]),S=z.useCallback(e=>["tour-system","admin-tours","cinematic-tours","performance-improvements","attendance-page-fix"].includes(e),[]),j=z.useCallback(async()=>{try{const[e,t]=await Promise.all([Sb.getShoutouts("en"),Sb.getShoutouts("sv")]),n=[...e,...t].map(e=>({id:e.id,title:e.title,description:e.description,image:e.image,icon:e.icon,tourId:e.tour_id,category:e.category,priority:e.priority,language:e.language,target_group:e.target_group,releaseDate:e.release_date,expireDate:e.expire_date,isNew:e.is_new}));a(n)}catch(E){console.error("Error loading shoutouts:",E),a([])}},[]);z.useEffect(()=>{(async()=>{await j()})()},[j]),z.useEffect(()=>{const t=t=>{"Escape"===t.key&&e()};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[e]);const C=e=>{switch(e){case"feature":return"bg-blue-100 text-blue-800";case"improvement":return"bg-green-100 text-green-800";case"announcement":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},N=e=>{switch(e){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},[T,A]=z.useState([]);return z.useEffect(()=>{(async()=>{if(n)try{const e=await n.getAvailableTours();A(e)}catch(E){console.error("Error loading tours:",E),A([])}else A([])})()},[n]),l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[l.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t("shoutoutAdminTitle")}),l.jsx("p",{className:"text-gray-600 mt-1",children:t("shoutoutAdminSubtitle")})]}),l.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors duration-200",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsxs("div",{className:"flex h-[calc(90vh-120px)]",children:[l.jsxs("div",{className:"w-1/2 border-r border-gray-200 flex flex-col",children:[l.jsxs("div",{className:"p-4 border-b border-gray-200",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t("shoutoutAdminShoutoutsList")}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("button",{onClick:()=>m(!h),className:"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-md transition-colors duration-200",children:t("shoutoutAdminImportExport")}),l.jsx("button",{onClick:()=>{d(!0),c(!1),i(null),p({id:"",title:"",description:"",image:"",icon:"",tourId:"",category:"feature",priority:"medium",language:"en",target_group:"public",releaseDate:(new Date).toISOString().split("T")[0],expireDate:void 0,isNew:!0}),v([])},className:"px-3 py-1 text-sm bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors duration-200",children:t("shoutoutAdminCreateShoutout")})]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("shoutoutAdminFilterByLanguage")}),l.jsxs("select",{value:x,onChange:e=>k(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[l.jsx("option",{value:"all",children:t("shoutoutAdminAllLanguages")}),l.jsx("option",{value:"en",children:t("shoutoutAdminEnglish")}),l.jsx("option",{value:"sv",children:t("shoutoutAdminSwedish")})]})]}),h&&l.jsx("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:l.jsxs("div",{className:"space-y-3",children:[l.jsx("div",{children:l.jsx("button",{onClick:async()=>{try{const[e,t]=await Promise.all([Sb.getShoutouts("en"),Sb.getShoutouts("sv")]),n=[...e,...t],r=JSON.stringify(n,null,2),a=new Blob([r],{type:"application/json"}),s=URL.createObjectURL(a),i=document.createElement("a");i.href=s,i.download="shoutouts.json",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(s)}catch(E){console.error("Error exporting shoutouts:",E),alert("Failed to export shoutouts. Please try again.")}},className:"w-full px-3 py-2 text-sm bg-green-600 hover:bg-green-700 text-white rounded-md transition-colors duration-200",children:t("shoutoutAdminExport")})}),l.jsxs("div",{children:[l.jsx("textarea",{value:b,onChange:e=>y(e.target.value),placeholder:t("shoutoutAdminImportPlaceholder"),className:"w-full h-20 p-2 text-sm border border-gray-300 rounded-md resize-none"}),l.jsx("button",{onClick:async()=>{try{const e=JSON.parse(b);if(!Array.isArray(e))return void alert("Invalid import data. Expected an array of shoutouts.");let t=0,n=0;for(const r of e)try{const e={title:r.title||"Imported Shoutout",description:r.description||"",image:r.image,icon:r.icon,tour_id:r.tour_id,category:r.category||"feature",priority:r.priority||"medium",language:r.language||"en",release_date:r.release_date||(new Date).toISOString().split("T")[0],expire_date:r.expire_date,is_new:void 0===r.is_new||r.is_new,is_active:void 0===r.is_active||r.is_active,created_by:"admin",updated_by:"admin"};await Sb.createShoutout(e),t++}catch(E){console.error("Error importing shoutout:",E),n++}await j(),y(""),m(!1),n>0?alert(`Import completed with ${t} successful imports and ${n} errors.`):alert(`Successfully imported ${t} shoutouts.`)}catch(E){console.error("Error parsing import data:",E),alert("Invalid JSON format. Please check your import data.")}},className:"w-full mt-2 px-3 py-2 text-sm bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors duration-200",children:t("shoutoutAdminImport")})]})]})}),l.jsxs("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[l.jsxs("div",{className:"bg-blue-50 p-2 rounded text-center",children:[l.jsx("div",{className:"font-semibold text-blue-900",children:w.length}),l.jsx("div",{className:"text-blue-600",children:t("shoutoutAdminTotalShoutouts")})]}),l.jsxs("div",{className:"bg-green-50 p-2 rounded text-center",children:[l.jsx("div",{className:"font-semibold text-green-900",children:w.filter(e=>e.isNew).length}),l.jsx("div",{className:"text-green-600",children:t("shoutoutAdminNewShoutouts")})]}),l.jsxs("div",{className:"bg-purple-50 p-2 rounded text-center",children:[l.jsx("div",{className:"font-semibold text-purple-900",children:w.filter(e=>e.tourId).length}),l.jsx("div",{className:"text-purple-600",children:t("shoutoutAdminWithTours")})]})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto",children:0===w.length?l.jsxs("div",{className:"p-8 text-center text-gray-500",children:[l.jsx("div",{className:"text-4xl mb-4",children:""}),l.jsx("div",{className:"text-lg font-medium mb-2",children:t("shoutoutAdminNoShoutouts")}),l.jsx("div",{className:"text-sm mb-4",children:t("shoutoutAdminCreateFirstShoutout")}),l.jsxs("div",{className:"text-xs text-gray-500 bg-blue-50 p-3 rounded-lg",children:[l.jsxs("strong",{children:[t("shoutoutAdminSystemNote"),":"]})," ",t("shoutoutAdminSystemNoteTextUpdated")]})]}):l.jsx("div",{className:"space-y-2 p-4",children:w.map(e=>l.jsx("div",{className:"p-4 border rounded-lg cursor-pointer transition-colors duration-200 "+(s?.id===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"),onClick:()=>i(e),children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[l.jsx("span",{className:"text-lg",children:e.icon}),l.jsx("h4",{className:"font-medium text-gray-900",children:e.title}),l.jsx("span",{className:"px-2 py-0.5 text-xs bg-gray-100 text-gray-600 rounded-full",children:e.language?.toUpperCase()||"EN"}),S(e.id)&&l.jsx("span",{className:"px-2 py-0.5 text-xs bg-blue-100 text-blue-800 rounded-full",children:t("shoutoutAdminDefault")}),e.isNew&&l.jsx("span",{className:"px-2 py-0.5 text-xs bg-red-100 text-red-800 rounded-full",children:t("shoutoutAdminNewShoutouts")})]}),l.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mb-2",children:e.description}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full ${C(e.category)}`,children:t(`shoutoutCategory${e.category.charAt(0).toUpperCase()+e.category.slice(1)}`)}),l.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full ${N(e.priority)}`,children:e.priority}),e.tourId&&l.jsx("span",{className:"px-2 py-0.5 text-xs bg-blue-100 text-blue-800 rounded-full",children:t("shoutoutHasTour")})]})]}),l.jsxs("div",{className:"flex space-x-1 ml-2",children:[l.jsx("button",{onClick:t=>{t.stopPropagation(),(e=>{i(e),c(!0),d(!1),p({id:e.id,title:e.title,description:e.description,image:e.image||"",icon:e.icon||"",tourId:e.tourId||"",category:e.category,priority:e.priority,language:e.language||"en",target_group:e.target_group,releaseDate:e.releaseDate,expireDate:e.expireDate,isNew:e.isNew||!1}),v([])})(e)},className:"p-1 text-gray-400 hover:text-blue-600 transition-colors duration-200",title:t("shoutoutAdminEdit"),children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),l.jsx("button",{onClick:t=>{t.stopPropagation(),(async e=>{try{const t={title:`${e.title} (Copy)`,description:e.description,image:e.image,icon:e.icon,tour_id:e.tourId,category:e.category,priority:e.priority,language:e.language||"en",release_date:(new Date).toISOString().split("T")[0],expire_date:e.expireDate,is_new:!0,is_active:!0,created_by:"admin",updated_by:"admin"};await Sb.createShoutout(t)&&await j()}catch(E){console.error("Error duplicating shoutout:",E),alert("Failed to duplicate shoutout. Please try again.")}})(e)},className:"p-1 text-gray-400 hover:text-green-600 transition-colors duration-200",title:t("shoutoutAdminDuplicate"),children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),l.jsx("button",{onClick:n=>{n.stopPropagation(),(async e=>{if(window.confirm(t("shoutoutAdminConfirmDelete")))try{await Sb.deleteShoutout(e.id)&&(await j(),s?.id===e.id&&(i(null),c(!1)))}catch(E){console.error("Error deleting shoutout:",E),alert("Failed to delete shoutout. Please try again.")}})(e)},className:"p-1 text-gray-400 hover:text-red-600 transition-colors duration-200",title:t("shoutoutAdminDelete"),children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},e.id))})})]}),l.jsx("div",{className:"w-1/2 flex flex-col",children:o||u?l.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:l.jsxs("div",{className:"max-w-md mx-auto",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:t(u?"shoutoutAdminCreateShoutout":"shoutoutAdminEditShoutout")}),f.length>0&&l.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:l.jsxs("div",{className:"text-sm text-red-800",children:[l.jsxs("div",{className:"font-medium mb-1",children:[t("shoutoutAdminValidationErrors"),":"]}),l.jsx("ul",{className:"list-disc list-inside space-y-1",children:f.map((e,t)=>l.jsx("li",{children:e},t))})]})}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("shoutoutAdminShoutoutTitle")}),l.jsx("input",{type:"text",value:g.title,onChange:e=>p({...g,title:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:t("shoutoutAdminShoutoutTitlePlaceholder")})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("shoutoutAdminShoutoutDescription")}),l.jsx("textarea",{value:g.description,onChange:e=>p({...g,description:e.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:t("shoutoutAdminShoutoutDescriptionPlaceholder")})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("shoutoutAdminIcon")}),l.jsx("input",{type:"text",value:g.icon,onChange:e=>p({...g,icon:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:""})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("shoutoutAdminCategory")}),l.jsxs("select",{value:g.category,onChange:e=>p({...g,category:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[l.jsx("option",{value:"feature",children:t("shoutoutCategoryFeature")}),l.jsx("option",{value:"improvement",children:t("shoutoutCategoryImprovement")}),l.jsx("option",{value:"announcement",children:t("shoutoutCategoryAnnouncement")}),l.jsx("option",{value:"bugfix",children:t("shoutoutCategoryBugfix")})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("shoutoutAdminLanguage")}),l.jsxs("select",{value:g.language,onChange:e=>p({...g,language:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[l.jsx("option",{value:"en",children:t("shoutoutAdminEnglish")}),l.jsx("option",{value:"sv",children:t("shoutoutAdminSwedish")})]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("shoutoutAdminPriority")}),l.jsxs("select",{value:g.priority,onChange:e=>p({...g,priority:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[l.jsx("option",{value:"low",children:t("shoutoutAdminPriorityLow")}),l.jsx("option",{value:"medium",children:t("shoutoutAdminPriorityMedium")}),l.jsx("option",{value:"high",children:t("shoutoutAdminPriorityHigh")})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("targetGroup")}),l.jsxs("select",{value:g.target_group,onChange:e=>p({...g,target_group:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[l.jsx("option",{value:"public",children:t("targetGroupPublic")}),l.jsx("option",{value:"authenticated",children:t("targetGroupAuthenticated")}),l.jsx("option",{value:"admin",children:t("targetGroupAdmin")})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("shoutoutAdminReleaseDate")}),l.jsx("input",{type:"date",value:g.releaseDate,onChange:e=>p({...g,releaseDate:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("shoutoutAdminExpireDate")}),l.jsx("input",{type:"date",value:g.expireDate||"",onChange:e=>p({...g,expireDate:e.target.value||void 0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:t("shoutoutAdminExpireDatePlaceholder")}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t("shoutoutAdminExpireDateHelp")})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("shoutoutAdminTourId")}),l.jsxs("select",{value:g.tourId,onChange:e=>p({...g,tourId:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[l.jsx("option",{value:"",children:t("shoutoutAdminNoTour")}),T.map(e=>l.jsx("option",{value:e.id,children:e.name},e.id))]})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",id:"isNew",checked:g.isNew,onChange:e=>p({...g,isNew:e.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),l.jsx("label",{htmlFor:"isNew",className:"ml-2 block text-sm text-gray-700",children:t("shoutoutAdminIsNew")})]})]}),l.jsxs("div",{className:"flex space-x-3 mt-6",children:[l.jsx("button",{onClick:async()=>{console.log("Saving shoutout with data:",g);const e=[];if(g.title.trim()||e.push("Title is required"),g.description.trim()||e.push("Description is required"),g.category||e.push("Category is required"),g.priority||e.push("Priority is required"),g.releaseDate||e.push("Release date is required"),e.length>0)v(e);else try{if(u){console.log("Creating new shoutout");const e={title:g.title,description:g.description,image:g.image,icon:g.icon,tour_id:g.tourId,category:g.category,priority:g.priority,language:g.language,target_group:g.target_group,release_date:g.releaseDate,expire_date:g.expireDate,is_new:g.isNew,is_active:!0,created_by:"admin",updated_by:"admin"},t=await Sb.createShoutout(e);console.log("Created shoutout:",t)}else if(s){console.log("Updating existing shoutout:",s.id);const e={title:g.title,description:g.description,image:g.image,icon:g.icon,tour_id:g.tourId,category:g.category,priority:g.priority,language:g.language,target_group:g.target_group,release_date:g.releaseDate,expire_date:g.expireDate,is_new:g.isNew,updated_by:"admin"},t=await Sb.updateShoutout(s.id,e);console.log("Updated shoutout:",t)}await j(),d(!1),c(!1),i(null),v([]),console.log("Shoutout saved successfully")}catch(E){console.error("Error saving shoutout:",E),v(["Failed to save shoutout. Please try again."])}},className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200",children:t(u?"shoutoutAdminCreate":"shoutoutAdminSave")}),l.jsx("button",{onClick:()=>{d(!1),c(!1),i(null),v([])},className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-2 px-4 rounded-md transition-colors duration-200",children:t("shoutoutAdminCancel")})]})]})}):l.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-4xl mb-4",children:""}),l.jsx("div",{className:"text-lg font-medium mb-2",children:t("shoutoutAdminSelectShoutoutToEdit")}),l.jsx("div",{className:"text-sm",children:t("shoutoutAdminSelectShoutoutDescription")})]})})})]})]})})},Lb=({variant:e="button",className:t="",showCompleted:n=!1,showSkipped:r=!1,compact:a=!1})=>{let s=null;try{s=Cb()}catch(S){console.warn("TourProvider not available, tour launcher will be disabled")}const{isAdmin:i}=yv(),{t:o}=Tv(),[c,u]=z.useState(!1),[d,h]=z.useState(!1),[m,g]=z.useState(!1),[p,f]=z.useState(!1),[v,b]=z.useState([]);z.useEffect(()=>{(async()=>{if(s)try{const e=await s.getAvailableTours();b(e)}catch(S){console.error("Error loading tours:",S),b([])}else b([])})()},[s]),z.useEffect(()=>{const e=()=>{g(!0)};return window.addEventListener("open-shoutout-management",e),()=>{window.removeEventListener("open-shoutout-management",e)}},[]);const y=async e=>{s&&(u(!1),await s.startTour(e))},x=e=>s?s.completedTours.includes(e)?"completed":s.skippedTours.includes(e)?"skipped":"available":"unavailable",k=e=>{switch(e){case"completed":return l.jsx("svg",{className:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})});case"skipped":return l.jsx("svg",{className:"w-4 h-4 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})});default:return l.jsx("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}},w=e=>{switch(e){case"completed":return o("tourStatusCompleted");case"skipped":return o("tourStatusSkipped");default:return o("tourStatusAvailable")}};return s?"button"===e?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:`relative ${t}`,children:[l.jsxs("button",{onClick:()=>u(!c),onContextMenu:e=>{i&&(e.preventDefault(),f(!p))},disabled:s.isActive,title:o("tourStartTour"),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors whitespace-nowrap",children:[l.jsx("svg",{className:a?"w-4 h-4":"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})}),!a&&l.jsx("span",{className:"hidden sm:inline",children:o("tourStartTour")}),i&&l.jsx("svg",{className:"w-3 h-3 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})]}),i&&p&&l.jsx("div",{className:"absolute top-full left-0 mt-1 w-48 bg-white rounded-lg shadow-lg border border-slate-200 z-50",children:l.jsx("button",{onClick:()=>{h(!0),f(!1)},className:"w-full px-4 py-2 text-left text-sm text-slate-700 hover:bg-slate-50 rounded-lg transition-colors",children:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),l.jsx("span",{children:o("tourAdminManageTours")})]})})}),c&&l.jsxs("div",{className:"absolute top-full left-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-slate-200 z-50",children:[l.jsx("div",{className:"p-4 border-b border-slate-200",children:l.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:o("tourSelectTour")})}),l.jsx("div",{className:"max-h-96 overflow-y-auto",children:0===v.length?l.jsx("div",{className:"p-4 text-center text-slate-500",children:o("tourNoToursAvailable")}):v.map(e=>{const t=x(e.id);return l.jsx("button",{onClick:()=>y(e.id),className:"w-full p-4 text-left hover:bg-slate-50 border-b border-slate-100 last:border-b-0 transition-colors",children:l.jsxs("div",{className:"flex items-start space-x-3",children:[k(t),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h4",{className:"text-sm font-medium text-slate-900 truncate",children:e.name}),l.jsx("p",{className:"text-xs text-slate-600 mt-1 line-clamp-2",children:e.description}),l.jsxs("div",{className:"flex items-center justify-between mt-2",children:[l.jsx("span",{className:"text-xs text-slate-500",children:w(t)}),e.estimatedDuration&&l.jsxs("span",{className:"text-xs text-slate-500",children:["~",e.estimatedDuration," min"]})]})]})]})},e.id)})})]}),c&&l.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>u(!1)})]}),d&&l.jsx("div",{className:"fixed inset-0 z-50",children:l.jsx(Pb,{onClose:()=>h(!1)})}),m&&l.jsx("div",{className:"fixed inset-0 z-50",children:l.jsx(Ib,{onClose:()=>g(!1)})}),p&&l.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>f(!1)})]}):"dropdown"===e?l.jsx("div",{className:`relative ${t}`,children:l.jsxs("select",{onChange:e=>{e.target.value&&(y(e.target.value),e.target.value="")},disabled:s.isActive,className:"px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx("option",{value:"",children:o("tourSelectTour")}),v.map(e=>{const t=x(e.id);return l.jsxs("option",{value:e.id,children:[e.name," ","completed"===t?"":"skipped"===t?"":""]},e.id)})]})}):"modal"===e?l.jsxs("div",{className:`${t}`,children:[l.jsxs("button",{onClick:()=>u(!0),disabled:s.isActive,className:"flex items-center space-x-2 px-4 py-2 text-slate-600 hover:text-slate-800 transition-colors",children:[l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),l.jsx("span",{children:o("tourGuidedTours")})]}),c&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[80vh] overflow-hidden",children:[l.jsx("div",{className:"p-6 border-b border-slate-200",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:o("tourGuidedTours")}),l.jsx("button",{onClick:()=>u(!1),className:"text-slate-400 hover:text-slate-600 transition-colors",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),l.jsx("div",{className:"p-6 overflow-y-auto max-h-96",children:0===v.length?l.jsx("div",{className:"text-center text-slate-500 py-8",children:o("tourNoToursAvailable")}):l.jsx("div",{className:"space-y-4",children:v.map(e=>{const t=x(e.id);return l.jsx("div",{className:"border border-slate-200 rounded-lg p-4 hover:border-slate-300 transition-colors",children:l.jsxs("div",{className:"flex items-start space-x-3",children:[k(t),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h3",{className:"text-lg font-medium text-slate-900",children:e.name}),l.jsx("p",{className:"text-slate-600 mt-1",children:e.description}),l.jsxs("div",{className:"flex items-center justify-between mt-3",children:[l.jsxs("div",{className:"flex items-center space-x-4 text-sm text-slate-500",children:[l.jsxs("span",{className:"flex items-center space-x-1",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),l.jsxs("span",{children:[e.estimatedDuration," min"]})]}),l.jsxs("span",{className:"flex items-center space-x-1",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4"})}),l.jsxs("span",{children:[e.steps.length," steps"]})]})]}),l.jsx("button",{onClick:()=>y(e.id),className:"px-4 py-2 bg-gradient-to-r from-blue-600 to-cyan-600 text-white rounded-lg hover:from-blue-700 hover:to-cyan-700 transition-all duration-200 transform hover:scale-105",children:o("completed"===t?"tourRestart":"skipped"===t?"tourRetry":"tourStart")})]})]})]})},e.id)})})})]})})]}):null:null},Db=({isOpen:e,onClose:t,selectedSection:n,isAdmin:r=!1})=>{const{t:a}=Tv(),{language:s}=Sv(),[i,o]=z.useState(null),[c,u]=z.useState(""),[d,h]=z.useState(""),[m,g]=z.useState(!1),[p,f]=z.useState(!1),[v,b]=z.useState(null),[y,x]=z.useState(0),[k,w]=z.useState(!0),[S,j]=z.useState(!1),[C,N]=z.useState(!1),[T,A]=z.useState("line"),[E,_]=z.useState("none"),[P,I]=z.useState(s),[L,D]=z.useState([]),[M,R]=z.useState([]),[U,F]=z.useState(""),[O,$]=z.useState([]),[H,B]=z.useState(""),[V,W]=z.useState(!1),[K,q]=z.useState(null),[G,Y]=z.useState(""),[J,Q]=z.useState("");z.useEffect(()=>{I(s)},[s]);const[X,Z]=z.useState([]),[ee,te]=z.useState("main"),ne=()=>`Help text update in ${n||"help-content"} (${"sv"===P?"Swedish":"English"})`,[re,ae]=z.useState(ne()),[se,ie]=z.useState(!1),[oe,le]=z.useState({x:0,y:0}),[ce,ue]=z.useState({width:80,height:80}),[de,he]=z.useState(!1),[me,ge]=z.useState(!1),[pe,fe]=z.useState({x:0,y:0}),[ve,be]=z.useState({x:0,y:0,width:0,height:0}),ye=z.useRef(null),xe=z.useRef(null),ke=z.useRef(0),we=z.useRef(!1);z.useEffect(()=>{e&&n&&Se(n)},[e,n,s]),z.useEffect(()=>{ae(ne())},[n,P]),z.useEffect(()=>{"ui-text"===E&&Ce()},[E,P]),z.useEffect(()=>{e&&"ui-text"===E&&Ce()},[e]),z.useEffect(()=>{if(U.trim()){const e=L.filter(e=>e.key.toLowerCase().includes(U.toLowerCase())||e.value.toLowerCase().includes(U.toLowerCase()));R(e)}else R(L)},[L,U]);const Se=async(e,t=!0)=>{f(!0),b(null);try{const n=await wb.getSection(e,s,t);n?(o(n),u(n.content),h(n.content),g(!1),Y(n.title),Q(n.id)):b(`Section ${e} not found`)}catch(sy){console.error("Error loading section:",sy),b(sy instanceof Error?sy.message:"Failed to load section")}finally{f(!1)}},je=e=>{u(e),g(e!==d)},Ce=async()=>{try{const e="sv"===P?jv:Cv,t=Object.entries(e).map(([e,t])=>({key:e,value:String(t)}));console.log(`Loaded ${t.length} UI text variables for language: ${P}`),D(t)}catch(sy){console.error("Error loading UI text variables:",sy)}},Ne=z.useCallback(()=>{if(ye.current&&!we.current){const e=ye.current.selectionStart;x(e),ke.current=e}},[]);z.useEffect(()=>{we.current&&ye.current&&requestAnimationFrame(()=>{ye.current&&(ye.current.setSelectionRange(ke.current,ke.current),we.current=!1)})},[c]);const Te=z.useCallback(e=>{if(ye.current){const t=ye.current,n=t.selectionStart,r=t.selectionEnd,a=t.scrollTop;we.current=!0;const s=n+e.length;ke.current=s;const i=c,o=i.substring(0,n)+e+i.substring(r);u(o),requestAnimationFrame(()=>{ye.current&&(ye.current.focus(),ye.current.scrollTop=a,ye.current.setSelectionRange(s,s),x(s),we.current=!1)})}},[c]),Ae=z.useCallback((e,t=e)=>{if(ye.current){const n=ye.current.selectionStart,r=ye.current.selectionEnd,a=c.substring(n,r);if(a.length>0){Te(e+a+t),requestAnimationFrame(()=>{if(ye.current){const t=n+e.length,r=t+a.length;ye.current.setSelectionRange(t,r)}})}else{Te(e+t),requestAnimationFrame(()=>{if(ye.current){const t=n+e.length;ye.current.setSelectionRange(t,t)}})}}},[c,Te]),Ee=async e=>{if(!e.trim())return;W(!0);const t={role:"user",content:e,timestamp:new Date};$(e=>[...e,t]),B("");try{const t=await Le(),n=await De(e,c,t),r=Pe(n);console.log("AI Response:",n),console.log("Applied Changes:",r.appliedChanges),$(e=>[...e,r])}catch(sy){console.error("Error sending AI message:",sy);const t={role:"assistant",content:"Sorry, I encountered an error. Please try again.",timestamp:new Date};$(e=>[...e,t])}finally{W(!1)}},_e=(e,t,n)=>{const r=c;let a="";switch(console.log("Applying AI change:",{type:e,oldLength:r.length,newLength:t.length}),e){case"REPLACE_CONTENT":default:a=t;break;case"INSERT_AT_CURSOR":if(ye.current){const e=ye.current.selectionStart;a=r.substring(0,e)+t+r.substring(e)}else a=r+"\n\n"+t;break;case"APPEND_CONTENT":a=r+"\n\n"+t;break;case"PREPEND_CONTENT":a=t+"\n\n"+r}return je(a),{type:e,oldContent:r,newContent:a,timestamp:new Date}},Pe=e=>{const t=Ie(e);let n=null;if(t.length>0){const e=t[0];n=_e(e.type,e.content)}else{e.split("\n").filter(e=>e.trim()).length>2&&e.length>100&&(e.includes("#")||e.includes("```")||e.includes("##"))&&!1===e.toLowerCase().includes("suggest")&&(n=_e("REPLACE_CONTENT",e))}return{role:"assistant",content:e,timestamp:new Date,appliedChanges:n}},Ie=e=>{const t=[],n=/\[(REPLACE_CONTENT|INSERT_AT_CURSOR|APPEND_CONTENT|PREPEND_CONTENT)\]\s*([\s\S]*?)(?=\[|$)/g;let r;for(;null!==(r=n.exec(e));){const e=r[1];let n=r[2].trim();n=n.replace(/\[(?:REPLACE_CONTENT|INSERT_AT_CURSOR|APPEND_CONTENT|PREPEND_CONTENT)\][\s\S]*$/,"").trim(),n&&t.push({type:e,content:n})}return t},Le=async()=>{try{let e="";if(i&&(e+=`Current Help Section: ${i.title}\n`,e+=`Category: ${i.category}\n`,e+=`Keywords: ${i.keywords.join(", ")}\n\n`),L.length>0){e+=`Available UI Text Variables (${L.length} total):\n`;e+=L.slice(0,20).map(e=>`{{${e.key}}} = "${e.value}"`).join("\n")+"\n...\n\n"}return e+="Application Structure:\n",e+="- Admin Panel: User management, training creation, voucher management\n",e+="- Public View: Training subscription, user registration\n",e+="- Attendance: Check-in system, kiosk mode\n",e+="- Help System: Multi-language help documentation\n",e+="- Tour System: Guided tours for features\n",e+="- Shoutout System: User notifications and announcements\n\n",e+=`Current Language: ${s}\n`,e+="Available Languages: English (en), Swedish (sv)\n\n",e}catch(e){return console.error("Error loading application context:",e),"Application context unavailable."}},De=async(e,t,n)=>{try{const r="AIzaSyB0_LxDTFvAkTttyRP442iQER-cHCEbV6w",{GoogleGenAI:a}=await Fm(async()=>{const{GoogleGenAI:e}=await import("./index-BnO7u5j-.js");return{GoogleGenAI:e}},[]),s=new a({apiKey:r}),i=[{role:"user",parts:[{text:`You are an expert technical writer helping to create and improve help documentation for a training management system.\n\nApplication Context:\n${n}\n\nCurrent Help Content:\n${t}\n\nCRITICAL INSTRUCTIONS:\n1. You MUST use action markers for ANY content changes\n2. Never just suggest changes - ALWAYS include the action marker and new content\n3. Even for small edits, use the appropriate action marker\n\nYour role:\n- When user asks to rewrite/improve: Use [REPLACE_CONTENT] with the complete new version\n- When user asks to add something: Use [APPEND_CONTENT] or [PREPEND_CONTENT] \n- When user asks to insert at cursor: Use [INSERT_AT_CURSOR]\n- Always follow action markers with the actual content\n\nMANDATORY ACTION MARKERS:\n- [REPLACE_CONTENT] - Replace all content with new version\n- [INSERT_AT_CURSOR] - Insert content at cursor position  \n- [APPEND_CONTENT] - Add content to the end\n- [PREPEND_CONTENT] - Add content to the beginning\n\nEXAMPLE RESPONSE:\nUser: "Rewrite this to be clearer"\nYour response: "I'll rewrite this content for better clarity:\n\n[REPLACE_CONTENT]\n# Clear Help Section\nThis section explains the feature in simple terms...\n(rest of the new content)"\n\nALWAYS use action markers - never just provide suggestions without them!`}]},...O.map(e=>({role:"user"===e.role?"user":"model",parts:[{text:e.content}]})),{role:"user",parts:[{text:e}]}],o=await s.models.generateContent({model:"gemini-2.0-flash-exp",contents:i});return o.text.trim()}catch(r){throw console.error("Error with AI service:",r),new Error(`AI service error: ${r.message||"Unknown error"}`)}},Me=z.useCallback(e=>{console.log("Rendering preview for content:",e.substring(0,100)+"...");let t=e;t=t.replace(/^### (.*$)/gm,'<h3 class="text-lg font-semibold mb-2 mt-4">$1</h3>'),t=t.replace(/^## (.*$)/gm,'<h2 class="text-xl font-semibold mb-3 mt-6">$1</h2>'),t=t.replace(/^# (.*$)/gm,'<h1 class="text-2xl font-bold mb-4">$1</h1>'),t=t.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>"),t=t.replace(/\*(.*?)\*/g,"<em>$1</em>"),t=t.replace(/`([^`]+)`/g,'<code class="px-1 py-0.5 bg-slate-100 rounded">$1</code>'),t=t.replace(/\[(.*?)\]\((.*?)\)/g,'<a href="$2" class="text-cyan-600 hover:underline">$1</a>');const n=t.split("\n");let r=!1,s=[];for(let a=0;a<n.length;a++){const e=n[a].trim();if(e.startsWith("- "))r||(r=!0,s=[]),s.push(e.substring(2));else{if(r&&s.length>0){const e=`<ul class="list-disc ml-6 mb-4">${s.map(e=>`<li>${e}</li>`).join("")}</ul>`;n[a-s.length]=e;for(let t=a-s.length+1;t<a;t++)n[t]="";r=!1,s=[]}e&&!e.startsWith("<")&&(n[a]=`<p class="mb-4">${e}</p>`)}}if(r&&s.length>0){const e=`<ul class="list-disc ml-6 mb-4">${s.map(e=>`<li>${e}</li>`).join("")}</ul>`;n[n.length-s.length]=e;for(let t=n.length-s.length+1;t<n.length;t++)n[t]=""}return t=n.join("\n"),t=t.replace(/\{\{\s*([a-zA-Z0-9_.-]+)\s*\}\}/g,(e,t)=>{const n=L.find(e=>e.key===t);if(n)return`<span class="bg-cyan-100 text-cyan-800 px-1 rounded" title="${t}">${n.value}</span>`;try{const e=a(t);if(e!==t)return`<span class="bg-cyan-100 text-cyan-800 px-1 rounded" title="${t}">${e}</span>`}catch{}return e}),t},[L]),Re=z.useCallback((e,t)=>{e.preventDefault();const n=xe.current?.getBoundingClientRect();n&&("drag"===t?(he(!0),fe({x:e.clientX-oe.x,y:e.clientY-oe.y})):(ge(!0),be({x:e.clientX,y:e.clientY,width:n.width,height:n.height})))},[oe]),Ue=z.useCallback(e=>{if(de){const t=e.clientX-pe.x,n=e.clientY-pe.y,r=window.innerWidth-ce.width*window.innerWidth/100,a=window.innerHeight-ce.height*window.innerHeight/100;le({x:Math.max(0,Math.min(t,r)),y:Math.max(0,Math.min(n,a))})}else if(me){const t=e.clientX-ve.x,n=e.clientY-ve.y,r=Math.max(400,ve.width+t),a=Math.max(300,ve.height+n),s=Math.min(95,r/window.innerWidth*100),i=Math.min(95,a/window.innerHeight*100);ue({width:s,height:i})}},[de,me,pe,ve,ce]),Fe=z.useCallback(()=>{he(!1),ge(!1)},[]);return z.useEffect(()=>{if(de||me)return document.addEventListener("mousemove",Ue),document.addEventListener("mouseup",Fe),document.body.style.userSelect="none",()=>{document.removeEventListener("mousemove",Ue),document.removeEventListener("mouseup",Fe),document.body.style.userSelect=""}},[de,me,Ue,Fe]),z.useEffect(()=>{if(e&&0===oe.x&&0===oe.y){const e=(window.innerWidth-ce.width*window.innerWidth/100)/2,t=(window.innerHeight-ce.height*window.innerHeight/100)/2;le({x:e,y:t})}},[e,oe,ce]),z.useEffect(()=>{const t=t=>{if("Escape"===t.key&&t.ctrlKey&&e){t.preventDefault(),ue({width:80,height:80});const e=(window.innerWidth-80*window.innerWidth/100)/2,n=(window.innerHeight-80*window.innerHeight/100)/2;le({x:e,y:n})}};if(e)return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[e]),e?l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[9999]",children:l.jsxs("div",{ref:xe,className:"bg-white rounded-lg shadow-2xl flex flex-col absolute",style:{width:`${ce.width}vw`,height:`${ce.height}vh`,left:`${oe.x}px`,top:`${oe.y}px`,minWidth:"400px",minHeight:"300px",maxWidth:"95vw",maxHeight:"95vh"},children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200 cursor-move bg-slate-50 rounded-t-lg select-none",onMouseDown:e=>Re(e,"drag"),title:"Drag to move  Ctrl+Esc to reset position and size",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("div",{className:"flex flex-col space-y-1",children:[l.jsxs("div",{className:"flex space-x-1",children:[l.jsx("div",{className:"w-1 h-1 bg-slate-400 rounded-full"}),l.jsx("div",{className:"w-1 h-1 bg-slate-400 rounded-full"})]}),l.jsxs("div",{className:"flex space-x-1",children:[l.jsx("div",{className:"w-1 h-1 bg-slate-400 rounded-full"}),l.jsx("div",{className:"w-1 h-1 bg-slate-400 rounded-full"})]})]}),l.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:a("helpEditor")}),i&&l.jsx("span",{className:"text-sm text-slate-600",children:i.title})]}),l.jsxs("div",{className:"flex items-center space-x-2",onMouseDown:e=>e.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"text",value:G,onChange:e=>Y(e.target.value),placeholder:a("helpEditorFileName"),className:"px-2 py-1 text-sm border border-slate-300 rounded"}),l.jsx("button",{onClick:()=>{G&&i&&q({type:"rename",original:i.title,target:G})},className:"px-2 py-1 text-sm bg-blue-500 text-white rounded hover:bg-blue-600",title:a("helpEditorRename"),children:a("helpEditorRename")}),l.jsx("input",{type:"text",value:J,onChange:e=>Q(e.target.value),placeholder:a("helpEditorFilePath"),className:"px-2 py-1 text-sm border border-slate-300 rounded"}),l.jsx("button",{onClick:()=>{J&&i&&q({type:"move",original:i.id,target:J})},className:"px-2 py-1 text-sm bg-green-500 text-white rounded hover:bg-green-600",title:a("helpEditorMove"),children:a("helpEditorMove")})]}),l.jsx("button",{onClick:t,className:"text-slate-400 hover:text-slate-600",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),l.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[l.jsxs("div",{className:`border-r border-slate-200 transition-all duration-300 ${"none"===E?"w-0":"w-80"} overflow-hidden`,children:["ui-text"===E&&l.jsxs("div",{className:"h-full flex flex-col",children:[l.jsxs("div",{className:"p-4 border-b border-slate-200",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"font-semibold text-slate-800",children:a("helpEditorUITextVariables")}),l.jsxs("select",{value:P,onChange:e=>I(e.target.value),className:"px-2 py-1 border border-slate-300 rounded text-sm",children:[l.jsx("option",{value:"en",children:"English"}),l.jsx("option",{value:"sv",children:"Svenska"})]})]}),l.jsx("input",{type:"text",value:U,onChange:e=>F(e.target.value),placeholder:a("helpEditorSearchVariables"),className:"w-full px-3 py-2 border border-slate-300 rounded text-sm"})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:l.jsx("div",{className:"space-y-2",children:0===M.length&&""===U.trim()?l.jsxs("div",{className:"text-center text-slate-500 py-4",children:[l.jsx("p",{children:"Loading variables..."}),l.jsxs("p",{className:"text-xs mt-2",children:["Total loaded: ",L.length," | Language: ",P]})]}):0===M.length?l.jsxs("div",{className:"text-center text-slate-500 py-4",children:[l.jsx("p",{children:"No variables match your search"}),l.jsxs("p",{className:"text-xs mt-2",children:["Total available: ",L.length]})]}):M.map(e=>l.jsxs("div",{className:"p-2 border border-slate-200 rounded cursor-pointer hover:bg-slate-50",onDoubleClick:()=>Te(`{{${e.key}}}`),title:a("helpEditorDoubleClickInsert"),children:[l.jsx("div",{className:"font-mono text-sm text-cyan-600",children:e.key}),l.jsx("div",{className:"text-sm text-slate-600 truncate",children:e.value})]},e.key))})})]}),"ai"===E&&l.jsxs("div",{className:"h-full flex flex-col",children:[l.jsxs("div",{className:"p-4 border-b border-slate-200",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h3",{className:"font-semibold text-slate-800",children:a("helpEditorAIAssistant")}),l.jsxs("button",{onClick:()=>$([]),className:"px-2 py-1 bg-red-100 text-red-700 rounded text-xs hover:bg-red-200 flex items-center space-x-1",title:"Clear chat history",children:[l.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),l.jsx("span",{children:"Clear"})]})]}),l.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[l.jsx("button",{onClick:async()=>{await Ee('[REPLACE_CONTENT]\nAlign this content with Spiris tone and voice guidelines:\n\nTONE REQUIREMENTS:\n- ENKLA (Simple): Use everyday language, avoid technical jargon, be intuitive and direct\n- ENGAGERADE (Engaging): Be helpful, encouraging, and accessible like a knowledgeable colleague  \n- MNSKLIGA (Human): Write conversationally, focus on real benefits, acknowledge life outside work\n\nTERMINOLOGY:\n- Use "funktioner" instead of "produkt/system/program/applikation"\n- Use "plattform/ekonomiplattform" for the software\n- Use "abonnemang" instead of "avtal/licens"\n- Use "bokfringen/bokfring" instead of "Visma eEkonomi"\n- Replace "Visma/Visma Spcs" with "Spiris"\n\nPlease rewrite to match these guidelines while keeping the same information and structure.')},disabled:V||!c.trim(),className:"px-3 py-1 bg-blue-100 text-blue-700 rounded text-xs hover:bg-blue-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:" Align with tone guidelines"}),"sv"!==P&&l.jsx("button",{onClick:async()=>{const e=`[REPLACE_CONTENT]\nSync this ${"en"===P?"English":P} content with the Swedish version.\n\nPlease translate the Swedish version of this help content to ${"en"===P?"English":P}, maintaining:\n- The same structure and formatting\n- Spiris tone and voice (simple, engaging, human)  \n- Proper terminology for the target language\n- Cultural appropriateness for the target audience\n\nKeep all markdown formatting, headings, lists, and UI element references intact.`;await Ee(e)},disabled:V||!c.trim(),className:"px-3 py-1 bg-green-100 text-green-700 rounded text-xs hover:bg-green-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:" Sync with Swedish version"})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:l.jsxs("div",{className:"space-y-4",children:[O.map((e,t)=>l.jsxs("div",{children:[l.jsxs("div",{className:"p-3 rounded-lg "+("user"===e.role?"bg-blue-100 text-blue-800 ml-4":"bg-slate-100 text-slate-800 mr-4"),children:[l.jsx("div",{className:"whitespace-pre-wrap text-sm",children:e.content}),e.appliedChanges&&l.jsx("div",{className:"mt-2 p-2 bg-green-50 border border-green-200 rounded",children:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),l.jsxs("span",{className:"text-green-700 text-xs font-medium",children:["Applied: ",e.appliedChanges.type.replace("_"," ").toLowerCase()]}),l.jsxs("span",{className:"text-green-600 text-xs",children:[Math.abs(e.appliedChanges.newContent.length-e.appliedChanges.oldContent.length)," chars changed"]})]})})]}),"assistant"===e.role&&!e.appliedChanges&&(()=>{const t=Ie(e.content);return t.length>0?l.jsx("div",{className:"flex flex-wrap gap-2 mt-2 mr-4",children:t.map((e,t)=>l.jsxs("button",{onClick:()=>(e=>{const t=`Apply AI suggestion?\n\nAction: ${e.type}\nContent: ${e.content.substring(0,100)}${e.content.length>100?"...":""}`;if(confirm(t))switch(e.type){case"REPLACE_CONTENT":u(e.content);break;case"INSERT_AT_CURSOR":Te(e.content);break;case"APPEND_CONTENT":u(t=>t+"\n\n"+e.content);break;case"PREPEND_CONTENT":u(t=>e.content+"\n\n"+t)}})(e),className:"px-3 py-1 bg-cyan-500 text-white rounded text-xs hover:bg-cyan-600 transition-colors",title:`Apply ${e.type}: ${e.content.substring(0,50)}...`,children:["Apply ",e.type.replace("_"," ").toLowerCase()]},t))}):null})()]},t)),V&&l.jsx("div",{className:"bg-slate-100 text-slate-800 mr-4 p-3 rounded-lg",children:l.jsx("div",{className:"animate-pulse",children:a("helpEditorThinking")})})]})}),l.jsx("div",{className:"p-4 border-t border-slate-200",children:l.jsxs("form",{onSubmit:e=>{e.preventDefault(),Ee(H)},className:"flex space-x-2",children:[l.jsx("input",{type:"text",value:H,onChange:e=>B(e.target.value),placeholder:a("helpEditorAIPlaceholder"),className:"flex-1 px-3 py-2 border border-slate-300 rounded text-sm",disabled:V}),l.jsx("button",{type:"submit",disabled:V||!H.trim(),className:"px-4 py-2 bg-cyan-500 text-white rounded text-sm hover:bg-cyan-600 disabled:opacity-50",children:a("helpEditorSend")})]})})]})]}),l.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[l.jsxs("div",{className:"flex flex-col transition-all duration-300 "+(k?"w-1/2":"w-full"),children:[l.jsxs("div",{className:"p-2 border-b border-slate-200 flex items-center space-x-2 overflow-x-auto",children:[l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("button",{onClick:()=>Ae("**"),className:"p-2 hover:bg-slate-100 rounded",title:"Bold",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 4h8a4 4 0 010 8H6m0-8v8m0 0h8a4 4 0 010 8H6"})})}),l.jsx("button",{onClick:()=>Ae("*"),className:"p-2 hover:bg-slate-100 rounded",title:"Italic",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 4v16m2-16v16"})})}),l.jsx("div",{className:"w-px h-6 bg-slate-300 mx-2"}),l.jsx("button",{onClick:()=>Te("# "),className:"p-2 hover:bg-slate-100 rounded text-sm font-semibold",title:"Heading 1",children:"H1"}),l.jsx("button",{onClick:()=>Te("## "),className:"p-2 hover:bg-slate-100 rounded text-sm font-semibold",title:"Heading 2",children:"H2"}),l.jsx("button",{onClick:()=>Te("### "),className:"p-2 hover:bg-slate-100 rounded text-sm font-semibold",title:"Heading 3",children:"H3"}),l.jsx("div",{className:"w-px h-6 bg-slate-300 mx-2"}),l.jsx("button",{onClick:()=>Te("[Link text](URL)"),className:"p-2 hover:bg-slate-100 rounded",title:"Link",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),l.jsx("button",{onClick:()=>Te("![Alt text](image-url)"),className:"p-2 hover:bg-slate-100 rounded",title:"Image",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),l.jsx("div",{className:"w-px h-6 bg-slate-300 mx-2"}),l.jsx("button",{onClick:()=>Te("- "),className:"p-2 hover:bg-slate-100 rounded",title:"Bullet List",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})}),l.jsx("button",{onClick:()=>Te("1. "),className:"p-2 hover:bg-slate-100 rounded",title:"Numbered List",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),l.jsx("button",{onClick:()=>Te("| Column 1 | Column 2 | Column 3 |\n|----------|----------|----------|\n| Cell 1   | Cell 2   | Cell 3   |\n"),className:"p-2 hover:bg-slate-100 rounded",title:"Table",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M3 14h18m-9-4v8m-7 0V4a1 1 0 011-1h16a1 1 0 011 1v16a1 1 0 01-1 1H5a1 1 0 01-1-1z"})})})]}),l.jsx("div",{className:"flex-1"}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("button",{onClick:()=>_("ui-text"===E?"none":"ui-text"),className:"p-2 rounded "+("ui-text"===E?"bg-cyan-100 text-cyan-600":"hover:bg-slate-100"),title:a("helpEditorUITextVariables"),children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a1.994 1.994 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})})}),l.jsx("button",{onClick:()=>_("ai"===E?"none":"ai"),className:"p-2 rounded "+("ai"===E?"bg-cyan-100 text-cyan-600":"hover:bg-slate-100"),title:a("helpEditorAIAssistant"),children:l.jsx("span",{className:"text-cyan-500 text-lg",children:""})}),l.jsx("button",{onClick:()=>{""===c.trim()?u("# Help Section\n\nThis is sample content for testing.\n\n## Getting Started\n1. Step one\n2. Step two\n3. Step three"):_e("APPEND_CONTENT","\n\n## AI Test Addition\n\nThis section was added by the AI diff test.\n\n- Feature A\n- Feature B\n- Feature C")},className:"p-2 rounded bg-orange-100 text-orange-600 hover:bg-orange-200",title:"Test Diff System (adds content instead of replacing)",children:""}),l.jsx("button",{onClick:()=>{n&&Se(n)},className:"p-2 rounded bg-green-100 text-green-600 hover:bg-green-200",title:"Reload original help content",children:""}),l.jsx("button",{onClick:()=>w(!k),className:"p-2 rounded "+(k?"bg-green-100 text-green-600":"hover:bg-slate-100"),title:a("helpEditorTogglePreview"),children:l.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),l.jsx("div",{className:"flex-1 overflow-hidden",children:p?l.jsx("div",{className:"flex items-center justify-center h-full",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-cyan-500"})}):v?l.jsx("div",{className:"flex items-center justify-center h-full text-red-600",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"mb-2",children:a("helpEditorErrorLoading")}),l.jsx("p",{className:"text-sm",children:v})]})}):l.jsx("textarea",{ref:ye,value:c,onChange:e=>je(e.target.value),onSelect:Ne,onClick:Ne,onKeyUp:Ne,placeholder:a("helpEditorMarkdownPlaceholder"),className:"w-full h-full p-4 border-none outline-none resize-none font-mono text-sm"})})]}),k&&l.jsxs("div",{className:"w-1/2 border-l border-slate-200 flex flex-col",children:[l.jsx("div",{className:"p-2 border-b border-slate-200 bg-slate-50",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h3",{className:"font-semibold text-slate-800",children:a("helpEditorPreview")}),l.jsxs("div",{className:"flex items-center space-x-2",children:[m&&l.jsxs("div",{className:"flex rounded-md border border-slate-300 overflow-hidden",children:[l.jsx("button",{onClick:()=>{j(!1),N(!1)},className:"px-2 py-1 text-xs "+(S||C?"bg-white text-slate-700 hover:bg-slate-50":"bg-blue-500 text-white"),children:" Current"}),l.jsx("button",{onClick:()=>{j(!1),N(!0)},className:"px-2 py-1 text-xs border-l border-slate-300 "+(C?"bg-green-500 text-white":"bg-white text-slate-700 hover:bg-slate-50"),children:" Original"}),l.jsx("button",{onClick:()=>{j(!0),N(!1)},className:"px-2 py-1 text-xs border-l border-slate-300 "+(S?"bg-orange-500 text-white":"bg-white text-slate-700 hover:bg-slate-50"),children:" Diff"})]}),S&&m&&l.jsxs("div",{className:"flex rounded-md border border-slate-300 overflow-hidden ml-2",children:[l.jsx("button",{onClick:()=>A("line"),className:"px-2 py-1 text-xs "+("line"===T?"bg-purple-500 text-white":"bg-white text-slate-700 hover:bg-slate-50"),title:"Line-by-line diff (best for large changes)",children:" Lines"}),l.jsx("button",{onClick:()=>A("sentence"),className:"px-2 py-1 text-xs border-l border-slate-300 "+("sentence"===T?"bg-purple-500 text-white":"bg-white text-slate-700 hover:bg-slate-50"),title:"Sentence-level diff (balanced view)",children:" Sentences"}),l.jsx("button",{onClick:()=>A("word"),className:"px-2 py-1 text-xs border-l border-slate-300 "+("word"===T?"bg-purple-500 text-white":"bg-white text-slate-700 hover:bg-slate-50"),title:"Word-by-word diff (detailed view)",children:" Words"})]}),l.jsxs("span",{className:"text-xs text-slate-500",children:[c.length," chars"]})]})]})}),l.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:""===c.trim()?l.jsx("div",{className:"text-slate-500 italic",children:"Start writing content in the editor to see the preview..."}):C?l.jsxs("div",{children:[l.jsxs("div",{className:"mb-3 p-2 bg-green-50 border border-green-200 rounded text-sm text-green-700",children:[" ",l.jsx("strong",{children:"Original Content"})," - This is how the content looked when you opened the editor"]}),l.jsx("div",{className:"prose prose-slate max-w-none",dangerouslySetInnerHTML:{__html:Me(d)}})]}):S&&m?l.jsxs("div",{children:[l.jsxs("div",{className:"mb-3 p-2 bg-orange-50 border border-orange-200 rounded text-sm text-orange-700",children:[" ",l.jsx("strong",{children:"Changes"})," - Showing differences between original and current content"]}),l.jsx("div",{className:"max-w-none",dangerouslySetInnerHTML:{__html:(()=>{const e=e=>e.replace(/\r\n/g,"\n").replace(/\r/g,"\n").replace(/[ \t]+/g," ").replace(/\n+/g,"\n").trim(),t=e(d),n=e(c);if(t===n)return'<div class="text-slate-500 italic">No content changes to show (only whitespace differences)</div>';const r=e=>{switch(T){case"line":return e.split("\n");case"sentence":return e.split(/([.!?]+\s+)/g).filter(e=>e.length>0);default:return e.split(/(\s+)/).filter(e=>e.length>0)}},a=r(t),s=r(n),i=[];let o=0,l=0;for(;o<a.length||l<s.length;){if(o>=a.length){i.push({type:"added",content:s.slice(l).join("")});break}if(l>=s.length){i.push({type:"removed",content:a.slice(o).join("")});break}if(a[o]===s[l])i.push({type:"same",content:a[o]}),o++,l++;else{let e=!1;const t="line"===T?5:10;for(let n=l+1;n<Math.min(l+t,s.length);n++)if(a[o]===s[n]){i.push({type:"added",content:s.slice(l,n).join("")}),l=n,e=!0;break}if(!e)for(let n=o+1;n<Math.min(o+t,a.length);n++)if(s[l]===a[n]){i.push({type:"removed",content:a.slice(o,n).join("")}),o=n,e=!0;break}e||(i.push({type:"removed",content:a[o]}),i.push({type:"added",content:s[l]}),o++,l++)}}const u=[];let h={type:i[0]?.type||"same",content:""};for(const c of i)c.type===h.type?h.content+=c.content:(h.content&&u.push({...h}),h={type:c.type,content:c.content});h.content&&u.push(h);let m='<div class="space-y-2">';for(const c of u){const e=c.content.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br>");if("same"===c.type){const t="line"===T?500:200;if(c.content.length>t){const e=c.content.substring(0,t/2),n=c.content.substring(c.content.length-t/2);m+=`<div class="text-slate-600 text-sm">\n            <span>${e.replace(/\n/g,"<br>")}</span>\n            <span class="text-slate-400 italic"> ... (${c.content.length-t} chars omitted) ... </span>\n            <span>${n.replace(/\n/g,"<br>")}</span>\n          </div>`}else m+=`<div class="text-slate-600 text-sm">${e}</div>`}else"removed"===c.type?m+=`<div class="bg-red-100 text-red-800 px-3 py-2 rounded border-l-4 border-red-400">\n          <span class="font-bold text-red-600 mr-2"></span>\n          <span class="font-mono">${e}</span>\n        </div>`:"added"===c.type&&(m+=`<div class="bg-green-100 text-green-800 px-3 py-2 rounded border-l-4 border-green-400">\n          <span class="font-bold text-green-600 mr-2">+</span>\n          <span class="font-mono">${e}</span>\n        </div>`)}m+="</div>";const g=u.filter(e=>"added"===e.type).reduce((e,t)=>e+t.content.length,0),p=u.filter(e=>"removed"===e.type).reduce((e,t)=>e+t.content.length,0);return m=`<div class="mb-4 p-3 bg-blue-50 border border-blue-200 rounded">\n      <div class="text-sm text-blue-800">\n        <strong>Changes Summary (${T} level):</strong> \n        <span class="text-green-600">+${g} chars added</span>, \n        <span class="text-red-600">-${p} chars removed</span>\n      </div>\n    </div>`+m,m})()}})]}):l.jsxs("div",{children:[m&&l.jsxs("div",{className:"mb-3 p-2 bg-blue-50 border border-blue-200 rounded text-sm text-blue-700",children:[" ",l.jsx("strong",{children:"Current Content"})," - This is your edited version with unsaved changes"]}),l.jsx("div",{className:"prose prose-slate max-w-none",dangerouslySetInnerHTML:{__html:Me(c)}})]})})]})]})]}),l.jsx("div",{className:"p-4 border-t border-slate-200 bg-slate-50",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"flex items-center space-x-4",children:K&&l.jsxs("div",{className:"text-sm text-slate-600",children:[a("helpEditorPendingOperation"),": ",K.type,' "',K.original,'"  "',K.target,'"']})}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("select",{value:ee,onChange:e=>te(e.target.value),className:"px-3 py-1 border border-slate-300 rounded text-sm",children:[l.jsx("option",{value:"main",children:"main"}),l.jsx("option",{value:"develop",children:"develop"}),l.jsx("option",{value:"feature/help-updates",children:"feature/help-updates"})]}),l.jsx("input",{type:"text",value:re,onChange:e=>ae(e.target.value),placeholder:a("helpEditorCommitMessage"),className:"px-3 py-1 border border-slate-300 rounded text-sm w-64"}),l.jsx("button",{onClick:async()=>{if(re.trim()){ie(!0);try{const e="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",r="/api/help/commit";console.log(` Committing via internal API for section: ${n}`);const a=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sectionId:n,language:P,content:c,commitMessage:re.trim(),token:e})});if(!a.ok){const e=await a.json();throw new Error(`API error: ${a.status} - ${e.error||"Unknown error"}\n${e.details||""}`)}const s=await a.json();console.log(" Successfully committed via API:",s),ae(""),h(c),alert(` Changes committed successfully!\n\nFile: ${s.path||"help content"}\nCommit: ${s.commit?.sha?.substring(0,7)||"success"}\n\nThe help content will refresh automatically.`),await wb.clearAllCaches(),console.log(" Waiting 2 seconds for GitHub propagation..."),await new Promise(e=>setTimeout(e,2e3)),t()}catch(sy){console.error("Error committing to GitHub:",sy),alert(` Commit failed: ${sy.message}\n\nPlease check your GitHub token has write access to peka01/ntr-test repository.`)}finally{ie(!1)}}},disabled:!re.trim()||se,className:"px-4 py-1 bg-green-500 text-white rounded text-sm hover:bg-green-600 disabled:opacity-50",children:a(se?"helpEditorCommitting":"helpEditorCommit")})]})]})}),l.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 cursor-se-resize",onMouseDown:e=>Re(e,"resize"),style:{background:"linear-gradient(-45deg, transparent 0%, transparent 40%, #94a3b8 40%, #94a3b8 60%, transparent 60%)"},title:"Drag to resize"})]})}):null},Mb={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_ENV:"development",VITE_APP_URL:"http://localhost:5173",VITE_GEMINI_API_KEY:"AIzaSyB0_LxDTFvAkTttyRP442iQER-cHCEbV6w",VITE_GITHUB_TOKEN:"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",VITE_SUPABASE_ANON_KEY:"sb_publishable__xCPNwfV7SwmDPj7sYABBw_ZHFJBGr7",VITE_SUPABASE_URL:"https://bumphnqhbbtmlhiwokmy.supabase.co"},Rb=(e,t=15)=>e.length<=t?e:e.substring(0,t)+"...",Ub=({section:e,svFallback:t,renderFn:n,renderContentAsText:r,onNavigate:a,overviewSectionId:s,categorySectionId:i})=>{const{t:o}=Tv();return e?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"mb-6",children:l.jsxs("nav",{className:"flex items-center space-x-2 text-sm text-slate-600 text-left overflow-x-auto","aria-label":"Breadcrumb",children:[s?l.jsxs("button",{className:"flex items-center space-x-1 text-cyan-600 hover:underline hover:text-cyan-700 transition-colors text-left whitespace-nowrap",onClick:()=>a(s),title:o("helpButtonText"),children:[l.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),l.jsx("span",{className:"truncate",children:Rb(o("helpButtonText"))})]}):l.jsxs("span",{className:"flex items-center space-x-1 text-left whitespace-nowrap",title:o("helpButtonText"),children:[l.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),l.jsx("span",{className:"truncate",children:Rb(o("helpButtonText"))})]}),(()=>{const t=l.jsx("svg",{className:"w-4 h-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),n=(e.pathSegments||[]).slice(0,Math.max(0,(e.pathSegments||[]).length-1)),r=[];let s="";return n.forEach((e,n)=>{s=s?`${s}/${e}`:e,r.push(l.jsx(V.Fragment,{children:t},`chevron-${n}`));const o=("string"==typeof i?i:void 0)||s;var c;r.push(l.jsxs("button",{className:"flex items-center space-x-1 capitalize text-cyan-600 hover:underline hover:text-cyan-700 transition-colors text-left whitespace-nowrap",onClick:()=>a(o),title:e,children:[(c=e,c.toLowerCase().includes("admin")||c.toLowerCase().includes("administratr")?l.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}):c.toLowerCase().includes("user")||c.toLowerCase().includes("anvndare")?l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}):l.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5a2 2 0 012-2h4a2 2 0 012 2v2H8V5z"})]})),l.jsx("span",{className:"truncate",children:Rb(e)})]},`seg-${n}`))}),r.push(l.jsx(V.Fragment,{children:t},"chevron-final")),r.push(l.jsxs("button",{className:"flex items-center space-x-1 font-medium text-slate-800 hover:underline hover:text-slate-900 transition-colors text-left whitespace-nowrap",onClick:()=>a(e.id),title:e.title,children:[l.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),l.jsx("span",{className:"truncate",children:Rb(e.title)})]},"leaf")),r})()]})}),l.jsx("div",{className:"prose prose-slate max-w-none overflow-x-auto",style:{userSelect:"text",WebkitUserSelect:"text",MozUserSelect:"text",msUserSelect:"text"},onMouseDown:e=>{e.stopPropagation()},onClick:e=>{e.stopPropagation()},children:l.jsx("div",{style:{whiteSpace:"normal",overflowWrap:"anywhere",wordBreak:"break-word",userSelect:"text",WebkitUserSelect:"text",MozUserSelect:"text",msUserSelect:"text"},children:r(t??e.content)})})]}):l.jsx("div",{className:"text-center text-slate-500 py-8",children:l.jsx("p",{children:o("helpSelectSection")})})},Fb=({isOpen:e,onClose:t,isAdmin:n=!1})=>{const{t:r}=Tv(),{language:a}=Sv(),{context:s}=_v();let i=null;try{i=Cb()}catch(Pe){console.warn("TourProvider not available, AI tour linking will be disabled")}const[o,c]=z.useState(!0),[u,d]=z.useState(""),[h,m]=z.useState(""),[g,p]=z.useState("overview"),[f,v]=z.useState("all"),[b,y]=z.useState([]),[x,k]=z.useState(!0),[w,S]=z.useState(null),[j,C]=z.useState(!1),[N,T]=z.useState(0),[A,E]=z.useState(""),[_,P]=z.useState(""),[I,L]=z.useState([]),[D,M]=z.useState(!1),[R,U]=z.useState([]),[F,O]=z.useState({x:0,y:0}),[$,H]=z.useState({width:1200,height:800}),[B,W]=z.useState(!1),[K,q]=z.useState(!1),[G,Y]=z.useState({x:0,y:0}),[J,Q]=z.useState(""),[X,Z]=z.useState({x:0,y:0}),[ee,te]=z.useState({width:0,height:0}),[ne,re]=z.useState({x:0,y:0}),ae=z.useRef(null),se=z.useRef(null),[ie,oe]=z.useState(new Set);z.useEffect(()=>{const e=setTimeout(()=>{m(u)},300);return()=>clearTimeout(e)},[u]);z.useEffect(()=>{e&&(async()=>{try{k(!0),S(null);const e=await wb.getAllSections(a,!0);y(e)}catch(Pe){console.error("Error loading help content:",Pe),S(Pe),y([]),console.warn("Help content unavailable, but AI chat will still work with additional knowledge sources")}finally{k(!1)}})()},[e,a]),z.useEffect(()=>{if(b.length>0&&(!g||!b.find(e=>e.id===g))){const e=b.find(e=>"overview"===e.id||e.id.endsWith("/overview"))||b[0];e&&p(e.id)}},[b]);const le=V.useMemo(()=>b.filter(e=>{const t=""===h||e.title.toLowerCase().includes(h.toLowerCase())||e.keywords.some(e=>e.toLowerCase().includes(h.toLowerCase())),n="all"===f||e.category===f;return t&&n}),[b,h,f]),ce=V.useCallback(e=>{const t={name:"",path:"",children:new Map};return e.forEach(e=>{const n=e.pathSegments&&e.pathSegments.length>0?e.pathSegments:[e.id];let r=t,a="";for(let t=0;t<n.length;t++){const s=n[t];if(a=a?`${a}/${s}`:s,!r.children.has(s)){const i=t<n.length-1;r.children.set(s,{name:s,path:a,children:new Map,isFolder:i,icon:i?e.icon:void 0,description:i?e.description:void 0})}r=r.children.get(s),t===n.length-1&&(r.section=e)}}),t},[]),ue=V.useMemo(()=>ce(le),[le,ce]);z.useEffect(()=>{if(!g)return;const e=g.replace(/^\/+|\/+$/g,"").split("/").filter(Boolean),t=new Set;let n="";for(let r=0;r<e.length-1;r++)n=n?`${n}/${e[r]}`:e[r],t.add(n);oe(t)},[g]);const de=V.useCallback(e=>{oe(t=>{const n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})},[]),he=e=>{if(e)switch(e){case"settings":return l.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]});case"user":return l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})});default:return null}return null},me=V.useCallback((e,t,n)=>{const a=[],s=Array.from(e.children.values());return s.sort((e,t)=>e.name.localeCompare(t.name,void 0,{numeric:!0})),s.forEach(e=>{const s=e.children.size>0,i=ie.has(e.path),o=e.section&&e.section.id===g,c=8*t;a.push(l.jsxs("div",{className:"flex flex-col",children:[l.jsxs("div",{className:`flex items-center ${o?"bg-cyan-500 text-white":"hover:bg-slate-100 text-slate-700"} rounded-lg`,style:{paddingLeft:c},children:[s?l.jsx("button",{className:"w-6 h-6 flex items-center justify-center text-slate-500 "+(o?"text-white/80":""),onClick:t=>{t.preventDefault(),t.stopPropagation(),de(e.path)},title:r(i?"helpMinimizeTitle":"helpMaximizeTitle"),children:l.jsx("svg",{className:"w-4 h-4 transition-transform "+(i?"rotate-90":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}):l.jsx("span",{className:"w-6 h-6"}),l.jsx("div",{className:"w-5 h-5 flex items-center justify-center mr-2 "+(o?"text-white/80":"text-slate-500"),children:he(e.icon)}),e.section?l.jsxs("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),p(e.section.id),n&&Se(!1)},className:"flex-1 text-left px-3 py-2 rounded-lg ",children:[l.jsx("div",{className:"font-medium",children:e.section.title}),e.section.description&&l.jsx("div",{className:"text-xs opacity-75 mt-1",children:e.section.description}),1===t&&!e.section.description&&l.jsx("div",{className:"text-xs opacity-75 capitalize",children:e.section.category})]}):l.jsxs("div",{className:"flex-1 px-3 py-2",children:[l.jsx("div",{className:"font-medium capitalize",children:e.name}),e.description&&l.jsx("div",{className:"text-xs opacity-75 mt-1",children:e.description})]})]}),s&&i&&l.jsx("div",{className:"mt-1",children:me(e,t+1,n)})]},e.path))}),l.jsx(l.Fragment,{children:a})},[ie,g,r,de,o]);z.useEffect(()=>{if(s&&b.length>0){const e=`${s.screen} ${s.action}`.toLowerCase(),t=["create user","add user","manage vouchers","create training","edit training","creating a new user","editing user","creating new training","editing training","users page","trainings page"],n=["subscribe","unsubscribe","subscription","public view","attendance","subscription page","viewing subscriptions","attendance page","viewing attendance"].some(t=>e.includes(t)),r=t.some(t=>e.includes(t));let a;n?a=b.find(t=>"user"===t.category&&t.keywords.some(t=>e.includes(t.toLowerCase()))):r&&(a=b.find(t=>"admin"===t.category&&t.keywords.some(t=>e.includes(t.toLowerCase()))),a||(e.includes("subscription page")||e.includes("viewing subscriptions")||e.includes("subscription")?a=b.find(e=>"subscriptions"===e.id||e.id.endsWith("/subscriptions")||e.id.includes("subscriptions")):e.includes("attendance page")||e.includes("viewing attendance")||e.includes("attendance")?a=b.find(e=>"attendance"===e.id||e.id.endsWith("/attendance")||e.id.includes("attendance")):e.includes("users page")||e.includes("user")?a=b.find(e=>"user-management"===e.id||e.id.endsWith("/user-management")||e.id.includes("user-management")):(e.includes("trainings page")||e.includes("training"))&&(a=b.find(e=>"training-management"===e.id||e.id.endsWith("/training-management")||e.id.includes("training-management"))))),a||(a=b.find(t=>t.keywords.some(t=>e.includes(t.toLowerCase())))),a&&p(a.id)}},[s,b]),z.useEffect(()=>{if(e){c(!0),Se(!1);const e=Math.min(420,window.innerWidth-32),t=Math.max(400,Math.min(window.innerHeight-32,800)),n=Math.max(16,window.innerWidth-e-16),r=16;H({width:e,height:t}),O({x:n,y:r}),ae.current&&ae.current.focus()}},[e]),z.useEffect(()=>{const n=n=>{"Escape"===n.key&&e&&t()};if(e)return document.addEventListener("keydown",n),()=>document.removeEventListener("keydown",n)},[e,t]);const ge=V.useCallback(e=>{if(!B||!se.current)return;e.preventDefault();const t=e.clientX-G.x,n=e.clientY-G.y,r=se.current.getBoundingClientRect(),a=window.innerWidth-r.width-10,s=window.innerHeight-r.height-10,i=Math.max(10,Math.min(a,t)),o=Math.max(10,Math.min(s,n));O({x:i,y:o})},[B,G]),pe=()=>{W(!1)},fe=(e,t)=>{e.stopPropagation(),e.preventDefault(),Q(t),Z({x:e.clientX,y:e.clientY}),te({width:$.width,height:$.height}),re({x:F.x,y:F.y}),q(!0)},ve=V.useCallback(e=>{if(!K)return;e.preventDefault();const t=e.clientX-X.x,n=e.clientY-X.y;let r=ee.width,a=ee.height,s=ne.x,i=ne.y;J.includes("e")&&(r=ee.width+t),J.includes("w")&&(r=ee.width-t,s=ne.x+t),J.includes("s")&&(a=ee.height+n),J.includes("n")&&(a=ee.height-n,i=ne.y+n);const l=o?320:800,c=o?400:600;r=Math.max(l,r),a=Math.max(c,a);const u=window.innerWidth-20,d=window.innerHeight-20;r=Math.min(u,r),a=Math.min(d,a),s=Math.max(10,Math.min(window.innerWidth-r-10,s)),i=Math.max(10,Math.min(window.innerHeight-a-10,i)),H({width:r,height:a}),O({x:s,y:i})},[K,J,X,ee,ne,o]),be=()=>{q(!1),Q("")};z.useEffect(()=>{if(B||K){const e=B?ge:ve,t=B?pe:be;return document.addEventListener("mousemove",e),document.addEventListener("mouseup",t),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t)}}},[B,K,J]);const ye=b.find(e=>e.id===g),[xe,ke]=z.useState(null),[we,Se]=z.useState(!1),je=V.useCallback(async e=>{if(e.trim()){M(!0),P(""),L([]);try{const c="AIzaSyB0_LxDTFvAkTttyRP442iQER-cHCEbV6w";console.log(" API Key check:",{hasApiKey:!!c,apiKeyLength:c?c.length:0,apiKeyStart:c?c.substring(0,4)+"...":"none",envVars:Object.keys(Mb||{}).filter(e=>e.startsWith("VITE_")),mode:"production",base:"/"});const{GoogleGenAI:u}=await Fm(async()=>{const{GoogleGenAI:e}=await import("./index-BnO7u5j-.js");return{GoogleGenAI:e}},[]),d=new u({apiKey:c});let h="";try{b.length>0&&(h+="## Help Documentation\n\n",b.forEach(e=>{h+=`### ${e.title}\n`,h+=`Category: ${e.category}\n`,h+=`Keywords: ${e.keywords.join(", ")}\n`,h+=`${e.content}\n\n`}))}catch(t){console.warn("Help sections not available, continuing with additional knowledge only:",t)}try{const{getAllSourcesAsText:e,searchSourcesByKeyword:t}=await Fm(async()=>{const{getAllSourcesAsText:e,searchSourcesByKeyword:t}=await import("./aiKnowledgeService-D6LSt3og.js");return{getAllSourcesAsText:e,searchSourcesByKeyword:t}},[]);h+="## Additional System Knowledge\n\n",h+=await e()}catch(a){console.error("Could not load additional knowledge sources:",a),h+="## Additional System Knowledge\n\n",h+="System knowledge sources are currently unavailable.\n\n"}if(s){let e=`## Current Context\n\nUser is currently on screen: **${s.screen}**\nLast action: **${s.action}**\n\n`;Object.keys(s.data).length>0&&(e+=`Current form data:\n\`\`\`json\n${JSON.stringify(s.data,null,2)}\n\`\`\`\n\n`),h+=e}if(i)try{const e=await i.getAvailableTours();e.length>0&&(h+="## Available Guided Tours\n\n",e.forEach(e=>{h+=`### ${e.name}\n`,h+=`ID: ${e.id}\n`,h+=`Description: ${e.description}\n`,h+=`Steps: ${e.steps.length}\n\n`}))}catch(o){console.warn("Could not load tour information:",o)}h.includes("Help Documentation")||h.includes("Additional System Knowledge")||(h="## System Information\n\nThis is a training management system with the following features:\n- User management and roles\n- Training session management\n- Voucher/credit system\n- Attendance tracking\n\n");const{aiManagementService:m}=await Fm(async()=>{const{aiManagementService:e}=await Promise.resolve().then(()=>Qb);return{aiManagementService:e}},void 0),g=[{role:"user",parts:[{text:await m.compileSystemPrompt({context:h,userQuestion:e})}]},...R.map(e=>({role:"user"===e.role?"user":"model",parts:[{text:e.content}]})),{role:"user",parts:[{text:e}]}];console.log(" Conversation history:",R.length,"messages"),console.log(" Current message:",e);const p=(await d.models.generateContent({model:"gemini-2.0-flash-exp",contents:g})).text.trim();console.log(" AI Response:",p),console.log(" Looking for action tags in response...");const f=(e=>{try{return e.replace(/\{\{\s*([a-zA-Z0-9_.-]+)\s*\}\}/g,(e,t)=>{try{const e=r(t);return"string"==typeof e?e:String(e)}catch{return t}})}catch{return e}})(p),v=[];try{const{searchSourcesByKeyword:e}=await Fm(async()=>{const{searchSourcesByKeyword:e}=await import("./aiKnowledgeService-D6LSt3og.js");return{searchSourcesByKeyword:e}},[]);(await e(p)).forEach(e=>{v.some(t=>t.name===e.name)||v.push({name:e.name,type:"knowledge"})}),b.forEach(e=>{(p.toLowerCase().includes(e.title.toLowerCase())||e.keywords.some(e=>p.toLowerCase().includes(e.toLowerCase())))&&(v.some(t=>t.name===e.title)||v.push({name:e.title,id:e.id,type:"help"}))})}catch(l){console.warn("Could not extract sources:",l)}const y=f.replace(/\[action:[^\]]*\]/g,"").trim();P(y),U(t=>[...t,{role:"user",content:e},{role:"assistant",content:y}]);const x=/\[action:([^\]]+)\]/g,k=[];let w;for(;null!==(w=x.exec(p));){const e=w[1],[t,...n]=e.split(" "),r={};n.forEach(e=>{if(e.includes("=")){const[t,n]=e.split("=");r[t]=n.replace(/"/g,"")}}),k.push({type:t,payload:r}),console.log(" Found action:",{type:t,payload:r})}if(console.log(" Total actions found:",k.length),0===k.length){const t=e.toLowerCase(),r=[];(t.includes("g till")||t.includes("navigera")||t.includes("visa")||t.includes("go to")||t.includes("navigate")||t.includes("show"))&&(t.includes("admin")||t.includes("administratr")?r.push({type:"navigate",payload:{view:"admin"}}):t.includes("attendance")||t.includes("nrvaro")||t.includes("incheckning")?r.push({type:"navigate",payload:{view:"attendance"}}):t.includes("public")||t.includes("publik")||t.includes("anmlan")?r.push({type:"navigate",payload:{view:"public"}}):(r.push({type:"navigate",payload:{view:"public"}}),n&&r.push({type:"navigate",payload:{view:"admin"}}))),r.length>0&&(console.log(" Adding default navigation actions:",r),k.push(...r))}_e(k),L(v),E("")}catch(Pe){console.error("Error sending message to AI:",Pe),P(r("aiHelpError"))}finally{M(!1)}}},[b,s,R,r]),Ce=V.useCallback(e=>{if(!e)return null;let t=e;try{t=e.replace(/\{\{\s*([a-zA-Z0-9_.-]+)\s*\}\}/g,(e,t)=>{try{const e=r(t);return"string"==typeof e?e:String(e)}catch{return t}})}catch{}const n=t.split("\n"),a=[];let s=[],i=!1,o=!1;for(let r=0;r<n.length;r++){const e=n[r].trim();if(e.startsWith("# ")){if(i&&s.length>0){const e=o?"ol":"ul",t=o?"list-decimal mb-3 ml-4":"list-disc mb-3 ml-4";a.push(V.createElement(e,{key:`list-${r}`,className:t},s.map((e,t)=>l.jsx("li",{className:"mb-1",children:Ne(e)},t)))),s=[],i=!1,o=!1}a.push(l.jsx("h1",{className:"text-2xl font-bold mb-3 mt-4",children:Ne(e.substring(2))},r))}else if(e.startsWith("## ")){if(i&&s.length>0){const e=o?"ol":"ul",t=o?"list-decimal mb-3 ml-4":"list-disc mb-3 ml-4";a.push(V.createElement(e,{key:`list-${r}`,className:t},s.map((e,t)=>l.jsx("li",{className:"mb-1",children:Ne(e)},t)))),s=[],i=!1,o=!1}a.push(l.jsx("h2",{className:"text-xl font-semibold mb-2 mt-4",children:Ne(e.substring(3))},r))}else if(e.startsWith("### ")){if(i&&s.length>0){const e=o?"ol":"ul",t=o?"list-decimal mb-3 ml-4":"list-disc mb-3 ml-4";a.push(V.createElement(e,{key:`list-${r}`,className:t},s.map((e,t)=>l.jsx("li",{className:"mb-1",children:Ne(e)},t)))),s=[],i=!1,o=!1}a.push(l.jsx("h3",{className:"text-lg font-semibold mb-2 mt-3",children:Ne(e.substring(4))},r))}else if(e.startsWith("- "))i||(i=!0,o=!1),s.push(e.substring(2));else if(/^\d+\.\s/.test(e)){i||(i=!0,o=!0);const t=e.replace(/^\d+\.\s/,"");s.push(t)}else if(""===e){if(i&&s.length>0){const e=o?"ol":"ul",t=o?"list-decimal mb-3 ml-4":"list-disc mb-3 ml-4";a.push(V.createElement(e,{key:`list-${r}`,className:t},s.map((e,t)=>l.jsx("li",{className:"mb-1",children:Ne(e)},t)))),s=[],i=!1,o=!1}const e=a[a.length-1];if(e&&"object"==typeof e&&"type"in e){const t=e.type;"p"!==t&&"ul"!==t&&"ol"!==t&&"h1"!==t&&"h2"!==t&&"h3"!==t&&a.push(l.jsx("br",{},r))}}else{if(i&&s.length>0){const e=o?"ol":"ul",t=o?"list-decimal mb-3 ml-4":"list-disc mb-3 ml-4";a.push(V.createElement(e,{key:`list-${r}`,className:t},s.map((e,t)=>l.jsx("li",{className:"mb-1",children:Ne(e)},t)))),s=[],i=!1,o=!1}e&&a.push(l.jsx("p",{className:"mb-3",children:Ne(e)},r))}}if(i&&s.length>0){const e=o?"ol":"ul",t=o?"list-decimal mb-3 ml-4":"list-disc mb-3 ml-4";a.push(V.createElement(e,{key:"final-list",className:t},s.map((e,t)=>l.jsx("li",{className:"mb-1",children:Ne(e)},t))))}return l.jsx(l.Fragment,{children:a})},[r]),Ne=V.useCallback(e=>{if(!e)return e;const t=[];let n=e,r=0;for(;n.includes("**");){const e=n.match(/\*\*(.*?)\*\*/);if(!e)break;{const a=n.substring(0,e.index);a&&t.push(a),t.push(l.jsx("strong",{children:e[1]},r++)),n=n.substring(e.index+e[0].length)}}for(;n.includes("*");){const e=n.match(/\*(.*?)\*/);if(!e)break;{const a=n.substring(0,e.index);a&&t.push(a),t.push(l.jsx("em",{children:e[1]},r++)),n=n.substring(e.index+e[0].length)}}return n&&t.push(n),l.jsx(l.Fragment,{children:t})},[]),Te=V.useCallback(e=>{if(!e)return"";let t=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/'/g,"&#39;");return t=t.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>"),t=t.replace(/\*(.*?)\*/g,"<em>$1</em>"),t=t.replace(/`([^`]+)`/g,'<code class="px-1 py-0.5 bg-slate-100 rounded">$1</code>'),t=t.replace(/\[(.*?)\]\((https?:\/\/[^\s)]+)\)/g,(e,t,n)=>{const r=n.startsWith("http")&&!n.includes(window.location.hostname);return`<a href="${n}"${r?' target="_blank" rel="noopener noreferrer"':""} class="${r?"external-source-link text-green-600 font-semibold hover:text-green-700":"text-cyan-600 hover:underline"}">${t}${r?" ":""}</a>`}),t=t.replace(/\n/g,"<br>"),t},[]),Ae=e=>{const{type:t,payload:n}=e||{type:"",payload:{}};if("navigate"===t)switch((n?.view||"").toLowerCase()){case"public":return r("aiActionNavigatePublic");case"admin":return r("aiActionNavigateAdmin");case"attendance":return r("aiActionNavigateAttendance");default:return r("aiActionNavigate")}return"open_help"===t?r("aiActionOpenHelp"):"set_search"===t?r("aiActionSetSearch",{value:String(n?.value||"")}):r("start_tour"===t?"aiActionStartTour":"add_user"===t?"aiActionAddUser":"add_training"===t?"aiActionAddTraining":"create_tour"===t?"aiActionCreateTour":"create_shoutout"===t?"aiActionCreateShoutout":"aiActionUnknown")},[Ee,_e]=z.useState([]);return z.useEffect(()=>{A.trim().length>0&&_e([])},[A]),z.useEffect(()=>{const e=e=>{const t=e;if(!t.detail)return;const{type:n,payload:r}=t.detail;"open_help"===n&&r?.id&&p(String(r.id))};return window.addEventListener("ai-action",e),()=>window.removeEventListener("ai-action",e)},[]),e?l.jsxs(l.Fragment,{children:[l.jsxs("div",{ref:se,className:"fixed bg-white rounded-2xl shadow-2xl flex flex-col border border-slate-200 z-50","data-tour":"help-window",style:{left:`${F.x}px`,top:`${F.y}px`,width:o?`${Math.min($.width,window.innerWidth-32)}px`:`${$.width}px`,height:o?`${Math.min($.height,window.innerHeight-32)}px`:`${$.height}px`,cursor:B?"grabbing":"default",userSelect:"auto"},children:[l.jsxs("div",{className:`relative z-20 flex items-center justify-between ${o?"p-4":"p-6"} border-b border-slate-200 cursor-move`,onMouseDown:e=>{if(!se.current)return;const t=e.target;if(t.closest(".prose")||t.closest("p")||t.closest("h1, h2, h3")||t.closest("ul, li")||t.closest("strong, em")||"P"===t.tagName||"H1"===t.tagName||"H2"===t.tagName||"H3"===t.tagName||"UL"===t.tagName||"LI"===t.tagName||"STRONG"===t.tagName||"EM"===t.tagName)return;e.preventDefault(),e.stopPropagation();const n=se.current.getBoundingClientRect();Y({x:e.clientX-n.left,y:e.clientY-n.top}),W(!0)},onClick:()=>{se.current&&(se.current.style.zIndex="9999")},style:{userSelect:"none"},children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"w-4 h-4 rounded-full "+(x?"bg-yellow-400 animate-pulse":w?"bg-red-500":"bg-green-500"),title:x?r("helpStatusLoading"):w?r("helpStatusError",{errorMessage:w.message}):r("helpStatusSuccess")}),l.jsx("span",{className:"text-lg font-semibold text-slate-800",children:r("helpSystemTitle")})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Lb,{variant:"button",compact:!0,className:"!px-2 !py-1 !text-xs !min-w-0"}),o&&l.jsx("button",{onClick:()=>Se(!we),className:"p-2 text-slate-600 hover:text-slate-700 hover:bg-slate-50 rounded-lg transition-colors",title:we?"Hide contents":"Show contents",onMouseDown:e=>e.stopPropagation(),children:l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h10M4 18h16"})})}),l.jsx("button",{onClick:()=>{if(o){const e={width:Math.min(1200,window.innerWidth-40),height:Math.min(800,window.innerHeight-40)},t=Math.max(20,(window.innerWidth-e.width)/2),n=Math.max(20,(window.innerHeight-e.height)/2);requestAnimationFrame(()=>{H(e),O({x:t,y:n}),c(!1),Se(!1)})}else{const e=Math.min(420,window.innerWidth-32),t=Math.max(400,Math.min(window.innerHeight-32,800)),n=Math.max(16,window.innerWidth-e-16),r=16;requestAnimationFrame(()=>{W(!1),q(!1),H({width:e,height:t}),O({x:n,y:r}),c(!0),Se(!1)})}},className:"p-2 text-slate-600 hover:text-slate-700 hover:bg-slate-50 rounded-lg transition-colors",title:r(o?"helpMaximizeTitle":"helpMinimizeTitle"),onMouseDown:e=>e.stopPropagation(),children:o?l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 3v3a2 2 0 01-2 2H3m18 0h-3a2 2 0 01-2-2V3m0 18v-3a2 2 0 012-2h3M3 16h3a2 2 0 012 2v3"})}):l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 4V2a1 1 0 011-1h8a1 1 0 011 1v2m-9 0h10m-10 0a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V6a2 2 0 00-2-2"})})}),l.jsx("button",{onClick:async()=>{try{if(k(!0),console.log(" Manually refreshing help content from local docs..."),"caches"in window)try{const e=await caches.keys();for(const t of e)await caches.delete(t);console.log(" Cleared browser caches")}catch(e){console.warn("Could not clear browser caches:",e)}const t=await wb.getAllSections(a,!0);y(t),console.log(" Help content refreshed successfully")}catch(Pe){console.error(" Error manually refreshing help content:",Pe)}finally{k(!1)}},className:"p-2 text-slate-600 hover:text-slate-700 hover:bg-slate-50 rounded-lg transition-colors "+(x?"animate-spin":""),title:r("helpRefreshTitle"),disabled:x,onMouseDown:e=>e.stopPropagation(),children:l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),l.jsx("button",{onClick:()=>{T(e=>e+1),C(!0)},className:"p-2 text-cyan-600 hover:text-cyan-700 hover:bg-cyan-50 rounded-lg transition-colors",title:r("helpEditButton"),onMouseDown:e=>e.stopPropagation(),children:l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),l.jsx("button",{onClick:t,className:"text-slate-400 hover:text-slate-600 transition-colors",onMouseDown:e=>e.stopPropagation(),children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),l.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[!o&&l.jsxs("div",{className:"w-80 border-r border-slate-200 flex flex-col","data-tour":"help-toc",children:[l.jsx("div",{className:"p-4 border-b border-slate-200",children:l.jsx("input",{ref:ae,type:"text",placeholder:r("helpSearchPlaceholder"),value:u,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent","data-tour":"help-search"})}),l.jsx("div",{className:"p-4 border-b border-slate-200",children:(()=>{const e=Array.from(new Set(b.map(e=>e.category))).sort();return l.jsxs("select",{value:f,onChange:e=>v(e.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent",children:[l.jsx("option",{value:"all",children:r("helpCategoryAll")}),e.map(e=>l.jsx("option",{value:e,children:e},e))]})})()}),l.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:x?l.jsxs("div",{className:"text-center text-slate-500 py-8",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-cyan-500 mx-auto"}),l.jsx("p",{className:"mt-2",children:r("helpLoadingText")})]}):l.jsx("nav",{className:"space-y-1",children:me(ue,0,!1)})})]}),o&&we&&l.jsxs("div",{className:"absolute left-0 top-0 bottom-0 w-80 bg-white border-r border-slate-200 shadow-lg z-[60] flex flex-col",children:[l.jsxs("div",{className:"p-4 border-b border-slate-200 flex items-center justify-between",children:[l.jsx("span",{className:"font-semibold text-slate-800",children:r("helpContentsTitle")}),l.jsx("button",{className:"text-slate-500 hover:text-slate-700",onClick:()=>Se(!1),children:""})]}),l.jsx("div",{className:"p-4 border-b border-slate-200",children:l.jsx("input",{ref:ae,type:"text",placeholder:r("helpSearchPlaceholder"),value:u,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent"})}),l.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:x?l.jsxs("div",{className:"text-center text-slate-500 py-8",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-cyan-500 mx-auto"}),l.jsx("p",{className:"mt-2",children:r("helpLoadingText")})]}):l.jsx("nav",{className:"space-y-1",children:me(ue,0,!0)})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:x?l.jsxs("div",{className:"text-center text-slate-500 py-8",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-cyan-500 mx-auto"}),l.jsx("p",{className:"mt-2",children:r("helpLoadingText")})]}):w?l.jsx("div",{className:"text-center text-slate-500 py-8",children:l.jsxs("div",{className:"mb-4",children:[l.jsx("svg",{className:"w-16 h-16 text-red-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),l.jsx("h3",{className:"text-lg font-medium text-slate-700 mb-2",children:r("helpContentErrorTitle")}),l.jsx("p",{className:"text-slate-600 mb-4",children:r("helpContentErrorText")})]})}):l.jsx(Ub,{section:ye,svFallback:xe,renderFn:e=>{let t=e;try{t=t.replace(/\{\{\s*([a-zA-Z0-9_.-]+)\s*\}\}/g,(e,t)=>{try{const e=r(t);return"string"==typeof e?e:String(e)}catch{return t}})}catch{}t=t.replace(/^### (.*$)/gm,'<h3 class="text-lg font-semibold mb-2 mt-4">$1</h3>'),t=t.replace(/^## (.*$)/gm,'<h2 class="text-xl font-semibold mb-3 mt-6">$1</h2>'),t=t.replace(/^# (.*$)/gm,'<h1 class="text-2xl font-bold mb-4">$1</h1>'),t=t.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>"),t=t.replace(/\*(.*?)\*/g,"<em>$1</em>");const n=t.split("\n"),a=[];for(let r=0;r<n.length;r++){const e=n[r].trim();!e||e.startsWith("<")||e.endsWith(">")||e.startsWith("- ")?a.push(e):a.push(`<p class="mb-4">${e}</p>`)}t=a.join("\n");const s=t.split("\n");let i=!1,o=[];for(let r=0;r<s.length;r++){const e=s[r];if(e.trim().startsWith("- "))i||(i=!0,o=[]),o.push(e.replace(/^- (.*)/,'<li class="ml-4">$1</li>'));else if(i&&o.length>0){s[r-o.length]=`<ul class="list-disc mb-4">${o.join("")}</ul>`;for(let e=r-o.length+1;e<r;e++)s[e]="";i=!1,o=[]}}if(i&&o.length>0){s[s.length-o.length]=`<ul class="list-disc mb-4">${o.join("")}</ul>`;for(let e=s.length-o.length+1;e<s.length;e++)s[e]=""}return t=s.join("\n"),t},renderContentAsText:Ce,onNavigate:e=>p(e),overviewSectionId:(b.find(e=>e.id.endsWith("/overview")||"overview"===e.id)||b[0])?.id,categorySectionId:ye?(b.find(e=>e.category===ye.category)||b[0])?.id:void 0})})]}),l.jsx("div",{className:"p-4 border-t border-slate-200 bg-slate-50",children:l.jsxs("div",{className:"space-y-3 mb-4",children:[l.jsxs("form",{onSubmit:e=>{e.preventDefault(),A.trim()&&je(A)},className:"flex space-x-2",children:[l.jsxs("div",{className:"flex-1 relative",children:[l.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l.jsx("span",{className:"text-cyan-500 text-lg",children:""})}),l.jsx("input",{type:"text",value:A,onChange:e=>E(e.target.value),placeholder:r("aiChatPlaceholder"),className:"w-full pl-10 pr-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent text-sm",disabled:D,"data-tour":"help-ai-input"})]}),l.jsx("button",{type:"submit",disabled:D||!A.trim(),className:"px-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm font-medium",title:`${r("aiHelpContextTitle")}\n- ${r("aiHelpContextScreen")}: ${s.screen}\n- ${r("aiHelpContextAction")}: ${s.action}${Object.keys(s.data).length>0?`\n- Data: ${JSON.stringify(s.data)}`:""}`,"data-tour":"help-context-info",children:D?l.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):r("aiHelpAskButton")})]}),_&&l.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-3 space-y-2","data-tour":"help-ai-response",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-xs font-medium text-slate-700",children:r("aiHelpResponseTitle")}),l.jsx("button",{onClick:()=>P(""),className:"text-slate-400 hover:text-slate-600 text-xs",children:""})]}),l.jsx("div",{className:"text-sm text-slate-800",children:l.jsx("div",{dangerouslySetInnerHTML:{__html:Te(_)}})}),Ee&&Ee.length>0?l.jsx("div",{className:"pt-2 border-t border-slate-100 flex flex-wrap gap-2",children:Ee.map((e,t)=>l.jsx("button",{onClick:()=>{if("start_tour"===e.type&&i&&e.payload.tourId)return void i.startTour(e.payload.tourId);const t={type:e.type,payload:e.payload};window.dispatchEvent(new CustomEvent("ai-action",{detail:t}))},className:"text-xs bg-cyan-100 text-cyan-800 px-2 py-1 rounded hover:bg-cyan-200 transition-colors cursor-pointer",title:`${e.type} ${Object.entries(e.payload).map(([e,t])=>`${e}=${t}`).join(" ")}`,children:Ae(e)},t))}):null,I&&I.length>0&&l.jsxs("div",{className:"pt-2 border-t border-slate-100",children:[l.jsx("div",{className:"text-xs text-slate-500 mb-1",children:r("aiHelpSourcesTitle")}),l.jsx("div",{className:"flex flex-wrap gap-1",children:I.map((e,t)=>"help"===e.type&&e.id?l.jsx("button",{onClick:()=>{p(e.id),P(""),L([]),E("")},className:"text-xs bg-cyan-100 text-cyan-800 px-2 py-1 rounded hover:bg-cyan-200 transition-colors cursor-pointer",title:r("aiHelpGoToSection",{sectionName:e.name}),children:e.name},t):l.jsx("span",{className:"text-xs bg-slate-100 text-slate-600 px-2 py-1 rounded",title:r("aiHelpKnowledgeSourceTooltip"),children:e.name},t))})]})]}),l.jsx("div",{className:"text-xs text-slate-500 text-center",children:l.jsx("a",{href:"https://www.spiris.se/kontakt",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-600 hover:text-cyan-700 underline",children:r("helpContactUs")})})]})}),l.jsx("div",{className:"absolute top-0 left-2 right-2 h-2 cursor-n-resize z-50 hover:bg-blue-500 hover:opacity-30",onMouseDown:e=>fe(e,"n")}),l.jsx("div",{className:"absolute bottom-0 left-2 right-2 h-2 cursor-s-resize z-50 hover:bg-blue-500 hover:opacity-30",onMouseDown:e=>fe(e,"s")}),l.jsx("div",{className:"absolute top-2 bottom-2 left-0 w-2 cursor-w-resize z-50 hover:bg-blue-500 hover:opacity-30",onMouseDown:e=>fe(e,"w")}),l.jsx("div",{className:"absolute top-2 bottom-2 right-0 w-2 cursor-e-resize z-50 hover:bg-blue-500 hover:opacity-30",onMouseDown:e=>fe(e,"e")}),l.jsx("div",{className:"absolute top-0 left-0 w-4 h-4 cursor-nw-resize z-50 hover:bg-blue-500 hover:opacity-50",onMouseDown:e=>fe(e,"nw")}),l.jsx("div",{className:"absolute top-0 right-0 w-4 h-4 cursor-ne-resize z-50 hover:bg-blue-500 hover:opacity-50",onMouseDown:e=>fe(e,"ne")}),l.jsx("div",{className:"absolute bottom-0 left-0 w-4 h-4 cursor-sw-resize z-50 hover:bg-blue-500 hover:opacity-50",onMouseDown:e=>fe(e,"sw")}),l.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 cursor-se-resize z-50 hover:bg-blue-500 hover:opacity-50",onMouseDown:e=>fe(e,"se")})]},a),l.jsx(Db,{isOpen:j,onClose:async()=>{C(!1);try{k(!0),console.log(" Refreshing help content from GitHub after commit..."),await wb.clearAllCaches();const e=await wb.getAllSections(a,!0);y(e),console.log(` Help content refreshed from GitHub with ${e.length} sections`)}catch(Pe){console.error("Error refreshing help content after edit:",Pe);try{console.log(" Attempting fallback refresh...");const e=await wb.getAllSections(a,!1);y(e),console.log(" Fallback refresh completed")}catch(e){console.error(" Fallback refresh also failed:",e)}}finally{k(!1)}},selectedSection:g,isAdmin:n},N)]}):null},Ob=({context:e,onClick:t,size:n="md",variant:r="icon",className:a="","data-tour":s})=>{const{t:i}=Tv(),o={sm:"w-6 h-6",md:"w-8 h-8",lg:"w-10 h-10"},c={sm:"text-sm",md:"text-base",lg:"text-lg"},u={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"};return"icon"===r?l.jsx("button",{onClick:()=>t(e),className:`inline-flex items-center justify-center rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 hover:text-slate-800 transition-colors duration-200 ${o[n]} ${a}`,title:i("helpButtonTitle"),"aria-label":i("helpButtonTitle"),"data-tour":s,children:l.jsx("svg",{className:`${u[n]}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}):"text"===r?l.jsxs("button",{onClick:()=>t(e),className:`inline-flex items-center gap-2 px-3 py-2 text-slate-600 hover:text-slate-800 hover:bg-slate-100 rounded-lg transition-colors duration-200 ${c[n]} ${a}`,title:i("helpButtonTitle"),"data-tour":s,children:[l.jsx("svg",{className:`${u[n]}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),i("helpButtonText")]}):l.jsxs("button",{onClick:()=>t(e),className:`inline-flex items-center gap-2 px-4 py-2 bg-cyan-500 hover:bg-cyan-600 text-white rounded-lg transition-colors duration-200 ${c[n]} ${a}`,title:i("helpButtonTitle"),"data-tour":s,children:[l.jsx("svg",{className:`${u[n]}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),i("helpButtonText")]})},$b=z.createContext(void 0),Hb=()=>{const e=z.useContext($b);if(void 0===e)throw new Error("useShoutout must be used within a ShoutoutProvider");return e},Bb=({children:e})=>{Tv();const{language:t}=Sv(),n="sv"===t?"sv":"en",{user:r,isAdmin:a}=yv();console.log(" ShoutoutProvider initializing:",{currentLanguage:n,user:!!r,isAdmin:a});let s=null;try{const e=Cb();s=e.startTour}catch(k){console.warn("TourProvider not available, shoutout tours will be disabled")}const[i,o]=z.useState(null),[c,u]=z.useState(!1),[d,h]=z.useState(new Set);z.useEffect(()=>{try{const e=localStorage.getItem("shoutout-seen");if(e){const t=JSON.parse(e);Array.isArray(t)&&h(new Set(t))}}catch(k){console.warn("Failed to load seen features:",k),localStorage.removeItem("shoutout-seen")}},[]);const m=z.useCallback(e=>{try{localStorage.setItem("shoutout-seen",JSON.stringify(Array.from(e)))}catch(k){console.warn("Failed to save seen features:",k)}},[]),g=z.useCallback(async()=>{try{const e=(await Sb.getShoutouts(n)).map(e=>({id:e.id,title:e.title,description:e.description,image:e.image,icon:e.icon,tourId:e.tour_id,category:e.category,priority:e.priority,language:e.language,target_group:e.target_group,releaseDate:e.release_date,expireDate:e.expire_date,isNew:e.is_new}));return r?a?e:e.filter(e=>"public"===e.target_group||"authenticated"===e.target_group):e.filter(e=>"public"===e.target_group)}catch(k){return console.error("Error fetching shoutouts from database:",k),console.warn("ShoutoutProvider: Database table may not exist. Run setup-help-database.sql to create the help_shoutouts table."),[]}},[n,r,a]),p=z.useCallback(async e=>{const t=(await g()).find(t=>t.id===e);t&&(o(t),u(!0))},[g]),f=z.useCallback(()=>{u(!1),o(null)},[]),v=z.useCallback(e=>{const t=new Set(d);t.add(e),h(t),m(t)},[d,m]),b=z.useCallback(async()=>(await g()).some(e=>!d.has(e.id)),[g,d]),y=z.useCallback(()=>{i?.tourId&&s?(v(i.id),f(),setTimeout(()=>{s(i.tourId)},100)):i?.tourId&&!s&&(console.warn("Tour system not available"),v(i.id),f())},[i,v,f,s]);z.useCallback(()=>{i&&v(i.id),f()},[i,v,f]);const x={currentShoutout:i,isVisible:c,showShoutout:p,hideShoutout:f,getAvailableFeatures:g,markAsSeen:v,hasUnseenFeatures:b,handleStartTour:y};return l.jsx($b.Provider,{value:x,children:e})},zb=({children:e,requireAdmin:t=!1,fallback:n})=>{const{user:r,loading:a,isAdmin:s}=yv(),{t:i}=Tv();return a?l.jsx(qv,{}):r?t&&!s?void 0!==n?n:l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:i("accessDeniedTitle")}),l.jsx("p",{className:"text-gray-600 mb-4",children:i("accessDeniedMessage")})]})}):l.jsx(l.Fragment,{children:e}):void 0!==n?n:l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:i("authRequiredTitle")}),l.jsx("p",{className:"text-gray-600 mb-4",children:i("authRequiredMessage")})]})})},Vb=({user:e,onTourManagement:t,onShoutoutManagement:n,onAIAdministration:r})=>{const{t:a}=Tv(),{signOut:s,isAdmin:i}=yv(),{language:o,setLanguage:c}=Sv(),[u,d]=z.useState(!1),h=z.useRef(null);if(!e)return null;z.useEffect(()=>{const e=e=>{h.current&&!h.current.contains(e.target)&&d(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const m=e=>{c(e),d(!1)};return l.jsxs("div",{className:"relative",ref:h,children:[l.jsxs("button",{onClick:()=>d(!u),className:"flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium text-slate-600 hover:text-slate-900 hover:bg-slate-100 transition-colors duration-200",children:[l.jsx("div",{className:"w-8 h-8 bg-cyan-500 rounded-full flex items-center justify-center text-white font-semibold",children:e.user_metadata?.name?.charAt(0)?.toUpperCase()||e.email?.charAt(0)?.toUpperCase()}),l.jsx("span",{className:"hidden sm:block",children:e.user_metadata?.name||e.email}),l.jsx("svg",{className:"w-4 h-4 transition-transform duration-200 "+(u?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),u&&l.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-lg border border-slate-200 py-2 z-50",children:[l.jsx("div",{className:"px-4 py-3 border-b border-slate-200",children:l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-10 h-10 bg-cyan-500 rounded-full flex items-center justify-center text-white font-semibold text-lg",children:e.user_metadata?.name?.charAt(0)?.toUpperCase()||e.email?.charAt(0)?.toUpperCase()}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-slate-900",children:e.user_metadata?.name||"User"}),l.jsx("p",{className:"text-xs text-slate-500",children:e.email})]})]})}),i&&(t||n||r)&&l.jsx("div",{className:"px-4 py-3 border-b border-slate-200",children:l.jsxs("div",{className:"space-y-2",children:[t&&l.jsxs("button",{onClick:()=>{t(),d(!1)},className:"w-full px-3 py-2 text-sm font-medium text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-md transition-colors duration-200 flex items-center justify-center space-x-2",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),l.jsx("span",{children:a("navTourManagement")})]}),n&&l.jsxs("button",{onClick:()=>{n(),d(!1)},className:"w-full px-3 py-2 text-sm font-medium text-purple-600 hover:text-purple-700 hover:bg-purple-50 rounded-md transition-colors duration-200 flex items-center justify-center space-x-2",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v13m0-13V6a2 2 0 112 2h-2zm0 0V5.5A2.5 2.5 0 109.5 8H12zm-7 4h14M5 12a2 2 0 110-4h14a2 2 0 110 4M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"})}),l.jsx("span",{children:a("navShoutoutManagement")})]}),r&&l.jsxs("button",{onClick:()=>{r(),d(!1)},className:"w-full px-3 py-2 text-sm font-medium text-green-600 hover:text-green-700 hover:bg-green-50 rounded-md transition-colors duration-200 flex items-center justify-center space-x-2",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),l.jsx("span",{children:a("aiAdministration")})]})]})}),l.jsxs("div",{className:"px-4 py-3 border-b border-slate-200",children:[l.jsx("p",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide mb-2",children:a("languageSwitcher")}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("button",{onClick:()=>m("sv"),className:"px-3 py-1.5 text-sm font-medium rounded-md transition-colors duration-200 "+("sv"===o?"bg-cyan-500 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"),children:a("languageSwedish")}),l.jsx("button",{onClick:()=>m("en"),className:"px-3 py-1.5 text-sm font-medium rounded-md transition-colors duration-200 "+("en"===o?"bg-cyan-500 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"),children:a("languageEnglish")})]})]}),l.jsx("div",{className:"px-4 py-2",children:l.jsxs("button",{onClick:()=>{s(),d(!1)},className:"w-full px-3 py-2 text-sm font-medium text-red-600 hover:text-red-700 hover:bg-red-50 rounded-md transition-colors duration-200 flex items-center justify-center space-x-2",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),l.jsx("span",{children:a("signOutButton")})]})})]})]})},Wb=({onClose:e})=>{const{t:t}=Tv(),{signIn:n,signUp:r}=yv(),[a,s]=z.useState(!1),[i,o]=z.useState(""),[c,u]=z.useState(""),[d,h]=z.useState(""),[m,g]=z.useState(!1),[p,f]=z.useState("");return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t(a?"loginCreateAccountTitle":"loginSignInTitle")}),e&&l.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600","aria-label":t("loginCloseButton"),children:""})]}),l.jsxs("form",{onSubmit:async s=>{s.preventDefault(),f(""),g(!0);try{if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i))throw new Error(t("loginInvalidEmailError"));if(!(c.length>=6))throw new Error(t("loginPasswordLengthError"));if(a&&!d.trim())throw new Error(t("loginNameRequiredError"));let s;if(s=a?await r(i,c,d.trim()):await n(i,c),s.error)throw new Error(s.error.message);e&&e()}catch(sy){f(sy.message||t("loginGenericError"))}finally{g(!1)}},className:"space-y-4",children:[a&&l.jsxs("div",{children:[l.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:t("loginNameLabel")}),l.jsx("input",{id:"name",type:"text",value:d,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:t("loginNamePlaceholder"),required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:t("loginEmailLabel")}),l.jsx("input",{id:"email",type:"email",value:i,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:t("loginEmailPlaceholder"),required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:t("loginPasswordLabel")}),l.jsx("input",{id:"password",type:"password",value:c,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:t("loginPasswordPlaceholder"),required:!0})]}),p&&l.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-md",children:p}),l.jsx("button",{type:"submit",disabled:m,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:t(m?"loginProcessingButton":a?"loginCreateAccountButton":"loginSignInButton")})]}),l.jsx("div",{className:"mt-4 text-center",children:l.jsx("button",{type:"button",onClick:()=>{s(!a),f(""),o(""),u(""),h("")},className:"text-blue-600 hover:text-blue-800 text-sm",children:t(a?"loginAlreadyHaveAccount":"loginDontHaveAccount")})})]})})},Kb=()=>{const{language:e,setLanguage:t}=Sv(),{t:n}=Tv(),r=e=>{t(e)};return l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("button",{onClick:()=>r("sv"),className:"px-2 py-1 text-xs font-medium rounded transition-colors "+("sv"===e?"bg-blue-100 text-blue-700":"text-slate-600 hover:text-slate-900 hover:bg-slate-100"),title:n("languageSwedish"),children:"SV"}),l.jsx("button",{onClick:()=>r("en"),className:"px-2 py-1 text-xs font-medium rounded transition-colors "+("en"===e?"bg-blue-100 text-blue-700":"text-slate-600 hover:text-slate-900 hover:bg-slate-100"),title:n("languageEnglish"),children:"EN"})]})},qb=({className:e=""})=>{const{t:t}=Tv(),[n,r]=z.useState(null),[a,s]=z.useState({top:0,left:0}),[i,o]=z.useState(!1),[c,u]=z.useState(!1),[d,h]=z.useState("entering"),m=z.useRef(null),g=z.useRef(null),p=z.useRef(null);let f=null;try{f=Cb()}catch(_){console.warn("TourProvider not available, tour overlay will be disabled")}if(!f)return null;const{currentTour:v,currentStepIndex:b,isActive:y,nextStep:x,previousStep:k,skipTour:w,completeTour:S}=f,j=z.useRef(new Map),C=z.useCallback(e=>{try{const t=j.current.get(e);if(t&&document.contains(t.element)){const n=t.element.getBoundingClientRect(),r={top:n.top+window.scrollY,left:n.left+window.scrollX,width:n.width,height:n.height,element:t.element};return j.current.set(e,r),r}let n=null;if(e.startsWith("[data-tour=")?n=document.querySelector(e):(n=document.querySelector(`[data-tour="${e}"]`),n||(n=document.querySelector(e))),!n)return null;const r=n.getBoundingClientRect(),a={top:r.top+window.scrollY,left:r.left+window.scrollX,width:r.width,height:r.height,element:n};return j.current.set(e,a),a}catch(_){return console.warn("Error finding element:",e,_),null}},[]),N=z.useCallback((e,t="top",n=300,r=200)=>{const a=20;let s=0,i=0;switch(t){case"top":s=e.top-r-a-10,i=e.left+e.width/2-n/2;break;case"bottom":s=e.top+e.height+a+10,i=e.left+e.width/2-n/2;break;case"left":s=e.top+e.height/2-r/2,i=e.left-n-a-10;break;case"right":s=e.top+e.height/2-r/2,i=e.left+e.width+a+10;break;case"center":s=window.innerHeight/2-r/2,i=window.innerWidth/2-n/2}const o=window.innerWidth,l=window.innerHeight;return i<0&&(i=a),s<0&&(s=a),"right"===t&&i+n>o&&(i=o-n-a),"left"===t&&i+n>o&&(i=o-n-a),"top"===t&&s+r>l&&(s=l-r-a),"bottom"===t&&s+r>l&&(s=l-r-a),"center"===t&&(s=Math.max(a,Math.min(s,l-r-a)),i=Math.max(a,Math.min(i,o-n-a))),{top:s,left:i}},[]),T=z.useCallback(async()=>{if(!y||!v||b<0)return r(null),o(!1),void h("exiting");const e=v.steps[b];if(!e)return void console.warn(" Tour step not found at index:",b,"Total steps:",v.steps.length);u(!0),h("entering");const t=C(e.target);if(t){r(t);const n=N(t,e.position);s(n);const a=document.querySelector(e.target);return a&&a.scrollIntoView({behavior:"smooth",block:"center"}),void setTimeout(()=>{o(!0),h("active"),u(!1)},150)}console.warn("Tour step target not found:",e.target),e.skipIfNotFound?setTimeout(()=>{b<v.steps.length-1?x():S()},1e3):(console.warn("Tour step target not found:",e.target),o(!1),h("exiting"))},[y,v,b,C,N,x,S]);z.useEffect(()=>{T()},[T]),z.useEffect(()=>{let e,t;const n=()=>{clearTimeout(e),e=setTimeout(T,100)},r=()=>{clearTimeout(t),t=setTimeout(T,50)};return window.addEventListener("resize",n),window.addEventListener("scroll",r,{passive:!0}),()=>{clearTimeout(e),clearTimeout(t),window.removeEventListener("resize",n),window.removeEventListener("scroll",r)}},[T]),z.useEffect(()=>{if(!y||!n||!v||b<0)return;const e=v.steps[b];if(!e)return;const t=g.current;if(t){const r=t.offsetWidth,a=t.offsetHeight;if(Math.abs(r-300)>50||Math.abs(a-200)>50){const t=N(n,e.position,r,a);s(t)}}},[y,n,v,b,N]),z.useEffect(()=>()=>{j.current.clear()},[]);if(!(y&&v&&i&&n))return null;const A=v.steps[b],E=(b+1)/v.steps.length*100;return l.jsxs("div",{ref:m,className:`fixed inset-0 z-[9999] transition-all duration-300 ${e} ${"entering"===d||"exiting"===d?"opacity-0":"opacity-100"}`,onClick:e=>{e.stopPropagation()},style:{pointerEvents:"none"},children:[l.jsx("div",{className:"absolute inset-0 bg-black transition-all duration-300 "+("entering"===d||"exiting"===d?"bg-opacity-0":"bg-opacity-25"),children:l.jsx("div",{ref:p,className:"absolute bg-transparent border-4 border-blue-400 rounded-lg shadow-lg transition-transform duration-300 ease-out "+("entering"===d||"exiting"===d?"scale-50 opacity-0":"scale-100 opacity-100"),style:{top:n.top-8,left:n.left-8,width:n.width+16,height:n.height+16,boxShadow:"0 0 0 9999px rgba(0, 0, 0, 0.5), 0 0 20px rgba(59, 130, 246, 0.5)",animation:"active"===d?"tour-pulse 2s infinite, tour-glow 3s infinite":"none"}})}),l.jsxs("div",{ref:g,className:"absolute bg-white rounded-lg shadow-2xl border border-slate-200 max-w-xs transition-transform duration-300 ease-out "+("entering"===d||"exiting"===d?"scale-75 opacity-0 translate-y-4":"scale-100 opacity-100 translate-y-0"),style:{top:a.top,left:a.left,zIndex:1e4,pointerEvents:"auto",transform:"entering"===d||"exiting"===d?"scale(0.75) translateY(16px)":"scale(1) translateY(0)"},children:[l.jsx("div",{className:"w-full h-1 bg-slate-200 rounded-t-lg overflow-hidden",children:l.jsx("div",{className:"h-full bg-blue-500 transition-all duration-300 ease-out",style:{width:`${E}%`}})}),l.jsxs("div",{className:"p-5",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:A.title}),l.jsxs("div",{className:"text-xs text-slate-500 mb-3",children:["Step ",b+1," of ",v.steps.length]})]}),l.jsx("p",{className:"text-slate-700 mb-4 leading-relaxed text-sm",children:A.content}),l.jsxs("div",{className:"pt-4 border-t border-slate-100",children:[l.jsx("div",{className:"flex items-center justify-center mb-3",children:l.jsx("div",{className:"flex items-center space-x-1",children:v.steps.map((e,t)=>l.jsx("div",{className:"w-1.5 h-1.5 rounded-full transition-all duration-300 "+(t===b?"bg-blue-500 scale-150":t<b?"bg-green-400":"bg-slate-300")},t))})}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("button",{onClick:async()=>{c||(h("exiting"),u(!0),await new Promise(e=>setTimeout(e,100)),b>0&&await k())},disabled:0===b||c,className:"flex items-center justify-center w-8 h-8 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-full disabled:opacity-30 disabled:cursor-not-allowed transition-all duration-200",title:t("tourPrevious"),children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),l.jsx("button",{onClick:async()=>{c||(h("exiting"),u(!0),await new Promise(e=>setTimeout(e,100)),v&&b<v.steps.length-1?await x():await S())},disabled:c,className:"flex items-center justify-center w-8 h-8 bg-blue-600 hover:bg-blue-700 text-white rounded-full disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",title:b<v.steps.length-1?t("tourNext"):t("tourComplete"),children:b<v.steps.length-1?l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}):l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]}),l.jsx("div",{className:"flex justify-center mt-2",children:l.jsx("button",{onClick:w,disabled:c,className:"text-xs text-slate-400 hover:text-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:t("tourExit")})})]})]}),"center"!==A.position&&l.jsx("div",{className:"absolute w-0 h-0",style:{..."top"===A.position&&{top:"100%",left:"50%",transform:"translateX(-50%)",borderLeft:"10px solid transparent",borderRight:"10px solid transparent",borderTop:"10px solid white"},..."bottom"===A.position&&{bottom:"100%",left:"50%",transform:"translateX(-50%)",borderLeft:"10px solid transparent",borderRight:"10px solid transparent",borderBottom:"10px solid white"},..."left"===A.position&&{top:"50%",left:"100%",transform:"translateY(-50%)",borderTop:"10px solid transparent",borderBottom:"10px solid transparent",borderLeft:"10px solid white"},..."right"===A.position&&{top:"50%",right:"100%",transform:"translateY(-50%)",borderTop:"10px solid transparent",borderBottom:"10px solid transparent",borderRight:"10px solid white"}}})]}),l.jsx("style",{children:"\n        @keyframes tour-pulse {\n          0%, 100% {\n            box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.5), 0 0 20px rgba(59, 130, 246, 0.5);\n          }\n          50% {\n            box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.5), 0 0 30px rgba(59, 130, 246, 0.8);\n          }\n        }\n        \n        @keyframes tour-glow {\n          0%, 100% {\n            filter: brightness(1) drop-shadow(0 0 10px rgba(59, 130, 246, 0.3));\n          }\n          50% {\n            filter: brightness(1.2) drop-shadow(0 0 20px rgba(59, 130, 246, 0.6));\n          }\n        }\n        \n        \n        @keyframes tour-shimmer {\n          0% {\n            transform: translateX(-100%);\n          }\n          100% {\n            transform: translateX(100%);\n          }\n        }\n        \n        .tour-shimmer {\n          animation: tour-shimmer 2s infinite;\n        }\n      "})]})},Gb=({className:e=""})=>{const{t:t}=Tv(),{user:n,isAdmin:r}=yv(),[a,s]=z.useState(!1),[i,o]=z.useState(!1),[c,u]=z.useState(!1),[d,h]=z.useState({x:0,y:0}),m=z.useRef(null),g=z.useRef(null);let p=null;try{p=Hb()}catch(y){console.warn("ShoutoutProvider not available:",y)}z.useEffect(()=>{if(p?.hasUnseenFeatures){(async()=>{const e=await p.hasUnseenFeatures();o(e)})()}},[p]),z.useEffect(()=>{console.log("Context menu state changed:",{showContextMenu:c,isAdmin:r,user:n})},[c,r,n]);const f=e=>{try{const t=localStorage.getItem("shoutout-seen");if(t){const n=JSON.parse(t);return Array.isArray(n)&&n.includes(e)}}catch(y){console.warn("Failed to check if feature is seen:",y)}return!1};z.useEffect(()=>{const e=e=>{m.current&&!m.current.contains(e.target)&&s(!1),g.current&&!g.current.contains(e.target)&&u(!1)},t=e=>{"Escape"===e.key&&(s(!1),u(!1))};return document.addEventListener("mousedown",e),document.addEventListener("keydown",t),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("keydown",t)}},[]);const[v,b]=z.useState([]);z.useEffect(()=>{if(p?.getAvailableFeatures){(async()=>{const e=await p.getAvailableFeatures();b(e)})()}},[p]);return p?l.jsxs("div",{className:`relative ${e}`,ref:m,children:[l.jsxs("button",{onClick:()=>s(!a),onContextMenu:e=>{e.preventDefault(),console.log("Right-click detected on ShoutoutButton"),console.log("isAdmin:",r),console.log("user:",n),r?(console.log("Showing context menu at position:",{x:e.clientX,y:e.clientY}),h({x:e.clientX,y:e.clientY}),u(!0),s(!1)):console.log("User is not an admin, context menu not shown")},className:"relative p-2 text-slate-600 hover:text-slate-900 hover:bg-slate-100 rounded-lg transition-colors duration-200",title:t("shoutoutButtonTitle"),children:[l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v13m0-13V6a2 2 0 112 2h-2zm0 0V5.5A2.5 2.5 0 109.5 8H12zm-7 4h14M5 12a2 2 0 110-4h14a2 2 0 110 4M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"})}),i&&l.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-pulse"})]}),a&&l.jsxs("div",{className:"absolute right-0 top-full mt-2 w-80 bg-white rounded-lg shadow-lg border border-slate-200 z-50",children:[l.jsxs("div",{className:"p-4 border-b border-slate-200",children:[l.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center space-x-2",children:[l.jsx("svg",{className:"w-5 h-5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v13m0-13V6a2 2 0 112 2h-2zm0 0V5.5A2.5 2.5 0 109.5 8H12zm-7 4h14M5 12a2 2 0 110-4h14a2 2 0 110 4M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"})}),l.jsx("span",{children:t("shoutoutMenuTitle")})]}),l.jsx("p",{className:"text-sm text-slate-600 mt-1",children:t("shoutoutMenuSubtitle")})]}),l.jsx("div",{className:"max-h-96 overflow-y-auto",children:0===v.length?l.jsx("div",{className:"p-4 text-center text-slate-500",children:t("shoutoutNoFeatures")}):v.map(e=>l.jsx("button",{onClick:()=>(async e=>{p?.showShoutout&&(await p.showShoutout(e),s(!1))})(e.id),className:"w-full p-4 text-left hover:bg-slate-50 transition-colors duration-200 border-b border-slate-100 last:border-b-0",children:l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx("div",{className:"text-2xl flex-shrink-0",children:e.icon}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[l.jsx("h4",{className:"font-medium text-slate-900 truncate",children:e.title}),e.isNew&&!f(e.id)&&l.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:t("shoutoutNew")})]}),l.jsx("p",{className:"text-sm text-slate-600 line-clamp-2",children:e.description}),l.jsxs("div",{className:"flex items-center justify-between mt-2",children:[l.jsx("span",{className:"text-xs text-slate-400",children:new Date(e.releaseDate).toLocaleDateString()}),l.jsxs("div",{className:"flex items-center space-x-2",children:[e.tourId&&l.jsx("span",{className:"text-xs text-blue-600 font-medium",children:t("shoutoutHasTour")}),!f(e.id)&&l.jsx("span",{onClick:t=>{t.stopPropagation(),markAsSeen(e.id),o(hasUnseenFeatures())},className:"text-xs text-slate-500 hover:text-slate-700 underline cursor-pointer",children:t("shoutoutDismiss")})]})]})]})]})},e.id))}),l.jsx("div",{className:"p-3 bg-slate-50 rounded-b-lg",children:l.jsx("p",{className:"text-xs text-slate-500 text-center",children:t("shoutoutMenuFooter")})})]}),c&&r&&l.jsx("div",{ref:g,className:"fixed bg-white rounded-lg shadow-lg border border-slate-200 z-50 py-1 min-w-48",style:{left:d.x,top:d.y},children:l.jsxs("button",{onClick:()=>{u(!1),window.dispatchEvent(new CustomEvent("open-shoutout-management"))},className:"w-full px-4 py-2 text-left text-sm text-slate-700 hover:bg-slate-100 flex items-center space-x-2",children:[l.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),l.jsx("span",{children:t("shoutoutManageShoutouts")})]})})]}):l.jsx("div",{className:`relative ${e}`,children:l.jsx("button",{className:"relative p-2 text-slate-600 hover:text-slate-900 hover:bg-slate-100 rounded-lg transition-colors duration-200",title:"Shoutouts (Database not set up - Run setup-help-database.sql)",onClick:()=>{console.log("Shoutouts button clicked - database setup needed"),alert("Shoutouts feature requires database setup. Please run the setup-help-database.sql script in your Supabase SQL editor.")},children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v13m0-13V6a2 2 0 112 2h-2zm0 0V5.5A2.5 2.5 0 109.5 8H12zm-7 4h14M5 12a2 2 0 110-4h14a2 2 0 110 4M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"})})})})},Yb=()=>{const{t:e}=Tv(),[t,n]=z.useState("entering");let r=null;try{r=Hb()}catch(d){return console.warn("ShoutoutProvider not available, shoutout splash will be disabled"),null}if(!r)return null;const{currentShoutout:a,isVisible:s,hideShoutout:i,markAsSeen:o,handleStartTour:c}=r,u=z.useCallback(()=>{a&&o(a.id),i()},[a,o,i]);z.useEffect(()=>{if(s){n("entering");const e=setTimeout(()=>n("active"),100);return()=>clearTimeout(e)}n("exiting")},[s]),z.useEffect(()=>{const e=e=>{"Escape"===e.key&&s&&u()};if(s)return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[s,u]);if(!s||!a)return null;return l.jsxs("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center transition-all duration-300 "+("entering"===t||"exiting"===t?"opacity-0":"opacity-100"),onClick:e=>{e.target===e.currentTarget&&u()},children:[l.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm"}),l.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 transform transition-all duration-500 ease-out "+("entering"===t||"exiting"===t?"scale-75 translate-y-8 opacity-0":"scale-100 translate-y-0 opacity-100"),children:[l.jsxs("div",{className:`relative rounded-t-2xl ${(e=>{switch(e){case"feature":return"bg-blue-500";case"improvement":return"bg-green-500";case"announcement":return"bg-purple-500";default:return"bg-gray-500"}})(a.category)} p-6 text-white overflow-hidden`,children:[l.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white bg-opacity-10 rounded-full -translate-y-16 translate-x-16"}),l.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-white bg-opacity-10 rounded-full translate-y-12 -translate-x-12"}),l.jsxs("div",{className:"relative z-10",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"text-4xl",children:a.icon}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-medium opacity-90",children:(t=>{switch(t){case"feature":return e("shoutoutCategoryFeature");case"improvement":return e("shoutoutCategoryImprovement");case"announcement":return e("shoutoutCategoryAnnouncement");default:return t}})(a.category)}),a.isNew&&l.jsx("div",{className:"text-xs bg-white bg-opacity-20 px-2 py-1 rounded-full",children:e("shoutoutNew")})]})]}),l.jsx("button",{onClick:u,className:"text-white hover:bg-white hover:bg-opacity-20 rounded-full p-2 transition-colors duration-200",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsx("h2",{className:"text-2xl font-bold mb-2",children:a.title})]})]}),l.jsxs("div",{className:"p-6",children:[l.jsx("p",{className:"text-gray-600 text-lg leading-relaxed mb-6",children:a.description}),l.jsxs("div",{className:"flex space-x-3",children:[a.tourId&&l.jsxs("button",{onClick:()=>{c()},className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-lg transition-colors duration-200 flex items-center justify-center space-x-2",children:[l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),l.jsx("span",{children:e("shoutoutStartTour")})]}),l.jsx("button",{onClick:u,className:(a.tourId?"flex-1":"w-full")+" bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-3 px-4 rounded-lg transition-colors duration-200",children:e("shoutoutDismiss")})]})]}),l.jsx("div",{className:"px-6 pb-4",children:l.jsxs("div",{className:"text-xs text-gray-400 text-center",children:[e("shoutoutReleaseDate"),": ",new Date(a.releaseDate).toLocaleDateString()]})})]})]})};const Jb=new class{constructor(){this.trainingStatus={isTraining:!1,lastTraining:null,trainingProgress:0,trainingMessage:"",errorMessage:null}}async getPrompts(){const{data:e,error:t}=await vv.from("ai_prompts").select("*").order("priority",{ascending:!0});if(t)throw t;return(e||[]).map(e=>({id:e.id,name:e.name,description:e.description,category:e.category,content:e.content,variables:e.variables||[],isActive:e.is_active,priority:e.priority,createdAt:e.created_at,updatedAt:e.updated_at,createdBy:e.created_by}))}async getPrompt(e){const{data:t,error:n}=await vv.from("ai_prompts").select("*").eq("id",e).single();if(n)throw n;return t?{id:t.id,name:t.name,description:t.description,category:t.category,content:t.content,variables:t.variables||[],isActive:t.is_active,priority:t.priority,createdAt:t.created_at,updatedAt:t.updated_at,createdBy:t.created_by}:null}async createPrompt(e){const t={name:e.name,description:e.description,category:e.category,content:e.content,variables:e.variables,is_active:e.isActive,priority:e.priority,created_by:e.createdBy,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()},{data:n,error:r}=await vv.from("ai_prompts").insert([t]).select().single();if(r)throw r;return this.convertDbPromptToCamelCase(n)}async updatePrompt(e,t){const n={updated_at:(new Date).toISOString()};void 0!==t.name&&(n.name=t.name),void 0!==t.description&&(n.description=t.description),void 0!==t.category&&(n.category=t.category),void 0!==t.content&&(n.content=t.content),void 0!==t.variables&&(n.variables=t.variables),void 0!==t.isActive&&(n.is_active=t.isActive),void 0!==t.priority&&(n.priority=t.priority),void 0!==t.createdBy&&(n.created_by=t.createdBy);const{data:r,error:a}=await vv.from("ai_prompts").update(n).eq("id",e).select().single();if(a)throw a;return this.convertDbPromptToCamelCase(r)}async deletePrompt(e){const{error:t}=await vv.from("ai_prompts").delete().eq("id",e);if(t)throw t}convertDbPromptToCamelCase(e){return{id:e.id,name:e.name,description:e.description,category:e.category,content:e.content,variables:e.variables||[],isActive:e.is_active,priority:e.priority,createdAt:e.created_at,updatedAt:e.updated_at,createdBy:e.created_by}}convertDbToCamelCase(e){return{id:e.id,name:e.name,description:e.description,content:e.content,keywords:e.keywords||[],category:e.category,priority:e.priority,language:e.language,isActive:e.is_active,lastTrained:e.last_trained,createdAt:e.created_at,updatedAt:e.updated_at,createdBy:e.created_by,sourceType:e.source_type,sourceUrl:e.source_url,fetchFrequency:e.fetch_frequency,lastFetched:e.last_fetched,fetchStatus:e.fetch_status,fetchError:e.fetch_error,autoFetch:e.auto_fetch,contentSelector:e.content_selector,maxContentLength:e.max_content_length,requiresAuth:e.requires_auth,authConfig:e.auth_config}}async getKnowledgeSources(){const{data:e,error:t}=await vv.from("ai_knowledge_sources").select("*").order("priority",{ascending:!0});if(t)throw console.error("Error fetching knowledge sources:",t),t;return(e||[]).map(this.convertDbToCamelCase)}async getKnowledgeSource(e){const{data:t,error:n}=await vv.from("ai_knowledge_sources").select("*").eq("id",e).single();if(n){if("PGRST116"===n.code)return null;throw console.error("Error fetching knowledge source:",n),n}return this.convertDbToCamelCase(t)}async createKnowledgeSource(e){const t={name:e.name,description:e.description,content:e.content,keywords:e.keywords,category:e.category,priority:e.priority,language:e.language,is_active:e.isActive,created_by:e.createdBy||"system",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),last_trained:null,source_type:e.sourceType||"internal",source_url:e.sourceUrl,fetch_frequency:e.fetchFrequency||"manual",last_fetched:e.lastFetched,fetch_status:e.fetchStatus||"pending",fetch_error:e.fetchError,auto_fetch:e.autoFetch||!1,content_selector:e.contentSelector,max_content_length:e.maxContentLength||1e4,requires_auth:e.requiresAuth||!1,auth_config:e.authConfig},{data:n,error:r}=await vv.from("ai_knowledge_sources").insert([t]).select().single();if(r)throw console.error("Error creating knowledge source:",r),r;return this.convertDbToCamelCase(n)}async updateKnowledgeSource(e,t){const n={updated_at:(new Date).toISOString()};void 0!==t.name&&(n.name=t.name),void 0!==t.description&&(n.description=t.description),void 0!==t.content&&(n.content=t.content),void 0!==t.keywords&&(n.keywords=t.keywords),void 0!==t.category&&(n.category=t.category),void 0!==t.priority&&(n.priority=t.priority),void 0!==t.language&&(n.language=t.language),void 0!==t.isActive&&(n.is_active=t.isActive),void 0!==t.createdBy&&(n.created_by=t.createdBy),void 0!==t.lastTrained&&(n.last_trained=t.lastTrained),void 0!==t.sourceType&&(n.source_type=t.sourceType),void 0!==t.sourceUrl&&(n.source_url=t.sourceUrl),void 0!==t.fetchFrequency&&(n.fetch_frequency=t.fetchFrequency),void 0!==t.lastFetched&&(n.last_fetched=t.lastFetched),void 0!==t.fetchStatus&&(n.fetch_status=t.fetchStatus),void 0!==t.fetchError&&(n.fetch_error=t.fetchError),void 0!==t.autoFetch&&(n.auto_fetch=t.autoFetch),void 0!==t.contentSelector&&(n.content_selector=t.contentSelector),void 0!==t.maxContentLength&&(n.max_content_length=t.maxContentLength),void 0!==t.requiresAuth&&(n.requires_auth=t.requiresAuth),void 0!==t.authConfig&&(n.auth_config=t.authConfig);const{data:r,error:a}=await vv.from("ai_knowledge_sources").update(n).eq("id",e).select().single();if(a)throw console.error("Error updating knowledge source:",a),a;return this.convertDbToCamelCase(r)}async deleteKnowledgeSource(e){const{error:t}=await vv.from("ai_knowledge_sources").delete().eq("id",e);if(t)throw t}async getAIConfig(){try{const{data:e,error:t}=await vv.from("ai_config").select("*").eq("is_active",!0).single();return t&&"PGRST116"!==t.code?(console.error("Error fetching AI config:",t),null):e}catch(e){return console.error("Failed to fetch AI config:",e),null}}async updateAIConfig(e){const{data:t,error:n}=await vv.from("ai_config").upsert([{...e,updatedAt:(new Date).toISOString()}]).select().single();if(n)throw n;return t}async compileSystemPrompt(e={}){try{const t=(await this.getPrompts()).filter(e=>e.isActive);if(console.log(" Loading active prompts:",t.map(e=>({name:e.name,category:e.category,isActive:e.isActive}))),0===t.length)return console.warn("No active prompts found, using fallback prompt"),this.getFallbackSystemPrompt(e);const n=t.filter(e=>"system"===e.category),r=t.filter(e=>"context"===e.category),a=t.filter(e=>"action"===e.category),s=t.filter(e=>"custom"===e.category),i=e=>e.sort((e,t)=>t.priority-e.priority)[0],o=i(n),l=i(r),c=i(a),u=i(s);if(!o)return console.warn("No active system prompt found, using fallback prompt"),this.getFallbackSystemPrompt(e);let d=o.content;return console.log(" Using system prompt:",o.name),l&&(d+=`\n\n${l.content}`,console.log(" Adding context prompt:",l.name)),c&&(d+=`\n\n${c.content}`,console.log(" Adding action prompt:",c.name)),u&&(d+=`\n\n${u.content}`,console.log(" Adding custom prompt:",u.name)),d=this.interpolateVariables(d,e),console.log(" Compiled system prompt length:",d.length),d}catch(t){return console.error("Error compiling system prompt:",t),this.getFallbackSystemPrompt(e)}}getFallbackSystemPrompt(e={}){return`Du r en hjlpsam AI-assistent fr ett trningshanteringssystem. Anvnd fljande information fr att svara p anvndarens frgor:\n\n${e.context||"No context available"}\n\nVIKTIGA INSTRUKTIONER:\n- Svara p svenska om anvndaren skriver p svenska, annars p engelska\n- Var hjlpsam, vnlig och professionell\n- ANVND ALLTID KONTEXTINFORMATIONEN fr att frst vad anvndaren menar\n- BRJA ALLTID med att frklara din tolkning av kontexten innan du ger svaret\n- Ge praktiska exempel nr det r lmpligt\n- Citera relevanta delar av dokumentationen nr det hjlper\n- Om du verkligen inte vet svaret, sg det tydligt\n\nVIKTIGT - Externa kllor (External Sources):\n- Nr du refererar till externa kllor (forum, webbsidor, API:er), markera dem tydligt\n- Anvnd formatet: "Enligt [kllnamn](URL) (extern klla)" fr externa kllor\n- Externa kllor ska alltid ppnas i nya flikar\n- Skilj mellan interna kllor (systemdokumentation) och externa kllor (forum, webbsidor, API:er)\n- Exempel: "Enligt Training Management Forum (extern klla)" eller "Baserat p API-dokumentationen (extern klla)"\n\nVIKTIGT - Interaktiva tgrder (AI actions):\n- Efter ditt svar, om det r relevant, lgg till en eller flera tgrdshints p separata rader i formatet [action:NAMN nyckel=vrde ...]\n- Stdda tgrder:\n  - navigate view=public|admin|attendance|users|trainings|tour-management|shoutout-management\n  - open_help id=overview|vouchers|user-management|training-management|subscriptions|attendance|troubleshooting\n  - start_tour tourId="tour-id" (starta en guidad rundtur)\n  - add_user (ppna formulret fr att lgga till anvndare)\n  - add_training (ppna formulret fr att lgga till trning)\n  - create_tour (ppna formulret fr att skapa rundtur)\n  - create_shoutout (ppna formulret fr att skapa shoutout)\n- Nr du frklarar hur man skapar ngot, lgg alltid till en fljdfrga som "Vill du att jag gr det t dig?" (svenska) eller "Do you want me to do this for you?" (engelska)\n- Exempel: [action:add_user] eller [action:add_training]\n\nViktigt: Skriv alltid din naturliga text frst. Lgg drefter (om relevant) till tgrdshints p egna rader.`}interpolateVariables(e,t){return e.replace(/\{\{(\w+)\}\}/g,(e,n)=>t[n]||e)}async compileKnowledgeSources(e="sv"){const t=(await this.getKnowledgeSources()).filter(t=>t.isActive&&(t.language===e||"both"===t.language));let n="";return t.forEach(e=>{n+=`\n\n## ${e.name}\n`,n+=`${e.description}\n\n`,n+=`${e.content}\n`,e.keywords.length>0&&(n+=`\nKeywords: ${e.keywords.join(", ")}\n`)}),n}async retrainAI(){if(this.trainingStatus.isTraining)throw new Error("AI training is already in progress");this.trainingStatus={isTraining:!0,lastTraining:null,trainingProgress:0,trainingMessage:"Starting AI re-training...",errorMessage:null};try{this.trainingStatus.trainingMessage="Updating knowledge sources...",this.trainingStatus.trainingProgress=25;const e=(await this.getKnowledgeSources()).filter(e=>e.isActive);for(let t=0;t<e.length;t++){const n=e[t];await this.updateKnowledgeSource(n.id,{lastTrained:(new Date).toISOString()}),this.trainingStatus.trainingProgress=25+t/e.length*50,this.trainingStatus.trainingMessage=`Training source: ${n.name}`}this.trainingStatus.trainingMessage="Re-training AI model...",this.trainingStatus.trainingProgress=75,await new Promise(e=>setTimeout(e,2e3)),this.trainingStatus={isTraining:!1,lastTraining:(new Date).toISOString(),trainingProgress:100,trainingMessage:"AI re-training completed successfully!",errorMessage:null}}catch(e){throw this.trainingStatus={isTraining:!1,lastTraining:null,trainingProgress:0,trainingMessage:"",errorMessage:e instanceof Error?e.message:"Unknown error occurred"},e}}getTrainingStatus(){return{...this.trainingStatus}}async testPrompt(e,t={}){const n=await this.getPrompt(e);if(!n)throw new Error("Prompt not found");return`Test prompt compiled successfully:\n\n${this.interpolateVariables(n.content,t)}`}async testKnowledgeSource(e){const t=await this.getKnowledgeSource(e);if(!t)throw new Error("Knowledge source not found");return`Knowledge source test:\n\nName: ${t.name}\nContent: ${t.content.substring(0,200)}...`}async getExternalSources(){const{data:e,error:t}=await vv.from("ai_knowledge_sources").select("*").neq("source_type","internal").order("priority",{ascending:!0});if(t)throw console.error("Error fetching external sources:",t),t;return(e||[]).map(this.convertDbToCamelCase)}async fetchExternalSource(e){const t=Date.now();try{const a=await this.getKnowledgeSource(e);if(!a||!a.sourceUrl)throw new Error("Source not found or no URL provided");try{const{data:t,error:n}=await vv.rpc("fetch_external_source_content",{source_id:e});if(!n&&t)return t}catch(n){console.warn("RPC function not available, using client-side fetch:",n)}let s,i;console.log("Fetching content from:",a.sourceUrl);try{s=await fetch(a.sourceUrl,{method:"GET",mode:"cors",headers:{Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"}})}catch(r){console.warn("Direct fetch failed due to CORS, trying proxy:",r);const e=`https://api.allorigins.win/raw?url=${encodeURIComponent(a.sourceUrl)}`;s=await fetch(e,{method:"GET",headers:{Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"}})}if(!s.ok)throw new Error(`HTTP ${s.status}: ${s.statusText}`);i=await s.text();const o=i.length,l=a.maxContentLength||1e4,c=i.length>l?i.substring(0,l)+"... [Content truncated]":i;return await this.updateKnowledgeSource(e,{content:c,fetchStatus:"success",lastFetched:(new Date).toISOString(),fetchError:null}),await this.recordFetchHistory(e,{status:"success",contentLength:o,fetchDurationMs:Date.now()-t,contentHash:this.generateContentHash(c)}),{success:!0,contentLength:o,message:`Successfully fetched ${o} characters from ${a.sourceUrl}`}}catch(sy){const r=sy instanceof Error?sy.message:"Unknown error";throw console.error("Error fetching external source:",sy),await this.updateKnowledgeSource(e,{fetchStatus:"failed",fetchError:r}),await this.recordFetchHistory(e,{status:"failed",errorMessage:r,fetchDurationMs:Date.now()-t}),sy}}generateContentHash(e){let t=0;for(let n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return Math.abs(t).toString(16)}async recordFetchHistory(e,t){try{const{error:n}=await vv.from("ai_source_fetch_history").insert([{source_id:e,fetched_at:(new Date).toISOString(),status:t.status,content_length:t.contentLength,error_message:t.errorMessage,fetch_duration_ms:t.fetchDurationMs,content_hash:t.contentHash}]);n&&console.error("Error recording fetch history:",n)}catch(sy){console.error("Error recording fetch history:",sy)}}async getSourcesNeedingFetch(){const{data:e,error:t}=await vv.rpc("get_sources_needing_fetch");if(t)throw t;return e||[]}async getFetchHistory(e){const{data:t,error:n}=await vv.from("ai_source_fetch_history").select("*").eq("source_id",e).order("fetched_at",{ascending:!1}).limit(10);if(n)throw console.error("Error fetching fetch history:",n),n;return(t||[]).map(e=>({id:e.id,sourceId:e.source_id,fetchedAt:e.fetched_at,status:e.status,contentLength:e.content_length,errorMessage:e.error_message,fetchDurationMs:e.fetch_duration_ms,contentHash:e.content_hash}))}async getExternalSourceConfigs(e){const{data:t,error:n}=await vv.from("ai_external_source_configs").select("*").eq("source_id",e).eq("is_active",!0).order("created_at",{ascending:!0});if(n)throw n;return t||[]}async createExternalSourceConfig(e){const{data:t,error:n}=await vv.from("ai_external_source_configs").insert([{...e,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()}]).select().single();if(n)throw n;return t}async updateExternalSourceConfig(e,t){const{data:n,error:r}=await vv.from("ai_external_source_configs").update({...t,updatedAt:(new Date).toISOString()}).eq("id",e).select().single();if(r)throw r;return n}async deleteExternalSourceConfig(e){const{error:t}=await vv.from("ai_external_source_configs").delete().eq("id",e);if(t)throw t}async fetchAllPendingSources(){const e=await this.getSourcesNeedingFetch(),t=[];for(const r of e)try{const e=await this.fetchExternalSource(r.id);t.push({sourceId:r.id,success:!0,result:e})}catch(n){t.push({sourceId:r.id,success:!1,error:n instanceof Error?n.message:"Unknown error"})}return t}async testExternalSource(e){const t=await this.getKnowledgeSource(e);if(!t)throw new Error("External source not found");if("internal"===t.sourceType)throw new Error("Source is not external");return`External source test:\n\nName: ${t.name}\nURL: ${t.sourceUrl}\nType: ${t.sourceType}\nAuto-fetch: ${t.autoFetch}\nLast fetched: ${t.lastFetched||"Never"}`}},Qb=Object.freeze(Object.defineProperty({__proto__:null,aiManagementService:Jb},Symbol.toStringTag,{value:"Module"})),Xb=({onClose:e})=>{const{t:t}=Tv(),{user:n}=yv(),[r,a]=z.useState("prompts"),[s,i]=z.useState([]),[o,c]=z.useState(null),[u,d]=z.useState(!1),[h,m]=z.useState({}),[g,p]=z.useState([]),[f,v]=z.useState(null),[b,y]=z.useState(!1),[x,k]=z.useState({}),[w,S]=z.useState(null),[j,C]=z.useState({}),[N,T]=z.useState({isTraining:!1,lastTraining:null,trainingProgress:0,trainingMessage:"",errorMessage:null}),[A,E]=z.useState(!1),[_,P]=z.useState(null),[I,L]=z.useState([]),[D,M]=z.useState(!1),[R,U]=z.useState({name:"",description:"",sourceUrl:"",sourceType:"webpage",category:"business",keywords:"",language:"both",priority:5,autoFetch:!1,fetchFrequency:"weekly",contentSelector:"",maxContentLength:1e4,requiresAuth:!1,authConfig:"",manualContent:""});z.useEffect(()=>{F()},[]),z.useEffect(()=>{const e=setInterval(()=>{T(Jb.getTrainingStatus())},1e3);return()=>clearInterval(e)},[]);const F=async()=>{E(!0),P(null);try{const[e,t,n,r]=await Promise.all([Jb.getPrompts(),Jb.getKnowledgeSources(),Jb.getExternalSources(),Jb.getAIConfig()]);i(e),p(t),L(n),S(r)}catch(sy){P(sy instanceof Error?sy.message:"Failed to load data")}finally{E(!1)}},O=()=>{c(null),m({name:"",description:"",category:"custom",content:"",variables:[],isActive:!0,priority:0,createdBy:n?.email||"unknown"}),d(!0)},$=e=>{c(e),m(e),d(!0)},H=async()=>{if(h.name&&h.content)try{o?await Jb.updatePrompt(o.id,h):await Jb.createPrompt(h),await F(),d(!1),c(null),m({})}catch(sy){P(sy instanceof Error?sy.message:"Failed to save prompt")}else P("Name and content are required")},B=()=>{v(null),k({name:"",description:"",content:"",keywords:[],category:"",priority:0,language:"both",isActive:!0,createdBy:n?.email||"unknown"}),y(!0)},V=e=>{v(e),k(e),y(!0)},W=async()=>{if(x.name&&x.content)try{const e={...x,keywords:"string"==typeof x.keywords?x.keywords.split(",").map(e=>e.trim()).filter(e=>e):x.keywords||[]};f?await Jb.updateKnowledgeSource(f.id,e):await Jb.createKnowledgeSource(e),await F(),y(!1),v(null),k({})}catch(sy){P(sy instanceof Error?sy.message:"Failed to save knowledge source")}else P("Name and content are required")},K=()=>{M(!0),U({name:"",description:"",sourceUrl:"",sourceType:"webpage",category:"business",keywords:"",language:"both",priority:5,autoFetch:!1,fetchFrequency:"weekly",contentSelector:"",maxContentLength:1e4,requiresAuth:!1,authConfig:"",manualContent:""})},q=async()=>{if(R.name.trim()&&R.sourceUrl.trim())try{const e={name:R.name.trim(),description:R.description.trim(),content:R.manualContent.trim()||"",keywords:R.keywords.split(",").map(e=>e.trim()).filter(e=>e),category:R.category,priority:R.priority,language:R.language,isActive:!0,createdBy:"admin",sourceType:R.sourceType,sourceUrl:R.sourceUrl.trim(),autoFetch:R.autoFetch,fetchFrequency:R.fetchFrequency,contentSelector:R.contentSelector.trim(),maxContentLength:R.maxContentLength,requiresAuth:R.requiresAuth,authConfig:R.authConfig.trim()?JSON.parse(R.authConfig):null};await Jb.createKnowledgeSource(e),await F(),M(!1)}catch(sy){P(sy instanceof Error?sy.message:"Failed to create external source")}else P("Name and URL are required")},G=async()=>{try{await Jb.retrainAI(),await F()}catch(sy){P(sy instanceof Error?sy.message:"Failed to retrain AI")}};return A?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600",children:"Loading AI Administration..."})]})}):l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white shadow-sm border-b",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsx("div",{className:"flex items-center justify-between h-16",children:l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:t("aiAdministration")})]})})})}),l.jsx("div",{className:"bg-white border-b",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsx("nav",{className:"flex space-x-8",children:[{id:"prompts",label:t("aiPrompts")},{id:"knowledge",label:t("knowledgeSources")},{id:"training",label:t("training")}].map(e=>l.jsx("button",{onClick:()=>a(e.id),className:"py-4 px-1 border-b-2 font-medium text-sm "+(r===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:e.label},e.id))})})}),l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[_&&l.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-md p-4",children:l.jsxs("div",{className:"flex",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),l.jsxs("div",{className:"ml-3",children:[l.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),l.jsx("div",{className:"mt-2 text-sm text-red-700",children:_})]})]})}),"prompts"===r&&l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t("aiPrompts")}),l.jsx("button",{onClick:O,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:t("createNewPrompt")})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[l.jsx("div",{className:"p-4 border-b",children:l.jsx("h3",{className:"text-lg font-semibold",children:t("availablePrompts")})}),l.jsx("div",{className:"p-4 space-y-2",children:s.map(e=>l.jsx("div",{className:"p-3 border rounded-lg cursor-pointer transition-colors "+(o?.id===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),onClick:()=>c(e),children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium text-gray-900",children:e.name}),l.jsx("p",{className:"text-sm text-gray-600",children:e.description}),l.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[l.jsx("span",{className:"px-2 py-1 text-xs rounded "+("system"===e.category?"bg-red-100 text-red-800":"context"===e.category?"bg-yellow-100 text-yellow-800":"action"===e.category?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:t(e.category)}),l.jsx("span",{className:"px-2 py-1 text-xs rounded "+(e.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.isActive?t("active"):t("inactive")})]})]}),l.jsxs("div",{className:"flex space-x-1",children:[l.jsx("button",{onClick:t=>{t.stopPropagation(),$(e)},className:"p-1 text-blue-600 hover:bg-blue-100 rounded",title:t("edit"),children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),l.jsx("button",{onClick:t=>{t.stopPropagation(),(async e=>{try{const t={...e,isActive:!e.isActive};await Jb.updatePrompt(e.id,t),await F(),o&&o.id===e.id&&c(t)}catch(sy){P(sy instanceof Error?sy.message:"Failed to toggle prompt status")}})(e)},className:"p-1 rounded "+(e.isActive?"text-green-600 hover:bg-green-100":"text-gray-600 hover:bg-gray-100"),title:e.isActive?t("deactivate"):t("activate"),children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),l.jsx("button",{onClick:t=>{t.stopPropagation(),(async e=>{if(confirm("Are you sure you want to delete this prompt?"))try{await Jb.deletePrompt(e),await F()}catch(sy){P(sy instanceof Error?sy.message:"Failed to delete prompt")}})(e.id)},className:"p-1 text-red-600 hover:bg-red-100 rounded",title:t("delete"),children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},e.id))})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[l.jsx("div",{className:"p-4 border-b",children:l.jsx("h3",{className:"text-lg font-semibold",children:t(u?o?"editPrompt":"createPrompt":"promptDetails")})}),l.jsx("div",{className:"p-4",children:u?l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("promptName")}),l.jsx("input",{type:"text",value:h.name||"",onChange:e=>m({...h,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("promptDescription")}),l.jsx("input",{type:"text",value:h.description||"",onChange:e=>m({...h,description:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("promptCategory")}),l.jsxs("select",{value:h.category||"custom",onChange:e=>m({...h,category:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[l.jsx("option",{value:"system",children:t("system")}),l.jsx("option",{value:"context",children:t("context")}),l.jsx("option",{value:"action",children:t("action")}),l.jsx("option",{value:"custom",children:t("custom")})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("promptContent")}),l.jsx("textarea",{value:h.content||"",onChange:e=>m({...h,content:e.target.value}),rows:10,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:t("enterPromptContent")})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("promptVariables")}),l.jsx("input",{type:"text",value:h.variables?.join(", ")||"",onChange:e=>m({...h,variables:e.target.value.split(",").map(e=>e.trim()).filter(e=>e)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:t("variablePlaceholder")})]}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("label",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",checked:h.isActive||!1,onChange:e=>m({...h,isActive:e.target.checked}),className:"mr-2"}),t("promptActive")]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("promptPriority")}),l.jsx("input",{type:"number",value:h.priority||0,onChange:e=>m({...h,priority:parseInt(e.target.value)}),className:"w-20 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("button",{onClick:H,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:t("save")}),l.jsx("button",{onClick:()=>{d(!1),c(null),m({})},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:t("cancel")})]})]}):o?l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium text-gray-900",children:o.name}),l.jsx("p",{className:"text-sm text-gray-600",children:o.description})]}),l.jsxs("div",{children:[l.jsxs("h5",{className:"font-medium text-gray-700 mb-2",children:[t("promptContent"),":"]}),l.jsx("pre",{className:"bg-gray-100 p-3 rounded text-sm overflow-auto max-h-64",children:o.content})]}),l.jsx("div",{className:"flex space-x-2",children:l.jsx("button",{onClick:()=>$(o),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:t("edit")})})]}):l.jsx("p",{className:"text-gray-500",children:t("selectPromptToView")})})]})]})]}),"knowledge"===r&&l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t("knowledgeSources")}),l.jsxs("div",{className:"flex space-x-3",children:[l.jsx("button",{onClick:K,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:t("addExternalSource")}),l.jsx("button",{onClick:B,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:t("addKnowledgeSource")})]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[l.jsx("div",{className:"p-4 border-b",children:l.jsx("h3",{className:"text-lg font-semibold",children:t("availableSources")})}),l.jsxs("div",{className:"p-4 space-y-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"text-md font-medium text-gray-700 mb-3",children:t("internalKnowledgeSources")}),l.jsx("div",{className:"space-y-2",children:g.filter(e=>!e.sourceType||"internal"===e.sourceType).map(e=>l.jsx("div",{className:"p-3 border rounded-lg cursor-pointer transition-colors "+(f?.id===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),onClick:()=>v(e),children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium text-gray-900",children:e.name}),l.jsx("p",{className:"text-sm text-gray-600",children:e.description}),l.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[l.jsx("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded",children:e.category}),l.jsx("span",{className:"px-2 py-1 text-xs bg-purple-100 text-purple-800 rounded",children:e.language}),l.jsx("span",{className:"px-2 py-1 text-xs rounded "+(e.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.isActive?t("active"):t("inactive")})]})]}),l.jsxs("div",{className:"flex space-x-1",children:[l.jsx("button",{onClick:t=>{t.stopPropagation(),V(e)},className:"p-1 text-blue-600 hover:bg-blue-100 rounded",title:t("edit"),children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),l.jsx("button",{onClick:t=>{t.stopPropagation(),(async e=>{try{if(await F(),f&&f.id===e){const t=await Jb.getKnowledgeSource(e);t&&v(t)}}catch(sy){P(sy instanceof Error?sy.message:"Failed to refresh internal source")}})(e.id)},className:"p-1 text-green-600 hover:bg-green-100 rounded",title:"Refresh",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),l.jsx("button",{onClick:t=>{t.stopPropagation(),(async e=>{if(confirm("Are you sure you want to delete this knowledge source?"))try{await Jb.deleteKnowledgeSource(e),await F()}catch(sy){P(sy instanceof Error?sy.message:"Failed to delete knowledge source")}})(e.id)},className:"p-1 text-red-600 hover:bg-red-100 rounded",title:t("delete"),children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},e.id))})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-md font-medium text-gray-700 mb-3",children:t("externalSources")}),0===I.length?l.jsx("div",{className:"text-center py-4 text-gray-500",children:l.jsx("p",{className:"text-sm",children:t("noExternalSources")})}):l.jsx("div",{className:"space-y-2",children:I.map(e=>l.jsx("div",{className:"p-3 border rounded-lg cursor-pointer transition-colors "+(f?.id===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),onClick:()=>v(e),children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("h4",{className:"font-medium text-gray-900",children:e.name}),l.jsx("span",{className:"px-2 py-1 text-xs rounded "+("forum"===e.sourceType?"bg-blue-100 text-blue-800":"webpage"===e.sourceType?"bg-green-100 text-green-800":"api"===e.sourceType?"bg-purple-100 text-purple-800":"bg-orange-100 text-orange-800"),children:t(e.sourceType||"external")}),l.jsx("span",{className:"px-2 py-1 text-xs rounded "+("success"===e.fetchStatus?"bg-green-100 text-green-800":"failed"===e.fetchStatus?"bg-red-100 text-red-800":"pending"===e.fetchStatus?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:t(e.fetchStatus||"pending")})]}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e.description}),l.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[l.jsx("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded",children:e.category}),l.jsx("span",{className:"px-2 py-1 text-xs bg-purple-100 text-purple-800 rounded",children:e.language}),l.jsx("span",{className:"px-2 py-1 text-xs rounded "+(e.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.isActive?t("active"):t("inactive")}),e.autoFetch&&l.jsx("span",{className:"px-2 py-1 text-xs rounded bg-blue-100 text-blue-800",children:t("autoFetch")})]}),e.sourceUrl&&l.jsx("p",{className:"text-xs text-gray-500 mt-1 truncate",children:e.sourceUrl})]}),l.jsxs("div",{className:"flex space-x-1",children:[l.jsx("button",{onClick:t=>{t.stopPropagation(),(e=>{v(e),y(!0),k({name:e.name,description:e.description,content:e.content,keywords:Array.isArray(e.keywords)?e.keywords.join(", "):e.keywords||"",category:e.category,priority:e.priority,language:e.language,isActive:e.isActive})})(e)},className:"p-1 text-blue-600 hover:bg-blue-100 rounded",title:t("edit"),children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),l.jsx("button",{onClick:t=>{t.stopPropagation(),(async e=>{try{if(await Jb.fetchExternalSource(e),await F(),f&&f.id===e){const t=await Jb.getKnowledgeSource(e);t&&v(t)}}catch(sy){P(sy instanceof Error?sy.message:"Failed to fetch external source")}})(e.id)},className:"p-1 text-green-600 hover:bg-green-100 rounded",title:t("fetchNow"),children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),l.jsx("button",{onClick:t=>{t.stopPropagation(),(async e=>{if(confirm(`Are you sure you want to delete "${e.name}"? This action cannot be undone.`))try{await Jb.deleteKnowledgeSource(e.id),await F(),f&&f.id===e.id&&v(null)}catch(sy){P(sy instanceof Error?sy.message:"Failed to delete external source")}})(e)},className:"p-1 text-red-600 hover:bg-red-100 rounded",title:t("delete"),children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},e.id))})]})]})]}),D&&l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[l.jsx("div",{className:"p-4 border-b",children:l.jsx("h3",{className:"text-lg font-semibold",children:t("addExternalSource")})}),l.jsxs("div",{className:"p-6 space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("sourceName")}),l.jsx("input",{type:"text",value:R.name,onChange:e=>U({...R,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Training Management Forum"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("sourceType")}),l.jsxs("select",{value:R.sourceType,onChange:e=>U({...R,sourceType:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[l.jsx("option",{value:"webpage",children:t("webpage")}),l.jsx("option",{value:"forum",children:t("forum")}),l.jsx("option",{value:"api",children:t("api")}),l.jsx("option",{value:"external",children:t("external")})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("sourceUrl")}),l.jsx("input",{type:"url",value:R.sourceUrl,onChange:e=>U({...R,sourceUrl:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("description")}),l.jsx("textarea",{value:R.description,onChange:e=>U({...R,description:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Description of the external source..."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Manual Content (if scraping fails)"}),l.jsx("textarea",{value:R.manualContent,onChange:e=>U({...R,manualContent:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:4,placeholder:"Paste content here if automatic scraping doesn't work..."})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[l.jsx("button",{onClick:()=>M(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:t("cancel")}),l.jsx("button",{onClick:q,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:t("save")})]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[l.jsx("div",{className:"p-4 border-b",children:l.jsx("h3",{className:"text-lg font-semibold",children:b?f?"Edit Knowledge Source":"Add Knowledge Source":"Source Details"})}),l.jsx("div",{className:"p-4",children:b?l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),l.jsx("input",{type:"text",value:x.name||"",onChange:e=>k({...x,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),l.jsx("input",{type:"text",value:x.description||"",onChange:e=>k({...x,description:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),l.jsx("input",{type:"text",value:x.category||"",onChange:e=>k({...x,category:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Language"}),l.jsxs("select",{value:x.language||"both",onChange:e=>k({...x,language:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[l.jsx("option",{value:"sv",children:"Swedish"}),l.jsx("option",{value:"en",children:"English"}),l.jsx("option",{value:"both",children:"Both"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Keywords (comma-separated)"}),l.jsx("input",{type:"text",value:x.keywords||"",onChange:e=>k({...x,keywords:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"keyword1, keyword2, keyword3"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Content"}),l.jsx("textarea",{value:x.content||"",onChange:e=>k({...x,content:e.target.value}),rows:8,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter knowledge content..."})]}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("label",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",checked:x.isActive||!1,onChange:e=>k({...x,isActive:e.target.checked}),className:"mr-2"}),"Active"]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),l.jsx("input",{type:"number",value:x.priority||0,onChange:e=>k({...x,priority:parseInt(e.target.value)}),className:"w-20 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("button",{onClick:W,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Save"}),l.jsx("button",{onClick:()=>{y(!1),v(null),k({})},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"})]})]}):f?l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[l.jsx("h4",{className:"font-medium text-gray-900",children:f.name}),f.sourceType&&"internal"!==f.sourceType&&l.jsx("span",{className:"px-2 py-1 text-xs rounded "+("forum"===f.sourceType?"bg-blue-100 text-blue-800":"webpage"===f.sourceType?"bg-green-100 text-green-800":"api"===f.sourceType?"bg-purple-100 text-purple-800":"bg-orange-100 text-orange-800"),children:t(f.sourceType)})]}),l.jsx("p",{className:"text-sm text-gray-600",children:f.description})]}),f.sourceType&&"internal"!==f.sourceType&&l.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[l.jsx("h5",{className:"font-medium text-gray-700 mb-2",children:t("sourceConfiguration")}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[f.sourceUrl&&l.jsxs("div",{children:[l.jsxs("span",{className:"font-medium text-gray-700",children:[t("sourceUrl"),":"]}),l.jsx("a",{href:f.sourceUrl,target:"_blank",rel:"noopener noreferrer",className:"ml-2 text-blue-600 hover:text-blue-800 underline",children:f.sourceUrl})]}),l.jsxs("div",{children:[l.jsxs("span",{className:"font-medium text-gray-700",children:[t("fetchStatus"),":"]}),l.jsx("span",{className:"ml-2 px-2 py-1 text-xs rounded "+("success"===f.fetchStatus?"bg-green-100 text-green-800":"failed"===f.fetchStatus?"bg-red-100 text-red-800":"pending"===f.fetchStatus?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:t(f.fetchStatus||"pending")})]}),f.fetchFrequency&&l.jsxs("div",{children:[l.jsxs("span",{className:"font-medium text-gray-700",children:[t("fetchFrequency"),":"]}),l.jsx("span",{className:"ml-2",children:t(f.fetchFrequency)})]}),f.lastFetched&&l.jsxs("div",{children:[l.jsxs("span",{className:"font-medium text-gray-700",children:[t("lastFetched"),":"]}),l.jsx("span",{className:"ml-2",children:new Date(f.lastFetched).toLocaleString()})]})]}),f.fetchError&&l.jsxs("div",{className:"mt-3 p-2 bg-red-100 border border-red-200 rounded",children:[l.jsxs("span",{className:"font-medium text-red-800",children:[t("fetchError"),":"]}),l.jsx("p",{className:"text-sm text-red-700 mt-1",children:f.fetchError})]})]}),l.jsxs("div",{children:[l.jsxs("h5",{className:"font-medium text-gray-700 mb-2",children:[t("sourceContent"),":"]}),l.jsx("pre",{className:"bg-gray-100 p-3 rounded text-sm overflow-auto max-h-64",children:f.content})]}),l.jsxs("div",{children:[l.jsxs("h5",{className:"font-medium text-gray-700 mb-2",children:[t("keywords"),":"]}),l.jsx("div",{className:"flex flex-wrap gap-1",children:f.keywords.map((e,t)=>l.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:e},t))})]}),l.jsx("div",{className:"flex space-x-2",children:f.sourceType&&"internal"!==f.sourceType?l.jsx("button",{onClick:()=>setShowExternalManager(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:t("manageExternalSource")}):l.jsx("button",{onClick:()=>V(f),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:t("edit")})})]}):l.jsx("p",{className:"text-gray-500",children:t("selectSourceToView")})})]})]})]}),"training"===r&&l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t("aiTraining")}),l.jsx("button",{onClick:G,disabled:N.isTraining,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:N.isTraining?t("trainingInProgress"):t("retrainAI")})]}),l.jsx("div",{className:"bg-white rounded-lg shadow-sm border",children:l.jsxs("div",{className:"p-6",children:[l.jsx("h3",{className:"text-lg font-semibold mb-4",children:t("trainingStatus")}),N.isTraining?l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),l.jsx("span",{className:"text-sm text-gray-600",children:N.trainingMessage})]}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:l.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${N.trainingProgress}%`}})}),l.jsxs("div",{className:"text-sm text-gray-600",children:[t("progress"),": ",Math.round(N.trainingProgress),"%"]})]}):l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-3 h-3 rounded-full "+(N.errorMessage?"bg-red-500":"bg-green-500")}),l.jsx("span",{className:"text-sm text-gray-600",children:N.errorMessage?t("lastTrainingFailed"):t("aiReady")})]}),N.lastTraining&&l.jsxs("div",{className:"text-sm text-gray-600",children:[t("lastTraining"),": ",new Date(N.lastTraining).toLocaleString()]}),N.errorMessage&&l.jsxs("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded",children:[t("error"),": ",N.errorMessage]}),N.trainingMessage&&!N.errorMessage&&l.jsx("div",{className:"text-sm text-green-600 bg-green-50 p-3 rounded",children:N.trainingMessage})]})]})}),l.jsx("div",{className:"bg-white rounded-lg shadow-sm border",children:l.jsxs("div",{className:"p-6",children:[l.jsx("h3",{className:"text-lg font-semibold mb-4",children:t("knowledgeSourcesStatus")}),l.jsxs("div",{className:"mb-6",children:[l.jsx("h4",{className:"text-md font-medium text-gray-700 mb-3",children:t("internalKnowledgeSources")}),l.jsx("div",{className:"space-y-2",children:g.filter(e=>!e.sourceType||"internal"===e.sourceType).map(e=>l.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:e.name}),l.jsxs("span",{className:"text-sm text-gray-600 ml-2",children:["(",e.category,")"]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"px-2 py-1 text-xs rounded "+(e.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.isActive?t("active"):t("inactive")}),e.lastTrained&&l.jsxs("span",{className:"text-xs text-gray-500",children:[t("trained"),": ",new Date(e.lastTrained).toLocaleDateString()]})]})]},e.id))})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-md font-medium text-gray-700 mb-3",children:t("externalSources")}),0===I.length?l.jsx("div",{className:"text-center py-4 text-gray-500",children:l.jsx("p",{className:"text-sm",children:t("noExternalSources")})}):l.jsx("div",{className:"space-y-2",children:I.map(e=>l.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"font-medium",children:e.name}),l.jsx("span",{className:"px-2 py-1 text-xs rounded "+("forum"===e.sourceType?"bg-blue-100 text-blue-800":"webpage"===e.sourceType?"bg-green-100 text-green-800":"api"===e.sourceType?"bg-purple-100 text-purple-800":"bg-orange-100 text-orange-800"),children:t(e.sourceType||"external")}),l.jsx("span",{className:"px-2 py-1 text-xs rounded "+("success"===e.fetchStatus?"bg-green-100 text-green-800":"failed"===e.fetchStatus?"bg-red-100 text-red-800":"pending"===e.fetchStatus?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:t(e.fetchStatus||"pending")})]}),l.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[e.sourceUrl&&l.jsx("span",{className:"truncate block",children:e.sourceUrl}),e.lastFetched&&l.jsxs("span",{className:"text-xs text-gray-500",children:[t("lastFetched"),": ",new Date(e.lastFetched).toLocaleDateString()]})]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"px-2 py-1 text-xs rounded "+(e.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.isActive?t("active"):t("inactive")}),e.autoFetch&&l.jsx("span",{className:"px-2 py-1 text-xs rounded bg-blue-100 text-blue-800",children:t("autoFetch")}),e.lastTrained&&l.jsxs("span",{className:"text-xs text-gray-500",children:[t("trained"),": ",new Date(e.lastTrained).toLocaleDateString()]})]})]},e.id))})]})]})})]})]})]})},Zb=()=>{const{t:e}=Tv(),{user:t,isAdmin:n,signOut:r}=yv(),[a,s]=z.useState("public"),[i,o]=z.useState(!1),[c,u]=z.useState(""),[d,h]=z.useState(!1);V.useEffect(()=>{console.log("AppContent mounted, checking for interaction issues..."),console.log("User state:",{user:t,isAdmin:n});const e=window.getComputedStyle(document.body);console.log("Body styles:",{pointerEvents:e.pointerEvents,overflow:e.overflow,opacity:e.opacity,position:e.position,zIndex:e.zIndex}),document.body.style.pointerEvents="auto",document.body.style.overflow="auto",document.body.style.opacity="1",document.body.style.position="relative",document.body.style.zIndex="1",console.log("Forced body styles reset")},[]),V.useEffect(()=>{document.title=e("appTitle")},[e]),V.useEffect(()=>{console.log("User state changed:",{user:t,isAdmin:n})},[t,n]),V.useEffect(()=>{const e=()=>{o(!0)};return document.addEventListener("open-help-system",e),()=>{document.removeEventListener("open-help-system",e)}},[]),V.useEffect(()=>{const e=e=>{console.log(" Received AI action event:",e.detail);const{type:t,...n}=e.detail;switch(t){case"navigate":n.view&&(console.log(" Navigating to view:",n.view),s(n.view));break;case"add_user":console.log(" Opening add user form"),s("users"),setTimeout(()=>{const e=new CustomEvent("open-add-user-form");window.dispatchEvent(e)},100);break;case"add_training":console.log(" Opening add training form"),s("trainings"),setTimeout(()=>{const e=new CustomEvent("open-add-training-form");window.dispatchEvent(e)},100);break;case"create_tour":console.log(" Opening create tour form"),s("tour-management"),setTimeout(()=>{const e=new CustomEvent("open-create-tour-form");window.dispatchEvent(e)},100);break;case"create_shoutout":console.log(" Opening create shoutout form"),s("shoutout-management"),setTimeout(()=>{const e=new CustomEvent("open-create-shoutout-form");window.dispatchEvent(e)},100);break;default:console.log(" Unknown AI action type:",t)}},t=e=>{console.log(" Element picker navigation:",e.detail);const{view:t}=e.detail;t&&(console.log(" Element picker navigating to view:",t),s(t))};return window.addEventListener("ai-action",e),window.addEventListener("navigate-view",t),()=>{window.removeEventListener("ai-action",e),window.removeEventListener("navigate-view",t)}},[]);const{users:m,trainings:g,subscriptions:p,attendance:f,loading:v,error:b,createUser:y,updateUser:x,updateUserVoucherBalance:k,createTraining:w,updateTraining:S,deleteTraining:j,subscribe:C,unsubscribe:N,markAttendance:T,unmarkAttendance:A}=(()=>{const[e,t]=z.useState([]),[n,r]=z.useState([]),[a,s]=z.useState(new Map),[i,o]=z.useState(new Map),[l,c]=z.useState(!0),[u,d]=z.useState(null),h=z.useCallback(async()=>{try{c(!0),d(null);const[e,n,a,i]=await Promise.all([zv.getAll(),Vv.getAll(),Wv.getAll(),Kv.getAll()]);t(e),r(n),s(a),o(i)}catch(sy){console.error("Error loading data:",sy),d(sy instanceof Error?sy.message:"Failed to load data")}finally{c(!1)}},[]);z.useEffect(()=>{h()},[h]);const m=z.useCallback(async(e,n)=>{try{const r=await zv.create(e,n);return t(e=>[...e,r]),r}catch(sy){throw console.error("Error creating user:",sy),sy}},[]),g=z.useCallback(async(e,n,r)=>{try{const a=await zv.update(e,n,r);return t(t=>t.map(t=>t.id===e?a:t)),a}catch(sy){throw console.error("Error updating user:",sy),sy}},[]),p=z.useCallback(async(e,n)=>{try{await zv.updateVoucherBalance(e,n),t(t=>t.map(t=>t.id===e?{...t,voucherBalance:n}:t))}catch(sy){throw console.error("Error updating user voucher balance:",sy),sy}},[]),f=z.useCallback(async(e,t,n,a)=>{try{const i=await Vv.create(e,t,n,a);return r(e=>[...e,i]),s(e=>{const t=new Map(e);return t.set(i.id,new Set),t}),i}catch(sy){throw console.error("Error creating training:",sy),sy}},[]),v=z.useCallback(async(e,t,n,a,s)=>{try{await Vv.update(e,t,n,a,s),r(r=>r.map(r=>r.id===e?{...r,name:t,description:n,training_date:a,training_time:s}:r))}catch(sy){throw console.error("Error updating training:",sy),sy}},[]),b=z.useCallback(async e=>{try{await Vv.delete(e),r(t=>t.filter(t=>t.id!==e)),s(t=>{const n=new Map(t);return n.delete(e),n})}catch(sy){throw console.error("Error deleting training:",sy),sy}},[]),y=z.useCallback(async(e,t)=>{try{await Wv.subscribe(e,t),s(n=>{const r=new Map(n),a=r.get(e)||new Set,s=new Set(a);return s.add(t),r.set(e,s),r}),r(t=>t.map(t=>t.id===e?{...t,subscriberCount:(t.subscriberCount||0)+1}:t))}catch(sy){throw console.error("Error subscribing:",sy),sy}},[]),x=z.useCallback(async(e,t)=>{try{await Wv.unsubscribe(e,t),s(n=>{const r=new Map(n),a=r.get(e);if(a){const n=new Set(a);n.delete(t),r.set(e,n)}return r}),r(t=>t.map(t=>t.id===e?{...t,subscriberCount:Math.max(0,(t.subscriberCount||0)-1)}:t))}catch(sy){throw console.error("Error unsubscribing:",sy),sy}},[]),k=z.useCallback(async(t,n)=>{try{const r=e.find(e=>e.id===n);r&&r.voucherBalance>0&&(await p(n,r.voucherBalance-1),await Kv.markAttendance(t,n),o(e=>{const r=new Map(e),a=r.get(t)||new Set,s=new Set(a);return s.add(n),r.set(t,s),r}))}catch(sy){throw console.error("Error marking attendance:",sy),sy}},[e,p]),w=z.useCallback(async(t,n)=>{try{const r=e.find(e=>e.id===n);r&&(await p(n,r.voucherBalance+1),await Kv.unmarkAttendance(t,n),o(e=>{const r=new Map(e),a=r.get(t);if(a){const e=new Set(a);e.delete(n),r.set(t,e)}return r}))}catch(sy){throw console.error("Error unmarking attendance:",sy),sy}},[e,p]);return{users:e,trainings:n,subscriptions:a,attendance:i,loading:l,error:u,loadData:h,createUser:m,updateUser:g,updateUserVoucherBalance:p,createTraining:f,updateTraining:v,deleteTraining:b,subscribe:y,unsubscribe:x,markAttendance:k,unmarkAttendance:w}})();return v?l.jsx(qv,{}):b?l.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Error Loading Data"}),l.jsx("p",{className:"text-slate-600",children:b})]})}):l.jsxs("div",{className:"min-h-screen bg-slate-50",children:[l.jsx("header",{className:"bg-white shadow-sm border-b border-slate-200",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center h-16",children:[l.jsxs("div",{className:"flex items-center space-x-8",children:[l.jsx("h1",{className:"text-xl font-semibold text-slate-900","data-tour":"app-title",children:e("appTitle")}),l.jsxs("nav",{className:"hidden md:flex space-x-6",children:[l.jsx("button",{onClick:()=>s("public"),className:"px-3 py-2 rounded-md text-sm font-medium transition-colors "+("public"===a?"bg-blue-100 text-blue-700":"text-slate-600 hover:text-slate-900 hover:bg-slate-100"),"data-tour":"nav-home",children:e("navPublic")}),l.jsx(zb,{fallback:null,children:l.jsx("button",{onClick:()=>s("attendance"),className:"px-3 py-2 rounded-md text-sm font-medium transition-colors "+("attendance"===a?"bg-blue-100 text-blue-700":"text-slate-600 hover:text-slate-900 hover:bg-slate-100"),"data-tour":"nav-attendance",children:e("navAttendance")})}),l.jsxs(zb,{requireAdmin:!0,fallback:null,children:[l.jsx("button",{onClick:()=>s("trainings"),className:"px-3 py-2 rounded-md text-sm font-medium transition-colors "+("trainings"===a?"bg-blue-100 text-blue-700":"text-slate-600 hover:text-slate-900 hover:bg-slate-100"),"data-tour":"nav-trainings",children:e("navTrainings")}),l.jsx("button",{onClick:()=>s("users"),className:"px-3 py-2 rounded-md text-sm font-medium transition-colors "+("users"===a?"bg-blue-100 text-blue-700":"text-slate-600 hover:text-slate-900 hover:bg-slate-100"),"data-tour":"nav-users",children:e("navUsers")})]})]})]}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx(Gb,{}),l.jsx(Ob,{onClick:()=>o(!0),context:c,"data-tour":"help-button"}),t&&t.id?l.jsx(Vb,{user:t,onTourManagement:()=>s("tour-management"),onShoutoutManagement:()=>s("shoutout-management"),onAIAdministration:()=>s("ai-administration")}):l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx(Kb,{}),l.jsx("button",{onClick:()=>h(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:e("signInButton")})]})]})]})})}),l.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:["public"===a&&l.jsx(Dv,{users:m,trainings:g,subscriptions:p,onSubscribe:C,onUnsubscribe:N}),"attendance"===a&&l.jsx(Fv,{users:m,trainings:g,subscriptions:p,attendance:f,onMarkAttendance:T,onUnmarkAttendance:A,onHelpClick:()=>o(!0)}),"trainings"===a&&l.jsx($v,{trainings:g,onCreateTraining:w,onUpdateTraining:S,onDeleteTraining:j}),"users"===a&&l.jsx(Bv,{users:m,onCreateUser:y,onUpdateUser:x,onAddVoucher:async e=>{try{const t=m.find(t=>t.id===e);t&&await k(e,t.voucherBalance+1)}catch(sy){console.error("Error adding voucher:",sy)}},onRemoveVoucher:async e=>{try{const t=m.find(t=>t.id===e);t&&t.voucherBalance>0&&await k(e,t.voucherBalance-1)}catch(sy){console.error("Error removing voucher:",sy)}}}),"tour-management"===a&&n&&l.jsx(Pb,{onClose:()=>s("public")}),"shoutout-management"===a&&n&&l.jsx(Ib,{onClose:()=>s("public")}),"ai-administration"===a&&n&&l.jsx(Xb,{onClose:()=>s("public")})]}),i&&l.jsx(Fb,{isOpen:i,onClose:()=>o(!1),context:c}),d&&l.jsx(Wb,{onClose:()=>h(!1)}),l.jsx(qb,{}),l.jsx(Yb,{})]})},ey=()=>l.jsx(xv,{children:l.jsx(wv,{children:l.jsx(Ev,{children:l.jsx(Nb,{children:l.jsx(Bb,{children:l.jsx(Zb,{})})})})})});console.log("Main.tsx loaded, React version:",V.version),console.log("ReactDOM version:",Rm.version);const ty=()=>l.jsx(V.StrictMode,{children:l.jsx(wv,{children:l.jsx(xv,{children:l.jsx(Ev,{children:l.jsx(ey,{})})})})}),ny=document.getElementById("root");if(console.log("Root element found:",ny),!ny)throw new Error("Could not find root element to mount to");console.log("Creating React root...");const ry=Rm.createRoot(ny);console.log("Rendering React app..."),ry.render(l.jsx(ty,{})),console.log("React app render called");export{Jb as a};
